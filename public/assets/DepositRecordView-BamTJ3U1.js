import{u as b,r as n,j as e}from"./index-C3mMhQvi.js";import{a as I}from"./axios-upsvKRUO.js";import{A as C}from"./AppBar-C1sVSG8a.js";import{C as R}from"./CopyrightFooter-owVNFOTF.js";function L(){const a=b(),[W,c]=n.useState(window.innerWidth),[l,g]=n.useState(""),[T,m]=n.useState(""),[E,h]=n.useState(""),[N,u]=n.useState(""),[z,p]=n.useState(""),[A,x]=n.useState(""),[f,w]=n.useState([]),[y,S]=n.useState(1);n.useEffect(()=>{const t=()=>c(window.innerWidth);window.addEventListener("resize",t);const r=window.localStorage.getItem("gender_type")||"";h(r),m(window.localStorage.getItem("nickname")||"");const o=window.localStorage.getItem("token")||"";if(g(o),u(window.localStorage.getItem("chat_id")||""),p(window.localStorage.getItem("chat_token")||""),x(window.localStorage.getItem("u_id")||""),r==="FEMALE"){a("/home-woman");return}if(!r){a("/home");return}return!window.WebSocketObject&&typeof window.WebSocketConnect=="function"&&window.WebSocketConnect(o),d(o,1),()=>{window.removeEventListener("resize",t)}},[]);const d=async(t,r)=>{try{const o=await I.get(`https://api.dageiwo.com/api/user/deposit?page=${r}&limit=10&order=dsc&sort=createTime`,{headers:{Authorization:`Bearer ${t}`}});if(o.status===200&&o.data.success){const s=o.data.data.records;s.length>0&&S(i=>i+1),w(i=>[...i,...s])}}catch(o){console.error("RetrieveRecord error:",o)}},j=t=>{if(!t)return"";const r=new Date(t);let o=(r.getMonth()+1).toString(),s=r.getDate().toString();const i=r.getFullYear();return o.length<2&&(o="0"+o),s.length<2&&(s="0"+s),[i,o,s].join("/")},k=t=>t?t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"",v=()=>{d(l,y)};return e.jsxs(e.Fragment,{children:[e.jsx(C,{children:e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("button",{style:{background:"none",border:"none",color:"#fff",cursor:"pointer"},onClick:()=>a(-1),children:e.jsx("i",{className:"mdi mdi-chevron-left",style:{fontSize:"24px"}})}),e.jsx("h2",{style:{margin:"0 auto"},children:"金幣紀錄"})]})}),e.jsxs("div",{className:"transaction-record",style:{maxWidth:"800px",margin:"0 auto",padding:"1rem"},children:[f.map(t=>e.jsxs("div",{style:{padding:"10px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"4px"},children:[e.jsx("div",{style:{flex:1},children:j(t.create_time)}),e.jsx("div",{style:{flex:1},children:"加值"}),e.jsx("div",{style:{flex:1,textAlign:"right"},children:e.jsxs("h3",{style:{color:"#dd8ea4",margin:0},children:["+",k(t.coin)," 點"]})})]}),e.jsx("hr",{})]},t.id)),e.jsx("button",{style:{backgroundColor:"#dd8ea4",color:"#fff",border:"none",borderRadius:"4px",padding:"8px 16px",cursor:"pointer",marginTop:"10px"},onClick:v,children:"查看更多"})]}),e.jsx(R,{})]})}export{L as default};
