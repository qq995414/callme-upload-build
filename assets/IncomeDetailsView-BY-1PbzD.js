import{u as b,r,j as t}from"./index-DJ0IS-oA.js";import{a as y}from"./axios-upsvKRUO.js";const j=i=>{!window.WebSocketObject&&i&&(typeof window.WebSocketConnect=="function"?window.WebSocketConnect(i):console.warn("WebSocketConnect 未定義"))},z=()=>{const i=b(),[k,l]=r.useState(window.innerWidth),[a,p]=r.useState(""),[h,x]=r.useState([{id:0,create_time:"2024-11-10",coin:0}]),[S,g]=r.useState(1);r.useEffect(()=>{const e=window.sessionStorage.getItem("token")||"",n=window.sessionStorage.getItem("u_id")||"";return p(e),j(n),e&&c(e),window.addEventListener("resize",d),()=>{window.removeEventListener("resize",d)}},[]);const d=()=>{l(window.innerWidth)},w=e=>{const n=new Date(e);let s=""+(n.getMonth()+1),o=""+n.getDate();const m=n.getFullYear();return s.length<2&&(s="0"+s),o.length<2&&(o="0"+o),[m,s,o].join("/")},u=e=>e?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"",c=async(e=a)=>{try{const n=await y.get("https://api.dageiwo.com/api/user/withdrawal",{headers:{Authorization:`Bearer ${e}`}});if(n.status===200&&n.data.success){const s=n.data.data.records||[];s.length>0&&(g(o=>o+1),x(o=>[...o,...s]))}}catch(n){console.error("Failed to fetch records:",n)}},f=()=>{i(-1)};return t.jsxs("div",{style:{maxWidth:"800px",minHeight:"100%",margin:"0 auto",padding:"20px",color:"rgba(0,0,0,0.7)",fontFamily:"Arial, sans-serif"},children:[t.jsxs("header",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"#dd8ea4",padding:"10px 15px",borderRadius:"10px",color:"white",marginBottom:"20px"},children:[t.jsx("button",{onClick:f,style:{background:"none",border:"none",fontSize:"16px",color:"white",cursor:"pointer"},children:"← 返回"}),t.jsx("h2",{style:{margin:"0",fontSize:"20px"},children:"收入明細"}),t.jsx("div",{style:{width:"40px"}})]}),t.jsxs("div",{className:"transaction-record",style:{background:"white",borderRadius:"10px",padding:"15px"},children:[h.map(e=>t.jsxs("div",{style:{padding:"10px 0"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"16px",alignItems:"center"},children:[t.jsx("span",{children:w(e.create_time)}),t.jsx("span",{children:"明細"}),t.jsxs("span",{style:{color:"#dd8ea4",fontWeight:"bold"},children:["+",u(e.coin)," 點"]})]}),t.jsx("hr",{style:{border:"none",height:"1px",background:"#ddd",margin:"10px 0"}})]},e.id)),t.jsx("button",{onClick:()=>c(a),style:{display:"block",width:"100%",background:"#dd8ea4",color:"white",border:"none",padding:"10px",fontSize:"16px",borderRadius:"5px",cursor:"pointer",marginTop:"10px"},children:"查看更多"})]})]})};export{z as default};
