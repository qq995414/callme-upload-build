const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomeView-CXK_pqla.js","assets/axios-upsvKRUO.js","assets/CopyrightFooter-Rxjvix_B.js","assets/blur-sWQDB4M4.js","assets/blur-fmWkUMJW.css","assets/PrivacyView-BK01Kq9m.js","assets/ServiceView-RZ3JD2DG.js","assets/RegisterManView-DVMXp3XU.js","assets/AppBar-BAyUCjFo.js","assets/RegisterWomanView-CwoqHA4F.js","assets/LoginView-mppITIXL.js","assets/HomeManView-KrAiXCvk.js","assets/HomeWomanView-DNhZPhM4.js","assets/WomanInfoView-_0khSe_h.js","assets/WomanInfoView-CncLY5ce.css","assets/ManInfoView-jOhKiMVL.js","assets/DepositRecordView-BgQ-4HXj.js","assets/TransactionChatRecordView-DnP0CWKL.js","assets/TransactionRecordView-CXMsrnlF.js","assets/ManDepositView-CUMaDMqe.js","assets/WomanSettingView-D2D6n2xQ.js","assets/WomanEditView-BBU5_xA3.js","assets/CurrentPointsView-CsePdae-.js","assets/IncomeDetailsView-4rBwl_eI.js","assets/RedemptionRecordsView-DLcZPrgw.js","assets/IdentityVerificationView-DEfTyaU5.js","assets/AccountVerificationView-DIHs_P_M.js","assets/ChatList-K54z4bp3.js","assets/ChatList-DcUyYB0l.css"])))=>i.map(i=>d[i]);
(function(){const p=document.createElement("link").relList;if(p&&p.supports&&p.supports("modulepreload"))return;for(const R of document.querySelectorAll('link[rel="modulepreload"]'))C(R);new MutationObserver(R=>{for(const S of R)if(S.type==="childList")for(const O of S.addedNodes)O.tagName==="LINK"&&O.rel==="modulepreload"&&C(O)}).observe(document,{childList:!0,subtree:!0});function v(R){const S={};return R.integrity&&(S.integrity=R.integrity),R.referrerPolicy&&(S.referrerPolicy=R.referrerPolicy),R.crossOrigin==="use-credentials"?S.credentials="include":R.crossOrigin==="anonymous"?S.credentials="omit":S.credentials="same-origin",S}function C(R){if(R.ep)return;R.ep=!0;const S=v(R);fetch(R.href,S)}})();var Sy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dE(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}function K1(d){if(d.__esModule)return d;var p=d.default;if(typeof p=="function"){var v=function C(){return this instanceof C?Reflect.construct(p,arguments,this.constructor):p.apply(this,arguments)};v.prototype=p.prototype}else v={};return Object.defineProperty(v,"__esModule",{value:!0}),Object.keys(d).forEach(function(C){var R=Object.getOwnPropertyDescriptor(d,C);Object.defineProperty(v,C,R.get?R:{enumerable:!0,get:function(){return d[C]}})}),v}var _m={exports:{}},Yd={},mm={exports:{}},et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ty;function j0(){if(Ty)return et;Ty=1;var d=Symbol.for("react.element"),p=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),O=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),z=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),X=Symbol.iterator;function ne(B){return B===null||typeof B!="object"?null:(B=X&&B[X]||B["@@iterator"],typeof B=="function"?B:null)}var ue={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},de=Object.assign,ye={};function oe(B,ie,We){this.props=B,this.context=ie,this.refs=ye,this.updater=We||ue}oe.prototype.isReactComponent={},oe.prototype.setState=function(B,ie){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,ie,"setState")},oe.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function _e(){}_e.prototype=oe.prototype;function we(B,ie,We){this.props=B,this.context=ie,this.refs=ye,this.updater=We||ue}var Te=we.prototype=new _e;Te.constructor=we,de(Te,oe.prototype),Te.isPureReactComponent=!0;var $e=Array.isArray,Me=Object.prototype.hasOwnProperty,Et={current:null},St={key:!0,ref:!0,__self:!0,__source:!0};function pt(B,ie,We){var qe,st={},it=null,kt=null;if(ie!=null)for(qe in ie.ref!==void 0&&(kt=ie.ref),ie.key!==void 0&&(it=""+ie.key),ie)Me.call(ie,qe)&&!St.hasOwnProperty(qe)&&(st[qe]=ie[qe]);var ft=arguments.length-2;if(ft===1)st.children=We;else if(1<ft){for(var wt=Array(ft),Mn=0;Mn<ft;Mn++)wt[Mn]=arguments[Mn+2];st.children=wt}if(B&&B.defaultProps)for(qe in ft=B.defaultProps,ft)st[qe]===void 0&&(st[qe]=ft[qe]);return{$$typeof:d,type:B,key:it,ref:kt,props:st,_owner:Et.current}}function Tt(B,ie){return{$$typeof:d,type:B.type,key:ie,ref:B.ref,props:B.props,_owner:B._owner}}function Ut(B){return typeof B=="object"&&B!==null&&B.$$typeof===d}function cn(B){var ie={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(We){return ie[We]})}var lt=/\/+/g;function dn(B,ie){return typeof B=="object"&&B!==null&&B.key!=null?cn(""+B.key):ie.toString(36)}function xt(B,ie,We,qe,st){var it=typeof B;(it==="undefined"||it==="boolean")&&(B=null);var kt=!1;if(B===null)kt=!0;else switch(it){case"string":case"number":kt=!0;break;case"object":switch(B.$$typeof){case d:case p:kt=!0}}if(kt)return kt=B,st=st(kt),B=qe===""?"."+dn(kt,0):qe,$e(st)?(We="",B!=null&&(We=B.replace(lt,"$&/")+"/"),xt(st,ie,We,"",function(Mn){return Mn})):st!=null&&(Ut(st)&&(st=Tt(st,We+(!st.key||kt&&kt.key===st.key?"":(""+st.key).replace(lt,"$&/")+"/")+B)),ie.push(st)),1;if(kt=0,qe=qe===""?".":qe+":",$e(B))for(var ft=0;ft<B.length;ft++){it=B[ft];var wt=qe+dn(it,ft);kt+=xt(it,ie,We,wt,st)}else if(wt=ne(B),typeof wt=="function")for(B=wt.call(B),ft=0;!(it=B.next()).done;)it=it.value,wt=qe+dn(it,ft++),kt+=xt(it,ie,We,wt,st);else if(it==="object")throw ie=String(B),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.");return kt}function At(B,ie,We){if(B==null)return B;var qe=[],st=0;return xt(B,qe,"","",function(it){return ie.call(We,it,st++)}),qe}function ht(B){if(B._status===-1){var ie=B._result;ie=ie(),ie.then(function(We){(B._status===0||B._status===-1)&&(B._status=1,B._result=We)},function(We){(B._status===0||B._status===-1)&&(B._status=2,B._result=We)}),B._status===-1&&(B._status=0,B._result=ie)}if(B._status===1)return B._result.default;throw B._result}var _t={current:null},ve={transition:null},je={ReactCurrentDispatcher:_t,ReactCurrentBatchConfig:ve,ReactCurrentOwner:Et};function Se(){throw Error("act(...) is not supported in production builds of React.")}return et.Children={map:At,forEach:function(B,ie,We){At(B,function(){ie.apply(this,arguments)},We)},count:function(B){var ie=0;return At(B,function(){ie++}),ie},toArray:function(B){return At(B,function(ie){return ie})||[]},only:function(B){if(!Ut(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},et.Component=oe,et.Fragment=v,et.Profiler=R,et.PureComponent=we,et.StrictMode=C,et.Suspense=M,et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=je,et.act=Se,et.cloneElement=function(B,ie,We){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var qe=de({},B.props),st=B.key,it=B.ref,kt=B._owner;if(ie!=null){if(ie.ref!==void 0&&(it=ie.ref,kt=Et.current),ie.key!==void 0&&(st=""+ie.key),B.type&&B.type.defaultProps)var ft=B.type.defaultProps;for(wt in ie)Me.call(ie,wt)&&!St.hasOwnProperty(wt)&&(qe[wt]=ie[wt]===void 0&&ft!==void 0?ft[wt]:ie[wt])}var wt=arguments.length-2;if(wt===1)qe.children=We;else if(1<wt){ft=Array(wt);for(var Mn=0;Mn<wt;Mn++)ft[Mn]=arguments[Mn+2];qe.children=ft}return{$$typeof:d,type:B.type,key:st,ref:it,props:qe,_owner:kt}},et.createContext=function(B){return B={$$typeof:O,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:S,_context:B},B.Consumer=B},et.createElement=pt,et.createFactory=function(B){var ie=pt.bind(null,B);return ie.type=B,ie},et.createRef=function(){return{current:null}},et.forwardRef=function(B){return{$$typeof:L,render:B}},et.isValidElement=Ut,et.lazy=function(B){return{$$typeof:Q,_payload:{_status:-1,_result:B},_init:ht}},et.memo=function(B,ie){return{$$typeof:z,type:B,compare:ie===void 0?null:ie}},et.startTransition=function(B){var ie=ve.transition;ve.transition={};try{B()}finally{ve.transition=ie}},et.unstable_act=Se,et.useCallback=function(B,ie){return _t.current.useCallback(B,ie)},et.useContext=function(B){return _t.current.useContext(B)},et.useDebugValue=function(){},et.useDeferredValue=function(B){return _t.current.useDeferredValue(B)},et.useEffect=function(B,ie){return _t.current.useEffect(B,ie)},et.useId=function(){return _t.current.useId()},et.useImperativeHandle=function(B,ie,We){return _t.current.useImperativeHandle(B,ie,We)},et.useInsertionEffect=function(B,ie){return _t.current.useInsertionEffect(B,ie)},et.useLayoutEffect=function(B,ie){return _t.current.useLayoutEffect(B,ie)},et.useMemo=function(B,ie){return _t.current.useMemo(B,ie)},et.useReducer=function(B,ie,We){return _t.current.useReducer(B,ie,We)},et.useRef=function(B){return _t.current.useRef(B)},et.useState=function(B){return _t.current.useState(B)},et.useSyncExternalStore=function(B,ie,We){return _t.current.useSyncExternalStore(B,ie,We)},et.useTransition=function(){return _t.current.useTransition()},et.version="18.3.1",et}var Ay;function zm(){return Ay||(Ay=1,mm.exports=j0()),mm.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oy;function B0(){if(Oy)return Yd;Oy=1;var d=zm(),p=Symbol.for("react.element"),v=Symbol.for("react.fragment"),C=Object.prototype.hasOwnProperty,R=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,S={key:!0,ref:!0,__self:!0,__source:!0};function O(L,M,z){var Q,X={},ne=null,ue=null;z!==void 0&&(ne=""+z),M.key!==void 0&&(ne=""+M.key),M.ref!==void 0&&(ue=M.ref);for(Q in M)C.call(M,Q)&&!S.hasOwnProperty(Q)&&(X[Q]=M[Q]);if(L&&L.defaultProps)for(Q in M=L.defaultProps,M)X[Q]===void 0&&(X[Q]=M[Q]);return{$$typeof:p,type:L,key:ne,ref:ue,props:X,_owner:R.current}}return Yd.Fragment=v,Yd.jsx=O,Yd.jsxs=O,Yd}var by;function z0(){return by||(by=1,_m.exports=B0()),_m.exports}var ce=z0(),kp={},vm={exports:{}},dr={},gm={exports:{}},ym={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dy;function H0(){return Dy||(Dy=1,function(d){function p(ve,je){var Se=ve.length;ve.push(je);e:for(;0<Se;){var B=Se-1>>>1,ie=ve[B];if(0<R(ie,je))ve[B]=je,ve[Se]=ie,Se=B;else break e}}function v(ve){return ve.length===0?null:ve[0]}function C(ve){if(ve.length===0)return null;var je=ve[0],Se=ve.pop();if(Se!==je){ve[0]=Se;e:for(var B=0,ie=ve.length,We=ie>>>1;B<We;){var qe=2*(B+1)-1,st=ve[qe],it=qe+1,kt=ve[it];if(0>R(st,Se))it<ie&&0>R(kt,st)?(ve[B]=kt,ve[it]=Se,B=it):(ve[B]=st,ve[qe]=Se,B=qe);else if(it<ie&&0>R(kt,Se))ve[B]=kt,ve[it]=Se,B=it;else break e}}return je}function R(ve,je){var Se=ve.sortIndex-je.sortIndex;return Se!==0?Se:ve.id-je.id}if(typeof performance=="object"&&typeof performance.now=="function"){var S=performance;d.unstable_now=function(){return S.now()}}else{var O=Date,L=O.now();d.unstable_now=function(){return O.now()-L}}var M=[],z=[],Q=1,X=null,ne=3,ue=!1,de=!1,ye=!1,oe=typeof setTimeout=="function"?setTimeout:null,_e=typeof clearTimeout=="function"?clearTimeout:null,we=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Te(ve){for(var je=v(z);je!==null;){if(je.callback===null)C(z);else if(je.startTime<=ve)C(z),je.sortIndex=je.expirationTime,p(M,je);else break;je=v(z)}}function $e(ve){if(ye=!1,Te(ve),!de)if(v(M)!==null)de=!0,ht(Me);else{var je=v(z);je!==null&&_t($e,je.startTime-ve)}}function Me(ve,je){de=!1,ye&&(ye=!1,_e(pt),pt=-1),ue=!0;var Se=ne;try{for(Te(je),X=v(M);X!==null&&(!(X.expirationTime>je)||ve&&!cn());){var B=X.callback;if(typeof B=="function"){X.callback=null,ne=X.priorityLevel;var ie=B(X.expirationTime<=je);je=d.unstable_now(),typeof ie=="function"?X.callback=ie:X===v(M)&&C(M),Te(je)}else C(M);X=v(M)}if(X!==null)var We=!0;else{var qe=v(z);qe!==null&&_t($e,qe.startTime-je),We=!1}return We}finally{X=null,ne=Se,ue=!1}}var Et=!1,St=null,pt=-1,Tt=5,Ut=-1;function cn(){return!(d.unstable_now()-Ut<Tt)}function lt(){if(St!==null){var ve=d.unstable_now();Ut=ve;var je=!0;try{je=St(!0,ve)}finally{je?dn():(Et=!1,St=null)}}else Et=!1}var dn;if(typeof we=="function")dn=function(){we(lt)};else if(typeof MessageChannel<"u"){var xt=new MessageChannel,At=xt.port2;xt.port1.onmessage=lt,dn=function(){At.postMessage(null)}}else dn=function(){oe(lt,0)};function ht(ve){St=ve,Et||(Et=!0,dn())}function _t(ve,je){pt=oe(function(){ve(d.unstable_now())},je)}d.unstable_IdlePriority=5,d.unstable_ImmediatePriority=1,d.unstable_LowPriority=4,d.unstable_NormalPriority=3,d.unstable_Profiling=null,d.unstable_UserBlockingPriority=2,d.unstable_cancelCallback=function(ve){ve.callback=null},d.unstable_continueExecution=function(){de||ue||(de=!0,ht(Me))},d.unstable_forceFrameRate=function(ve){0>ve||125<ve?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Tt=0<ve?Math.floor(1e3/ve):5},d.unstable_getCurrentPriorityLevel=function(){return ne},d.unstable_getFirstCallbackNode=function(){return v(M)},d.unstable_next=function(ve){switch(ne){case 1:case 2:case 3:var je=3;break;default:je=ne}var Se=ne;ne=je;try{return ve()}finally{ne=Se}},d.unstable_pauseExecution=function(){},d.unstable_requestPaint=function(){},d.unstable_runWithPriority=function(ve,je){switch(ve){case 1:case 2:case 3:case 4:case 5:break;default:ve=3}var Se=ne;ne=ve;try{return je()}finally{ne=Se}},d.unstable_scheduleCallback=function(ve,je,Se){var B=d.unstable_now();switch(typeof Se=="object"&&Se!==null?(Se=Se.delay,Se=typeof Se=="number"&&0<Se?B+Se:B):Se=B,ve){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=Se+ie,ve={id:Q++,callback:je,priorityLevel:ve,startTime:Se,expirationTime:ie,sortIndex:-1},Se>B?(ve.sortIndex=Se,p(z,ve),v(M)===null&&ve===v(z)&&(ye?(_e(pt),pt=-1):ye=!0,_t($e,Se-B))):(ve.sortIndex=ie,p(M,ve),de||ue||(de=!0,ht(Me))),ve},d.unstable_shouldYield=cn,d.unstable_wrapCallback=function(ve){var je=ne;return function(){var Se=ne;ne=je;try{return ve.apply(this,arguments)}finally{ne=Se}}}}(ym)),ym}var Ny;function W0(){return Ny||(Ny=1,gm.exports=H0()),gm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xy;function G0(){if(xy)return dr;xy=1;var d=zm(),p=W0();function v(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var C=new Set,R={};function S(i,a){O(i,a),O(i+"Capture",a)}function O(i,a){for(R[i]=a,i=0;i<a.length;i++)C.add(a[i])}var L=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),M=Object.prototype.hasOwnProperty,z=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Q={},X={};function ne(i){return M.call(X,i)?!0:M.call(Q,i)?!1:z.test(i)?X[i]=!0:(Q[i]=!0,!1)}function ue(i,a,u,c){if(u!==null&&u.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return c?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function de(i,a,u,c){if(a===null||typeof a>"u"||ue(i,a,u,c))return!0;if(c)return!1;if(u!==null)switch(u.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function ye(i,a,u,c,m,g,I){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=c,this.attributeNamespace=m,this.mustUseProperty=u,this.propertyName=i,this.type=a,this.sanitizeURL=g,this.removeEmptyString=I}var oe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){oe[i]=new ye(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var a=i[0];oe[a]=new ye(a,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){oe[i]=new ye(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){oe[i]=new ye(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){oe[i]=new ye(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){oe[i]=new ye(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){oe[i]=new ye(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){oe[i]=new ye(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){oe[i]=new ye(i,5,!1,i.toLowerCase(),null,!1,!1)});var _e=/[\-:]([a-z])/g;function we(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var a=i.replace(_e,we);oe[a]=new ye(a,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var a=i.replace(_e,we);oe[a]=new ye(a,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var a=i.replace(_e,we);oe[a]=new ye(a,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){oe[i]=new ye(i,1,!1,i.toLowerCase(),null,!1,!1)}),oe.xlinkHref=new ye("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){oe[i]=new ye(i,1,!1,i.toLowerCase(),null,!0,!0)});function Te(i,a,u,c){var m=oe.hasOwnProperty(a)?oe[a]:null;(m!==null?m.type!==0:c||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(de(a,u,m,c)&&(u=null),c||m===null?ne(a)&&(u===null?i.removeAttribute(a):i.setAttribute(a,""+u)):m.mustUseProperty?i[m.propertyName]=u===null?m.type===3?!1:"":u:(a=m.attributeName,c=m.attributeNamespace,u===null?i.removeAttribute(a):(m=m.type,u=m===3||m===4&&u===!0?"":""+u,c?i.setAttributeNS(c,a,u):i.setAttribute(a,u))))}var $e=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Me=Symbol.for("react.element"),Et=Symbol.for("react.portal"),St=Symbol.for("react.fragment"),pt=Symbol.for("react.strict_mode"),Tt=Symbol.for("react.profiler"),Ut=Symbol.for("react.provider"),cn=Symbol.for("react.context"),lt=Symbol.for("react.forward_ref"),dn=Symbol.for("react.suspense"),xt=Symbol.for("react.suspense_list"),At=Symbol.for("react.memo"),ht=Symbol.for("react.lazy"),_t=Symbol.for("react.offscreen"),ve=Symbol.iterator;function je(i){return i===null||typeof i!="object"?null:(i=ve&&i[ve]||i["@@iterator"],typeof i=="function"?i:null)}var Se=Object.assign,B;function ie(i){if(B===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);B=a&&a[1]||""}return`
`+B+i}var We=!1;function qe(i,a){if(!i||We)return"";We=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(K){var c=K}Reflect.construct(i,[],a)}else{try{a.call()}catch(K){c=K}i.call(a.prototype)}else{try{throw Error()}catch(K){c=K}i()}}catch(K){if(K&&c&&typeof K.stack=="string"){for(var m=K.stack.split(`
`),g=c.stack.split(`
`),I=m.length-1,D=g.length-1;1<=I&&0<=D&&m[I]!==g[D];)D--;for(;1<=I&&0<=D;I--,D--)if(m[I]!==g[D]){if(I!==1||D!==1)do if(I--,D--,0>D||m[I]!==g[D]){var P=`
`+m[I].replace(" at new "," at ");return i.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",i.displayName)),P}while(1<=I&&0<=D);break}}}finally{We=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?ie(i):""}function st(i){switch(i.tag){case 5:return ie(i.type);case 16:return ie("Lazy");case 13:return ie("Suspense");case 19:return ie("SuspenseList");case 0:case 2:case 15:return i=qe(i.type,!1),i;case 11:return i=qe(i.type.render,!1),i;case 1:return i=qe(i.type,!0),i;default:return""}}function it(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case St:return"Fragment";case Et:return"Portal";case Tt:return"Profiler";case pt:return"StrictMode";case dn:return"Suspense";case xt:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case cn:return(i.displayName||"Context")+".Consumer";case Ut:return(i._context.displayName||"Context")+".Provider";case lt:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case At:return a=i.displayName||null,a!==null?a:it(i.type)||"Memo";case ht:a=i._payload,i=i._init;try{return it(i(a))}catch{}}return null}function kt(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=a.render,i=i.displayName||i.name||"",a.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return it(a);case 8:return a===pt?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function ft(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function wt(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Mn(i){var a=wt(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),c=""+i[a];if(!i.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,g=u.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return m.call(this)},set:function(I){c=""+I,g.call(this,I)}}),Object.defineProperty(i,a,{enumerable:u.enumerable}),{getValue:function(){return c},setValue:function(I){c=""+I},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function La(i){i._valueTracker||(i._valueTracker=Mn(i))}function $o(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var u=a.getValue(),c="";return i&&(c=wt(i)?i.checked?"true":"false":i.value),i=c,i!==u?(a.setValue(i),!0):!1}function Su(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function yi(i,a){var u=a.checked;return Se({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function sf(i,a){var u=a.defaultValue==null?"":a.defaultValue,c=a.checked!=null?a.checked:a.defaultChecked;u=ft(a.value!=null?a.value:u),i._wrapperState={initialChecked:c,initialValue:u,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function uf(i,a){a=a.checked,a!=null&&Te(i,"checked",a,!1)}function Zl(i,a){uf(i,a);var u=ft(a.value),c=a.type;if(u!=null)c==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(c==="submit"||c==="reset"){i.removeAttribute("value");return}a.hasOwnProperty("value")?an(i,a.type,u):a.hasOwnProperty("defaultValue")&&an(i,a.type,ft(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(i.defaultChecked=!!a.defaultChecked)}function Pa(i,a,u){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var c=a.type;if(!(c!=="submit"&&c!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+i._wrapperState.initialValue,u||a===i.value||(i.value=a),i.defaultValue=a}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function an(i,a,u){(a!=="number"||Su(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var Xt=Array.isArray;function Ei(i,a,u,c){if(i=i.options,a){a={};for(var m=0;m<u.length;m++)a["$"+u[m]]=!0;for(u=0;u<i.length;u++)m=a.hasOwnProperty("$"+i[u].value),i[u].selected!==m&&(i[u].selected=m),m&&c&&(i[u].defaultSelected=!0)}else{for(u=""+ft(u),a=null,m=0;m<i.length;m++){if(i[m].value===u){i[m].selected=!0,c&&(i[m].defaultSelected=!0);return}a!==null||i[m].disabled||(a=i[m])}a!==null&&(a.selected=!0)}}function Tu(i,a){if(a.dangerouslySetInnerHTML!=null)throw Error(v(91));return Se({},a,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Zr(i,a){var u=a.value;if(u==null){if(u=a.children,a=a.defaultValue,u!=null){if(a!=null)throw Error(v(92));if(Xt(u)){if(1<u.length)throw Error(v(93));u=u[0]}a=u}a==null&&(a=""),u=a}i._wrapperState={initialValue:ft(u)}}function lf(i,a){var u=ft(a.value),c=ft(a.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),a.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),c!=null&&(i.defaultValue=""+c)}function cf(i){var a=i.textContent;a===i._wrapperState.initialValue&&a!==""&&a!==null&&(i.value=a)}function Jr(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Jl(i,a){return i==null||i==="http://www.w3.org/1999/xhtml"?Jr(a):i==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var En,df=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,u,c,m){MSApp.execUnsafeLocalFunction(function(){return i(a,u,c,m)})}:i}(function(i,a){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=a;else{for(En=En||document.createElement("div"),En.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=En.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;a.firstChild;)i.appendChild(a.firstChild)}});function qo(i,a){if(a){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=a;return}}i.textContent=a}var ki={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ff=["Webkit","ms","Moz","O"];Object.keys(ki).forEach(function(i){ff.forEach(function(a){a=a+i.charAt(0).toUpperCase()+i.substring(1),ki[a]=ki[i]})});function Au(i,a,u){return a==null||typeof a=="boolean"||a===""?"":u||typeof a!="number"||a===0||ki.hasOwnProperty(i)&&ki[i]?(""+a).trim():a+"px"}function hf(i,a){i=i.style;for(var u in a)if(a.hasOwnProperty(u)){var c=u.indexOf("--")===0,m=Au(u,a[u],c);u==="float"&&(u="cssFloat"),c?i.setProperty(u,m):i[u]=m}}var pf=Se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ma(i,a){if(a){if(pf[i]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(v(137,i));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(v(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(v(61))}if(a.style!=null&&typeof a.style!="object")throw Error(v(62))}}function ec(i,a){if(i.indexOf("-")===-1)return typeof a.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ou=null;function bu(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var tc=null,Fa=null,Ua=null;function Va(i){if(i=ms(i)){if(typeof tc!="function")throw Error(v(280));var a=i.stateNode;a&&(a=vs(a),tc(i.stateNode,i.type,a))}}function _f(i){Fa?Ua?Ua.push(i):Ua=[i]:Fa=i}function mf(){if(Fa){var i=Fa,a=Ua;if(Ua=Fa=null,Va(i),a)for(i=0;i<a.length;i++)Va(a[i])}}function vf(i,a){return i(a)}function gf(){}var Xi=!1;function yf(i,a,u){if(Xi)return i(a,u);Xi=!0;try{return vf(i,a,u)}finally{Xi=!1,(Fa!==null||Ua!==null)&&(gf(),mf())}}function Ye(i,a){var u=i.stateNode;if(u===null)return null;var c=vs(u);if(c===null)return null;u=c[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(v(231,a,typeof u));return u}var Ar=!1;if(L)try{var Or={};Object.defineProperty(Or,"passive",{get:function(){Ar=!0}}),window.addEventListener("test",Or,Or),window.removeEventListener("test",Or,Or)}catch{Ar=!1}function ei(i,a,u,c,m,g,I,D,P){var K=Array.prototype.slice.call(arguments,3);try{a.apply(u,K)}catch(ae){this.onError(ae)}}var ti=!1,Ko=null,Du=!1,ja=null,Qo={onError:function(i){ti=!0,Ko=i}};function Mp(i,a,u,c,m,g,I,D,P){ti=!1,Ko=null,ei.apply(Qo,arguments)}function Ot(i,a,u,c,m,g,I,D,P){if(Mp.apply(this,arguments),ti){if(ti){var K=Ko;ti=!1,Ko=null}else throw Error(v(198));Du||(Du=!0,ja=K)}}function Zi(i){var a=i,u=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,a.flags&4098&&(u=a.return),i=a.return;while(i)}return a.tag===3?u:null}function Nu(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function nc(i){if(Zi(i)!==i)throw Error(v(188))}function wi(i){var a=i.alternate;if(!a){if(a=Zi(i),a===null)throw Error(v(188));return a!==i?null:i}for(var u=i,c=a;;){var m=u.return;if(m===null)break;var g=m.alternate;if(g===null){if(c=m.return,c!==null){u=c;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===u)return nc(m),i;if(g===c)return nc(m),a;g=g.sibling}throw Error(v(188))}if(u.return!==c.return)u=m,c=g;else{for(var I=!1,D=m.child;D;){if(D===u){I=!0,u=m,c=g;break}if(D===c){I=!0,c=m,u=g;break}D=D.sibling}if(!I){for(D=g.child;D;){if(D===u){I=!0,u=g,c=m;break}if(D===c){I=!0,c=g,u=m;break}D=D.sibling}if(!I)throw Error(v(189))}}if(u.alternate!==c)throw Error(v(190))}if(u.tag!==3)throw Error(v(188));return u.stateNode.current===u?i:a}function Ba(i){return i=wi(i),i!==null?Ji(i):null}function Ji(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var a=Ji(i);if(a!==null)return a;i=i.sibling}return null}var Ef=p.unstable_scheduleCallback,xu=p.unstable_cancelCallback,kf=p.unstable_shouldYield,fr=p.unstable_requestPaint,Wt=p.unstable_now,Fp=p.unstable_getCurrentPriorityLevel,rc=p.unstable_ImmediatePriority,za=p.unstable_UserBlockingPriority,Ha=p.unstable_NormalPriority,ea=p.unstable_LowPriority,ic=p.unstable_IdlePriority,Wa=null,Qn=null;function ac(i){if(Qn&&typeof Qn.onCommitFiberRoot=="function")try{Qn.onCommitFiberRoot(Wa,i,void 0,(i.current.flags&128)===128)}catch{}}var Yn=Math.clz32?Math.clz32:Lu,oc=Math.log,wf=Math.LN2;function Lu(i){return i>>>=0,i===0?32:31-(oc(i)/wf|0)|0}var Ci=64,Ga=4194304;function ta(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function ni(i,a){var u=i.pendingLanes;if(u===0)return 0;var c=0,m=i.suspendedLanes,g=i.pingedLanes,I=u&268435455;if(I!==0){var D=I&~m;D!==0?c=ta(D):(g&=I,g!==0&&(c=ta(g)))}else I=u&~m,I!==0?c=ta(I):g!==0&&(c=ta(g));if(c===0)return 0;if(a!==0&&a!==c&&!(a&m)&&(m=c&-c,g=a&-a,m>=g||m===16&&(g&4194240)!==0))return a;if(c&4&&(c|=u&16),a=i.entangledLanes,a!==0)for(i=i.entanglements,a&=c;0<a;)u=31-Yn(a),m=1<<u,c|=i[u],a&=~m;return c}function Cf(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rf(i,a){for(var u=i.suspendedLanes,c=i.pingedLanes,m=i.expirationTimes,g=i.pendingLanes;0<g;){var I=31-Yn(g),D=1<<I,P=m[I];P===-1?(!(D&u)||D&c)&&(m[I]=Cf(D,a)):P<=a&&(i.expiredLanes|=D),g&=~D}}function na(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function ra(){var i=Ci;return Ci<<=1,!(Ci&4194240)&&(Ci=64),i}function sc(i){for(var a=[],u=0;31>u;u++)a.push(i);return a}function $a(i,a,u){i.pendingLanes|=a,a!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,a=31-Yn(a),i[a]=u}function Up(i,a){var u=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var c=i.eventTimes;for(i=i.expirationTimes;0<u;){var m=31-Yn(u),g=1<<m;a[m]=0,c[m]=-1,i[m]=-1,u&=~g}}function qa(i,a){var u=i.entangledLanes|=a;for(i=i.entanglements;u;){var c=31-Yn(u),m=1<<c;m&a|i[c]&a&&(i[c]|=a),u&=~m}}var ct=0;function uc(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var Pu,lc,cc,ia,If,dc=!1,Yo=[],hr=null,br=null,pr=null,ri=new Map,Ka=new Map,_r=[],Sf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Tf(i,a){switch(i){case"focusin":case"focusout":hr=null;break;case"dragenter":case"dragleave":br=null;break;case"mouseover":case"mouseout":pr=null;break;case"pointerover":case"pointerout":ri.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ka.delete(a.pointerId)}}function aa(i,a,u,c,m,g){return i===null||i.nativeEvent!==g?(i={blockedOn:a,domEventName:u,eventSystemFlags:c,nativeEvent:g,targetContainers:[m]},a!==null&&(a=ms(a),a!==null&&lc(a)),i):(i.eventSystemFlags|=c,a=i.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),i)}function Af(i,a,u,c,m){switch(a){case"focusin":return hr=aa(hr,i,a,u,c,m),!0;case"dragenter":return br=aa(br,i,a,u,c,m),!0;case"mouseover":return pr=aa(pr,i,a,u,c,m),!0;case"pointerover":var g=m.pointerId;return ri.set(g,aa(ri.get(g)||null,i,a,u,c,m)),!0;case"gotpointercapture":return g=m.pointerId,Ka.set(g,aa(Ka.get(g)||null,i,a,u,c,m)),!0}return!1}function Of(i){var a=Ai(i.target);if(a!==null){var u=Zi(a);if(u!==null){if(a=u.tag,a===13){if(a=Nu(u),a!==null){i.blockedOn=a,If(i.priority,function(){cc(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Mu(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var u=Jo(i.domEventName,i.eventSystemFlags,a[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var c=new u.constructor(u.type,u);Ou=c,u.target.dispatchEvent(c),Ou=null}else return a=ms(u),a!==null&&lc(a),i.blockedOn=u,!1;a.shift()}return!0}function Qa(i,a,u){Mu(i)&&u.delete(a)}function Vp(){dc=!1,hr!==null&&Mu(hr)&&(hr=null),br!==null&&Mu(br)&&(br=null),pr!==null&&Mu(pr)&&(pr=null),ri.forEach(Qa),Ka.forEach(Qa)}function Dr(i,a){i.blockedOn===a&&(i.blockedOn=null,dc||(dc=!0,p.unstable_scheduleCallback(p.unstable_NormalPriority,Vp)))}function Xo(i){function a(m){return Dr(m,i)}if(0<Yo.length){Dr(Yo[0],i);for(var u=1;u<Yo.length;u++){var c=Yo[u];c.blockedOn===i&&(c.blockedOn=null)}}for(hr!==null&&Dr(hr,i),br!==null&&Dr(br,i),pr!==null&&Dr(pr,i),ri.forEach(a),Ka.forEach(a),u=0;u<_r.length;u++)c=_r[u],c.blockedOn===i&&(c.blockedOn=null);for(;0<_r.length&&(u=_r[0],u.blockedOn===null);)Of(u),u.blockedOn===null&&_r.shift()}var Ya=$e.ReactCurrentBatchConfig,Zo=!0;function bf(i,a,u,c){var m=ct,g=Ya.transition;Ya.transition=null;try{ct=1,hc(i,a,u,c)}finally{ct=m,Ya.transition=g}}function fc(i,a,u,c){var m=ct,g=Ya.transition;Ya.transition=null;try{ct=4,hc(i,a,u,c)}finally{ct=m,Ya.transition=g}}function hc(i,a,u,c){if(Zo){var m=Jo(i,a,u,c);if(m===null)el(i,a,c,Fu,u),Tf(i,c);else if(Af(m,i,a,u,c))c.stopPropagation();else if(Tf(i,c),a&4&&-1<Sf.indexOf(i)){for(;m!==null;){var g=ms(m);if(g!==null&&Pu(g),g=Jo(i,a,u,c),g===null&&el(i,a,c,Fu,u),g===m)break;m=g}m!==null&&c.stopPropagation()}else el(i,a,c,null,u)}}var Fu=null;function Jo(i,a,u,c){if(Fu=null,i=bu(c),i=Ai(i),i!==null)if(a=Zi(i),a===null)i=null;else if(u=a.tag,u===13){if(i=Nu(a),i!==null)return i;i=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null);return Fu=i,null}function Df(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Fp()){case rc:return 1;case za:return 4;case Ha:case ea:return 16;case ic:return 536870912;default:return 16}default:return 16}}var mr=null,es=null,Ri=null;function ts(){if(Ri)return Ri;var i,a=es,u=a.length,c,m="value"in mr?mr.value:mr.textContent,g=m.length;for(i=0;i<u&&a[i]===m[i];i++);var I=u-i;for(c=1;c<=I&&a[u-c]===m[g-c];c++);return Ri=m.slice(i,1<c?1-c:void 0)}function Ii(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function ns(){return!0}function pc(){return!1}function Hn(i){function a(u,c,m,g,I){this._reactName=u,this._targetInst=m,this.type=c,this.nativeEvent=g,this.target=I,this.currentTarget=null;for(var D in i)i.hasOwnProperty(D)&&(u=i[D],this[D]=u?u(g):g[D]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?ns:pc,this.isPropagationStopped=pc,this}return Se(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=ns)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=ns)},persist:function(){},isPersistent:ns}),a}var oa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rs=Hn(oa),Xa=Se({},oa,{view:0,detail:0}),Uu=Hn(Xa),Vu,ju,is,as=Se({},Xa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:os,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==is&&(is&&i.type==="mousemove"?(Vu=i.screenX-is.screenX,ju=i.screenY-is.screenY):ju=Vu=0,is=i),Vu)},movementY:function(i){return"movementY"in i?i.movementY:ju}}),_c=Hn(as),mc=Se({},as,{dataTransfer:0}),jp=Hn(mc),Bp=Se({},Xa,{relatedTarget:0}),Bu=Hn(Bp),vc=Se({},oa,{animationName:0,elapsedTime:0,pseudoElement:0}),zp=Hn(vc),Nf=Se({},oa,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Hp=Hn(Nf),Wp=Se({},oa,{data:0}),zu=Hn(Wp),Gp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Y(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=Hu[i])?!!a[i]:!1}function os(){return Y}var Lf=Se({},Xa,{key:function(i){if(i.key){var a=Gp[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Ii(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?xf[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:os,charCode:function(i){return i.type==="keypress"?Ii(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ii(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),gc=Hn(Lf),yc=Se({},as,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ec=Hn(yc),ii=Se({},Xa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:os}),Za=Hn(ii),Wu=Se({},oa,{propertyName:0,elapsedTime:0,pseudoElement:0}),Pf=Hn(Wu),Ie=Se({},as,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),b=Hn(Ie),Mf=[9,13,27,32],x=L&&"CompositionEvent"in window,Z=null;L&&"documentMode"in document&&(Z=document.documentMode);var Ff=L&&"TextEvent"in window&&!Z,Ct=L&&(!x||Z&&8<Z&&11>=Z),F=" ",Wn=!1;function Ja(i,a){switch(i){case"keyup":return Mf.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kc(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ut=!1;function wc(i,a){switch(i){case"compositionend":return kc(a);case"keypress":return a.which!==32?null:(Wn=!0,F);case"textInput":return i=a.data,i===F&&Wn?null:i;default:return null}}function Cc(i,a){if(ut)return i==="compositionend"||!x&&Ja(i,a)?(i=ts(),Ri=es=mr=null,ut=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Ct&&a.locale!=="ko"?null:a.data;default:return null}}var ee={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function U(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!ee[i.type]:a==="textarea"}function ai(i,a,u,c){_f(c),a=da(a,"onChange"),0<a.length&&(u=new rs("onChange","change",null,u,c),i.push({event:u,listeners:a}))}var Xn=null,Nr=null;function Uf(i){oo(i,0)}function ss(i){var a=fo(i);if($o(a))return i}function Gu(i,a){if(i==="change")return a}var $u=!1;if(L){var qu;if(L){var mt="oninput"in document;if(!mt){var Rc=document.createElement("div");Rc.setAttribute("oninput","return;"),mt=typeof Rc.oninput=="function"}qu=mt}else qu=!1;$u=qu&&(!document.documentMode||9<document.documentMode)}function Ic(){Xn&&(Xn.detachEvent("onpropertychange",Sc),Nr=Xn=null)}function Sc(i){if(i.propertyName==="value"&&ss(Nr)){var a=[];ai(a,Nr,i,bu(i)),yf(Uf,a)}}function $p(i,a,u){i==="focusin"?(Ic(),Xn=a,Nr=u,Xn.attachEvent("onpropertychange",Sc)):i==="focusout"&&Ic()}function qp(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return ss(Nr)}function us(i,a){if(i==="click")return ss(a)}function Vf(i,a){if(i==="input"||i==="change")return ss(a)}function jf(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var kn=typeof Object.is=="function"?Object.is:jf;function Si(i,a){if(kn(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var u=Object.keys(i),c=Object.keys(a);if(u.length!==c.length)return!1;for(c=0;c<u.length;c++){var m=u[c];if(!M.call(a,m)||!kn(i[m],a[m]))return!1}return!0}function oi(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function sa(i,a){var u=oi(i);i=0;for(var c;u;){if(u.nodeType===3){if(c=i+u.textContent.length,i<=a&&c>=a)return{node:u,offset:a-i};i=c}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=oi(u)}}function eo(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?eo(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function Tc(){for(var i=window,a=Su();a instanceof i.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)i=a.contentWindow;else break;a=Su(i.document)}return a}function Ku(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function Bf(i){var a=Tc(),u=i.focusedElem,c=i.selectionRange;if(a!==u&&u&&u.ownerDocument&&eo(u.ownerDocument.documentElement,u)){if(c!==null&&Ku(u)){if(a=c.start,i=c.end,i===void 0&&(i=a),"selectionStart"in u)u.selectionStart=a,u.selectionEnd=Math.min(i,u.value.length);else if(i=(a=u.ownerDocument||document)&&a.defaultView||window,i.getSelection){i=i.getSelection();var m=u.textContent.length,g=Math.min(c.start,m);c=c.end===void 0?g:Math.min(c.end,m),!i.extend&&g>c&&(m=c,c=g,g=m),m=sa(u,g);var I=sa(u,c);m&&I&&(i.rangeCount!==1||i.anchorNode!==m.node||i.anchorOffset!==m.offset||i.focusNode!==I.node||i.focusOffset!==I.offset)&&(a=a.createRange(),a.setStart(m.node,m.offset),i.removeAllRanges(),g>c?(i.addRange(a),i.extend(I.node,I.offset)):(a.setEnd(I.node,I.offset),i.addRange(a)))}}for(a=[],i=u;i=i.parentNode;)i.nodeType===1&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<a.length;u++)i=a[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var to=L&&"documentMode"in document&&11>=document.documentMode,no=null,ua=null,ro=null,Qu=!1;function Ac(i,a,u){var c=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Qu||no==null||no!==Su(c)||(c=no,"selectionStart"in c&&Ku(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ro&&Si(ro,c)||(ro=c,c=da(ua,"onSelect"),0<c.length&&(a=new rs("onSelect","select",null,a,u),i.push({event:a,listeners:c}),a.target=no)))}function Yu(i,a){var u={};return u[i.toLowerCase()]=a.toLowerCase(),u["Webkit"+i]="webkit"+a,u["Moz"+i]="moz"+a,u}var io={animationend:Yu("Animation","AnimationEnd"),animationiteration:Yu("Animation","AnimationIteration"),animationstart:Yu("Animation","AnimationStart"),transitionend:Yu("Transition","TransitionEnd")},Oc={},zf={};L&&(zf=document.createElement("div").style,"AnimationEvent"in window||(delete io.animationend.animation,delete io.animationiteration.animation,delete io.animationstart.animation),"TransitionEvent"in window||delete io.transitionend.transition);function Xu(i){if(Oc[i])return Oc[i];if(!io[i])return i;var a=io[i],u;for(u in a)if(a.hasOwnProperty(u)&&u in zf)return Oc[i]=a[u];return i}var Hf=Xu("animationend"),bc=Xu("animationiteration"),Zu=Xu("animationstart"),Dc=Xu("transitionend"),Nc=new Map,Wf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ti(i,a){Nc.set(i,a),S(a,[i])}for(var tn=0;tn<Wf.length;tn++){var ao=Wf[tn],Kp=ao.toLowerCase(),Gf=ao[0].toUpperCase()+ao.slice(1);Ti(Kp,"on"+Gf)}Ti(Hf,"onAnimationEnd"),Ti(bc,"onAnimationIteration"),Ti(Zu,"onAnimationStart"),Ti("dblclick","onDoubleClick"),Ti("focusin","onFocus"),Ti("focusout","onBlur"),Ti(Dc,"onTransitionEnd"),O("onMouseEnter",["mouseout","mouseover"]),O("onMouseLeave",["mouseout","mouseover"]),O("onPointerEnter",["pointerout","pointerover"]),O("onPointerLeave",["pointerout","pointerover"]),S("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),S("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),S("onBeforeInput",["compositionend","keypress","textInput","paste"]),S("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),S("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),S("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ls="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qp=new Set("cancel close invalid load scroll toggle".split(" ").concat(ls));function $f(i,a,u){var c=i.type||"unknown-event";i.currentTarget=u,Ot(c,a,void 0,i),i.currentTarget=null}function oo(i,a){a=(a&4)!==0;for(var u=0;u<i.length;u++){var c=i[u],m=c.event;c=c.listeners;e:{var g=void 0;if(a)for(var I=c.length-1;0<=I;I--){var D=c[I],P=D.instance,K=D.currentTarget;if(D=D.listener,P!==g&&m.isPropagationStopped())break e;$f(m,D,K),g=P}else for(I=0;I<c.length;I++){if(D=c[I],P=D.instance,K=D.currentTarget,D=D.listener,P!==g&&m.isPropagationStopped())break e;$f(m,D,K),g=P}}}if(Du)throw i=ja,Du=!1,ja=null,i}function bt(i,a){var u=a[_s];u===void 0&&(u=a[_s]=new Set);var c=i+"__bubble";u.has(c)||(la(a,i,2,!1),u.add(c))}function xc(i,a,u){var c=0;a&&(c|=4),la(u,i,c,a)}var Ju="_reactListening"+Math.random().toString(36).slice(2);function cs(i){if(!i[Ju]){i[Ju]=!0,C.forEach(function(u){u!=="selectionchange"&&(Qp.has(u)||xc(u,!1,i),xc(u,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Ju]||(a[Ju]=!0,xc("selectionchange",!1,a))}}function la(i,a,u,c){switch(Df(a)){case 1:var m=bf;break;case 4:m=fc;break;default:m=hc}u=m.bind(null,a,u,i),m=void 0,!Ar||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),c?m!==void 0?i.addEventListener(a,u,{capture:!0,passive:m}):i.addEventListener(a,u,!0):m!==void 0?i.addEventListener(a,u,{passive:m}):i.addEventListener(a,u,!1)}function el(i,a,u,c,m){var g=c;if(!(a&1)&&!(a&2)&&c!==null)e:for(;;){if(c===null)return;var I=c.tag;if(I===3||I===4){var D=c.stateNode.containerInfo;if(D===m||D.nodeType===8&&D.parentNode===m)break;if(I===4)for(I=c.return;I!==null;){var P=I.tag;if((P===3||P===4)&&(P=I.stateNode.containerInfo,P===m||P.nodeType===8&&P.parentNode===m))return;I=I.return}for(;D!==null;){if(I=Ai(D),I===null)return;if(P=I.tag,P===5||P===6){c=g=I;continue e}D=D.parentNode}}c=c.return}yf(function(){var K=g,ae=bu(u),le=[];e:{var te=Nc.get(i);if(te!==void 0){var Ce=rs,Oe=i;switch(i){case"keypress":if(Ii(u)===0)break e;case"keydown":case"keyup":Ce=gc;break;case"focusin":Oe="focus",Ce=Bu;break;case"focusout":Oe="blur",Ce=Bu;break;case"beforeblur":case"afterblur":Ce=Bu;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ce=_c;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ce=jp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ce=Za;break;case Hf:case bc:case Zu:Ce=zp;break;case Dc:Ce=Pf;break;case"scroll":Ce=Uu;break;case"wheel":Ce=b;break;case"copy":case"cut":case"paste":Ce=Hp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ce=Ec}var Ee=(a&4)!==0,qt=!Ee&&i==="scroll",W=Ee?te!==null?te+"Capture":null:te;Ee=[];for(var V=K,G;V!==null;){G=V;var he=G.stateNode;if(G.tag===5&&he!==null&&(G=he,W!==null&&(he=Ye(V,W),he!=null&&Ee.push(ca(V,he,G)))),qt)break;V=V.return}0<Ee.length&&(te=new Ce(te,Oe,null,u,ae),le.push({event:te,listeners:Ee}))}}if(!(a&7)){e:{if(te=i==="mouseover"||i==="pointerover",Ce=i==="mouseout"||i==="pointerout",te&&u!==Ou&&(Oe=u.relatedTarget||u.fromElement)&&(Ai(Oe)||Oe[vr]))break e;if((Ce||te)&&(te=ae.window===ae?ae:(te=ae.ownerDocument)?te.defaultView||te.parentWindow:window,Ce?(Oe=u.relatedTarget||u.toElement,Ce=K,Oe=Oe?Ai(Oe):null,Oe!==null&&(qt=Zi(Oe),Oe!==qt||Oe.tag!==5&&Oe.tag!==6)&&(Oe=null)):(Ce=null,Oe=K),Ce!==Oe)){if(Ee=_c,he="onMouseLeave",W="onMouseEnter",V="mouse",(i==="pointerout"||i==="pointerover")&&(Ee=Ec,he="onPointerLeave",W="onPointerEnter",V="pointer"),qt=Ce==null?te:fo(Ce),G=Oe==null?te:fo(Oe),te=new Ee(he,V+"leave",Ce,u,ae),te.target=qt,te.relatedTarget=G,he=null,Ai(ae)===K&&(Ee=new Ee(W,V+"enter",Oe,u,ae),Ee.target=G,Ee.relatedTarget=qt,he=Ee),qt=he,Ce&&Oe)t:{for(Ee=Ce,W=Oe,V=0,G=Ee;G;G=so(G))V++;for(G=0,he=W;he;he=so(he))G++;for(;0<V-G;)Ee=so(Ee),V--;for(;0<G-V;)W=so(W),G--;for(;V--;){if(Ee===W||W!==null&&Ee===W.alternate)break t;Ee=so(Ee),W=so(W)}Ee=null}else Ee=null;Ce!==null&&Lc(le,te,Ce,Ee,!1),Oe!==null&&qt!==null&&Lc(le,qt,Oe,Ee,!0)}}e:{if(te=K?fo(K):window,Ce=te.nodeName&&te.nodeName.toLowerCase(),Ce==="select"||Ce==="input"&&te.type==="file")var be=Gu;else if(U(te))if($u)be=Vf;else{be=qp;var xe=$p}else(Ce=te.nodeName)&&Ce.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(be=us);if(be&&(be=be(i,K))){ai(le,be,u,ae);break e}xe&&xe(i,te,K),i==="focusout"&&(xe=te._wrapperState)&&xe.controlled&&te.type==="number"&&an(te,"number",te.value)}switch(xe=K?fo(K):window,i){case"focusin":(U(xe)||xe.contentEditable==="true")&&(no=xe,ua=K,ro=null);break;case"focusout":ro=ua=no=null;break;case"mousedown":Qu=!0;break;case"contextmenu":case"mouseup":case"dragend":Qu=!1,Ac(le,u,ae);break;case"selectionchange":if(to)break;case"keydown":case"keyup":Ac(le,u,ae)}var ke;if(x)e:{switch(i){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else ut?Ja(i,u)&&(Fe="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(Fe="onCompositionStart");Fe&&(Ct&&u.locale!=="ko"&&(ut||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&ut&&(ke=ts()):(mr=ae,es="value"in mr?mr.value:mr.textContent,ut=!0)),xe=da(K,Fe),0<xe.length&&(Fe=new zu(Fe,i,null,u,ae),le.push({event:Fe,listeners:xe}),ke?Fe.data=ke:(ke=kc(u),ke!==null&&(Fe.data=ke)))),(ke=Ff?wc(i,u):Cc(i,u))&&(K=da(K,"onBeforeInput"),0<K.length&&(ae=new zu("onBeforeInput","beforeinput",null,u,ae),le.push({event:ae,listeners:K}),ae.data=ke))}oo(le,a)})}function ca(i,a,u){return{instance:i,listener:a,currentTarget:u}}function da(i,a){for(var u=a+"Capture",c=[];i!==null;){var m=i,g=m.stateNode;m.tag===5&&g!==null&&(m=g,g=Ye(i,u),g!=null&&c.unshift(ca(i,g,m)),g=Ye(i,a),g!=null&&c.push(ca(i,g,m))),i=i.return}return c}function so(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Lc(i,a,u,c,m){for(var g=a._reactName,I=[];u!==null&&u!==c;){var D=u,P=D.alternate,K=D.stateNode;if(P!==null&&P===c)break;D.tag===5&&K!==null&&(D=K,m?(P=Ye(u,g),P!=null&&I.unshift(ca(u,P,D))):m||(P=Ye(u,g),P!=null&&I.push(ca(u,P,D)))),u=u.return}I.length!==0&&i.push({event:a,listeners:I})}var qf=/\r\n?/g,xr=/\u0000|\uFFFD/g;function ds(i){return(typeof i=="string"?i:""+i).replace(qf,`
`).replace(xr,"")}function uo(i,a,u){if(a=ds(a),ds(i)!==a&&u)throw Error(v(425))}function lo(){}var Pc=null,tl=null;function fs(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var hs=typeof setTimeout=="function"?setTimeout:void 0,ps=typeof clearTimeout=="function"?clearTimeout:void 0,Mc=typeof Promise=="function"?Promise:void 0,Fc=typeof queueMicrotask=="function"?queueMicrotask:typeof Mc<"u"?function(i){return Mc.resolve(null).then(i).catch(Uc)}:hs;function Uc(i){setTimeout(function(){throw i})}function nl(i,a){var u=a,c=0;do{var m=u.nextSibling;if(i.removeChild(u),m&&m.nodeType===8)if(u=m.data,u==="/$"){if(c===0){i.removeChild(m),Xo(a);return}c--}else u!=="$"&&u!=="$?"&&u!=="$!"||c++;u=m}while(u);Xo(a)}function si(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return i}function co(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return i;a--}else u==="/$"&&a++}i=i.previousSibling}return null}var Zn=Math.random().toString(36).slice(2),Fn="__reactFiber$"+Zn,ui="__reactProps$"+Zn,vr="__reactContainer$"+Zn,_s="__reactEvents$"+Zn,Vc="__reactListeners$"+Zn,Kf="__reactHandles$"+Zn;function Ai(i){var a=i[Fn];if(a)return a;for(var u=i.parentNode;u;){if(a=u[vr]||u[Fn]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(i=co(i);i!==null;){if(u=i[Fn])return u;i=co(i)}return a}i=u,u=i.parentNode}return null}function ms(i){return i=i[Fn]||i[vr],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function fo(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(v(33))}function vs(i){return i[ui]||null}var rl=[],fa=-1;function Lr(i){return{current:i}}function Rt(i){0>fa||(i.current=rl[fa],rl[fa]=null,fa--)}function vt(i,a){fa++,rl[fa]=i.current,i.current=a}var Pr={},fn=Lr(Pr),On=Lr(!1),Oi=Pr;function ha(i,a){var u=i.type.contextTypes;if(!u)return Pr;var c=i.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===a)return c.__reactInternalMemoizedMaskedChildContext;var m={},g;for(g in u)m[g]=a[g];return c&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=m),m}function Un(i){return i=i.childContextTypes,i!=null}function ho(){Rt(On),Rt(fn)}function jc(i,a,u){if(fn.current!==Pr)throw Error(v(168));vt(fn,a),vt(On,u)}function il(i,a,u){var c=i.stateNode;if(a=a.childContextTypes,typeof c.getChildContext!="function")return u;c=c.getChildContext();for(var m in c)if(!(m in a))throw Error(v(108,kt(i)||"Unknown",m));return Se({},u,c)}function gs(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Pr,Oi=fn.current,vt(fn,i),vt(On,On.current),!0}function Qf(i,a,u){var c=i.stateNode;if(!c)throw Error(v(169));u?(i=il(i,a,Oi),c.__reactInternalMemoizedMergedChildContext=i,Rt(On),Rt(fn),vt(fn,i)):Rt(On),vt(On,u)}var on=null,ys=!1,Bc=!1;function Yf(i){on===null?on=[i]:on.push(i)}function Vn(i){ys=!0,Yf(i)}function li(){if(!Bc&&on!==null){Bc=!0;var i=0,a=ct;try{var u=on;for(ct=1;i<u.length;i++){var c=u[i];do c=c(!0);while(c!==null)}on=null,ys=!1}catch(m){throw on!==null&&(on=on.slice(i+1)),Ef(rc,li),m}finally{ct=a,Bc=!1}}return null}var bi=[],Di=0,Es=null,ci=0,Jn=[],er=0,Ni=null,Mr=1,Gn="";function pa(i,a){bi[Di++]=ci,bi[Di++]=Es,Es=i,ci=a}function zc(i,a,u){Jn[er++]=Mr,Jn[er++]=Gn,Jn[er++]=Ni,Ni=i;var c=Mr;i=Gn;var m=32-Yn(c)-1;c&=~(1<<m),u+=1;var g=32-Yn(a)+m;if(30<g){var I=m-m%5;g=(c&(1<<I)-1).toString(32),c>>=I,m-=I,Mr=1<<32-Yn(a)+m|u<<m|c,Gn=g+i}else Mr=1<<g|u<<m|c,Gn=i}function ks(i){i.return!==null&&(pa(i,1),zc(i,1,0))}function al(i){for(;i===Es;)Es=bi[--Di],bi[Di]=null,ci=bi[--Di],bi[Di]=null;for(;i===Ni;)Ni=Jn[--er],Jn[er]=null,Gn=Jn[--er],Jn[er]=null,Mr=Jn[--er],Jn[er]=null}var $n=null,jn=null,Lt=!1,wn=null;function _a(i,a){var u=ur(5,null,null,0);u.elementType="DELETED",u.stateNode=a,u.return=i,a=i.deletions,a===null?(i.deletions=[u],i.flags|=16):a.push(u)}function ol(i,a){switch(i.tag){case 5:var u=i.type;return a=a.nodeType!==1||u.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(i.stateNode=a,$n=i,jn=si(a.firstChild),!0):!1;case 6:return a=i.pendingProps===""||a.nodeType!==3?null:a,a!==null?(i.stateNode=a,$n=i,jn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(u=Ni!==null?{id:Mr,overflow:Gn}:null,i.memoizedState={dehydrated:a,treeContext:u,retryLane:1073741824},u=ur(18,null,null,0),u.stateNode=a,u.return=i,i.child=u,$n=i,jn=null,!0):!1;default:return!1}}function sl(i){return(i.mode&1)!==0&&(i.flags&128)===0}function ws(i){if(Lt){var a=jn;if(a){var u=a;if(!ol(i,a)){if(sl(i))throw Error(v(418));a=si(u.nextSibling);var c=$n;a&&ol(i,a)?_a(c,u):(i.flags=i.flags&-4097|2,Lt=!1,$n=i)}}else{if(sl(i))throw Error(v(418));i.flags=i.flags&-4097|2,Lt=!1,$n=i}}}function ul(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;$n=i}function Cs(i){if(i!==$n)return!1;if(!Lt)return ul(i),Lt=!0,!1;var a;if((a=i.tag!==3)&&!(a=i.tag!==5)&&(a=i.type,a=a!=="head"&&a!=="body"&&!fs(i.type,i.memoizedProps)),a&&(a=jn)){if(sl(i))throw Rs(),Error(v(418));for(;a;)_a(i,a),a=si(a.nextSibling)}if(ul(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(v(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(a===0){jn=si(i.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++}i=i.nextSibling}jn=null}}else jn=$n?si(i.stateNode.nextSibling):null;return!0}function Rs(){for(var i=jn;i;)i=si(i.nextSibling)}function po(){jn=$n=null,Lt=!1}function ll(i){wn===null?wn=[i]:wn.push(i)}var Hc=$e.ReactCurrentBatchConfig;function _o(i,a,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(v(309));var c=u.stateNode}if(!c)throw Error(v(147,i));var m=c,g=""+i;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===g?a.ref:(a=function(I){var D=m.refs;I===null?delete D[g]:D[g]=I},a._stringRef=g,a)}if(typeof i!="string")throw Error(v(284));if(!u._owner)throw Error(v(290,i))}return i}function mo(i,a){throw i=Object.prototype.toString.call(a),Error(v(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function vo(i){var a=i._init;return a(i._payload)}function Xf(i){function a(W,V){if(i){var G=W.deletions;G===null?(W.deletions=[V],W.flags|=16):G.push(V)}}function u(W,V){if(!i)return null;for(;V!==null;)a(W,V),V=V.sibling;return null}function c(W,V){for(W=new Map;V!==null;)V.key!==null?W.set(V.key,V):W.set(V.index,V),V=V.sibling;return W}function m(W,V){return W=ji(W,V),W.index=0,W.sibling=null,W}function g(W,V,G){return W.index=G,i?(G=W.alternate,G!==null?(G=G.index,G<V?(W.flags|=2,V):G):(W.flags|=2,V)):(W.flags|=1048576,V)}function I(W){return i&&W.alternate===null&&(W.flags|=2),W}function D(W,V,G,he){return V===null||V.tag!==6?(V=mn(G,W.mode,he),V.return=W,V):(V=m(V,G),V.return=W,V)}function P(W,V,G,he){var be=G.type;return be===St?ae(W,V,G.props.children,he,G.key):V!==null&&(V.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===ht&&vo(be)===V.type)?(he=m(V,G.props),he.ref=_o(W,V,G),he.return=W,he):(he=Sl(G.type,G.key,G.props,null,W.mode,he),he.ref=_o(W,V,G),he.return=W,he)}function K(W,V,G,he){return V===null||V.tag!==4||V.stateNode.containerInfo!==G.containerInfo||V.stateNode.implementation!==G.implementation?(V=Ys(G,W.mode,he),V.return=W,V):(V=m(V,G.children||[]),V.return=W,V)}function ae(W,V,G,he,be){return V===null||V.tag!==7?(V=Ca(G,W.mode,he,be),V.return=W,V):(V=m(V,G),V.return=W,V)}function le(W,V,G){if(typeof V=="string"&&V!==""||typeof V=="number")return V=mn(""+V,W.mode,G),V.return=W,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Me:return G=Sl(V.type,V.key,V.props,null,W.mode,G),G.ref=_o(W,null,V),G.return=W,G;case Et:return V=Ys(V,W.mode,G),V.return=W,V;case ht:var he=V._init;return le(W,he(V._payload),G)}if(Xt(V)||je(V))return V=Ca(V,W.mode,G,null),V.return=W,V;mo(W,V)}return null}function te(W,V,G,he){var be=V!==null?V.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return be!==null?null:D(W,V,""+G,he);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case Me:return G.key===be?P(W,V,G,he):null;case Et:return G.key===be?K(W,V,G,he):null;case ht:return be=G._init,te(W,V,be(G._payload),he)}if(Xt(G)||je(G))return be!==null?null:ae(W,V,G,he,null);mo(W,G)}return null}function Ce(W,V,G,he,be){if(typeof he=="string"&&he!==""||typeof he=="number")return W=W.get(G)||null,D(V,W,""+he,be);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case Me:return W=W.get(he.key===null?G:he.key)||null,P(V,W,he,be);case Et:return W=W.get(he.key===null?G:he.key)||null,K(V,W,he,be);case ht:var xe=he._init;return Ce(W,V,G,xe(he._payload),be)}if(Xt(he)||je(he))return W=W.get(G)||null,ae(V,W,he,be,null);mo(V,he)}return null}function Oe(W,V,G,he){for(var be=null,xe=null,ke=V,Fe=V=0,rn=null;ke!==null&&Fe<G.length;Fe++){ke.index>Fe?(rn=ke,ke=null):rn=ke.sibling;var Ze=te(W,ke,G[Fe],he);if(Ze===null){ke===null&&(ke=rn);break}i&&ke&&Ze.alternate===null&&a(W,ke),V=g(Ze,V,Fe),xe===null?be=Ze:xe.sibling=Ze,xe=Ze,ke=rn}if(Fe===G.length)return u(W,ke),Lt&&pa(W,Fe),be;if(ke===null){for(;Fe<G.length;Fe++)ke=le(W,G[Fe],he),ke!==null&&(V=g(ke,V,Fe),xe===null?be=ke:xe.sibling=ke,xe=ke);return Lt&&pa(W,Fe),be}for(ke=c(W,ke);Fe<G.length;Fe++)rn=Ce(ke,W,Fe,G[Fe],he),rn!==null&&(i&&rn.alternate!==null&&ke.delete(rn.key===null?Fe:rn.key),V=g(rn,V,Fe),xe===null?be=rn:xe.sibling=rn,xe=rn);return i&&ke.forEach(function(Hr){return a(W,Hr)}),Lt&&pa(W,Fe),be}function Ee(W,V,G,he){var be=je(G);if(typeof be!="function")throw Error(v(150));if(G=be.call(G),G==null)throw Error(v(151));for(var xe=be=null,ke=V,Fe=V=0,rn=null,Ze=G.next();ke!==null&&!Ze.done;Fe++,Ze=G.next()){ke.index>Fe?(rn=ke,ke=null):rn=ke.sibling;var Hr=te(W,ke,Ze.value,he);if(Hr===null){ke===null&&(ke=rn);break}i&&ke&&Hr.alternate===null&&a(W,ke),V=g(Hr,V,Fe),xe===null?be=Hr:xe.sibling=Hr,xe=Hr,ke=rn}if(Ze.done)return u(W,ke),Lt&&pa(W,Fe),be;if(ke===null){for(;!Ze.done;Fe++,Ze=G.next())Ze=le(W,Ze.value,he),Ze!==null&&(V=g(Ze,V,Fe),xe===null?be=Ze:xe.sibling=Ze,xe=Ze);return Lt&&pa(W,Fe),be}for(ke=c(W,ke);!Ze.done;Fe++,Ze=G.next())Ze=Ce(ke,W,Fe,Ze.value,he),Ze!==null&&(i&&Ze.alternate!==null&&ke.delete(Ze.key===null?Fe:Ze.key),V=g(Ze,V,Fe),xe===null?be=Ze:xe.sibling=Ze,xe=Ze);return i&&ke.forEach(function(Xh){return a(W,Xh)}),Lt&&pa(W,Fe),be}function qt(W,V,G,he){if(typeof G=="object"&&G!==null&&G.type===St&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case Me:e:{for(var be=G.key,xe=V;xe!==null;){if(xe.key===be){if(be=G.type,be===St){if(xe.tag===7){u(W,xe.sibling),V=m(xe,G.props.children),V.return=W,W=V;break e}}else if(xe.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===ht&&vo(be)===xe.type){u(W,xe.sibling),V=m(xe,G.props),V.ref=_o(W,xe,G),V.return=W,W=V;break e}u(W,xe);break}else a(W,xe);xe=xe.sibling}G.type===St?(V=Ca(G.props.children,W.mode,he,G.key),V.return=W,W=V):(he=Sl(G.type,G.key,G.props,null,W.mode,he),he.ref=_o(W,V,G),he.return=W,W=he)}return I(W);case Et:e:{for(xe=G.key;V!==null;){if(V.key===xe)if(V.tag===4&&V.stateNode.containerInfo===G.containerInfo&&V.stateNode.implementation===G.implementation){u(W,V.sibling),V=m(V,G.children||[]),V.return=W,W=V;break e}else{u(W,V);break}else a(W,V);V=V.sibling}V=Ys(G,W.mode,he),V.return=W,W=V}return I(W);case ht:return xe=G._init,qt(W,V,xe(G._payload),he)}if(Xt(G))return Oe(W,V,G,he);if(je(G))return Ee(W,V,G,he);mo(W,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,V!==null&&V.tag===6?(u(W,V.sibling),V=m(V,G),V.return=W,W=V):(u(W,V),V=mn(G,W.mode,he),V.return=W,W=V),I(W)):u(W,V)}return qt}var go=Xf(!0),Wc=Xf(!1),Is=Lr(null),Ss=null,yo=null,Ts=null;function Gc(){Ts=yo=Ss=null}function As(i){var a=Is.current;Rt(Is),i._currentValue=a}function ma(i,a,u){for(;i!==null;){var c=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,c!==null&&(c.childLanes|=a)):c!==null&&(c.childLanes&a)!==a&&(c.childLanes|=a),i===u)break;i=i.return}}function Eo(i,a){Ss=i,Ts=yo=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&a&&(gt=!0),i.firstContext=null)}function tr(i){var a=i._currentValue;if(Ts!==i)if(i={context:i,memoizedValue:a,next:null},yo===null){if(Ss===null)throw Error(v(308));yo=i,Ss.dependencies={lanes:0,firstContext:i}}else yo=yo.next=i;return a}var va=null;function $c(i){va===null?va=[i]:va.push(i)}function Zf(i,a,u,c){var m=a.interleaved;return m===null?(u.next=u,$c(a)):(u.next=m.next,m.next=u),a.interleaved=u,nr(i,c)}function nr(i,a){i.lanes|=a;var u=i.alternate;for(u!==null&&(u.lanes|=a),u=i,i=i.return;i!==null;)i.childLanes|=a,u=i.alternate,u!==null&&(u.childLanes|=a),u=i,i=i.return;return u.tag===3?u.stateNode:null}var ze=!1;function bn(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gr(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function qn(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function Fr(i,a,u){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,at&2){var m=c.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),c.pending=a,nr(i,u)}return m=c.interleaved,m===null?(a.next=a,$c(c)):(a.next=m.next,m.next=a),c.interleaved=a,nr(i,u)}function ko(i,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194240)!==0)){var c=a.lanes;c&=i.pendingLanes,u|=c,a.lanes=u,qa(i,u)}}function Os(i,a){var u=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,u===c)){var m=null,g=null;if(u=u.firstBaseUpdate,u!==null){do{var I={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};g===null?m=g=I:g=g.next=I,u=u.next}while(u!==null);g===null?m=g=a:g=g.next=a}else m=g=a;u={baseState:c.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:c.shared,effects:c.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=a:i.next=a,u.lastBaseUpdate=a}function wo(i,a,u,c){var m=i.updateQueue;ze=!1;var g=m.firstBaseUpdate,I=m.lastBaseUpdate,D=m.shared.pending;if(D!==null){m.shared.pending=null;var P=D,K=P.next;P.next=null,I===null?g=K:I.next=K,I=P;var ae=i.alternate;ae!==null&&(ae=ae.updateQueue,D=ae.lastBaseUpdate,D!==I&&(D===null?ae.firstBaseUpdate=K:D.next=K,ae.lastBaseUpdate=P))}if(g!==null){var le=m.baseState;I=0,ae=K=P=null,D=g;do{var te=D.lane,Ce=D.eventTime;if((c&te)===te){ae!==null&&(ae=ae.next={eventTime:Ce,lane:0,tag:D.tag,payload:D.payload,callback:D.callback,next:null});e:{var Oe=i,Ee=D;switch(te=a,Ce=u,Ee.tag){case 1:if(Oe=Ee.payload,typeof Oe=="function"){le=Oe.call(Ce,le,te);break e}le=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=Ee.payload,te=typeof Oe=="function"?Oe.call(Ce,le,te):Oe,te==null)break e;le=Se({},le,te);break e;case 2:ze=!0}}D.callback!==null&&D.lane!==0&&(i.flags|=64,te=m.effects,te===null?m.effects=[D]:te.push(D))}else Ce={eventTime:Ce,lane:te,tag:D.tag,payload:D.payload,callback:D.callback,next:null},ae===null?(K=ae=Ce,P=le):ae=ae.next=Ce,I|=te;if(D=D.next,D===null){if(D=m.shared.pending,D===null)break;te=D,D=te.next,te.next=null,m.lastBaseUpdate=te,m.shared.pending=null}}while(!0);if(ae===null&&(P=le),m.baseState=P,m.firstBaseUpdate=K,m.lastBaseUpdate=ae,a=m.shared.interleaved,a!==null){m=a;do I|=m.lane,m=m.next;while(m!==a)}else g===null&&(m.shared.lanes=0);Mi|=I,i.lanes=I,i.memoizedState=le}}function bs(i,a,u){if(i=a.effects,a.effects=null,i!==null)for(a=0;a<i.length;a++){var c=i[a],m=c.callback;if(m!==null){if(c.callback=null,c=u,typeof m!="function")throw Error(v(191,m));m.call(c)}}}var Ds={},Ur=Lr(Ds),sn=Lr(Ds),Ns=Lr(Ds);function N(i){if(i===Ds)throw Error(v(174));return i}function qc(i,a){switch(vt(Ns,a),vt(sn,i),vt(Ur,Ds),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Jl(null,"");break;default:i=i===8?a.parentNode:a,a=i.namespaceURI||null,i=i.tagName,a=Jl(a,i)}Rt(Ur),vt(Ur,a)}function hn(){Rt(Ur),Rt(sn),Rt(Ns)}function cl(i){N(Ns.current);var a=N(Ur.current),u=Jl(a,i.type);a!==u&&(vt(sn,i),vt(Ur,u))}function xi(i){sn.current===i&&(Rt(Ur),Rt(sn))}var Pt=Lr(0);function Li(i){for(var a=i;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if(a.flags&128)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var nt=[];function yr(){for(var i=0;i<nt.length;i++)nt[i]._workInProgressVersionPrimary=null;nt.length=0}var xs=$e.ReactCurrentDispatcher,Kc=$e.ReactCurrentBatchConfig,di=0,Mt=null,nn=null,un=null,Ls=!1,Gt=!1,Ps=0,Jf=0;function Cn(){throw Error(v(321))}function Qc(i,a){if(a===null)return!1;for(var u=0;u<a.length&&u<i.length;u++)if(!kn(i[u],a[u]))return!1;return!0}function Ms(i,a,u,c,m,g){if(di=g,Mt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,xs.current=i===null||i.memoizedState===null?Zp:Jp,i=u(c,m),Gt){g=0;do{if(Gt=!1,Ps=0,25<=g)throw Error(v(301));g+=1,un=nn=null,a.updateQueue=null,xs.current=e_,i=u(c,m)}while(Gt)}if(xs.current=_l,a=nn!==null&&nn.next!==null,di=0,un=nn=Mt=null,Ls=!1,a)throw Error(v(300));return i}function Pi(){var i=Ps!==0;return Ps=0,i}function Er(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return un===null?Mt.memoizedState=un=i:un=un.next=i,un}function rr(){if(nn===null){var i=Mt.alternate;i=i!==null?i.memoizedState:null}else i=nn.next;var a=un===null?Mt.memoizedState:un.next;if(a!==null)un=a,nn=i;else{if(i===null)throw Error(v(310));nn=i,i={memoizedState:nn.memoizedState,baseState:nn.baseState,baseQueue:nn.baseQueue,queue:nn.queue,next:null},un===null?Mt.memoizedState=un=i:un=un.next=i}return un}function Fs(i,a){return typeof a=="function"?a(i):a}function Yc(i){var a=rr(),u=a.queue;if(u===null)throw Error(v(311));u.lastRenderedReducer=i;var c=nn,m=c.baseQueue,g=u.pending;if(g!==null){if(m!==null){var I=m.next;m.next=g.next,g.next=I}c.baseQueue=m=g,u.pending=null}if(m!==null){g=m.next,c=c.baseState;var D=I=null,P=null,K=g;do{var ae=K.lane;if((di&ae)===ae)P!==null&&(P=P.next={lane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),c=K.hasEagerState?K.eagerState:i(c,K.action);else{var le={lane:ae,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null};P===null?(D=P=le,I=c):P=P.next=le,Mt.lanes|=ae,Mi|=ae}K=K.next}while(K!==null&&K!==g);P===null?I=c:P.next=D,kn(c,a.memoizedState)||(gt=!0),a.memoizedState=c,a.baseState=I,a.baseQueue=P,u.lastRenderedState=c}if(i=u.interleaved,i!==null){m=i;do g=m.lane,Mt.lanes|=g,Mi|=g,m=m.next;while(m!==i)}else m===null&&(u.lanes=0);return[a.memoizedState,u.dispatch]}function Xc(i){var a=rr(),u=a.queue;if(u===null)throw Error(v(311));u.lastRenderedReducer=i;var c=u.dispatch,m=u.pending,g=a.memoizedState;if(m!==null){u.pending=null;var I=m=m.next;do g=i(g,I.action),I=I.next;while(I!==m);kn(g,a.memoizedState)||(gt=!0),a.memoizedState=g,a.baseQueue===null&&(a.baseState=g),u.lastRenderedState=g}return[g,c]}function eh(){}function th(i,a){var u=Mt,c=rr(),m=a(),g=!kn(c.memoizedState,m);if(g&&(c.memoizedState=m,gt=!0),c=c.queue,re(ih.bind(null,u,c,i),[i]),c.getSnapshot!==a||g||un!==null&&un.memoizedState.tag&1){if(u.flags|=2048,Us(9,rh.bind(null,u,c,m,a),void 0,null),jt===null)throw Error(v(349));di&30||nh(u,a,m)}return m}function nh(i,a,u){i.flags|=16384,i={getSnapshot:a,value:u},a=Mt.updateQueue,a===null?(a={lastEffect:null,stores:null},Mt.updateQueue=a,a.stores=[i]):(u=a.stores,u===null?a.stores=[i]:u.push(i))}function rh(i,a,u,c){a.value=u,a.getSnapshot=c,ah(a)&&oh(i)}function ih(i,a,u){return u(function(){ah(a)&&oh(i)})}function ah(i){var a=i.getSnapshot;i=i.value;try{var u=a();return!kn(i,u)}catch{return!0}}function oh(i){var a=nr(i,1);a!==null&&sr(a,i,1,-1)}function pn(i){var a=Er();return typeof i=="function"&&(i=i()),a.memoizedState=a.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fs,lastRenderedState:i},a.queue=i,i=i.dispatch=Xp.bind(null,Mt,i),[a.memoizedState,i]}function Us(i,a,u,c){return i={tag:i,create:a,destroy:u,deps:c,next:null},a=Mt.updateQueue,a===null?(a={lastEffect:null,stores:null},Mt.updateQueue=a,a.lastEffect=i.next=i):(u=a.lastEffect,u===null?a.lastEffect=i.next=i:(c=u.next,u.next=i,i.next=c,a.lastEffect=i)),i}function dl(){return rr().memoizedState}function fl(i,a,u,c){var m=Er();Mt.flags|=i,m.memoizedState=Us(1|a,u,void 0,c===void 0?null:c)}function hl(i,a,u,c){var m=rr();c=c===void 0?null:c;var g=void 0;if(nn!==null){var I=nn.memoizedState;if(g=I.destroy,c!==null&&Qc(c,I.deps)){m.memoizedState=Us(a,u,g,c);return}}Mt.flags|=i,m.memoizedState=Us(1|a,u,g,c)}function Zc(i,a){return fl(8390656,8,i,a)}function re(i,a){return hl(2048,8,i,a)}function Jc(i,a){return hl(4,2,i,a)}function ir(i,a){return hl(4,4,i,a)}function sh(i,a){if(typeof a=="function")return i=i(),a(i),function(){a(null)};if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function uh(i,a,u){return u=u!=null?u.concat([i]):null,hl(4,4,sh.bind(null,a,i),u)}function pl(){}function lh(i,a){var u=rr();a=a===void 0?null:a;var c=u.memoizedState;return c!==null&&a!==null&&Qc(a,c[1])?c[0]:(u.memoizedState=[i,a],i)}function ed(i,a){var u=rr();a=a===void 0?null:a;var c=u.memoizedState;return c!==null&&a!==null&&Qc(a,c[1])?c[0]:(i=i(),u.memoizedState=[i,a],i)}function Dt(i,a,u){return di&21?(kn(u,a)||(u=ra(),Mt.lanes|=u,Mi|=u,i.baseState=!0),a):(i.baseState&&(i.baseState=!1,gt=!0),i.memoizedState=u)}function Dn(i,a){var u=ct;ct=u!==0&&4>u?u:4,i(!0);var c=Kc.transition;Kc.transition={};try{i(!1),a()}finally{ct=u,Kc.transition=c}}function Zt(){return rr().memoizedState}function Yp(i,a,u){var c=Ir(i);if(u={lane:c,action:u,hasEagerState:!1,eagerState:null,next:null},ch(i))dh(a,u);else if(u=Zf(i,a,u,c),u!==null){var m=Nn();sr(u,i,c,m),fh(u,a,c)}}function Xp(i,a,u){var c=Ir(i),m={lane:c,action:u,hasEagerState:!1,eagerState:null,next:null};if(ch(i))dh(a,m);else{var g=i.alternate;if(i.lanes===0&&(g===null||g.lanes===0)&&(g=a.lastRenderedReducer,g!==null))try{var I=a.lastRenderedState,D=g(I,u);if(m.hasEagerState=!0,m.eagerState=D,kn(D,I)){var P=a.interleaved;P===null?(m.next=m,$c(a)):(m.next=P.next,P.next=m),a.interleaved=m;return}}catch{}finally{}u=Zf(i,a,m,c),u!==null&&(m=Nn(),sr(u,i,c,m),fh(u,a,c))}}function ch(i){var a=i.alternate;return i===Mt||a!==null&&a===Mt}function dh(i,a){Gt=Ls=!0;var u=i.pending;u===null?a.next=a:(a.next=u.next,u.next=a),i.pending=a}function fh(i,a,u){if(u&4194240){var c=a.lanes;c&=i.pendingLanes,u|=c,a.lanes=u,qa(i,u)}}var _l={readContext:tr,useCallback:Cn,useContext:Cn,useEffect:Cn,useImperativeHandle:Cn,useInsertionEffect:Cn,useLayoutEffect:Cn,useMemo:Cn,useReducer:Cn,useRef:Cn,useState:Cn,useDebugValue:Cn,useDeferredValue:Cn,useTransition:Cn,useMutableSource:Cn,useSyncExternalStore:Cn,useId:Cn,unstable_isNewReconciler:!1},Zp={readContext:tr,useCallback:function(i,a){return Er().memoizedState=[i,a===void 0?null:a],i},useContext:tr,useEffect:Zc,useImperativeHandle:function(i,a,u){return u=u!=null?u.concat([i]):null,fl(4194308,4,sh.bind(null,a,i),u)},useLayoutEffect:function(i,a){return fl(4194308,4,i,a)},useInsertionEffect:function(i,a){return fl(4,2,i,a)},useMemo:function(i,a){var u=Er();return a=a===void 0?null:a,i=i(),u.memoizedState=[i,a],i},useReducer:function(i,a,u){var c=Er();return a=u!==void 0?u(a):a,c.memoizedState=c.baseState=a,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},c.queue=i,i=i.dispatch=Yp.bind(null,Mt,i),[c.memoizedState,i]},useRef:function(i){var a=Er();return i={current:i},a.memoizedState=i},useState:pn,useDebugValue:pl,useDeferredValue:function(i){return Er().memoizedState=i},useTransition:function(){var i=pn(!1),a=i[0];return i=Dn.bind(null,i[1]),Er().memoizedState=i,[a,i]},useMutableSource:function(){},useSyncExternalStore:function(i,a,u){var c=Mt,m=Er();if(Lt){if(u===void 0)throw Error(v(407));u=u()}else{if(u=a(),jt===null)throw Error(v(349));di&30||nh(c,a,u)}m.memoizedState=u;var g={value:u,getSnapshot:a};return m.queue=g,Zc(ih.bind(null,c,g,i),[i]),c.flags|=2048,Us(9,rh.bind(null,c,g,u,a),void 0,null),u},useId:function(){var i=Er(),a=jt.identifierPrefix;if(Lt){var u=Gn,c=Mr;u=(c&~(1<<32-Yn(c)-1)).toString(32)+u,a=":"+a+"R"+u,u=Ps++,0<u&&(a+="H"+u.toString(32)),a+=":"}else u=Jf++,a=":"+a+"r"+u.toString(32)+":";return i.memoizedState=a},unstable_isNewReconciler:!1},Jp={readContext:tr,useCallback:lh,useContext:tr,useEffect:re,useImperativeHandle:uh,useInsertionEffect:Jc,useLayoutEffect:ir,useMemo:ed,useReducer:Yc,useRef:dl,useState:function(){return Yc(Fs)},useDebugValue:pl,useDeferredValue:function(i){var a=rr();return Dt(a,nn.memoizedState,i)},useTransition:function(){var i=Yc(Fs)[0],a=rr().memoizedState;return[i,a]},useMutableSource:eh,useSyncExternalStore:th,useId:Zt,unstable_isNewReconciler:!1},e_={readContext:tr,useCallback:lh,useContext:tr,useEffect:re,useImperativeHandle:uh,useInsertionEffect:Jc,useLayoutEffect:ir,useMemo:ed,useReducer:Xc,useRef:dl,useState:function(){return Xc(Fs)},useDebugValue:pl,useDeferredValue:function(i){var a=rr();return nn===null?a.memoizedState=i:Dt(a,nn.memoizedState,i)},useTransition:function(){var i=Xc(Fs)[0],a=rr().memoizedState;return[i,a]},useMutableSource:eh,useSyncExternalStore:th,useId:Zt,unstable_isNewReconciler:!1};function kr(i,a){if(i&&i.defaultProps){a=Se({},a),i=i.defaultProps;for(var u in i)a[u]===void 0&&(a[u]=i[u]);return a}return a}function td(i,a,u,c){a=i.memoizedState,u=u(c,a),u=u==null?a:Se({},a,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var ml={isMounted:function(i){return(i=i._reactInternals)?Zi(i)===i:!1},enqueueSetState:function(i,a,u){i=i._reactInternals;var c=Nn(),m=Ir(i),g=qn(c,m);g.payload=a,u!=null&&(g.callback=u),a=Fr(i,g,m),a!==null&&(sr(a,i,m,c),ko(a,i,m))},enqueueReplaceState:function(i,a,u){i=i._reactInternals;var c=Nn(),m=Ir(i),g=qn(c,m);g.tag=1,g.payload=a,u!=null&&(g.callback=u),a=Fr(i,g,m),a!==null&&(sr(a,i,m,c),ko(a,i,m))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var u=Nn(),c=Ir(i),m=qn(u,c);m.tag=2,a!=null&&(m.callback=a),a=Fr(i,m,c),a!==null&&(sr(a,i,c,u),ko(a,i,c))}};function hh(i,a,u,c,m,g,I){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,g,I):a.prototype&&a.prototype.isPureReactComponent?!Si(u,c)||!Si(m,g):!0}function ph(i,a,u){var c=!1,m=Pr,g=a.contextType;return typeof g=="object"&&g!==null?g=tr(g):(m=Un(a)?Oi:fn.current,c=a.contextTypes,g=(c=c!=null)?ha(i,m):Pr),a=new a(u,g),i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=ml,i.stateNode=a,a._reactInternals=i,c&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=m,i.__reactInternalMemoizedMaskedChildContext=g),a}function _h(i,a,u,c){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,c),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,c),a.state!==i&&ml.enqueueReplaceState(a,a.state,null)}function nd(i,a,u,c){var m=i.stateNode;m.props=u,m.state=i.memoizedState,m.refs={},bn(i);var g=a.contextType;typeof g=="object"&&g!==null?m.context=tr(g):(g=Un(a)?Oi:fn.current,m.context=ha(i,g)),m.state=i.memoizedState,g=a.getDerivedStateFromProps,typeof g=="function"&&(td(i,a,g,u),m.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(a=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),a!==m.state&&ml.enqueueReplaceState(m,m.state,null),wo(i,u,m,c),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308)}function Co(i,a){try{var u="",c=a;do u+=st(c),c=c.return;while(c);var m=u}catch(g){m=`
Error generating stack: `+g.message+`
`+g.stack}return{value:i,source:a,stack:m,digest:null}}function rd(i,a,u){return{value:i,source:null,stack:u??null,digest:a??null}}function id(i,a){try{console.error(a.value)}catch(u){setTimeout(function(){throw u})}}var t_=typeof WeakMap=="function"?WeakMap:Map;function mh(i,a,u){u=qn(-1,u),u.tag=3,u.payload={element:null};var c=a.value;return u.callback=function(){Oo||(Oo=!0,Hs=c),id(i,a)},u}function ad(i,a,u){u=qn(-1,u),u.tag=3;var c=i.type.getDerivedStateFromError;if(typeof c=="function"){var m=a.value;u.payload=function(){return c(m)},u.callback=function(){id(i,a)}}var g=i.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(u.callback=function(){id(i,a),typeof c!="function"&&(_i===null?_i=new Set([this]):_i.add(this));var I=a.stack;this.componentDidCatch(a.value,{componentStack:I!==null?I:""})}),u}function vh(i,a,u){var c=i.pingCache;if(c===null){c=i.pingCache=new t_;var m=new Set;c.set(a,m)}else m=c.get(a),m===void 0&&(m=new Set,c.set(a,m));m.has(u)||(m.add(u),i=Vi.bind(null,i,a,u),a.then(i,i))}function gh(i){do{var a;if((a=i.tag===13)&&(a=i.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return i;i=i.return}while(i!==null);return null}function yh(i,a,u,c,m){return i.mode&1?(i.flags|=65536,i.lanes=m,i):(i===a?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(a=qn(-1,1),a.tag=2,Fr(u,a,1))),u.lanes|=1),i)}var n_=$e.ReactCurrentOwner,gt=!1;function Xe(i,a,u,c){a.child=i===null?Wc(a,null,u,c):go(a,i.child,u,c)}function Eh(i,a,u,c,m){u=u.render;var g=a.ref;return Eo(a,m),c=Ms(i,a,u,c,g,m),u=Pi(),i!==null&&!gt?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~m,fi(i,a,m)):(Lt&&u&&ks(a),a.flags|=1,Xe(i,a,c,m),a.child)}function kh(i,a,u,c,m){if(i===null){var g=u.type;return typeof g=="function"&&!Rd(g)&&g.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(a.tag=15,a.type=g,wh(i,a,g,c,m)):(i=Sl(u.type,null,c,a,a.mode,m),i.ref=a.ref,i.return=a,a.child=i)}if(g=i.child,!(i.lanes&m)){var I=g.memoizedProps;if(u=u.compare,u=u!==null?u:Si,u(I,c)&&i.ref===a.ref)return fi(i,a,m)}return a.flags|=1,i=ji(g,c),i.ref=a.ref,i.return=a,a.child=i}function wh(i,a,u,c,m){if(i!==null){var g=i.memoizedProps;if(Si(g,c)&&i.ref===a.ref)if(gt=!1,a.pendingProps=c=g,(i.lanes&m)!==0)i.flags&131072&&(gt=!0);else return a.lanes=i.lanes,fi(i,a,m)}return od(i,a,u,c,m)}function Ch(i,a,u){var c=a.pendingProps,m=c.children,g=i!==null?i.memoizedState:null;if(c.mode==="hidden")if(!(a.mode&1))a.memoizedState={baseLanes:0,cachePool:null,transitions:null},vt(ga,Kn),Kn|=u;else{if(!(u&1073741824))return i=g!==null?g.baseLanes|u:u,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null,transitions:null},a.updateQueue=null,vt(ga,Kn),Kn|=i,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=g!==null?g.baseLanes:u,vt(ga,Kn),Kn|=c}else g!==null?(c=g.baseLanes|u,a.memoizedState=null):c=u,vt(ga,Kn),Kn|=c;return Xe(i,a,m,u),a.child}function Rh(i,a){var u=a.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(a.flags|=512,a.flags|=2097152)}function od(i,a,u,c,m){var g=Un(u)?Oi:fn.current;return g=ha(a,g),Eo(a,m),u=Ms(i,a,u,c,g,m),c=Pi(),i!==null&&!gt?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~m,fi(i,a,m)):(Lt&&c&&ks(a),a.flags|=1,Xe(i,a,u,m),a.child)}function Ih(i,a,u,c,m){if(Un(u)){var g=!0;gs(a)}else g=!1;if(Eo(a,m),a.stateNode===null)gl(i,a),ph(a,u,c),nd(a,u,c,m),c=!0;else if(i===null){var I=a.stateNode,D=a.memoizedProps;I.props=D;var P=I.context,K=u.contextType;typeof K=="object"&&K!==null?K=tr(K):(K=Un(u)?Oi:fn.current,K=ha(a,K));var ae=u.getDerivedStateFromProps,le=typeof ae=="function"||typeof I.getSnapshotBeforeUpdate=="function";le||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(D!==c||P!==K)&&_h(a,I,c,K),ze=!1;var te=a.memoizedState;I.state=te,wo(a,c,I,m),P=a.memoizedState,D!==c||te!==P||On.current||ze?(typeof ae=="function"&&(td(a,u,ae,c),P=a.memoizedState),(D=ze||hh(a,u,D,c,te,P,K))?(le||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(a.flags|=4194308)):(typeof I.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=c,a.memoizedState=P),I.props=c,I.state=P,I.context=K,c=D):(typeof I.componentDidMount=="function"&&(a.flags|=4194308),c=!1)}else{I=a.stateNode,gr(i,a),D=a.memoizedProps,K=a.type===a.elementType?D:kr(a.type,D),I.props=K,le=a.pendingProps,te=I.context,P=u.contextType,typeof P=="object"&&P!==null?P=tr(P):(P=Un(u)?Oi:fn.current,P=ha(a,P));var Ce=u.getDerivedStateFromProps;(ae=typeof Ce=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(D!==le||te!==P)&&_h(a,I,c,P),ze=!1,te=a.memoizedState,I.state=te,wo(a,c,I,m);var Oe=a.memoizedState;D!==le||te!==Oe||On.current||ze?(typeof Ce=="function"&&(td(a,u,Ce,c),Oe=a.memoizedState),(K=ze||hh(a,u,K,c,te,Oe,P)||!1)?(ae||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(c,Oe,P),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(c,Oe,P)),typeof I.componentDidUpdate=="function"&&(a.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof I.componentDidUpdate!="function"||D===i.memoizedProps&&te===i.memoizedState||(a.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&te===i.memoizedState||(a.flags|=1024),a.memoizedProps=c,a.memoizedState=Oe),I.props=c,I.state=Oe,I.context=P,c=K):(typeof I.componentDidUpdate!="function"||D===i.memoizedProps&&te===i.memoizedState||(a.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&te===i.memoizedState||(a.flags|=1024),c=!1)}return sd(i,a,u,c,g,m)}function sd(i,a,u,c,m,g){Rh(i,a);var I=(a.flags&128)!==0;if(!c&&!I)return m&&Qf(a,u,!1),fi(i,a,g);c=a.stateNode,n_.current=a;var D=I&&typeof u.getDerivedStateFromError!="function"?null:c.render();return a.flags|=1,i!==null&&I?(a.child=go(a,i.child,null,g),a.child=go(a,null,D,g)):Xe(i,a,D,g),a.memoizedState=c.state,m&&Qf(a,u,!0),a.child}function Sh(i){var a=i.stateNode;a.pendingContext?jc(i,a.pendingContext,a.pendingContext!==a.context):a.context&&jc(i,a.context,!1),qc(i,a.containerInfo)}function Th(i,a,u,c,m){return po(),ll(m),a.flags|=256,Xe(i,a,u,c),a.child}var ud={dehydrated:null,treeContext:null,retryLane:0};function ld(i){return{baseLanes:i,cachePool:null,transitions:null}}function Ah(i,a,u){var c=a.pendingProps,m=Pt.current,g=!1,I=(a.flags&128)!==0,D;if((D=I)||(D=i!==null&&i.memoizedState===null?!1:(m&2)!==0),D?(g=!0,a.flags&=-129):(i===null||i.memoizedState!==null)&&(m|=1),vt(Pt,m&1),i===null)return ws(a),i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(a.mode&1?i.data==="$!"?a.lanes=8:a.lanes=1073741824:a.lanes=1,null):(I=c.children,i=c.fallback,g?(c=a.mode,g=a.child,I={mode:"hidden",children:I},!(c&1)&&g!==null?(g.childLanes=0,g.pendingProps=I):g=Qs(I,c,0,null),i=Ca(i,c,u,null),g.return=a,i.return=a,g.sibling=i,a.child=g,a.child.memoizedState=ld(u),a.memoizedState=ud,i):cd(a,I));if(m=i.memoizedState,m!==null&&(D=m.dehydrated,D!==null))return r_(i,a,I,c,D,m,u);if(g){g=c.fallback,I=a.mode,m=i.child,D=m.sibling;var P={mode:"hidden",children:c.children};return!(I&1)&&a.child!==m?(c=a.child,c.childLanes=0,c.pendingProps=P,a.deletions=null):(c=ji(m,P),c.subtreeFlags=m.subtreeFlags&14680064),D!==null?g=ji(D,g):(g=Ca(g,I,u,null),g.flags|=2),g.return=a,c.return=a,c.sibling=g,a.child=c,c=g,g=a.child,I=i.child.memoizedState,I=I===null?ld(u):{baseLanes:I.baseLanes|u,cachePool:null,transitions:I.transitions},g.memoizedState=I,g.childLanes=i.childLanes&~u,a.memoizedState=ud,c}return g=i.child,i=g.sibling,c=ji(g,{mode:"visible",children:c.children}),!(a.mode&1)&&(c.lanes=u),c.return=a,c.sibling=null,i!==null&&(u=a.deletions,u===null?(a.deletions=[i],a.flags|=16):u.push(i)),a.child=c,a.memoizedState=null,c}function cd(i,a){return a=Qs({mode:"visible",children:a},i.mode,0,null),a.return=i,i.child=a}function vl(i,a,u,c){return c!==null&&ll(c),go(a,i.child,null,u),i=cd(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function r_(i,a,u,c,m,g,I){if(u)return a.flags&256?(a.flags&=-257,c=rd(Error(v(422))),vl(i,a,I,c)):a.memoizedState!==null?(a.child=i.child,a.flags|=128,null):(g=c.fallback,m=a.mode,c=Qs({mode:"visible",children:c.children},m,0,null),g=Ca(g,m,I,null),g.flags|=2,c.return=a,g.return=a,c.sibling=g,a.child=c,a.mode&1&&go(a,i.child,null,I),a.child.memoizedState=ld(I),a.memoizedState=ud,g);if(!(a.mode&1))return vl(i,a,I,null);if(m.data==="$!"){if(c=m.nextSibling&&m.nextSibling.dataset,c)var D=c.dgst;return c=D,g=Error(v(419)),c=rd(g,c,void 0),vl(i,a,I,c)}if(D=(I&i.childLanes)!==0,gt||D){if(c=jt,c!==null){switch(I&-I){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=m&(c.suspendedLanes|I)?0:m,m!==0&&m!==g.retryLane&&(g.retryLane=m,nr(i,m),sr(c,i,m,-1))}return kd(),c=rd(Error(v(421))),vl(i,a,I,c)}return m.data==="$?"?(a.flags|=128,a.child=i.child,a=h_.bind(null,i),m._reactRetry=a,null):(i=g.treeContext,jn=si(m.nextSibling),$n=a,Lt=!0,wn=null,i!==null&&(Jn[er++]=Mr,Jn[er++]=Gn,Jn[er++]=Ni,Mr=i.id,Gn=i.overflow,Ni=a),a=cd(a,c.children),a.flags|=4096,a)}function Oh(i,a,u){i.lanes|=a;var c=i.alternate;c!==null&&(c.lanes|=a),ma(i.return,a,u)}function Ro(i,a,u,c,m){var g=i.memoizedState;g===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:c,tail:u,tailMode:m}:(g.isBackwards=a,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=u,g.tailMode=m)}function dd(i,a,u){var c=a.pendingProps,m=c.revealOrder,g=c.tail;if(Xe(i,a,c.children,u),c=Pt.current,c&2)c=c&1|2,a.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Oh(i,u,a);else if(i.tag===19)Oh(i,u,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}c&=1}if(vt(Pt,c),!(a.mode&1))a.memoizedState=null;else switch(m){case"forwards":for(u=a.child,m=null;u!==null;)i=u.alternate,i!==null&&Li(i)===null&&(m=u),u=u.sibling;u=m,u===null?(m=a.child,a.child=null):(m=u.sibling,u.sibling=null),Ro(a,!1,m,u,g);break;case"backwards":for(u=null,m=a.child,a.child=null;m!==null;){if(i=m.alternate,i!==null&&Li(i)===null){a.child=m;break}i=m.sibling,m.sibling=u,u=m,m=i}Ro(a,!0,u,null,g);break;case"together":Ro(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function gl(i,a){!(a.mode&1)&&i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2)}function fi(i,a,u){if(i!==null&&(a.dependencies=i.dependencies),Mi|=a.lanes,!(u&a.childLanes))return null;if(i!==null&&a.child!==i.child)throw Error(v(153));if(a.child!==null){for(i=a.child,u=ji(i,i.pendingProps),a.child=u,u.return=a;i.sibling!==null;)i=i.sibling,u=u.sibling=ji(i,i.pendingProps),u.return=a;u.sibling=null}return a.child}function i_(i,a,u){switch(a.tag){case 3:Sh(a),po();break;case 5:cl(a);break;case 1:Un(a.type)&&gs(a);break;case 4:qc(a,a.stateNode.containerInfo);break;case 10:var c=a.type._context,m=a.memoizedProps.value;vt(Is,c._currentValue),c._currentValue=m;break;case 13:if(c=a.memoizedState,c!==null)return c.dehydrated!==null?(vt(Pt,Pt.current&1),a.flags|=128,null):u&a.child.childLanes?Ah(i,a,u):(vt(Pt,Pt.current&1),i=fi(i,a,u),i!==null?i.sibling:null);vt(Pt,Pt.current&1);break;case 19:if(c=(u&a.childLanes)!==0,i.flags&128){if(c)return dd(i,a,u);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),vt(Pt,Pt.current),c)break;return null;case 22:case 23:return a.lanes=0,Ch(i,a,u)}return fi(i,a,u)}var bh,fd,Dh,Nh;bh=function(i,a){for(var u=a.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},fd=function(){},Dh=function(i,a,u,c){var m=i.memoizedProps;if(m!==c){i=a.stateNode,N(Ur.current);var g=null;switch(u){case"input":m=yi(i,m),c=yi(i,c),g=[];break;case"select":m=Se({},m,{value:void 0}),c=Se({},c,{value:void 0}),g=[];break;case"textarea":m=Tu(i,m),c=Tu(i,c),g=[];break;default:typeof m.onClick!="function"&&typeof c.onClick=="function"&&(i.onclick=lo)}Ma(u,c);var I;u=null;for(K in m)if(!c.hasOwnProperty(K)&&m.hasOwnProperty(K)&&m[K]!=null)if(K==="style"){var D=m[K];for(I in D)D.hasOwnProperty(I)&&(u||(u={}),u[I]="")}else K!=="dangerouslySetInnerHTML"&&K!=="children"&&K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(R.hasOwnProperty(K)?g||(g=[]):(g=g||[]).push(K,null));for(K in c){var P=c[K];if(D=m!=null?m[K]:void 0,c.hasOwnProperty(K)&&P!==D&&(P!=null||D!=null))if(K==="style")if(D){for(I in D)!D.hasOwnProperty(I)||P&&P.hasOwnProperty(I)||(u||(u={}),u[I]="");for(I in P)P.hasOwnProperty(I)&&D[I]!==P[I]&&(u||(u={}),u[I]=P[I])}else u||(g||(g=[]),g.push(K,u)),u=P;else K==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,D=D?D.__html:void 0,P!=null&&D!==P&&(g=g||[]).push(K,P)):K==="children"?typeof P!="string"&&typeof P!="number"||(g=g||[]).push(K,""+P):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&(R.hasOwnProperty(K)?(P!=null&&K==="onScroll"&&bt("scroll",i),g||D===P||(g=[])):(g=g||[]).push(K,P))}u&&(g=g||[]).push("style",u);var K=g;(a.updateQueue=K)&&(a.flags|=4)}},Nh=function(i,a,u,c){u!==c&&(a.flags|=4)};function Vs(i,a){if(!Lt)switch(i.tailMode){case"hidden":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var c=null;u!==null;)u.alternate!==null&&(c=u),u=u.sibling;c===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function Rn(i){var a=i.alternate!==null&&i.alternate.child===i.child,u=0,c=0;if(a)for(var m=i.child;m!==null;)u|=m.lanes|m.childLanes,c|=m.subtreeFlags&14680064,c|=m.flags&14680064,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)u|=m.lanes|m.childLanes,c|=m.subtreeFlags,c|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=c,i.childLanes=u,a}function a_(i,a,u){var c=a.pendingProps;switch(al(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rn(a),null;case 1:return Un(a.type)&&ho(),Rn(a),null;case 3:return c=a.stateNode,hn(),Rt(On),Rt(fn),yr(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(Cs(a)?a.flags|=4:i===null||i.memoizedState.isDehydrated&&!(a.flags&256)||(a.flags|=1024,wn!==null&&($s(wn),wn=null))),fd(i,a),Rn(a),null;case 5:xi(a);var m=N(Ns.current);if(u=a.type,i!==null&&a.stateNode!=null)Dh(i,a,u,c,m),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!c){if(a.stateNode===null)throw Error(v(166));return Rn(a),null}if(i=N(Ur.current),Cs(a)){c=a.stateNode,u=a.type;var g=a.memoizedProps;switch(c[Fn]=a,c[ui]=g,i=(a.mode&1)!==0,u){case"dialog":bt("cancel",c),bt("close",c);break;case"iframe":case"object":case"embed":bt("load",c);break;case"video":case"audio":for(m=0;m<ls.length;m++)bt(ls[m],c);break;case"source":bt("error",c);break;case"img":case"image":case"link":bt("error",c),bt("load",c);break;case"details":bt("toggle",c);break;case"input":sf(c,g),bt("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!g.multiple},bt("invalid",c);break;case"textarea":Zr(c,g),bt("invalid",c)}Ma(u,g),m=null;for(var I in g)if(g.hasOwnProperty(I)){var D=g[I];I==="children"?typeof D=="string"?c.textContent!==D&&(g.suppressHydrationWarning!==!0&&uo(c.textContent,D,i),m=["children",D]):typeof D=="number"&&c.textContent!==""+D&&(g.suppressHydrationWarning!==!0&&uo(c.textContent,D,i),m=["children",""+D]):R.hasOwnProperty(I)&&D!=null&&I==="onScroll"&&bt("scroll",c)}switch(u){case"input":La(c),Pa(c,g,!0);break;case"textarea":La(c),cf(c);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(c.onclick=lo)}c=m,a.updateQueue=c,c!==null&&(a.flags|=4)}else{I=m.nodeType===9?m:m.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Jr(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=I.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof c.is=="string"?i=I.createElement(u,{is:c.is}):(i=I.createElement(u),u==="select"&&(I=i,c.multiple?I.multiple=!0:c.size&&(I.size=c.size))):i=I.createElementNS(i,u),i[Fn]=a,i[ui]=c,bh(i,a,!1,!1),a.stateNode=i;e:{switch(I=ec(u,c),u){case"dialog":bt("cancel",i),bt("close",i),m=c;break;case"iframe":case"object":case"embed":bt("load",i),m=c;break;case"video":case"audio":for(m=0;m<ls.length;m++)bt(ls[m],i);m=c;break;case"source":bt("error",i),m=c;break;case"img":case"image":case"link":bt("error",i),bt("load",i),m=c;break;case"details":bt("toggle",i),m=c;break;case"input":sf(i,c),m=yi(i,c),bt("invalid",i);break;case"option":m=c;break;case"select":i._wrapperState={wasMultiple:!!c.multiple},m=Se({},c,{value:void 0}),bt("invalid",i);break;case"textarea":Zr(i,c),m=Tu(i,c),bt("invalid",i);break;default:m=c}Ma(u,m),D=m;for(g in D)if(D.hasOwnProperty(g)){var P=D[g];g==="style"?hf(i,P):g==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&df(i,P)):g==="children"?typeof P=="string"?(u!=="textarea"||P!=="")&&qo(i,P):typeof P=="number"&&qo(i,""+P):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(R.hasOwnProperty(g)?P!=null&&g==="onScroll"&&bt("scroll",i):P!=null&&Te(i,g,P,I))}switch(u){case"input":La(i),Pa(i,c,!1);break;case"textarea":La(i),cf(i);break;case"option":c.value!=null&&i.setAttribute("value",""+ft(c.value));break;case"select":i.multiple=!!c.multiple,g=c.value,g!=null?Ei(i,!!c.multiple,g,!1):c.defaultValue!=null&&Ei(i,!!c.multiple,c.defaultValue,!0);break;default:typeof m.onClick=="function"&&(i.onclick=lo)}switch(u){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Rn(a),null;case 6:if(i&&a.stateNode!=null)Nh(i,a,i.memoizedProps,c);else{if(typeof c!="string"&&a.stateNode===null)throw Error(v(166));if(u=N(Ns.current),N(Ur.current),Cs(a)){if(c=a.stateNode,u=a.memoizedProps,c[Fn]=a,(g=c.nodeValue!==u)&&(i=$n,i!==null))switch(i.tag){case 3:uo(c.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&uo(c.nodeValue,u,(i.mode&1)!==0)}g&&(a.flags|=4)}else c=(u.nodeType===9?u:u.ownerDocument).createTextNode(c),c[Fn]=a,a.stateNode=c}return Rn(a),null;case 13:if(Rt(Pt),c=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Lt&&jn!==null&&a.mode&1&&!(a.flags&128))Rs(),po(),a.flags|=98560,g=!1;else if(g=Cs(a),c!==null&&c.dehydrated!==null){if(i===null){if(!g)throw Error(v(318));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(v(317));g[Fn]=a}else po(),!(a.flags&128)&&(a.memoizedState=null),a.flags|=4;Rn(a),g=!1}else wn!==null&&($s(wn),wn=null),g=!0;if(!g)return a.flags&65536?a:null}return a.flags&128?(a.lanes=u,a):(c=c!==null,c!==(i!==null&&i.memoizedState!==null)&&c&&(a.child.flags|=8192,a.mode&1&&(i===null||Pt.current&1?Bt===0&&(Bt=3):kd())),a.updateQueue!==null&&(a.flags|=4),Rn(a),null);case 4:return hn(),fd(i,a),i===null&&cs(a.stateNode.containerInfo),Rn(a),null;case 10:return As(a.type._context),Rn(a),null;case 17:return Un(a.type)&&ho(),Rn(a),null;case 19:if(Rt(Pt),g=a.memoizedState,g===null)return Rn(a),null;if(c=(a.flags&128)!==0,I=g.rendering,I===null)if(c)Vs(g,!1);else{if(Bt!==0||i!==null&&i.flags&128)for(i=a.child;i!==null;){if(I=Li(i),I!==null){for(a.flags|=128,Vs(g,!1),c=I.updateQueue,c!==null&&(a.updateQueue=c,a.flags|=4),a.subtreeFlags=0,c=u,u=a.child;u!==null;)g=u,i=c,g.flags&=14680066,I=g.alternate,I===null?(g.childLanes=0,g.lanes=i,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=I.childLanes,g.lanes=I.lanes,g.child=I.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=I.memoizedProps,g.memoizedState=I.memoizedState,g.updateQueue=I.updateQueue,g.type=I.type,i=I.dependencies,g.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return vt(Pt,Pt.current&1|2),a.child}i=i.sibling}g.tail!==null&&Wt()>Ao&&(a.flags|=128,c=!0,Vs(g,!1),a.lanes=4194304)}else{if(!c)if(i=Li(I),i!==null){if(a.flags|=128,c=!0,u=i.updateQueue,u!==null&&(a.updateQueue=u,a.flags|=4),Vs(g,!0),g.tail===null&&g.tailMode==="hidden"&&!I.alternate&&!Lt)return Rn(a),null}else 2*Wt()-g.renderingStartTime>Ao&&u!==1073741824&&(a.flags|=128,c=!0,Vs(g,!1),a.lanes=4194304);g.isBackwards?(I.sibling=a.child,a.child=I):(u=g.last,u!==null?u.sibling=I:a.child=I,g.last=I)}return g.tail!==null?(a=g.tail,g.rendering=a,g.tail=a.sibling,g.renderingStartTime=Wt(),a.sibling=null,u=Pt.current,vt(Pt,c?u&1|2:u&1),a):(Rn(a),null);case 22:case 23:return Ed(),c=a.memoizedState!==null,i!==null&&i.memoizedState!==null!==c&&(a.flags|=8192),c&&a.mode&1?Kn&1073741824&&(Rn(a),a.subtreeFlags&6&&(a.flags|=8192)):Rn(a),null;case 24:return null;case 25:return null}throw Error(v(156,a.tag))}function o_(i,a){switch(al(a),a.tag){case 1:return Un(a.type)&&ho(),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return hn(),Rt(On),Rt(fn),yr(),i=a.flags,i&65536&&!(i&128)?(a.flags=i&-65537|128,a):null;case 5:return xi(a),null;case 13:if(Rt(Pt),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(v(340));po()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return Rt(Pt),null;case 4:return hn(),null;case 10:return As(a.type._context),null;case 22:case 23:return Ed(),null;case 24:return null;default:return null}}var yl=!1,In=!1,s_=typeof WeakSet=="function"?WeakSet:Set,Ae=null;function Io(i,a){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(c){zt(i,a,c)}else u.current=null}function hd(i,a,u){try{u()}catch(c){zt(i,a,c)}}var xh=!1;function u_(i,a){if(Pc=Zo,i=Tc(),Ku(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var c=u.getSelection&&u.getSelection();if(c&&c.rangeCount!==0){u=c.anchorNode;var m=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{u.nodeType,g.nodeType}catch{u=null;break e}var I=0,D=-1,P=-1,K=0,ae=0,le=i,te=null;t:for(;;){for(var Ce;le!==u||m!==0&&le.nodeType!==3||(D=I+m),le!==g||c!==0&&le.nodeType!==3||(P=I+c),le.nodeType===3&&(I+=le.nodeValue.length),(Ce=le.firstChild)!==null;)te=le,le=Ce;for(;;){if(le===i)break t;if(te===u&&++K===m&&(D=I),te===g&&++ae===c&&(P=I),(Ce=le.nextSibling)!==null)break;le=te,te=le.parentNode}le=Ce}u=D===-1||P===-1?null:{start:D,end:P}}else u=null}u=u||{start:0,end:0}}else u=null;for(tl={focusedElem:i,selectionRange:u},Zo=!1,Ae=a;Ae!==null;)if(a=Ae,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,Ae=i;else for(;Ae!==null;){a=Ae;try{var Oe=a.alternate;if(a.flags&1024)switch(a.tag){case 0:case 11:case 15:break;case 1:if(Oe!==null){var Ee=Oe.memoizedProps,qt=Oe.memoizedState,W=a.stateNode,V=W.getSnapshotBeforeUpdate(a.elementType===a.type?Ee:kr(a.type,Ee),qt);W.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var G=a.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(v(163))}}catch(he){zt(a,a.return,he)}if(i=a.sibling,i!==null){i.return=a.return,Ae=i;break}Ae=a.return}return Oe=xh,xh=!1,Oe}function js(i,a,u){var c=a.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var m=c=c.next;do{if((m.tag&i)===i){var g=m.destroy;m.destroy=void 0,g!==void 0&&hd(a,u,g)}m=m.next}while(m!==c)}}function El(i,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&i)===i){var c=u.create;u.destroy=c()}u=u.next}while(u!==a)}}function pd(i){var a=i.ref;if(a!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof a=="function"?a(i):a.current=i}}function Lh(i){var a=i.alternate;a!==null&&(i.alternate=null,Lh(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&(delete a[Fn],delete a[ui],delete a[_s],delete a[Vc],delete a[Kf])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Nt(i){return i.tag===5||i.tag===3||i.tag===4}function Ph(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Nt(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function hi(i,a,u){var c=i.tag;if(c===5||c===6)i=i.stateNode,a?u.nodeType===8?u.parentNode.insertBefore(i,a):u.insertBefore(i,a):(u.nodeType===8?(a=u.parentNode,a.insertBefore(i,u)):(a=u,a.appendChild(i)),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=lo));else if(c!==4&&(i=i.child,i!==null))for(hi(i,a,u),i=i.sibling;i!==null;)hi(i,a,u),i=i.sibling}function _d(i,a,u){var c=i.tag;if(c===5||c===6)i=i.stateNode,a?u.insertBefore(i,a):u.appendChild(i);else if(c!==4&&(i=i.child,i!==null))for(_d(i,a,u),i=i.sibling;i!==null;)_d(i,a,u),i=i.sibling}var _n=null,ar=!1;function wr(i,a,u){for(u=u.child;u!==null;)Mh(i,a,u),u=u.sibling}function Mh(i,a,u){if(Qn&&typeof Qn.onCommitFiberUnmount=="function")try{Qn.onCommitFiberUnmount(Wa,u)}catch{}switch(u.tag){case 5:In||Io(u,a);case 6:var c=_n,m=ar;_n=null,wr(i,a,u),_n=c,ar=m,_n!==null&&(ar?(i=_n,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):_n.removeChild(u.stateNode));break;case 18:_n!==null&&(ar?(i=_n,u=u.stateNode,i.nodeType===8?nl(i.parentNode,u):i.nodeType===1&&nl(i,u),Xo(i)):nl(_n,u.stateNode));break;case 4:c=_n,m=ar,_n=u.stateNode.containerInfo,ar=!0,wr(i,a,u),_n=c,ar=m;break;case 0:case 11:case 14:case 15:if(!In&&(c=u.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){m=c=c.next;do{var g=m,I=g.destroy;g=g.tag,I!==void 0&&(g&2||g&4)&&hd(u,a,I),m=m.next}while(m!==c)}wr(i,a,u);break;case 1:if(!In&&(Io(u,a),c=u.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=u.memoizedProps,c.state=u.memoizedState,c.componentWillUnmount()}catch(D){zt(u,a,D)}wr(i,a,u);break;case 21:wr(i,a,u);break;case 22:u.mode&1?(In=(c=In)||u.memoizedState!==null,wr(i,a,u),In=c):wr(i,a,u);break;default:wr(i,a,u)}}function Bs(i){var a=i.updateQueue;if(a!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new s_),a.forEach(function(c){var m=p_.bind(null,i,c);u.has(c)||(u.add(c),c.then(m,m))})}}function Cr(i,a){var u=a.deletions;if(u!==null)for(var c=0;c<u.length;c++){var m=u[c];try{var g=i,I=a,D=I;e:for(;D!==null;){switch(D.tag){case 5:_n=D.stateNode,ar=!1;break e;case 3:_n=D.stateNode.containerInfo,ar=!0;break e;case 4:_n=D.stateNode.containerInfo,ar=!0;break e}D=D.return}if(_n===null)throw Error(v(160));Mh(g,I,m),_n=null,ar=!1;var P=m.alternate;P!==null&&(P.return=null),m.return=null}catch(K){zt(m,a,K)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)Fh(a,i),a=a.sibling}function Fh(i,a){var u=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Cr(a,i),Vr(i),c&4){try{js(3,i,i.return),El(3,i)}catch(Ee){zt(i,i.return,Ee)}try{js(5,i,i.return)}catch(Ee){zt(i,i.return,Ee)}}break;case 1:Cr(a,i),Vr(i),c&512&&u!==null&&Io(u,u.return);break;case 5:if(Cr(a,i),Vr(i),c&512&&u!==null&&Io(u,u.return),i.flags&32){var m=i.stateNode;try{qo(m,"")}catch(Ee){zt(i,i.return,Ee)}}if(c&4&&(m=i.stateNode,m!=null)){var g=i.memoizedProps,I=u!==null?u.memoizedProps:g,D=i.type,P=i.updateQueue;if(i.updateQueue=null,P!==null)try{D==="input"&&g.type==="radio"&&g.name!=null&&uf(m,g),ec(D,I);var K=ec(D,g);for(I=0;I<P.length;I+=2){var ae=P[I],le=P[I+1];ae==="style"?hf(m,le):ae==="dangerouslySetInnerHTML"?df(m,le):ae==="children"?qo(m,le):Te(m,ae,le,K)}switch(D){case"input":Zl(m,g);break;case"textarea":lf(m,g);break;case"select":var te=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!g.multiple;var Ce=g.value;Ce!=null?Ei(m,!!g.multiple,Ce,!1):te!==!!g.multiple&&(g.defaultValue!=null?Ei(m,!!g.multiple,g.defaultValue,!0):Ei(m,!!g.multiple,g.multiple?[]:"",!1))}m[ui]=g}catch(Ee){zt(i,i.return,Ee)}}break;case 6:if(Cr(a,i),Vr(i),c&4){if(i.stateNode===null)throw Error(v(162));m=i.stateNode,g=i.memoizedProps;try{m.nodeValue=g}catch(Ee){zt(i,i.return,Ee)}}break;case 3:if(Cr(a,i),Vr(i),c&4&&u!==null&&u.memoizedState.isDehydrated)try{Xo(a.containerInfo)}catch(Ee){zt(i,i.return,Ee)}break;case 4:Cr(a,i),Vr(i);break;case 13:Cr(a,i),Vr(i),m=i.child,m.flags&8192&&(g=m.memoizedState!==null,m.stateNode.isHidden=g,!g||m.alternate!==null&&m.alternate.memoizedState!==null||(vd=Wt())),c&4&&Bs(i);break;case 22:if(ae=u!==null&&u.memoizedState!==null,i.mode&1?(In=(K=In)||ae,Cr(a,i),In=K):Cr(a,i),Vr(i),c&8192){if(K=i.memoizedState!==null,(i.stateNode.isHidden=K)&&!ae&&i.mode&1)for(Ae=i,ae=i.child;ae!==null;){for(le=Ae=ae;Ae!==null;){switch(te=Ae,Ce=te.child,te.tag){case 0:case 11:case 14:case 15:js(4,te,te.return);break;case 1:Io(te,te.return);var Oe=te.stateNode;if(typeof Oe.componentWillUnmount=="function"){c=te,u=te.return;try{a=c,Oe.props=a.memoizedProps,Oe.state=a.memoizedState,Oe.componentWillUnmount()}catch(Ee){zt(c,u,Ee)}}break;case 5:Io(te,te.return);break;case 22:if(te.memoizedState!==null){Vh(le);continue}}Ce!==null?(Ce.return=te,Ae=Ce):Vh(le)}ae=ae.sibling}e:for(ae=null,le=i;;){if(le.tag===5){if(ae===null){ae=le;try{m=le.stateNode,K?(g=m.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(D=le.stateNode,P=le.memoizedProps.style,I=P!=null&&P.hasOwnProperty("display")?P.display:null,D.style.display=Au("display",I))}catch(Ee){zt(i,i.return,Ee)}}}else if(le.tag===6){if(ae===null)try{le.stateNode.nodeValue=K?"":le.memoizedProps}catch(Ee){zt(i,i.return,Ee)}}else if((le.tag!==22&&le.tag!==23||le.memoizedState===null||le===i)&&le.child!==null){le.child.return=le,le=le.child;continue}if(le===i)break e;for(;le.sibling===null;){if(le.return===null||le.return===i)break e;ae===le&&(ae=null),le=le.return}ae===le&&(ae=null),le.sibling.return=le.return,le=le.sibling}}break;case 19:Cr(a,i),Vr(i),c&4&&Bs(i);break;case 21:break;default:Cr(a,i),Vr(i)}}function Vr(i){var a=i.flags;if(a&2){try{e:{for(var u=i.return;u!==null;){if(Nt(u)){var c=u;break e}u=u.return}throw Error(v(160))}switch(c.tag){case 5:var m=c.stateNode;c.flags&32&&(qo(m,""),c.flags&=-33);var g=Ph(i);_d(i,g,m);break;case 3:case 4:var I=c.stateNode.containerInfo,D=Ph(i);hi(i,D,I);break;default:throw Error(v(161))}}catch(P){zt(i,i.return,P)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function l_(i,a,u){Ae=i,zs(i)}function zs(i,a,u){for(var c=(i.mode&1)!==0;Ae!==null;){var m=Ae,g=m.child;if(m.tag===22&&c){var I=m.memoizedState!==null||yl;if(!I){var D=m.alternate,P=D!==null&&D.memoizedState!==null||In;D=yl;var K=In;if(yl=I,(In=P)&&!K)for(Ae=m;Ae!==null;)I=Ae,P=I.child,I.tag===22&&I.memoizedState!==null?kl(m):P!==null?(P.return=I,Ae=P):kl(m);for(;g!==null;)Ae=g,zs(g),g=g.sibling;Ae=m,yl=D,In=K}Uh(i)}else m.subtreeFlags&8772&&g!==null?(g.return=m,Ae=g):Uh(i)}}function Uh(i){for(;Ae!==null;){var a=Ae;if(a.flags&8772){var u=a.alternate;try{if(a.flags&8772)switch(a.tag){case 0:case 11:case 15:In||El(5,a);break;case 1:var c=a.stateNode;if(a.flags&4&&!In)if(u===null)c.componentDidMount();else{var m=a.elementType===a.type?u.memoizedProps:kr(a.type,u.memoizedProps);c.componentDidUpdate(m,u.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var g=a.updateQueue;g!==null&&bs(a,g,c);break;case 3:var I=a.updateQueue;if(I!==null){if(u=null,a.child!==null)switch(a.child.tag){case 5:u=a.child.stateNode;break;case 1:u=a.child.stateNode}bs(a,I,u)}break;case 5:var D=a.stateNode;if(u===null&&a.flags&4){u=D;var P=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&u.focus();break;case"img":P.src&&(u.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var K=a.alternate;if(K!==null){var ae=K.memoizedState;if(ae!==null){var le=ae.dehydrated;le!==null&&Xo(le)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(v(163))}In||a.flags&512&&pd(a)}catch(te){zt(a,a.return,te)}}if(a===i){Ae=null;break}if(u=a.sibling,u!==null){u.return=a.return,Ae=u;break}Ae=a.return}}function Vh(i){for(;Ae!==null;){var a=Ae;if(a===i){Ae=null;break}var u=a.sibling;if(u!==null){u.return=a.return,Ae=u;break}Ae=a.return}}function kl(i){for(;Ae!==null;){var a=Ae;try{switch(a.tag){case 0:case 11:case 15:var u=a.return;try{El(4,a)}catch(P){zt(a,u,P)}break;case 1:var c=a.stateNode;if(typeof c.componentDidMount=="function"){var m=a.return;try{c.componentDidMount()}catch(P){zt(a,m,P)}}var g=a.return;try{pd(a)}catch(P){zt(a,g,P)}break;case 5:var I=a.return;try{pd(a)}catch(P){zt(a,I,P)}}}catch(P){zt(a,a.return,P)}if(a===i){Ae=null;break}var D=a.sibling;if(D!==null){D.return=a.return,Ae=D;break}Ae=a.return}}var c_=Math.ceil,wl=$e.ReactCurrentDispatcher,md=$e.ReactCurrentOwner,or=$e.ReactCurrentBatchConfig,at=0,jt=null,yt=null,Jt=0,Kn=0,ga=Lr(0),Bt=0,Rr=null,Mi=0,So=0,To=0,ya=null,$t=null,vd=0,Ao=1/0,pi=null,Oo=!1,Hs=null,_i=null,Ws=!1,mi=null,Gs=0,Ea=0,tt=null,Cl=-1,Rl=0;function Nn(){return at&6?Wt():Cl!==-1?Cl:Cl=Wt()}function Ir(i){return i.mode&1?at&2&&Jt!==0?Jt&-Jt:Hc.transition!==null?(Rl===0&&(Rl=ra()),Rl):(i=ct,i!==0||(i=window.event,i=i===void 0?16:Df(i.type)),i):1}function sr(i,a,u,c){if(50<Ea)throw Ea=0,tt=null,Error(v(185));$a(i,u,c),(!(at&2)||i!==jt)&&(i===jt&&(!(at&2)&&(So|=u),Bt===4&&Fi(i,Jt)),xn(i,c),u===1&&at===0&&!(a.mode&1)&&(Ao=Wt()+500,ys&&li()))}function xn(i,a){var u=i.callbackNode;Rf(i,a);var c=ni(i,i===jt?Jt:0);if(c===0)u!==null&&xu(u),i.callbackNode=null,i.callbackPriority=0;else if(a=c&-c,i.callbackPriority!==a){if(u!=null&&xu(u),a===1)i.tag===0?Vn(jh.bind(null,i)):Yf(jh.bind(null,i)),Fc(function(){!(at&6)&&li()}),u=null;else{switch(uc(c)){case 1:u=rc;break;case 4:u=za;break;case 16:u=Ha;break;case 536870912:u=ic;break;default:u=Ha}u=Gh(u,gd.bind(null,i))}i.callbackPriority=a,i.callbackNode=u}}function gd(i,a){if(Cl=-1,Rl=0,at&6)throw Error(v(327));var u=i.callbackNode;if(bo()&&i.callbackNode!==u)return null;var c=ni(i,i===jt?Jt:0);if(c===0)return null;if(c&30||c&i.expiredLanes||a)a=Ke(i,c);else{a=c;var m=at;at|=2;var g=zh();(jt!==i||Jt!==a)&&(pi=null,Ao=Wt()+500,wa(i,a));do try{qs();break}catch(D){Bh(i,D)}while(!0);Gc(),wl.current=g,at=m,yt!==null?a=0:(jt=null,Jt=0,a=Bt)}if(a!==0){if(a===2&&(m=na(i),m!==0&&(c=m,a=jr(i,m))),a===1)throw u=Rr,wa(i,0),Fi(i,c),xn(i,Wt()),u;if(a===6)Fi(i,c);else{if(m=i.current.alternate,!(c&30)&&!d_(m)&&(a=Ke(i,c),a===2&&(g=na(i),g!==0&&(c=g,a=jr(i,g))),a===1))throw u=Rr,wa(i,0),Fi(i,c),xn(i,Wt()),u;switch(i.finishedWork=m,i.finishedLanes=c,a){case 0:case 1:throw Error(v(345));case 2:Ui(i,$t,pi);break;case 3:if(Fi(i,c),(c&130023424)===c&&(a=vd+500-Wt(),10<a)){if(ni(i,0)!==0)break;if(m=i.suspendedLanes,(m&c)!==c){Nn(),i.pingedLanes|=i.suspendedLanes&m;break}i.timeoutHandle=hs(Ui.bind(null,i,$t,pi),a);break}Ui(i,$t,pi);break;case 4:if(Fi(i,c),(c&4194240)===c)break;for(a=i.eventTimes,m=-1;0<c;){var I=31-Yn(c);g=1<<I,I=a[I],I>m&&(m=I),c&=~g}if(c=m,c=Wt()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*c_(c/1960))-c,10<c){i.timeoutHandle=hs(Ui.bind(null,i,$t,pi),c);break}Ui(i,$t,pi);break;case 5:Ui(i,$t,pi);break;default:throw Error(v(329))}}}return xn(i,Wt()),i.callbackNode===u?gd.bind(null,i):null}function jr(i,a){var u=ya;return i.current.memoizedState.isDehydrated&&(wa(i,a).flags|=256),i=Ke(i,a),i!==2&&(a=$t,$t=u,a!==null&&$s(a)),i}function $s(i){$t===null?$t=i:$t.push.apply($t,i)}function d_(i){for(var a=i;;){if(a.flags&16384){var u=a.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var c=0;c<u.length;c++){var m=u[c],g=m.getSnapshot;m=m.value;try{if(!kn(g(),m))return!1}catch{return!1}}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Fi(i,a){for(a&=~To,a&=~So,i.suspendedLanes|=a,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var u=31-Yn(a),c=1<<u;i[u]=-1,a&=~c}}function jh(i){if(at&6)throw Error(v(327));bo();var a=ni(i,0);if(!(a&1))return xn(i,Wt()),null;var u=Ke(i,a);if(i.tag!==0&&u===2){var c=na(i);c!==0&&(a=c,u=jr(i,c))}if(u===1)throw u=Rr,wa(i,0),Fi(i,a),xn(i,Wt()),u;if(u===6)throw Error(v(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,Ui(i,$t,pi),xn(i,Wt()),null}function yd(i,a){var u=at;at|=1;try{return i(a)}finally{at=u,at===0&&(Ao=Wt()+500,ys&&li())}}function ka(i){mi!==null&&mi.tag===0&&!(at&6)&&bo();var a=at;at|=1;var u=or.transition,c=ct;try{if(or.transition=null,ct=1,i)return i()}finally{ct=c,or.transition=u,at=a,!(at&6)&&li()}}function Ed(){Kn=ga.current,Rt(ga)}function wa(i,a){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,ps(u)),yt!==null)for(u=yt.return;u!==null;){var c=u;switch(al(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&ho();break;case 3:hn(),Rt(On),Rt(fn),yr();break;case 5:xi(c);break;case 4:hn();break;case 13:Rt(Pt);break;case 19:Rt(Pt);break;case 10:As(c.type._context);break;case 22:case 23:Ed()}u=u.return}if(jt=i,yt=i=ji(i.current,null),Jt=Kn=a,Bt=0,Rr=null,To=So=Mi=0,$t=ya=null,va!==null){for(a=0;a<va.length;a++)if(u=va[a],c=u.interleaved,c!==null){u.interleaved=null;var m=c.next,g=u.pending;if(g!==null){var I=g.next;g.next=m,c.next=I}u.pending=c}va=null}return i}function Bh(i,a){do{var u=yt;try{if(Gc(),xs.current=_l,Ls){for(var c=Mt.memoizedState;c!==null;){var m=c.queue;m!==null&&(m.pending=null),c=c.next}Ls=!1}if(di=0,un=nn=Mt=null,Gt=!1,Ps=0,md.current=null,u===null||u.return===null){Bt=1,Rr=a,yt=null;break}e:{var g=i,I=u.return,D=u,P=a;if(a=Jt,D.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var K=P,ae=D,le=ae.tag;if(!(ae.mode&1)&&(le===0||le===11||le===15)){var te=ae.alternate;te?(ae.updateQueue=te.updateQueue,ae.memoizedState=te.memoizedState,ae.lanes=te.lanes):(ae.updateQueue=null,ae.memoizedState=null)}var Ce=gh(I);if(Ce!==null){Ce.flags&=-257,yh(Ce,I,D,g,a),Ce.mode&1&&vh(g,K,a),a=Ce,P=K;var Oe=a.updateQueue;if(Oe===null){var Ee=new Set;Ee.add(P),a.updateQueue=Ee}else Oe.add(P);break e}else{if(!(a&1)){vh(g,K,a),kd();break e}P=Error(v(426))}}else if(Lt&&D.mode&1){var qt=gh(I);if(qt!==null){!(qt.flags&65536)&&(qt.flags|=256),yh(qt,I,D,g,a),ll(Co(P,D));break e}}g=P=Co(P,D),Bt!==4&&(Bt=2),ya===null?ya=[g]:ya.push(g),g=I;do{switch(g.tag){case 3:g.flags|=65536,a&=-a,g.lanes|=a;var W=mh(g,P,a);Os(g,W);break e;case 1:D=P;var V=g.type,G=g.stateNode;if(!(g.flags&128)&&(typeof V.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(_i===null||!_i.has(G)))){g.flags|=65536,a&=-a,g.lanes|=a;var he=ad(g,D,a);Os(g,he);break e}}g=g.return}while(g!==null)}Ks(u)}catch(be){a=be,yt===u&&u!==null&&(yt=u=u.return);continue}break}while(!0)}function zh(){var i=wl.current;return wl.current=_l,i===null?_l:i}function kd(){(Bt===0||Bt===3||Bt===2)&&(Bt=4),jt===null||!(Mi&268435455)&&!(So&268435455)||Fi(jt,Jt)}function Ke(i,a){var u=at;at|=2;var c=zh();(jt!==i||Jt!==a)&&(pi=null,wa(i,a));do try{Il();break}catch(m){Bh(i,m)}while(!0);if(Gc(),at=u,wl.current=c,yt!==null)throw Error(v(261));return jt=null,Jt=0,Bt}function Il(){for(;yt!==null;)wd(yt)}function qs(){for(;yt!==null&&!kf();)wd(yt)}function wd(i){var a=Wh(i.alternate,i,Kn);i.memoizedProps=i.pendingProps,a===null?Ks(i):yt=a,md.current=null}function Ks(i){var a=i;do{var u=a.alternate;if(i=a.return,a.flags&32768){if(u=o_(u,a),u!==null){u.flags&=32767,yt=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Bt=6,yt=null;return}}else if(u=a_(u,a,Kn),u!==null){yt=u;return}if(a=a.sibling,a!==null){yt=a;return}yt=a=i}while(a!==null);Bt===0&&(Bt=5)}function Ui(i,a,u){var c=ct,m=or.transition;try{or.transition=null,ct=1,f_(i,a,u,c)}finally{or.transition=m,ct=c}return null}function f_(i,a,u,c){do bo();while(mi!==null);if(at&6)throw Error(v(327));u=i.finishedWork;var m=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(v(177));i.callbackNode=null,i.callbackPriority=0;var g=u.lanes|u.childLanes;if(Up(i,g),i===jt&&(yt=jt=null,Jt=0),!(u.subtreeFlags&2064)&&!(u.flags&2064)||Ws||(Ws=!0,Gh(Ha,function(){return bo(),null})),g=(u.flags&15990)!==0,u.subtreeFlags&15990||g){g=or.transition,or.transition=null;var I=ct;ct=1;var D=at;at|=4,md.current=null,u_(i,u),Fh(u,i),Bf(tl),Zo=!!Pc,tl=Pc=null,i.current=u,l_(u),fr(),at=D,ct=I,or.transition=g}else i.current=u;if(Ws&&(Ws=!1,mi=i,Gs=m),g=i.pendingLanes,g===0&&(_i=null),ac(u.stateNode),xn(i,Wt()),a!==null)for(c=i.onRecoverableError,u=0;u<a.length;u++)m=a[u],c(m.value,{componentStack:m.stack,digest:m.digest});if(Oo)throw Oo=!1,i=Hs,Hs=null,i;return Gs&1&&i.tag!==0&&bo(),g=i.pendingLanes,g&1?i===tt?Ea++:(Ea=0,tt=i):Ea=0,li(),null}function bo(){if(mi!==null){var i=uc(Gs),a=or.transition,u=ct;try{if(or.transition=null,ct=16>i?16:i,mi===null)var c=!1;else{if(i=mi,mi=null,Gs=0,at&6)throw Error(v(331));var m=at;for(at|=4,Ae=i.current;Ae!==null;){var g=Ae,I=g.child;if(Ae.flags&16){var D=g.deletions;if(D!==null){for(var P=0;P<D.length;P++){var K=D[P];for(Ae=K;Ae!==null;){var ae=Ae;switch(ae.tag){case 0:case 11:case 15:js(8,ae,g)}var le=ae.child;if(le!==null)le.return=ae,Ae=le;else for(;Ae!==null;){ae=Ae;var te=ae.sibling,Ce=ae.return;if(Lh(ae),ae===K){Ae=null;break}if(te!==null){te.return=Ce,Ae=te;break}Ae=Ce}}}var Oe=g.alternate;if(Oe!==null){var Ee=Oe.child;if(Ee!==null){Oe.child=null;do{var qt=Ee.sibling;Ee.sibling=null,Ee=qt}while(Ee!==null)}}Ae=g}}if(g.subtreeFlags&2064&&I!==null)I.return=g,Ae=I;else e:for(;Ae!==null;){if(g=Ae,g.flags&2048)switch(g.tag){case 0:case 11:case 15:js(9,g,g.return)}var W=g.sibling;if(W!==null){W.return=g.return,Ae=W;break e}Ae=g.return}}var V=i.current;for(Ae=V;Ae!==null;){I=Ae;var G=I.child;if(I.subtreeFlags&2064&&G!==null)G.return=I,Ae=G;else e:for(I=V;Ae!==null;){if(D=Ae,D.flags&2048)try{switch(D.tag){case 0:case 11:case 15:El(9,D)}}catch(be){zt(D,D.return,be)}if(D===I){Ae=null;break e}var he=D.sibling;if(he!==null){he.return=D.return,Ae=he;break e}Ae=D.return}}if(at=m,li(),Qn&&typeof Qn.onPostCommitFiberRoot=="function")try{Qn.onPostCommitFiberRoot(Wa,i)}catch{}c=!0}return c}finally{ct=u,or.transition=a}}return!1}function Cd(i,a,u){a=Co(u,a),a=mh(i,a,1),i=Fr(i,a,1),a=Nn(),i!==null&&($a(i,1,a),xn(i,a))}function zt(i,a,u){if(i.tag===3)Cd(i,i,u);else for(;a!==null;){if(a.tag===3){Cd(a,i,u);break}else if(a.tag===1){var c=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(_i===null||!_i.has(c))){i=Co(u,i),i=ad(a,i,1),a=Fr(a,i,1),i=Nn(),a!==null&&($a(a,1,i),xn(a,i));break}}a=a.return}}function Vi(i,a,u){var c=i.pingCache;c!==null&&c.delete(a),a=Nn(),i.pingedLanes|=i.suspendedLanes&u,jt===i&&(Jt&u)===u&&(Bt===4||Bt===3&&(Jt&130023424)===Jt&&500>Wt()-vd?wa(i,0):To|=u),xn(i,a)}function Hh(i,a){a===0&&(i.mode&1?(a=Ga,Ga<<=1,!(Ga&130023424)&&(Ga=4194304)):a=1);var u=Nn();i=nr(i,a),i!==null&&($a(i,a,u),xn(i,u))}function h_(i){var a=i.memoizedState,u=0;a!==null&&(u=a.retryLane),Hh(i,u)}function p_(i,a){var u=0;switch(i.tag){case 13:var c=i.stateNode,m=i.memoizedState;m!==null&&(u=m.retryLane);break;case 19:c=i.stateNode;break;default:throw Error(v(314))}c!==null&&c.delete(a),Hh(i,u)}var Wh;Wh=function(i,a,u){if(i!==null)if(i.memoizedProps!==a.pendingProps||On.current)gt=!0;else{if(!(i.lanes&u)&&!(a.flags&128))return gt=!1,i_(i,a,u);gt=!!(i.flags&131072)}else gt=!1,Lt&&a.flags&1048576&&zc(a,ci,a.index);switch(a.lanes=0,a.tag){case 2:var c=a.type;gl(i,a),i=a.pendingProps;var m=ha(a,fn.current);Eo(a,u),m=Ms(null,a,c,i,m,u);var g=Pi();return a.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Un(c)?(g=!0,gs(a)):g=!1,a.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,bn(a),m.updater=ml,a.stateNode=m,m._reactInternals=a,nd(a,c,i,u),a=sd(null,a,c,!0,g,u)):(a.tag=0,Lt&&g&&ks(a),Xe(null,a,m,u),a=a.child),a;case 16:c=a.elementType;e:{switch(gl(i,a),i=a.pendingProps,m=c._init,c=m(c._payload),a.type=c,m=a.tag=m_(c),i=kr(c,i),m){case 0:a=od(null,a,c,i,u);break e;case 1:a=Ih(null,a,c,i,u);break e;case 11:a=Eh(null,a,c,i,u);break e;case 14:a=kh(null,a,c,kr(c.type,i),u);break e}throw Error(v(306,c,""))}return a;case 0:return c=a.type,m=a.pendingProps,m=a.elementType===c?m:kr(c,m),od(i,a,c,m,u);case 1:return c=a.type,m=a.pendingProps,m=a.elementType===c?m:kr(c,m),Ih(i,a,c,m,u);case 3:e:{if(Sh(a),i===null)throw Error(v(387));c=a.pendingProps,g=a.memoizedState,m=g.element,gr(i,a),wo(a,c,null,u);var I=a.memoizedState;if(c=I.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},a.updateQueue.baseState=g,a.memoizedState=g,a.flags&256){m=Co(Error(v(423)),a),a=Th(i,a,c,u,m);break e}else if(c!==m){m=Co(Error(v(424)),a),a=Th(i,a,c,u,m);break e}else for(jn=si(a.stateNode.containerInfo.firstChild),$n=a,Lt=!0,wn=null,u=Wc(a,null,c,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(po(),c===m){a=fi(i,a,u);break e}Xe(i,a,c,u)}a=a.child}return a;case 5:return cl(a),i===null&&ws(a),c=a.type,m=a.pendingProps,g=i!==null?i.memoizedProps:null,I=m.children,fs(c,m)?I=null:g!==null&&fs(c,g)&&(a.flags|=32),Rh(i,a),Xe(i,a,I,u),a.child;case 6:return i===null&&ws(a),null;case 13:return Ah(i,a,u);case 4:return qc(a,a.stateNode.containerInfo),c=a.pendingProps,i===null?a.child=go(a,null,c,u):Xe(i,a,c,u),a.child;case 11:return c=a.type,m=a.pendingProps,m=a.elementType===c?m:kr(c,m),Eh(i,a,c,m,u);case 7:return Xe(i,a,a.pendingProps,u),a.child;case 8:return Xe(i,a,a.pendingProps.children,u),a.child;case 12:return Xe(i,a,a.pendingProps.children,u),a.child;case 10:e:{if(c=a.type._context,m=a.pendingProps,g=a.memoizedProps,I=m.value,vt(Is,c._currentValue),c._currentValue=I,g!==null)if(kn(g.value,I)){if(g.children===m.children&&!On.current){a=fi(i,a,u);break e}}else for(g=a.child,g!==null&&(g.return=a);g!==null;){var D=g.dependencies;if(D!==null){I=g.child;for(var P=D.firstContext;P!==null;){if(P.context===c){if(g.tag===1){P=qn(-1,u&-u),P.tag=2;var K=g.updateQueue;if(K!==null){K=K.shared;var ae=K.pending;ae===null?P.next=P:(P.next=ae.next,ae.next=P),K.pending=P}}g.lanes|=u,P=g.alternate,P!==null&&(P.lanes|=u),ma(g.return,u,a),D.lanes|=u;break}P=P.next}}else if(g.tag===10)I=g.type===a.type?null:g.child;else if(g.tag===18){if(I=g.return,I===null)throw Error(v(341));I.lanes|=u,D=I.alternate,D!==null&&(D.lanes|=u),ma(I,u,a),I=g.sibling}else I=g.child;if(I!==null)I.return=g;else for(I=g;I!==null;){if(I===a){I=null;break}if(g=I.sibling,g!==null){g.return=I.return,I=g;break}I=I.return}g=I}Xe(i,a,m.children,u),a=a.child}return a;case 9:return m=a.type,c=a.pendingProps.children,Eo(a,u),m=tr(m),c=c(m),a.flags|=1,Xe(i,a,c,u),a.child;case 14:return c=a.type,m=kr(c,a.pendingProps),m=kr(c.type,m),kh(i,a,c,m,u);case 15:return wh(i,a,a.type,a.pendingProps,u);case 17:return c=a.type,m=a.pendingProps,m=a.elementType===c?m:kr(c,m),gl(i,a),a.tag=1,Un(c)?(i=!0,gs(a)):i=!1,Eo(a,u),ph(a,c,m),nd(a,c,m,u),sd(null,a,c,!0,i,u);case 19:return dd(i,a,u);case 22:return Ch(i,a,u)}throw Error(v(156,a.tag))};function Gh(i,a){return Ef(i,a)}function __(i,a,u,c){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ur(i,a,u,c){return new __(i,a,u,c)}function Rd(i){return i=i.prototype,!(!i||!i.isReactComponent)}function m_(i){if(typeof i=="function")return Rd(i)?1:0;if(i!=null){if(i=i.$$typeof,i===lt)return 11;if(i===At)return 14}return 2}function ji(i,a){var u=i.alternate;return u===null?(u=ur(i.tag,a,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=a,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,a=i.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function Sl(i,a,u,c,m,g){var I=2;if(c=i,typeof i=="function")Rd(i)&&(I=1);else if(typeof i=="string")I=5;else e:switch(i){case St:return Ca(u.children,m,g,a);case pt:I=8,m|=8;break;case Tt:return i=ur(12,u,a,m|2),i.elementType=Tt,i.lanes=g,i;case dn:return i=ur(13,u,a,m),i.elementType=dn,i.lanes=g,i;case xt:return i=ur(19,u,a,m),i.elementType=xt,i.lanes=g,i;case _t:return Qs(u,m,g,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Ut:I=10;break e;case cn:I=9;break e;case lt:I=11;break e;case At:I=14;break e;case ht:I=16,c=null;break e}throw Error(v(130,i==null?i:typeof i,""))}return a=ur(I,u,a,m),a.elementType=i,a.type=c,a.lanes=g,a}function Ca(i,a,u,c){return i=ur(7,i,c,a),i.lanes=u,i}function Qs(i,a,u,c){return i=ur(22,i,c,a),i.elementType=_t,i.lanes=u,i.stateNode={isHidden:!1},i}function mn(i,a,u){return i=ur(6,i,null,a),i.lanes=u,i}function Ys(i,a,u){return a=ur(4,i.children!==null?i.children:[],i.key,a),a.lanes=u,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function v_(i,a,u,c,m){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sc(0),this.expirationTimes=sc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sc(0),this.identifierPrefix=c,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function Tl(i,a,u,c,m,g,I,D,P){return i=new v_(i,a,u,D,P),a===1?(a=1,g===!0&&(a|=8)):a=0,g=ur(3,null,null,a),i.current=g,g.stateNode=i,g.memoizedState={element:c,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},bn(g),i}function $h(i,a,u){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Et,key:c==null?null:""+c,children:i,containerInfo:a,implementation:u}}function qh(i){if(!i)return Pr;i=i._reactInternals;e:{if(Zi(i)!==i||i.tag!==1)throw Error(v(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Un(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(v(171))}if(i.tag===1){var u=i.type;if(Un(u))return il(i,u,a)}return a}function Kh(i,a,u,c,m,g,I,D,P){return i=Tl(u,c,!0,i,m,g,I,D,P),i.context=qh(null),u=i.current,c=Nn(),m=Ir(u),g=qn(c,m),g.callback=a??null,Fr(u,g,m),i.current.lanes=m,$a(i,m,c),xn(i,c),i}function Xs(i,a,u,c){var m=a.current,g=Nn(),I=Ir(m);return u=qh(u),a.context===null?a.context=u:a.pendingContext=u,a=qn(g,I),a.payload={element:i},c=c===void 0?null:c,c!==null&&(a.callback=c),i=Fr(m,a,I),i!==null&&(sr(i,m,I,g),ko(i,m,I)),I}function Al(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Qh(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<a?u:a}}function Id(i,a){Qh(i,a),(i=i.alternate)&&Qh(i,a)}var Ol=typeof reportError=="function"?reportError:function(i){console.error(i)};function Br(i){this._internalRoot=i}zr.prototype.render=Br.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(v(409));Xs(i,a,null,null)},zr.prototype.unmount=Br.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;ka(function(){Xs(null,i,null,null)}),a[vr]=null}};function zr(i){this._internalRoot=i}zr.prototype.unstable_scheduleHydration=function(i){if(i){var a=ia();i={blockedOn:null,target:i,priority:a};for(var u=0;u<_r.length&&a!==0&&a<_r[u].priority;u++);_r.splice(u,0,i),u===0&&Of(i)}};function Ra(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Ia(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Zs(){}function g_(i,a,u,c,m){if(m){if(typeof c=="function"){var g=c;c=function(){var K=Al(I);g.call(K)}}var I=Kh(a,c,i,0,null,!1,!1,"",Zs);return i._reactRootContainer=I,i[vr]=I.current,cs(i.nodeType===8?i.parentNode:i),ka(),I}for(;m=i.lastChild;)i.removeChild(m);if(typeof c=="function"){var D=c;c=function(){var K=Al(P);D.call(K)}}var P=Tl(i,0,!1,null,null,!1,!1,"",Zs);return i._reactRootContainer=P,i[vr]=P.current,cs(i.nodeType===8?i.parentNode:i),ka(function(){Xs(a,P,u,c)}),P}function Js(i,a,u,c,m){var g=u._reactRootContainer;if(g){var I=g;if(typeof m=="function"){var D=m;m=function(){var P=Al(I);D.call(P)}}Xs(a,I,i,m)}else I=g_(u,a,i,m,c);return Al(I)}Pu=function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var u=ta(a.pendingLanes);u!==0&&(qa(a,u|1),xn(a,Wt()),!(at&6)&&(Ao=Wt()+500,li()))}break;case 13:ka(function(){var c=nr(i,1);if(c!==null){var m=Nn();sr(c,i,1,m)}}),Id(i,1)}},lc=function(i){if(i.tag===13){var a=nr(i,134217728);if(a!==null){var u=Nn();sr(a,i,134217728,u)}Id(i,134217728)}},cc=function(i){if(i.tag===13){var a=Ir(i),u=nr(i,a);if(u!==null){var c=Nn();sr(u,i,a,c)}Id(i,a)}},ia=function(){return ct},If=function(i,a){var u=ct;try{return ct=i,a()}finally{ct=u}},tc=function(i,a,u){switch(a){case"input":if(Zl(i,u),a=u.name,u.type==="radio"&&a!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<u.length;a++){var c=u[a];if(c!==i&&c.form===i.form){var m=vs(c);if(!m)throw Error(v(90));$o(c),Zl(c,m)}}}break;case"textarea":lf(i,u);break;case"select":a=u.value,a!=null&&Ei(i,!!u.multiple,a,!1)}},vf=yd,gf=ka;var Yh={usingClientEntryPoint:!1,Events:[ms,fo,vs,_f,mf,yd]},Sa={findFiberByHostInstance:Ai,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},y_={bundleType:Sa.bundleType,version:Sa.version,rendererPackageName:Sa.rendererPackageName,rendererConfig:Sa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$e.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Ba(i),i===null?null:i.stateNode},findFiberByHostInstance:Sa.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eu.isDisabled&&eu.supportsFiber)try{Wa=eu.inject(y_),Qn=eu}catch{}}return dr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yh,dr.createPortal=function(i,a){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ra(a))throw Error(v(200));return $h(i,a,null,u)},dr.createRoot=function(i,a){if(!Ra(i))throw Error(v(299));var u=!1,c="",m=Ol;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onRecoverableError!==void 0&&(m=a.onRecoverableError)),a=Tl(i,1,!1,null,null,u,!1,c,m),i[vr]=a.current,cs(i.nodeType===8?i.parentNode:i),new Br(a)},dr.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(v(188)):(i=Object.keys(i).join(","),Error(v(268,i)));return i=Ba(a),i=i===null?null:i.stateNode,i},dr.flushSync=function(i){return ka(i)},dr.hydrate=function(i,a,u){if(!Ia(a))throw Error(v(200));return Js(null,i,a,!0,u)},dr.hydrateRoot=function(i,a,u){if(!Ra(i))throw Error(v(405));var c=u!=null&&u.hydratedSources||null,m=!1,g="",I=Ol;if(u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onRecoverableError!==void 0&&(I=u.onRecoverableError)),a=Kh(a,null,i,1,u??null,m,!1,g,I),i[vr]=a.current,cs(i),c)for(i=0;i<c.length;i++)u=c[i],m=u._getVersion,m=m(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,m]:a.mutableSourceEagerHydrationData.push(u,m);return new zr(a)},dr.render=function(i,a,u){if(!Ia(a))throw Error(v(200));return Js(null,i,a,!1,u)},dr.unmountComponentAtNode=function(i){if(!Ia(i))throw Error(v(40));return i._reactRootContainer?(ka(function(){Js(null,null,i,!1,function(){i._reactRootContainer=null,i[vr]=null})}),!0):!1},dr.unstable_batchedUpdates=yd,dr.unstable_renderSubtreeIntoContainer=function(i,a,u,c){if(!Ia(u))throw Error(v(200));if(i==null||i._reactInternals===void 0)throw Error(v(38));return Js(i,a,u,!1,c)},dr.version="18.3.1-next-f1338f8080-20240426",dr}var Ly;function $0(){if(Ly)return vm.exports;Ly=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(p){console.error(p)}}return d(),vm.exports=G0(),vm.exports}var Py;function q0(){if(Py)return kp;Py=1;var d=$0();return kp.createRoot=d.createRoot,kp.hydrateRoot=d.hydrateRoot,kp}var K0=q0();const Q0="modulepreload",Y0=function(d){return"/"+d},My={},Yt=function(p,v,C){let R=Promise.resolve();if(v&&v.length>0){document.getElementsByTagName("link");const O=document.querySelector("meta[property=csp-nonce]"),L=(O==null?void 0:O.nonce)||(O==null?void 0:O.getAttribute("nonce"));R=Promise.allSettled(v.map(M=>{if(M=Y0(M),M in My)return;My[M]=!0;const z=M.endsWith(".css"),Q=z?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${M}"]${Q}`))return;const X=document.createElement("link");if(X.rel=z?"stylesheet":Q0,z||(X.as="script"),X.crossOrigin="",X.href=M,L&&X.setAttribute("nonce",L),document.head.appendChild(X),z)return new Promise((ne,ue)=>{X.addEventListener("load",ne),X.addEventListener("error",()=>ue(new Error(`Unable to preload CSS for ${M}`)))})}))}function S(O){const L=new Event("vite:preloadError",{cancelable:!0});if(L.payload=O,window.dispatchEvent(L),!L.defaultPrevented)throw O}return R.then(O=>{for(const L of O||[])L.status==="rejected"&&S(L.reason);return p().catch(S)})};function X0(d={}){const{immediate:p=!1,onNeedRefresh:v,onOfflineReady:C,onRegistered:R,onRegisteredSW:S,onRegisterError:O}=d;let L,M;const z=async(X=!0)=>{await M};async function Q(){if("serviceWorker"in navigator){if(L=await Yt(async()=>{const{Workbox:X}=await import("./workbox-window.prod.es5-DL_hIMXg.js");return{Workbox:X}},[]).then(({Workbox:X})=>new X("/sw.js",{scope:"/",type:"classic"})).catch(X=>{O==null||O(X)}),!L)return;L.addEventListener("activated",X=>{(X.isUpdate||X.isExternal)&&window.location.reload()}),L.addEventListener("installed",X=>{X.isUpdate||C==null||C()}),L.register({immediate:p}).then(X=>{S?S("/sw.js",X):R==null||R(X)}).catch(X=>{O==null||O(X)})}}return M=Q(),z}var q=zm();const Q1=dE(q);var Xd={},Fy;function Z0(){if(Fy)return Xd;Fy=1,Object.defineProperty(Xd,"__esModule",{value:!0}),Xd.parse=O,Xd.serialize=z;const d=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,p=/^[\u0021-\u003A\u003C-\u007E]*$/,v=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,C=/^[\u0020-\u003A\u003D-\u007E]*$/,R=Object.prototype.toString,S=(()=>{const ne=function(){};return ne.prototype=Object.create(null),ne})();function O(ne,ue){const de=new S,ye=ne.length;if(ye<2)return de;const oe=(ue==null?void 0:ue.decode)||Q;let _e=0;do{const we=ne.indexOf("=",_e);if(we===-1)break;const Te=ne.indexOf(";",_e),$e=Te===-1?ye:Te;if(we>$e){_e=ne.lastIndexOf(";",we-1)+1;continue}const Me=L(ne,_e,we),Et=M(ne,we,Me),St=ne.slice(Me,Et);if(de[St]===void 0){let pt=L(ne,we+1,$e),Tt=M(ne,$e,pt);const Ut=oe(ne.slice(pt,Tt));de[St]=Ut}_e=$e+1}while(_e<ye);return de}function L(ne,ue,de){do{const ye=ne.charCodeAt(ue);if(ye!==32&&ye!==9)return ue}while(++ue<de);return de}function M(ne,ue,de){for(;ue>de;){const ye=ne.charCodeAt(--ue);if(ye!==32&&ye!==9)return ue+1}return de}function z(ne,ue,de){const ye=(de==null?void 0:de.encode)||encodeURIComponent;if(!d.test(ne))throw new TypeError(`argument name is invalid: ${ne}`);const oe=ye(ue);if(!p.test(oe))throw new TypeError(`argument val is invalid: ${ue}`);let _e=ne+"="+oe;if(!de)return _e;if(de.maxAge!==void 0){if(!Number.isInteger(de.maxAge))throw new TypeError(`option maxAge is invalid: ${de.maxAge}`);_e+="; Max-Age="+de.maxAge}if(de.domain){if(!v.test(de.domain))throw new TypeError(`option domain is invalid: ${de.domain}`);_e+="; Domain="+de.domain}if(de.path){if(!C.test(de.path))throw new TypeError(`option path is invalid: ${de.path}`);_e+="; Path="+de.path}if(de.expires){if(!X(de.expires)||!Number.isFinite(de.expires.valueOf()))throw new TypeError(`option expires is invalid: ${de.expires}`);_e+="; Expires="+de.expires.toUTCString()}if(de.httpOnly&&(_e+="; HttpOnly"),de.secure&&(_e+="; Secure"),de.partitioned&&(_e+="; Partitioned"),de.priority)switch(typeof de.priority=="string"?de.priority.toLowerCase():void 0){case"low":_e+="; Priority=Low";break;case"medium":_e+="; Priority=Medium";break;case"high":_e+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${de.priority}`)}if(de.sameSite)switch(typeof de.sameSite=="string"?de.sameSite.toLowerCase():de.sameSite){case!0:case"strict":_e+="; SameSite=Strict";break;case"lax":_e+="; SameSite=Lax";break;case"none":_e+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${de.sameSite}`)}return _e}function Q(ne){if(ne.indexOf("%")===-1)return ne;try{return decodeURIComponent(ne)}catch{return ne}}function X(ne){return R.call(ne)==="[object Date]"}return Xd}Z0();/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Uy="popstate";function J0(d={}){function p(C,R){let{pathname:S,search:O,hash:L}=C.location;return xm("",{pathname:S,search:O,hash:L},R.state&&R.state.usr||null,R.state&&R.state.key||"default")}function v(C,R){return typeof R=="string"?R:Jd(R)}return tR(p,v,null,d)}function Qt(d,p){if(d===!1||d===null||typeof d>"u")throw new Error(p)}function Ki(d,p){if(!d){typeof console<"u"&&console.warn(p);try{throw new Error(p)}catch{}}}function eR(){return Math.random().toString(36).substring(2,10)}function Vy(d,p){return{usr:d.state,key:d.key,idx:p}}function xm(d,p,v=null,C){return{pathname:typeof d=="string"?d:d.pathname,search:"",hash:"",...typeof p=="string"?Ql(p):p,state:v,key:p&&p.key||C||eR()}}function Jd({pathname:d="/",search:p="",hash:v=""}){return p&&p!=="?"&&(d+=p.charAt(0)==="?"?p:"?"+p),v&&v!=="#"&&(d+=v.charAt(0)==="#"?v:"#"+v),d}function Ql(d){let p={};if(d){let v=d.indexOf("#");v>=0&&(p.hash=d.substring(v),d=d.substring(0,v));let C=d.indexOf("?");C>=0&&(p.search=d.substring(C),d=d.substring(0,C)),d&&(p.pathname=d)}return p}function tR(d,p,v,C={}){let{window:R=document.defaultView,v5Compat:S=!1}=C,O=R.history,L="POP",M=null,z=Q();z==null&&(z=0,O.replaceState({...O.state,idx:z},""));function Q(){return(O.state||{idx:null}).idx}function X(){L="POP";let oe=Q(),_e=oe==null?null:oe-z;z=oe,M&&M({action:L,location:ye.location,delta:_e})}function ne(oe,_e){L="PUSH";let we=xm(ye.location,oe,_e);z=Q()+1;let Te=Vy(we,z),$e=ye.createHref(we);try{O.pushState(Te,"",$e)}catch(Me){if(Me instanceof DOMException&&Me.name==="DataCloneError")throw Me;R.location.assign($e)}S&&M&&M({action:L,location:ye.location,delta:1})}function ue(oe,_e){L="REPLACE";let we=xm(ye.location,oe,_e);z=Q();let Te=Vy(we,z),$e=ye.createHref(we);O.replaceState(Te,"",$e),S&&M&&M({action:L,location:ye.location,delta:0})}function de(oe){let _e=R.location.origin!=="null"?R.location.origin:R.location.href,we=typeof oe=="string"?oe:Jd(oe);return we=we.replace(/ $/,"%20"),Qt(_e,`No window.location.(origin|href) available to create URL for href: ${we}`),new URL(we,_e)}let ye={get action(){return L},get location(){return d(R,O)},listen(oe){if(M)throw new Error("A history only accepts one active listener");return R.addEventListener(Uy,X),M=oe,()=>{R.removeEventListener(Uy,X),M=null}},createHref(oe){return p(R,oe)},createURL:de,encodeLocation(oe){let _e=de(oe);return{pathname:_e.pathname,search:_e.search,hash:_e.hash}},push:ne,replace:ue,go(oe){return O.go(oe)}};return ye}function fE(d,p,v="/"){return nR(d,p,v,!1)}function nR(d,p,v,C){let R=typeof p=="string"?Ql(p):p,S=Ho(R.pathname||"/",v);if(S==null)return null;let O=hE(d);rR(O);let L=null;for(let M=0;L==null&&M<O.length;++M){let z=pR(S);L=fR(O[M],z,C)}return L}function hE(d,p=[],v=[],C=""){let R=(S,O,L)=>{let M={relativePath:L===void 0?S.path||"":L,caseSensitive:S.caseSensitive===!0,childrenIndex:O,route:S};M.relativePath.startsWith("/")&&(Qt(M.relativePath.startsWith(C),`Absolute route path "${M.relativePath}" nested under path "${C}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),M.relativePath=M.relativePath.slice(C.length));let z=Da([C,M.relativePath]),Q=v.concat(M);S.children&&S.children.length>0&&(Qt(S.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${z}".`),hE(S.children,p,Q,z)),!(S.path==null&&!S.index)&&p.push({path:z,score:cR(z,S.index),routesMeta:Q})};return d.forEach((S,O)=>{var L;if(S.path===""||!((L=S.path)!=null&&L.includes("?")))R(S,O);else for(let M of pE(S.path))R(S,O,M)}),p}function pE(d){let p=d.split("/");if(p.length===0)return[];let[v,...C]=p,R=v.endsWith("?"),S=v.replace(/\?$/,"");if(C.length===0)return R?[S,""]:[S];let O=pE(C.join("/")),L=[];return L.push(...O.map(M=>M===""?S:[S,M].join("/"))),R&&L.push(...O),L.map(M=>d.startsWith("/")&&M===""?"/":M)}function rR(d){d.sort((p,v)=>p.score!==v.score?v.score-p.score:dR(p.routesMeta.map(C=>C.childrenIndex),v.routesMeta.map(C=>C.childrenIndex)))}var iR=/^:[\w-]+$/,aR=3,oR=2,sR=1,uR=10,lR=-2,jy=d=>d==="*";function cR(d,p){let v=d.split("/"),C=v.length;return v.some(jy)&&(C+=lR),p&&(C+=oR),v.filter(R=>!jy(R)).reduce((R,S)=>R+(iR.test(S)?aR:S===""?sR:uR),C)}function dR(d,p){return d.length===p.length&&d.slice(0,-1).every((C,R)=>C===p[R])?d[d.length-1]-p[p.length-1]:0}function fR(d,p,v=!1){let{routesMeta:C}=d,R={},S="/",O=[];for(let L=0;L<C.length;++L){let M=C[L],z=L===C.length-1,Q=S==="/"?p:p.slice(S.length)||"/",X=Tp({path:M.relativePath,caseSensitive:M.caseSensitive,end:z},Q),ne=M.route;if(!X&&z&&v&&!C[C.length-1].route.index&&(X=Tp({path:M.relativePath,caseSensitive:M.caseSensitive,end:!1},Q)),!X)return null;Object.assign(R,X.params),O.push({params:R,pathname:Da([S,X.pathname]),pathnameBase:gR(Da([S,X.pathnameBase])),route:ne}),X.pathnameBase!=="/"&&(S=Da([S,X.pathnameBase]))}return O}function Tp(d,p){typeof d=="string"&&(d={path:d,caseSensitive:!1,end:!0});let[v,C]=hR(d.path,d.caseSensitive,d.end),R=p.match(v);if(!R)return null;let S=R[0],O=S.replace(/(.)\/+$/,"$1"),L=R.slice(1);return{params:C.reduce((z,{paramName:Q,isOptional:X},ne)=>{if(Q==="*"){let de=L[ne]||"";O=S.slice(0,S.length-de.length).replace(/(.)\/+$/,"$1")}const ue=L[ne];return X&&!ue?z[Q]=void 0:z[Q]=(ue||"").replace(/%2F/g,"/"),z},{}),pathname:S,pathnameBase:O,pattern:d}}function hR(d,p=!1,v=!0){Ki(d==="*"||!d.endsWith("*")||d.endsWith("/*"),`Route path "${d}" will be treated as if it were "${d.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${d.replace(/\*$/,"/*")}".`);let C=[],R="^"+d.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(O,L,M)=>(C.push({paramName:L,isOptional:M!=null}),M?"/?([^\\/]+)?":"/([^\\/]+)"));return d.endsWith("*")?(C.push({paramName:"*"}),R+=d==="*"||d==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):v?R+="\\/*$":d!==""&&d!=="/"&&(R+="(?:(?=\\/|$))"),[new RegExp(R,p?void 0:"i"),C]}function pR(d){try{return d.split("/").map(p=>decodeURIComponent(p).replace(/\//g,"%2F")).join("/")}catch(p){return Ki(!1,`The URL path "${d}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${p}).`),d}}function Ho(d,p){if(p==="/")return d;if(!d.toLowerCase().startsWith(p.toLowerCase()))return null;let v=p.endsWith("/")?p.length-1:p.length,C=d.charAt(v);return C&&C!=="/"?null:d.slice(v)||"/"}function _R(d,p="/"){let{pathname:v,search:C="",hash:R=""}=typeof d=="string"?Ql(d):d;return{pathname:v?v.startsWith("/")?v:mR(v,p):p,search:yR(C),hash:ER(R)}}function mR(d,p){let v=p.replace(/\/+$/,"").split("/");return d.split("/").forEach(R=>{R===".."?v.length>1&&v.pop():R!=="."&&v.push(R)}),v.length>1?v.join("/"):"/"}function Em(d,p,v,C){return`Cannot include a '${d}' character in a manually specified \`to.${p}\` field [${JSON.stringify(C)}].  Please separate it out to the \`to.${v}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function vR(d){return d.filter((p,v)=>v===0||p.route.path&&p.route.path.length>0)}function _E(d){let p=vR(d);return p.map((v,C)=>C===p.length-1?v.pathname:v.pathnameBase)}function mE(d,p,v,C=!1){let R;typeof d=="string"?R=Ql(d):(R={...d},Qt(!R.pathname||!R.pathname.includes("?"),Em("?","pathname","search",R)),Qt(!R.pathname||!R.pathname.includes("#"),Em("#","pathname","hash",R)),Qt(!R.search||!R.search.includes("#"),Em("#","search","hash",R)));let S=d===""||R.pathname==="",O=S?"/":R.pathname,L;if(O==null)L=v;else{let X=p.length-1;if(!C&&O.startsWith("..")){let ne=O.split("/");for(;ne[0]==="..";)ne.shift(),X-=1;R.pathname=ne.join("/")}L=X>=0?p[X]:"/"}let M=_R(R,L),z=O&&O!=="/"&&O.endsWith("/"),Q=(S||O===".")&&v.endsWith("/");return!M.pathname.endsWith("/")&&(z||Q)&&(M.pathname+="/"),M}var Da=d=>d.join("/").replace(/\/\/+/g,"/"),gR=d=>d.replace(/\/+$/,"").replace(/^\/*/,"/"),yR=d=>!d||d==="?"?"":d.startsWith("?")?d:"?"+d,ER=d=>!d||d==="#"?"":d.startsWith("#")?d:"#"+d;function kR(d){return d!=null&&typeof d.status=="number"&&typeof d.statusText=="string"&&typeof d.internal=="boolean"&&"data"in d}var vE=["POST","PUT","PATCH","DELETE"];new Set(vE);var wR=["GET",...vE];new Set(wR);var Yl=q.createContext(null);Yl.displayName="DataRouter";var bp=q.createContext(null);bp.displayName="DataRouterState";var gE=q.createContext({isTransitioning:!1});gE.displayName="ViewTransition";var CR=q.createContext(new Map);CR.displayName="Fetchers";var RR=q.createContext(null);RR.displayName="Await";var Qi=q.createContext(null);Qi.displayName="Navigation";var rf=q.createContext(null);rf.displayName="Location";var Yi=q.createContext({outlet:null,matches:[],isDataRoute:!1});Yi.displayName="Route";var Hm=q.createContext(null);Hm.displayName="RouteError";function IR(d,{relative:p}={}){Qt(af(),"useHref() may be used only in the context of a <Router> component.");let{basename:v,navigator:C}=q.useContext(Qi),{hash:R,pathname:S,search:O}=of(d,{relative:p}),L=S;return v!=="/"&&(L=S==="/"?v:Da([v,S])),C.createHref({pathname:L,search:O,hash:R})}function af(){return q.useContext(rf)!=null}function Go(){return Qt(af(),"useLocation() may be used only in the context of a <Router> component."),q.useContext(rf).location}var yE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function EE(d){q.useContext(Qi).static||q.useLayoutEffect(d)}function Wm(){let{isDataRoute:d}=q.useContext(Yi);return d?UR():SR()}function SR(){Qt(af(),"useNavigate() may be used only in the context of a <Router> component.");let d=q.useContext(Yl),{basename:p,navigator:v}=q.useContext(Qi),{matches:C}=q.useContext(Yi),{pathname:R}=Go(),S=JSON.stringify(_E(C)),O=q.useRef(!1);return EE(()=>{O.current=!0}),q.useCallback((M,z={})=>{if(Ki(O.current,yE),!O.current)return;if(typeof M=="number"){v.go(M);return}let Q=mE(M,JSON.parse(S),R,z.relative==="path");d==null&&p!=="/"&&(Q.pathname=Q.pathname==="/"?p:Da([p,Q.pathname])),(z.replace?v.replace:v.push)(Q,z.state,z)},[p,v,S,R,d])}q.createContext(null);function Y1(){let{matches:d}=q.useContext(Yi),p=d[d.length-1];return p?p.params:{}}function of(d,{relative:p}={}){let{matches:v}=q.useContext(Yi),{pathname:C}=Go(),R=JSON.stringify(_E(v));return q.useMemo(()=>mE(d,JSON.parse(R),C,p==="path"),[d,R,C,p])}function TR(d,p){return kE(d,p)}function kE(d,p,v,C){var we;Qt(af(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:R,static:S}=q.useContext(Qi),{matches:O}=q.useContext(Yi),L=O[O.length-1],M=L?L.params:{},z=L?L.pathname:"/",Q=L?L.pathnameBase:"/",X=L&&L.route;{let Te=X&&X.path||"";wE(z,!X||Te.endsWith("*")||Te.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${z}" (under <Route path="${Te}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Te}"> to <Route path="${Te==="/"?"*":`${Te}/*`}">.`)}let ne=Go(),ue;if(p){let Te=typeof p=="string"?Ql(p):p;Qt(Q==="/"||((we=Te.pathname)==null?void 0:we.startsWith(Q)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${Q}" but pathname "${Te.pathname}" was given in the \`location\` prop.`),ue=Te}else ue=ne;let de=ue.pathname||"/",ye=de;if(Q!=="/"){let Te=Q.replace(/^\//,"").split("/");ye="/"+de.replace(/^\//,"").split("/").slice(Te.length).join("/")}let oe=!S&&v&&v.matches&&v.matches.length>0?v.matches:fE(d,{pathname:ye});Ki(X||oe!=null,`No routes matched location "${ue.pathname}${ue.search}${ue.hash}" `),Ki(oe==null||oe[oe.length-1].route.element!==void 0||oe[oe.length-1].route.Component!==void 0||oe[oe.length-1].route.lazy!==void 0,`Matched leaf route at location "${ue.pathname}${ue.search}${ue.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _e=NR(oe&&oe.map(Te=>Object.assign({},Te,{params:Object.assign({},M,Te.params),pathname:Da([Q,R.encodeLocation?R.encodeLocation(Te.pathname).pathname:Te.pathname]),pathnameBase:Te.pathnameBase==="/"?Q:Da([Q,R.encodeLocation?R.encodeLocation(Te.pathnameBase).pathname:Te.pathnameBase])})),O,v,C);return p&&_e?q.createElement(rf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...ue},navigationType:"POP"}},_e):_e}function AR(){let d=FR(),p=kR(d)?`${d.status} ${d.statusText}`:d instanceof Error?d.message:JSON.stringify(d),v=d instanceof Error?d.stack:null,C="rgba(200,200,200, 0.5)",R={padding:"0.5rem",backgroundColor:C},S={padding:"2px 4px",backgroundColor:C},O=null;return console.error("Error handled by React Router default ErrorBoundary:",d),O=q.createElement(q.Fragment,null,q.createElement("p",null,"💿 Hey developer 👋"),q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",q.createElement("code",{style:S},"ErrorBoundary")," or"," ",q.createElement("code",{style:S},"errorElement")," prop on your route.")),q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},p),v?q.createElement("pre",{style:R},v):null,O)}var OR=q.createElement(AR,null),bR=class extends q.Component{constructor(d){super(d),this.state={location:d.location,revalidation:d.revalidation,error:d.error}}static getDerivedStateFromError(d){return{error:d}}static getDerivedStateFromProps(d,p){return p.location!==d.location||p.revalidation!=="idle"&&d.revalidation==="idle"?{error:d.error,location:d.location,revalidation:d.revalidation}:{error:d.error!==void 0?d.error:p.error,location:p.location,revalidation:d.revalidation||p.revalidation}}componentDidCatch(d,p){console.error("React Router caught the following error during render",d,p)}render(){return this.state.error!==void 0?q.createElement(Yi.Provider,{value:this.props.routeContext},q.createElement(Hm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function DR({routeContext:d,match:p,children:v}){let C=q.useContext(Yl);return C&&C.static&&C.staticContext&&(p.route.errorElement||p.route.ErrorBoundary)&&(C.staticContext._deepestRenderedBoundaryId=p.route.id),q.createElement(Yi.Provider,{value:d},v)}function NR(d,p=[],v=null,C=null){if(d==null){if(!v)return null;if(v.errors)d=v.matches;else if(p.length===0&&!v.initialized&&v.matches.length>0)d=v.matches;else return null}let R=d,S=v==null?void 0:v.errors;if(S!=null){let M=R.findIndex(z=>z.route.id&&(S==null?void 0:S[z.route.id])!==void 0);Qt(M>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(S).join(",")}`),R=R.slice(0,Math.min(R.length,M+1))}let O=!1,L=-1;if(v)for(let M=0;M<R.length;M++){let z=R[M];if((z.route.HydrateFallback||z.route.hydrateFallbackElement)&&(L=M),z.route.id){let{loaderData:Q,errors:X}=v,ne=z.route.loader&&!Q.hasOwnProperty(z.route.id)&&(!X||X[z.route.id]===void 0);if(z.route.lazy||ne){O=!0,L>=0?R=R.slice(0,L+1):R=[R[0]];break}}}return R.reduceRight((M,z,Q)=>{let X,ne=!1,ue=null,de=null;v&&(X=S&&z.route.id?S[z.route.id]:void 0,ue=z.route.errorElement||OR,O&&(L<0&&Q===0?(wE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),ne=!0,de=null):L===Q&&(ne=!0,de=z.route.hydrateFallbackElement||null)));let ye=p.concat(R.slice(0,Q+1)),oe=()=>{let _e;return X?_e=ue:ne?_e=de:z.route.Component?_e=q.createElement(z.route.Component,null):z.route.element?_e=z.route.element:_e=M,q.createElement(DR,{match:z,routeContext:{outlet:M,matches:ye,isDataRoute:v!=null},children:_e})};return v&&(z.route.ErrorBoundary||z.route.errorElement||Q===0)?q.createElement(bR,{location:v.location,revalidation:v.revalidation,component:ue,error:X,children:oe(),routeContext:{outlet:null,matches:ye,isDataRoute:!0}}):oe()},null)}function Gm(d){return`${d} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xR(d){let p=q.useContext(Yl);return Qt(p,Gm(d)),p}function LR(d){let p=q.useContext(bp);return Qt(p,Gm(d)),p}function PR(d){let p=q.useContext(Yi);return Qt(p,Gm(d)),p}function $m(d){let p=PR(d),v=p.matches[p.matches.length-1];return Qt(v.route.id,`${d} can only be used on routes that contain a unique "id"`),v.route.id}function MR(){return $m("useRouteId")}function FR(){var C;let d=q.useContext(Hm),p=LR("useRouteError"),v=$m("useRouteError");return d!==void 0?d:(C=p.errors)==null?void 0:C[v]}function UR(){let{router:d}=xR("useNavigate"),p=$m("useNavigate"),v=q.useRef(!1);return EE(()=>{v.current=!0}),q.useCallback(async(R,S={})=>{Ki(v.current,yE),v.current&&(typeof R=="number"?d.navigate(R):await d.navigate(R,{fromRouteId:p,...S}))},[d,p])}var By={};function wE(d,p,v){!p&&!By[d]&&(By[d]=!0,Ki(!1,v))}q.memo(VR);function VR({routes:d,future:p,state:v}){return kE(d,void 0,v,p)}function Ft(d){Qt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function jR({basename:d="/",children:p=null,location:v,navigationType:C="POP",navigator:R,static:S=!1}){Qt(!af(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let O=d.replace(/^\/*/,"/"),L=q.useMemo(()=>({basename:O,navigator:R,static:S,future:{}}),[O,R,S]);typeof v=="string"&&(v=Ql(v));let{pathname:M="/",search:z="",hash:Q="",state:X=null,key:ne="default"}=v,ue=q.useMemo(()=>{let de=Ho(M,O);return de==null?null:{location:{pathname:de,search:z,hash:Q,state:X,key:ne},navigationType:C}},[O,M,z,Q,X,ne,C]);return Ki(ue!=null,`<Router basename="${O}"> is not able to match the URL "${M}${z}${Q}" because it does not start with the basename, so the <Router> won't render anything.`),ue==null?null:q.createElement(Qi.Provider,{value:L},q.createElement(rf.Provider,{children:p,value:ue}))}function BR({children:d,location:p}){return TR(Lm(d),p)}function Lm(d,p=[]){let v=[];return q.Children.forEach(d,(C,R)=>{if(!q.isValidElement(C))return;let S=[...p,R];if(C.type===q.Fragment){v.push.apply(v,Lm(C.props.children,S));return}Qt(C.type===Ft,`[${typeof C.type=="string"?C.type:C.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Qt(!C.props.index||!C.props.children,"An index route cannot have child routes.");let O={id:C.props.id||S.join("-"),caseSensitive:C.props.caseSensitive,element:C.props.element,Component:C.props.Component,index:C.props.index,path:C.props.path,loader:C.props.loader,action:C.props.action,hydrateFallbackElement:C.props.hydrateFallbackElement,HydrateFallback:C.props.HydrateFallback,errorElement:C.props.errorElement,ErrorBoundary:C.props.ErrorBoundary,hasErrorBoundary:C.props.hasErrorBoundary===!0||C.props.ErrorBoundary!=null||C.props.errorElement!=null,shouldRevalidate:C.props.shouldRevalidate,handle:C.props.handle,lazy:C.props.lazy};C.props.children&&(O.children=Lm(C.props.children,S)),v.push(O)}),v}var Rp="get",Ip="application/x-www-form-urlencoded";function Dp(d){return d!=null&&typeof d.tagName=="string"}function zR(d){return Dp(d)&&d.tagName.toLowerCase()==="button"}function HR(d){return Dp(d)&&d.tagName.toLowerCase()==="form"}function WR(d){return Dp(d)&&d.tagName.toLowerCase()==="input"}function GR(d){return!!(d.metaKey||d.altKey||d.ctrlKey||d.shiftKey)}function $R(d,p){return d.button===0&&(!p||p==="_self")&&!GR(d)}var wp=null;function qR(){if(wp===null)try{new FormData(document.createElement("form"),0),wp=!1}catch{wp=!0}return wp}var KR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function km(d){return d!=null&&!KR.has(d)?(Ki(!1,`"${d}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ip}"`),null):d}function QR(d,p){let v,C,R,S,O;if(HR(d)){let L=d.getAttribute("action");C=L?Ho(L,p):null,v=d.getAttribute("method")||Rp,R=km(d.getAttribute("enctype"))||Ip,S=new FormData(d)}else if(zR(d)||WR(d)&&(d.type==="submit"||d.type==="image")){let L=d.form;if(L==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let M=d.getAttribute("formaction")||L.getAttribute("action");if(C=M?Ho(M,p):null,v=d.getAttribute("formmethod")||L.getAttribute("method")||Rp,R=km(d.getAttribute("formenctype"))||km(L.getAttribute("enctype"))||Ip,S=new FormData(L,d),!qR()){let{name:z,type:Q,value:X}=d;if(Q==="image"){let ne=z?`${z}.`:"";S.append(`${ne}x`,"0"),S.append(`${ne}y`,"0")}else z&&S.append(z,X)}}else{if(Dp(d))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');v=Rp,C=null,R=Ip,O=d}return S&&R==="text/plain"&&(O=S,S=void 0),{action:C,method:v.toLowerCase(),encType:R,formData:S,body:O}}function qm(d,p){if(d===!1||d===null||typeof d>"u")throw new Error(p)}async function YR(d,p){if(d.id in p)return p[d.id];try{let v=await import(d.module);return p[d.id]=v,v}catch(v){return console.error(`Error loading route module \`${d.module}\`, reloading page...`),console.error(v),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function XR(d){return d==null?!1:d.href==null?d.rel==="preload"&&typeof d.imageSrcSet=="string"&&typeof d.imageSizes=="string":typeof d.rel=="string"&&typeof d.href=="string"}async function ZR(d,p,v){let C=await Promise.all(d.map(async R=>{let S=p.routes[R.route.id];if(S){let O=await YR(S,v);return O.links?O.links():[]}return[]}));return nI(C.flat(1).filter(XR).filter(R=>R.rel==="stylesheet"||R.rel==="preload").map(R=>R.rel==="stylesheet"?{...R,rel:"prefetch",as:"style"}:{...R,rel:"prefetch"}))}function zy(d,p,v,C,R,S){let O=(M,z)=>v[z]?M.route.id!==v[z].route.id:!0,L=(M,z)=>{var Q;return v[z].pathname!==M.pathname||((Q=v[z].route.path)==null?void 0:Q.endsWith("*"))&&v[z].params["*"]!==M.params["*"]};return S==="assets"?p.filter((M,z)=>O(M,z)||L(M,z)):S==="data"?p.filter((M,z)=>{var X;let Q=C.routes[M.route.id];if(!Q||!Q.hasLoader)return!1;if(O(M,z)||L(M,z))return!0;if(M.route.shouldRevalidate){let ne=M.route.shouldRevalidate({currentUrl:new URL(R.pathname+R.search+R.hash,window.origin),currentParams:((X=v[0])==null?void 0:X.params)||{},nextUrl:new URL(d,window.origin),nextParams:M.params,defaultShouldRevalidate:!0});if(typeof ne=="boolean")return ne}return!0}):[]}function JR(d,p){return eI(d.map(v=>{let C=p.routes[v.route.id];if(!C)return[];let R=[C.module];return C.imports&&(R=R.concat(C.imports)),R}).flat(1))}function eI(d){return[...new Set(d)]}function tI(d){let p={},v=Object.keys(d).sort();for(let C of v)p[C]=d[C];return p}function nI(d,p){let v=new Set;return new Set(p),d.reduce((C,R)=>{let S=JSON.stringify(tI(R));return v.has(S)||(v.add(S),C.push({key:S,link:R})),C},[])}function rI(d){let p=typeof d=="string"?new URL(d,typeof window>"u"?"server://singlefetch/":window.location.origin):d;return p.pathname==="/"?p.pathname="_root.data":p.pathname=`${p.pathname.replace(/\/$/,"")}.data`,p}function iI(){let d=q.useContext(Yl);return qm(d,"You must render this element inside a <DataRouterContext.Provider> element"),d}function aI(){let d=q.useContext(bp);return qm(d,"You must render this element inside a <DataRouterStateContext.Provider> element"),d}var Km=q.createContext(void 0);Km.displayName="FrameworkContext";function CE(){let d=q.useContext(Km);return qm(d,"You must render this element inside a <HydratedRouter> element"),d}function oI(d,p){let v=q.useContext(Km),[C,R]=q.useState(!1),[S,O]=q.useState(!1),{onFocus:L,onBlur:M,onMouseEnter:z,onMouseLeave:Q,onTouchStart:X}=p,ne=q.useRef(null);q.useEffect(()=>{if(d==="render"&&O(!0),d==="viewport"){let ye=_e=>{_e.forEach(we=>{O(we.isIntersecting)})},oe=new IntersectionObserver(ye,{threshold:.5});return ne.current&&oe.observe(ne.current),()=>{oe.disconnect()}}},[d]),q.useEffect(()=>{if(C){let ye=setTimeout(()=>{O(!0)},100);return()=>{clearTimeout(ye)}}},[C]);let ue=()=>{R(!0)},de=()=>{R(!1),O(!1)};return v?d!=="intent"?[S,ne,{}]:[S,ne,{onFocus:Zd(L,ue),onBlur:Zd(M,de),onMouseEnter:Zd(z,ue),onMouseLeave:Zd(Q,de),onTouchStart:Zd(X,ue)}]:[!1,ne,{}]}function Zd(d,p){return v=>{d&&d(v),v.defaultPrevented||p(v)}}function sI({page:d,...p}){let{router:v}=iI(),C=q.useMemo(()=>fE(v.routes,d,v.basename),[v.routes,d,v.basename]);return C?q.createElement(lI,{page:d,matches:C,...p}):null}function uI(d){let{manifest:p,routeModules:v}=CE(),[C,R]=q.useState([]);return q.useEffect(()=>{let S=!1;return ZR(d,p,v).then(O=>{S||R(O)}),()=>{S=!0}},[d,p,v]),C}function lI({page:d,matches:p,...v}){let C=Go(),{manifest:R,routeModules:S}=CE(),{loaderData:O,matches:L}=aI(),M=q.useMemo(()=>zy(d,p,L,R,C,"data"),[d,p,L,R,C]),z=q.useMemo(()=>zy(d,p,L,R,C,"assets"),[d,p,L,R,C]),Q=q.useMemo(()=>{if(d===C.pathname+C.search+C.hash)return[];let ue=new Set,de=!1;if(p.forEach(oe=>{var we;let _e=R.routes[oe.route.id];!_e||!_e.hasLoader||(!M.some(Te=>Te.route.id===oe.route.id)&&oe.route.id in O&&((we=S[oe.route.id])!=null&&we.shouldRevalidate)||_e.hasClientLoader?de=!0:ue.add(oe.route.id))}),ue.size===0)return[];let ye=rI(d);return de&&ue.size>0&&ye.searchParams.set("_routes",p.filter(oe=>ue.has(oe.route.id)).map(oe=>oe.route.id).join(",")),[ye.pathname+ye.search]},[O,C,R,M,p,d,S]),X=q.useMemo(()=>JR(z,R),[z,R]),ne=uI(z);return q.createElement(q.Fragment,null,Q.map(ue=>q.createElement("link",{key:ue,rel:"prefetch",as:"fetch",href:ue,...v})),X.map(ue=>q.createElement("link",{key:ue,rel:"modulepreload",href:ue,...v})),ne.map(({key:ue,link:de})=>q.createElement("link",{key:ue,...de})))}function cI(...d){return p=>{d.forEach(v=>{typeof v=="function"?v(p):v!=null&&(v.current=p)})}}var RE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{RE&&(window.__reactRouterVersion="7.1.5")}catch{}function dI({basename:d,children:p,window:v}){let C=q.useRef();C.current==null&&(C.current=J0({window:v,v5Compat:!0}));let R=C.current,[S,O]=q.useState({action:R.action,location:R.location}),L=q.useCallback(M=>{q.startTransition(()=>O(M))},[O]);return q.useLayoutEffect(()=>R.listen(L),[R,L]),q.createElement(jR,{basename:d,children:p,location:S.location,navigationType:S.action,navigator:R})}var IE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,SE=q.forwardRef(function({onClick:p,discover:v="render",prefetch:C="none",relative:R,reloadDocument:S,replace:O,state:L,target:M,to:z,preventScrollReset:Q,viewTransition:X,...ne},ue){let{basename:de}=q.useContext(Qi),ye=typeof z=="string"&&IE.test(z),oe,_e=!1;if(typeof z=="string"&&ye&&(oe=z,RE))try{let Tt=new URL(window.location.href),Ut=z.startsWith("//")?new URL(Tt.protocol+z):new URL(z),cn=Ho(Ut.pathname,de);Ut.origin===Tt.origin&&cn!=null?z=cn+Ut.search+Ut.hash:_e=!0}catch{Ki(!1,`<Link to="${z}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let we=IR(z,{relative:R}),[Te,$e,Me]=oI(C,ne),Et=_I(z,{replace:O,state:L,target:M,preventScrollReset:Q,relative:R,viewTransition:X});function St(Tt){p&&p(Tt),Tt.defaultPrevented||Et(Tt)}let pt=q.createElement("a",{...ne,...Me,href:oe||we,onClick:_e||S?p:St,ref:cI(ue,$e),target:M,"data-discover":!ye&&v==="render"?"true":void 0});return Te&&!ye?q.createElement(q.Fragment,null,pt,q.createElement(sI,{page:we})):pt});SE.displayName="Link";var fI=q.forwardRef(function({"aria-current":p="page",caseSensitive:v=!1,className:C="",end:R=!1,style:S,to:O,viewTransition:L,children:M,...z},Q){let X=of(O,{relative:z.relative}),ne=Go(),ue=q.useContext(bp),{navigator:de,basename:ye}=q.useContext(Qi),oe=ue!=null&&EI(X)&&L===!0,_e=de.encodeLocation?de.encodeLocation(X).pathname:X.pathname,we=ne.pathname,Te=ue&&ue.navigation&&ue.navigation.location?ue.navigation.location.pathname:null;v||(we=we.toLowerCase(),Te=Te?Te.toLowerCase():null,_e=_e.toLowerCase()),Te&&ye&&(Te=Ho(Te,ye)||Te);const $e=_e!=="/"&&_e.endsWith("/")?_e.length-1:_e.length;let Me=we===_e||!R&&we.startsWith(_e)&&we.charAt($e)==="/",Et=Te!=null&&(Te===_e||!R&&Te.startsWith(_e)&&Te.charAt(_e.length)==="/"),St={isActive:Me,isPending:Et,isTransitioning:oe},pt=Me?p:void 0,Tt;typeof C=="function"?Tt=C(St):Tt=[C,Me?"active":null,Et?"pending":null,oe?"transitioning":null].filter(Boolean).join(" ");let Ut=typeof S=="function"?S(St):S;return q.createElement(SE,{...z,"aria-current":pt,className:Tt,ref:Q,style:Ut,to:O,viewTransition:L},typeof M=="function"?M(St):M)});fI.displayName="NavLink";var hI=q.forwardRef(({discover:d="render",fetcherKey:p,navigate:v,reloadDocument:C,replace:R,state:S,method:O=Rp,action:L,onSubmit:M,relative:z,preventScrollReset:Q,viewTransition:X,...ne},ue)=>{let de=gI(),ye=yI(L,{relative:z}),oe=O.toLowerCase()==="get"?"get":"post",_e=typeof L=="string"&&IE.test(L),we=Te=>{if(M&&M(Te),Te.defaultPrevented)return;Te.preventDefault();let $e=Te.nativeEvent.submitter,Me=($e==null?void 0:$e.getAttribute("formmethod"))||O;de($e||Te.currentTarget,{fetcherKey:p,method:Me,navigate:v,replace:R,state:S,relative:z,preventScrollReset:Q,viewTransition:X})};return q.createElement("form",{ref:ue,method:oe,action:ye,onSubmit:C?M:we,...ne,"data-discover":!_e&&d==="render"?"true":void 0})});hI.displayName="Form";function pI(d){return`${d} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function TE(d){let p=q.useContext(Yl);return Qt(p,pI(d)),p}function _I(d,{target:p,replace:v,state:C,preventScrollReset:R,relative:S,viewTransition:O}={}){let L=Wm(),M=Go(),z=of(d,{relative:S});return q.useCallback(Q=>{if($R(Q,p)){Q.preventDefault();let X=v!==void 0?v:Jd(M)===Jd(z);L(d,{replace:X,state:C,preventScrollReset:R,relative:S,viewTransition:O})}},[M,L,z,v,C,p,d,R,S,O])}var mI=0,vI=()=>`__${String(++mI)}__`;function gI(){let{router:d}=TE("useSubmit"),{basename:p}=q.useContext(Qi),v=MR();return q.useCallback(async(C,R={})=>{let{action:S,method:O,encType:L,formData:M,body:z}=QR(C,p);if(R.navigate===!1){let Q=R.fetcherKey||vI();await d.fetch(Q,v,R.action||S,{preventScrollReset:R.preventScrollReset,formData:M,body:z,formMethod:R.method||O,formEncType:R.encType||L,flushSync:R.flushSync})}else await d.navigate(R.action||S,{preventScrollReset:R.preventScrollReset,formData:M,body:z,formMethod:R.method||O,formEncType:R.encType||L,replace:R.replace,state:R.state,fromRouteId:v,flushSync:R.flushSync,viewTransition:R.viewTransition})},[d,p,v])}function yI(d,{relative:p}={}){let{basename:v}=q.useContext(Qi),C=q.useContext(Yi);Qt(C,"useFormAction must be used inside a RouteContext");let[R]=C.matches.slice(-1),S={...of(d||".",{relative:p})},O=Go();if(d==null){S.search=O.search;let L=new URLSearchParams(S.search),M=L.getAll("index");if(M.some(Q=>Q==="")){L.delete("index"),M.filter(X=>X).forEach(X=>L.append("index",X));let Q=L.toString();S.search=Q?`?${Q}`:""}}return(!d||d===".")&&R.route.index&&(S.search=S.search?S.search.replace(/^\?/,"?index&"):"?index"),v!=="/"&&(S.pathname=S.pathname==="/"?v:Da([v,S.pathname])),Jd(S)}function EI(d,p={}){let v=q.useContext(gE);Qt(v!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:C}=TE("useViewTransitionState"),R=of(d,{relative:p.relative});if(!v.isTransitioning)return!1;let S=Ho(v.currentLocation.pathname,C)||v.currentLocation.pathname,O=Ho(v.nextLocation.pathname,C)||v.nextLocation.pathname;return Tp(R.pathname,O)!=null||Tp(R.pathname,S)!=null}new TextEncoder;var Sp={exports:{}},kI=Sp.exports,Hy;function wI(){return Hy||(Hy=1,function(d,p){(function(v,C){d.exports=C()})(kI,function(){var v=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Sy<"u"?Sy:typeof self<"u"?self:{};function C(e,n){return e(n={exports:{}},n.exports),n.exports}var R=function(e){return e&&e.Math==Math&&e},S=R(typeof globalThis=="object"&&globalThis)||R(typeof window=="object"&&window)||R(typeof self=="object"&&self)||R(typeof v=="object"&&v)||function(){return this}()||Function("return this")(),O=function(e){try{return!!e()}catch{return!0}},L=!O(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),M={}.propertyIsEnumerable,z=Object.getOwnPropertyDescriptor,Q={f:z&&!M.call({1:2},1)?function(e){var n=z(this,e);return!!n&&n.enumerable}:M},X=function(e,n){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:n}},ne={}.toString,ue=function(e){return ne.call(e).slice(8,-1)},de="".split,ye=O(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return ue(e)=="String"?de.call(e,""):Object(e)}:Object,oe=function(e){if(e==null)throw TypeError("Can't call method on "+e);return e},_e=function(e){return ye(oe(e))},we=function(e){return typeof e=="object"?e!==null:typeof e=="function"},Te=function(e,n){if(!we(e))return e;var t,r;if(n&&typeof(t=e.toString)=="function"&&!we(r=t.call(e))||typeof(t=e.valueOf)=="function"&&!we(r=t.call(e))||!n&&typeof(t=e.toString)=="function"&&!we(r=t.call(e)))return r;throw TypeError("Can't convert object to primitive value")},$e={}.hasOwnProperty,Me=function(e,n){return $e.call(e,n)},Et=S.document,St=we(Et)&&we(Et.createElement),pt=function(e){return St?Et.createElement(e):{}},Tt=!L&&!O(function(){return Object.defineProperty(pt("div"),"a",{get:function(){return 7}}).a!=7}),Ut=Object.getOwnPropertyDescriptor,cn={f:L?Ut:function(e,n){if(e=_e(e),n=Te(n,!0),Tt)try{return Ut(e,n)}catch{}if(Me(e,n))return X(!Q.f.call(e,n),e[n])}},lt=function(e){if(!we(e))throw TypeError(String(e)+" is not an object");return e},dn=Object.defineProperty,xt={f:L?dn:function(e,n,t){if(lt(e),n=Te(n,!0),lt(t),Tt)try{return dn(e,n,t)}catch{}if("get"in t||"set"in t)throw TypeError("Accessors not supported");return"value"in t&&(e[n]=t.value),e}},At=L?function(e,n,t){return xt.f(e,n,X(1,t))}:function(e,n,t){return e[n]=t,e},ht=function(e,n){try{At(S,e,n)}catch{S[e]=n}return n},_t="__core-js_shared__",ve=S[_t]||ht(_t,{}),je=Function.toString;typeof ve.inspectSource!="function"&&(ve.inspectSource=function(e){return je.call(e)});var Se,B,ie,We=ve.inspectSource,qe=S.WeakMap,st=typeof qe=="function"&&/native code/.test(We(qe)),it=C(function(e){(e.exports=function(n,t){return ve[n]||(ve[n]=t!==void 0?t:{})})("versions",[]).push({version:"3.8.1",mode:"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})}),kt=0,ft=Math.random(),wt=function(e){return"Symbol("+String(e===void 0?"":e)+")_"+(++kt+ft).toString(36)},Mn=it("keys"),La=function(e){return Mn[e]||(Mn[e]=wt(e))},$o={},Su=S.WeakMap;if(st){var yi=ve.state||(ve.state=new Su),sf=yi.get,uf=yi.has,Zl=yi.set;Se=function(e,n){return n.facade=e,Zl.call(yi,e,n),n},B=function(e){return sf.call(yi,e)||{}},ie=function(e){return uf.call(yi,e)}}else{var Pa=La("state");$o[Pa]=!0,Se=function(e,n){return n.facade=e,At(e,Pa,n),n},B=function(e){return Me(e,Pa)?e[Pa]:{}},ie=function(e){return Me(e,Pa)}}var an={set:Se,get:B,has:ie,enforce:function(e){return ie(e)?B(e):Se(e,{})},getterFor:function(e){return function(n){var t;if(!we(n)||(t=B(n)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return t}}},Xt=C(function(e){var n=an.get,t=an.enforce,r=String(String).split("String");(e.exports=function(o,s,l,f){var h,_=!!f&&!!f.unsafe,k=!!f&&!!f.enumerable,E=!!f&&!!f.noTargetGet;typeof l=="function"&&(typeof s!="string"||Me(l,"name")||At(l,"name",s),(h=t(l)).source||(h.source=r.join(typeof s=="string"?s:""))),o!==S?(_?!E&&o[s]&&(k=!0):delete o[s],k?o[s]=l:At(o,s,l)):k?o[s]=l:ht(s,l)})(Function.prototype,"toString",function(){return typeof this=="function"&&n(this).source||We(this)})}),Ei=S,Tu=function(e){return typeof e=="function"?e:void 0},Zr=function(e,n){return arguments.length<2?Tu(Ei[e])||Tu(S[e]):Ei[e]&&Ei[e][n]||S[e]&&S[e][n]},lf=Math.ceil,cf=Math.floor,Jr=function(e){return isNaN(e=+e)?0:(e>0?cf:lf)(e)},Jl=Math.min,En=function(e){return e>0?Jl(Jr(e),9007199254740991):0},df=Math.max,qo=Math.min,ki=function(e,n){var t=Jr(e);return t<0?df(t+n,0):qo(t,n)},ff=function(e){return function(n,t,r){var o,s=_e(n),l=En(s.length),f=ki(r,l);if(e&&t!=t){for(;l>f;)if((o=s[f++])!=o)return!0}else for(;l>f;f++)if((e||f in s)&&s[f]===t)return e||f||0;return!e&&-1}},Au={includes:ff(!0),indexOf:ff(!1)},hf=Au.indexOf,pf=function(e,n){var t,r=_e(e),o=0,s=[];for(t in r)!Me($o,t)&&Me(r,t)&&s.push(t);for(;n.length>o;)Me(r,t=n[o++])&&(~hf(s,t)||s.push(t));return s},Ma=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ec=Ma.concat("length","prototype"),Ou={f:Object.getOwnPropertyNames||function(e){return pf(e,ec)}},bu={f:Object.getOwnPropertySymbols},tc=Zr("Reflect","ownKeys")||function(e){var n=Ou.f(lt(e)),t=bu.f;return t?n.concat(t(e)):n},Fa=function(e,n){for(var t=tc(n),r=xt.f,o=cn.f,s=0;s<t.length;s++){var l=t[s];Me(e,l)||r(e,l,o(n,l))}},Ua=/#|\.prototype\./,Va=function(e,n){var t=mf[_f(e)];return t==gf||t!=vf&&(typeof n=="function"?O(n):!!n)},_f=Va.normalize=function(e){return String(e).replace(Ua,".").toLowerCase()},mf=Va.data={},vf=Va.NATIVE="N",gf=Va.POLYFILL="P",Xi=Va,yf=cn.f,Ye=function(e,n){var t,r,o,s,l,f=e.target,h=e.global,_=e.stat;if(t=h?S:_?S[f]||ht(f,{}):(S[f]||{}).prototype)for(r in n){if(s=n[r],o=e.noTargetGet?(l=yf(t,r))&&l.value:t[r],!Xi(h?r:f+(_?".":"#")+r,e.forced)&&o!==void 0){if(typeof s==typeof o)continue;Fa(s,o)}(e.sham||o&&o.sham)&&At(s,"sham",!0),Xt(t,r,s,e)}},Ar=function(e){if(typeof e!="function")throw TypeError(String(e)+" is not a function");return e},Or=function(e,n,t){if(Ar(e),n===void 0)return e;switch(t){case 0:return function(){return e.call(n)};case 1:return function(r){return e.call(n,r)};case 2:return function(r,o){return e.call(n,r,o)};case 3:return function(r,o,s){return e.call(n,r,o,s)}}return function(){return e.apply(n,arguments)}},ei=function(e){return Object(oe(e))},ti=Array.isArray||function(e){return ue(e)=="Array"},Ko=!!Object.getOwnPropertySymbols&&!O(function(){return!String(Symbol())}),Du=Ko&&!Symbol.sham&&typeof Symbol.iterator=="symbol",ja=it("wks"),Qo=S.Symbol,Mp=Du?Qo:Qo&&Qo.withoutSetter||wt,Ot=function(e){return Me(ja,e)||(Ko&&Me(Qo,e)?ja[e]=Qo[e]:ja[e]=Mp("Symbol."+e)),ja[e]},Zi=Ot("species"),Nu=function(e,n){var t;return ti(e)&&(typeof(t=e.constructor)!="function"||t!==Array&&!ti(t.prototype)?we(t)&&(t=t[Zi])===null&&(t=void 0):t=void 0),new(t===void 0?Array:t)(n===0?0:n)},nc=[].push,wi=function(e){var n=e==1,t=e==2,r=e==3,o=e==4,s=e==6,l=e==7,f=e==5||s;return function(h,_,k,E){for(var y,w,T=ei(h),A=ye(T),H=Or(_,k,3),j=En(A.length),$=0,se=E||Nu,fe=n?se(h,j):t||l?se(h,0):void 0;j>$;$++)if((f||$ in A)&&(w=H(y=A[$],$,T),e))if(n)fe[$]=w;else if(w)switch(e){case 3:return!0;case 5:return y;case 6:return $;case 2:nc.call(fe,y)}else switch(e){case 4:return!1;case 7:nc.call(fe,y)}return s?-1:r||o?o:fe}},Ba={forEach:wi(0),map:wi(1),filter:wi(2),some:wi(3),every:wi(4),find:wi(5),findIndex:wi(6),filterOut:wi(7)},Ji=function(e,n){var t=[][e];return!!t&&O(function(){t.call(null,n||function(){throw 1},1)})},Ef=Object.defineProperty,xu={},kf=function(e){throw e},fr=function(e,n){if(Me(xu,e))return xu[e];n||(n={});var t=[][e],r=!!Me(n,"ACCESSORS")&&n.ACCESSORS,o=Me(n,0)?n[0]:kf,s=Me(n,1)?n[1]:void 0;return xu[e]=!!t&&!O(function(){if(r&&!L)return!0;var l={length:-1};r?Ef(l,1,{enumerable:!0,get:kf}):l[1]=1,t.call(l,o,s)})},Wt=Ba.forEach,Fp=Ji("forEach"),rc=fr("forEach"),za=Fp&&rc?[].forEach:function(e){return Wt(this,e,arguments.length>1?arguments[1]:void 0)};Ye({target:"Array",proto:!0,forced:[].forEach!=za},{forEach:za});var Ha,ea=Object.keys||function(e){return pf(e,Ma)},ic=L?Object.defineProperties:function(e,n){lt(e);for(var t,r=ea(n),o=r.length,s=0;o>s;)xt.f(e,t=r[s++],n[t]);return e},Wa=Zr("document","documentElement"),Qn="prototype",ac="script",Yn=La("IE_PROTO"),oc=function(){},wf=function(e){return"<"+ac+">"+e+"</"+ac+">"},Lu=function(){try{Ha=document.domain&&new ActiveXObject("htmlfile")}catch{}var e,n,t;Lu=Ha?function(o){o.write(wf("")),o.close();var s=o.parentWindow.Object;return o=null,s}(Ha):(n=pt("iframe"),t="java"+ac+":",n.style.display="none",Wa.appendChild(n),n.src=String(t),(e=n.contentWindow.document).open(),e.write(wf("document.F=Object")),e.close(),e.F);for(var r=Ma.length;r--;)delete Lu[Qn][Ma[r]];return Lu()};$o[Yn]=!0;var Ci=Object.create||function(e,n){var t;return e!==null?(oc[Qn]=lt(e),t=new oc,oc[Qn]=null,t[Yn]=e):t=Lu(),n===void 0?t:ic(t,n)},Ga=Ot("unscopables"),ta=Array.prototype;ta[Ga]==null&&xt.f(ta,Ga,{configurable:!0,value:Ci(null)});var ni,Cf,Rf,na=function(e){ta[Ga][e]=!0},ra={},sc=!O(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),$a=La("IE_PROTO"),Up=Object.prototype,qa=sc?Object.getPrototypeOf:function(e){return e=ei(e),Me(e,$a)?e[$a]:typeof e.constructor=="function"&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Up:null},ct=Ot("iterator"),uc=!1;[].keys&&("next"in(Rf=[].keys())?(Cf=qa(qa(Rf)))!==Object.prototype&&(ni=Cf):uc=!0),ni==null&&(ni={}),Me(ni,ct)||At(ni,ct,function(){return this});var Pu={IteratorPrototype:ni,BUGGY_SAFARI_ITERATORS:uc},lc=xt.f,cc=Ot("toStringTag"),ia=function(e,n,t){e&&!Me(e=t?e:e.prototype,cc)&&lc(e,cc,{configurable:!0,value:n})},If=Pu.IteratorPrototype,dc=function(){return this},Yo=function(e,n,t){var r=n+" Iterator";return e.prototype=Ci(If,{next:X(1,t)}),ia(e,r,!1),ra[r]=dc,e},hr=Object.setPrototypeOf||("__proto__"in{}?function(){var e,n=!1,t={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(t,[]),n=t instanceof Array}catch{}return function(r,o){return lt(r),function(s){if(!we(s)&&s!==null)throw TypeError("Can't set "+String(s)+" as a prototype")}(o),n?e.call(r,o):r.__proto__=o,r}}():void 0),br=Pu.IteratorPrototype,pr=Pu.BUGGY_SAFARI_ITERATORS,ri=Ot("iterator"),Ka="keys",_r="values",Sf="entries",Tf=function(){return this},aa=function(e,n,t,r,o,s,l){Yo(t,n,r);var f,h,_,k=function(j){if(j===o&&A)return A;if(!pr&&j in w)return w[j];switch(j){case Ka:case _r:case Sf:return function(){return new t(this,j)}}return function(){return new t(this)}},E=n+" Iterator",y=!1,w=e.prototype,T=w[ri]||w["@@iterator"]||o&&w[o],A=!pr&&T||k(o),H=n=="Array"&&w.entries||T;if(H&&(f=qa(H.call(new e)),br!==Object.prototype&&f.next&&(qa(f)!==br&&(hr?hr(f,br):typeof f[ri]!="function"&&At(f,ri,Tf)),ia(f,E,!0))),o==_r&&T&&T.name!==_r&&(y=!0,A=function(){return T.call(this)}),w[ri]!==A&&At(w,ri,A),ra[n]=A,o)if(h={values:k(_r),keys:s?A:k(Ka),entries:k(Sf)},l)for(_ in h)(pr||y||!(_ in w))&&Xt(w,_,h[_]);else Ye({target:n,proto:!0,forced:pr||y},h);return h},Af="Array Iterator",Of=an.set,Mu=an.getterFor(Af),Qa=aa(Array,"Array",function(e,n){Of(this,{type:Af,target:_e(e),index:0,kind:n})},function(){var e=Mu(this),n=e.target,t=e.kind,r=e.index++;return!n||r>=n.length?(e.target=void 0,{value:void 0,done:!0}):t=="keys"?{value:r,done:!1}:t=="values"?{value:n[r],done:!1}:{value:[r,n[r]],done:!1}},"values");ra.Arguments=ra.Array,na("keys"),na("values"),na("entries");var Vp=!O(function(){return Object.isExtensible(Object.preventExtensions({}))}),Dr=C(function(e){var n=xt.f,t=wt("meta"),r=0,o=Object.isExtensible||function(){return!0},s=function(f){n(f,t,{value:{objectID:"O"+ ++r,weakData:{}}})},l=e.exports={REQUIRED:!1,fastKey:function(f,h){if(!we(f))return typeof f=="symbol"?f:(typeof f=="string"?"S":"P")+f;if(!Me(f,t)){if(!o(f))return"F";if(!h)return"E";s(f)}return f[t].objectID},getWeakData:function(f,h){if(!Me(f,t)){if(!o(f))return!0;if(!h)return!1;s(f)}return f[t].weakData},onFreeze:function(f){return Vp&&l.REQUIRED&&o(f)&&!Me(f,t)&&s(f),f}};$o[t]=!0}),Xo=(Dr.REQUIRED,Dr.fastKey,Dr.getWeakData,Dr.onFreeze,Ot("iterator")),Ya=Array.prototype,Zo=function(e){return e!==void 0&&(ra.Array===e||Ya[Xo]===e)},bf={};bf[Ot("toStringTag")]="z";var fc=String(bf)==="[object z]",hc=Ot("toStringTag"),Fu=ue(function(){return arguments}())=="Arguments",Jo=fc?ue:function(e){var n,t,r;return e===void 0?"Undefined":e===null?"Null":typeof(t=function(o,s){try{return o[s]}catch{}}(n=Object(e),hc))=="string"?t:Fu?ue(n):(r=ue(n))=="Object"&&typeof n.callee=="function"?"Arguments":r},Df=Ot("iterator"),mr=function(e){if(e!=null)return e[Df]||e["@@iterator"]||ra[Jo(e)]},es=function(e){var n=e.return;if(n!==void 0)return lt(n.call(e)).value},Ri=function(e,n){this.stopped=e,this.result=n},ts=function(e,n,t){var r,o,s,l,f,h,_,k=t&&t.that,E=!(!t||!t.AS_ENTRIES),y=!(!t||!t.IS_ITERATOR),w=!(!t||!t.INTERRUPTED),T=Or(n,k,1+E+w),A=function(j){return r&&es(r),new Ri(!0,j)},H=function(j){return E?(lt(j),w?T(j[0],j[1],A):T(j[0],j[1])):w?T(j,A):T(j)};if(y)r=e;else{if(typeof(o=mr(e))!="function")throw TypeError("Target is not iterable");if(Zo(o)){for(s=0,l=En(e.length);l>s;s++)if((f=H(e[s]))&&f instanceof Ri)return f;return new Ri(!1)}r=o.call(e)}for(h=r.next;!(_=h.call(r)).done;){try{f=H(_.value)}catch(j){throw es(r),j}if(typeof f=="object"&&f&&f instanceof Ri)return f}return new Ri(!1)},Ii=function(e,n,t){if(!(e instanceof n))throw TypeError("Incorrect "+(t?t+" ":"")+"invocation");return e},ns=Ot("iterator"),pc=!1;try{var Hn=0,oa={next:function(){return{done:!!Hn++}},return:function(){pc=!0}};oa[ns]=function(){return this},Array.from(oa,function(){throw 2})}catch{}var rs=function(e,n){if(!pc)return!1;var t=!1;try{var r={};r[ns]=function(){return{next:function(){return{done:t=!0}}}},e(r)}catch{}return t},Xa=function(e,n,t){var r,o;return hr&&typeof(r=n.constructor)=="function"&&r!==t&&we(o=r.prototype)&&o!==t.prototype&&hr(e,o),e},Uu=function(e,n,t){for(var r in n)Xt(e,r,n[r],t);return e},Vu=Ot("species"),ju=function(e){var n=Zr(e),t=xt.f;L&&n&&!n[Vu]&&t(n,Vu,{configurable:!0,get:function(){return this}})},is=xt.f,as=Dr.fastKey,_c=an.set,mc=an.getterFor,jp={getConstructor:function(e,n,t,r){var o=e(function(h,_){Ii(h,o,n),_c(h,{type:n,index:Ci(null),first:void 0,last:void 0,size:0}),L||(h.size=0),_!=null&&ts(_,h[r],{that:h,AS_ENTRIES:t})}),s=mc(n),l=function(h,_,k){var E,y,w=s(h),T=f(h,_);return T?T.value=k:(w.last=T={index:y=as(_,!0),key:_,value:k,previous:E=w.last,next:void 0,removed:!1},w.first||(w.first=T),E&&(E.next=T),L?w.size++:h.size++,y!=="F"&&(w.index[y]=T)),h},f=function(h,_){var k,E=s(h),y=as(_);if(y!=="F")return E.index[y];for(k=E.first;k;k=k.next)if(k.key==_)return k};return Uu(o.prototype,{clear:function(){for(var h=s(this),_=h.index,k=h.first;k;)k.removed=!0,k.previous&&(k.previous=k.previous.next=void 0),delete _[k.index],k=k.next;h.first=h.last=void 0,L?h.size=0:this.size=0},delete:function(h){var _=this,k=s(_),E=f(_,h);if(E){var y=E.next,w=E.previous;delete k.index[E.index],E.removed=!0,w&&(w.next=y),y&&(y.previous=w),k.first==E&&(k.first=y),k.last==E&&(k.last=w),L?k.size--:_.size--}return!!E},forEach:function(h){for(var _,k=s(this),E=Or(h,arguments.length>1?arguments[1]:void 0,3);_=_?_.next:k.first;)for(E(_.value,_.key,this);_&&_.removed;)_=_.previous},has:function(h){return!!f(this,h)}}),Uu(o.prototype,t?{get:function(h){var _=f(this,h);return _&&_.value},set:function(h,_){return l(this,h===0?0:h,_)}}:{add:function(h){return l(this,h=h===0?0:h,h)}}),L&&is(o.prototype,"size",{get:function(){return s(this).size}}),o},setStrong:function(e,n,t){var r=n+" Iterator",o=mc(n),s=mc(r);aa(e,n,function(l,f){_c(this,{type:r,target:l,state:o(l),kind:f,last:void 0})},function(){for(var l=s(this),f=l.kind,h=l.last;h&&h.removed;)h=h.previous;return l.target&&(l.last=h=h?h.next:l.state.first)?f=="keys"?{value:h.key,done:!1}:f=="values"?{value:h.value,done:!1}:{value:[h.key,h.value],done:!1}:(l.target=void 0,{value:void 0,done:!0})},t?"entries":"values",!t,!0),ju(n)}},Bp=(function(e,n,t){var r=e.indexOf("Map")!==-1,o=e.indexOf("Weak")!==-1,s=r?"set":"add",l=S[e],f=l&&l.prototype,h=l,_={},k=function(H){var j=f[H];Xt(f,H,H=="add"?function($){return j.call(this,$===0?0:$),this}:H=="delete"?function($){return!(o&&!we($))&&j.call(this,$===0?0:$)}:H=="get"?function($){return o&&!we($)?void 0:j.call(this,$===0?0:$)}:H=="has"?function($){return!(o&&!we($))&&j.call(this,$===0?0:$)}:function($,se){return j.call(this,$===0?0:$,se),this})};if(Xi(e,typeof l!="function"||!(o||f.forEach&&!O(function(){new l().entries().next()}))))h=t.getConstructor(n,e,r,s),Dr.REQUIRED=!0;else if(Xi(e,!0)){var E=new h,y=E[s](o?{}:-0,1)!=E,w=O(function(){E.has(1)}),T=rs(function(H){new l(H)}),A=!o&&O(function(){for(var H=new l,j=5;j--;)H[s](j,j);return!H.has(-0)});T||((h=n(function(H,j){Ii(H,h,e);var $=Xa(new l,H,h);return j!=null&&ts(j,$[s],{that:$,AS_ENTRIES:r}),$})).prototype=f,f.constructor=h),(w||A)&&(k("delete"),k("has"),r&&k("get")),(A||y)&&k(s),o&&f.clear&&delete f.clear}_[e]=h,Ye({global:!0,forced:h!=l},_),ia(h,e),o||t.setStrong(h,e,r)}("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},jp),fc?{}.toString:function(){return"[object "+Jo(this)+"]"});fc||Xt(Object.prototype,"toString",Bp,{unsafe:!0});var Bu=function(e){return function(n,t){var r,o,s=String(oe(n)),l=Jr(t),f=s.length;return l<0||l>=f?e?"":void 0:(r=s.charCodeAt(l))<55296||r>56319||l+1===f||(o=s.charCodeAt(l+1))<56320||o>57343?e?s.charAt(l):r:e?s.slice(l,l+2):o-56320+(r-55296<<10)+65536}},vc={codeAt:Bu(!1),charAt:Bu(!0)},zp=vc.charAt,Nf="String Iterator",Hp=an.set,Wp=an.getterFor(Nf);aa(String,"String",function(e){Hp(this,{type:Nf,string:String(e),index:0})},function(){var e,n=Wp(this),t=n.string,r=n.index;return r>=t.length?{value:void 0,done:!0}:(e=zp(t,r),n.index+=e.length,{value:e,done:!1})});var zu={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(var Gp in zu){var xf=S[Gp],Hu=xf&&xf.prototype;if(Hu&&Hu.forEach!==za)try{At(Hu,"forEach",za)}catch{Hu.forEach=za}}var Y,os=Ot("iterator"),Lf=Ot("toStringTag"),gc=Qa.values;for(var yc in zu){var Ec=S[yc],ii=Ec&&Ec.prototype;if(ii){if(ii[os]!==gc)try{At(ii,os,gc)}catch{ii[os]=gc}if(ii[Lf]||At(ii,Lf,yc),zu[yc]){for(var Za in Qa)if(ii[Za]!==Qa[Za])try{At(ii,Za,Qa[Za])}catch{ii[Za]=Qa[Za]}}}}function Wu(e){return Wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Wu(e)}function Pf(e,n,t,r,o,s,l){try{var f=e[s](l),h=f.value}catch(_){return void t(_)}f.done?n(h):Promise.resolve(h).then(r,o)}function Ie(e){return function(){var n=this,t=arguments;return new Promise(function(r,o){var s=e.apply(n,t);function l(h){Pf(s,r,o,l,f,"next",h)}function f(h){Pf(s,r,o,l,f,"throw",h)}l(void 0)})}}function b(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function Mf(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,n,t){return n&&Mf(e.prototype,n),t&&Mf(e,t),e}function Z(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Ff(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),t.push.apply(t,r)}return t}function Ct(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?Ff(Object(t),!0).forEach(function(r){Z(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ff(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function F(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&Ja(e,n)}function Wn(e){return Wn=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Wn(e)}function Ja(e,n){return Ja=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t},Ja(e,n)}function kc(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function ut(e,n,t){return ut=kc()?Reflect.construct:function(r,o,s){var l=[null];l.push.apply(l,o);var f=new(Function.bind.apply(r,l));return s&&Ja(f,s.prototype),f},ut.apply(null,arguments)}function wc(e){var n=typeof Map=="function"?new Map:void 0;return wc=function(t){if(t===null||(r=t,Function.toString.call(r).indexOf("[native code]")===-1))return t;var r;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(n!==void 0){if(n.has(t))return n.get(t);n.set(t,o)}function o(){return ut(t,arguments,Wn(this).constructor)}return o.prototype=Object.create(t.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),Ja(o,t)},wc(e)}function Cc(e,n){if(e==null)return{};var t,r,o=function(l,f){if(l==null)return{};var h,_,k={},E=Object.keys(l);for(_=0;_<E.length;_++)h=E[_],f.indexOf(h)>=0||(k[h]=l[h]);return k}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function ee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U(e){var n=kc();return function(){var t,r=Wn(e);if(n){var o=Wn(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return function(s,l){return!l||typeof l!="object"&&typeof l!="function"?ee(s):l}(this,t)}}function ai(e,n,t){return ai=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(r,o,s){var l=function(h,_){for(;!Object.prototype.hasOwnProperty.call(h,_)&&(h=Wn(h))!==null;);return h}(r,o);if(l){var f=Object.getOwnPropertyDescriptor(l,o);return f.get?f.get.call(s):f.value}},ai(e,n,t||e)}function Xn(e,n){return Uf(e)||function(t,r){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var o=[],s=!0,l=!1,f=void 0;try{for(var h,_=t[Symbol.iterator]();!(s=(h=_.next()).done)&&(o.push(h.value),!r||o.length!==r);s=!0);}catch(k){l=!0,f=k}finally{try{s||_.return==null||_.return()}finally{if(l)throw f}}return o}}(e,n)||Gu(e,n)||qu()}function Nr(e){return function(n){if(Array.isArray(n))return $u(n)}(e)||ss(e)||Gu(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Uf(e){if(Array.isArray(e))return e}function ss(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Gu(e,n){if(e){if(typeof e=="string")return $u(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?$u(e,n):void 0}}function $u(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function qu(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mt(e,n){var t;if(typeof Symbol>"u"||e[Symbol.iterator]==null){if(Array.isArray(e)||(t=Gu(e))||n){t&&(e=t);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(h){throw h},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,l=!0,f=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var h=t.next();return l=h.done,h},e:function(h){f=!0,s=h},f:function(){try{l||t.return==null||t.return()}finally{if(f)throw s}}}}function Rc(e){var n=function(t,r){if(typeof t!="object"||t===null)return t;var o=t[Symbol.toPrimitive];if(o!==void 0){var s=o.call(t,r||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}(e,"string");return typeof n=="symbol"?n:String(n)}function Ic(e,n,t,r){var o=Sc(),s=n(function(f){o.initializeInstanceElements(f,l.elements)},t),l=o.decorateClass(function(f){for(var h=[],_=function(w){return w.kind==="method"&&w.key===y.key&&w.placement===y.placement},k=0;k<f.length;k++){var E,y=f[k];if(y.kind==="method"&&(E=h.find(_)))if(Vf(y.descriptor)||Vf(E.descriptor)){if(us(y)||us(E))throw new ReferenceError("Duplicated methods ("+y.key+") can't be decorated.");E.descriptor=y.descriptor}else{if(us(y)){if(us(E))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+y.key+").");E.decorators=y.decorators}qp(y,E)}else h.push(y)}return h}(s.d.map($p)),e);return o.initializeClassElements(s.F,l.elements),o.runClassFinishers(s.F,l.finishers)}function Sc(){Sc=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(n,t){["method","field"].forEach(function(r){t.forEach(function(o){o.kind===r&&o.placement==="own"&&this.defineClassElement(n,o)},this)},this)},initializeClassElements:function(n,t){var r=n.prototype;["method","field"].forEach(function(o){t.forEach(function(s){var l=s.placement;if(s.kind===o&&(l==="static"||l==="prototype")){var f=l==="static"?n:r;this.defineClassElement(f,s)}},this)},this)},defineClassElement:function(n,t){var r=t.descriptor;if(t.kind==="field"){var o=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:o===void 0?void 0:o.call(n)}}Object.defineProperty(n,t.key,r)},decorateClass:function(n,t){var r=[],o=[],s={static:[],prototype:[],own:[]};if(n.forEach(function(f){this.addElementPlacement(f,s)},this),n.forEach(function(f){if(!us(f))return r.push(f);var h=this.decorateElement(f,s);r.push(h.element),r.push.apply(r,h.extras),o.push.apply(o,h.finishers)},this),!t)return{elements:r,finishers:o};var l=this.decorateConstructor(r,t);return o.push.apply(o,l.finishers),l.finishers=o,l},addElementPlacement:function(n,t,r){var o=t[n.placement];if(!r&&o.indexOf(n.key)!==-1)throw new TypeError("Duplicated element ("+n.key+")");o.push(n.key)},decorateElement:function(n,t){for(var r=[],o=[],s=n.decorators,l=s.length-1;l>=0;l--){var f=t[n.placement];f.splice(f.indexOf(n.key),1);var h=this.fromElementDescriptor(n),_=this.toElementFinisherExtras((0,s[l])(h)||h);n=_.element,this.addElementPlacement(n,t),_.finisher&&o.push(_.finisher);var k=_.extras;if(k){for(var E=0;E<k.length;E++)this.addElementPlacement(k[E],t);r.push.apply(r,k)}}return{element:n,finishers:o,extras:r}},decorateConstructor:function(n,t){for(var r=[],o=t.length-1;o>=0;o--){var s=this.fromClassDescriptor(n),l=this.toClassDescriptor((0,t[o])(s)||s);if(l.finisher!==void 0&&r.push(l.finisher),l.elements!==void 0){n=l.elements;for(var f=0;f<n.length-1;f++)for(var h=f+1;h<n.length;h++)if(n[f].key===n[h].key&&n[f].placement===n[h].placement)throw new TypeError("Duplicated element ("+n[f].key+")")}}return{elements:n,finishers:r}},fromElementDescriptor:function(n){var t={kind:n.kind,key:n.key,placement:n.placement,descriptor:n.descriptor};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),n.kind==="field"&&(t.initializer=n.initializer),t},toElementDescriptors:function(n){var t;if(n!==void 0)return(t=n,Uf(t)||ss(t)||Gu(t)||qu()).map(function(r){var o=this.toElementDescriptor(r);return this.disallowProperty(r,"finisher","An element descriptor"),this.disallowProperty(r,"extras","An element descriptor"),o},this)},toElementDescriptor:function(n){var t=String(n.kind);if(t!=="method"&&t!=="field")throw new TypeError(`An element descriptor's .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "`+t+'"');var r=Rc(n.key),o=String(n.placement);if(o!=="static"&&o!=="prototype"&&o!=="own")throw new TypeError(`An element descriptor's .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "`+o+'"');var s=n.descriptor;this.disallowProperty(n,"elements","An element descriptor");var l={kind:t,key:r,placement:o,descriptor:Object.assign({},s)};return t!=="field"?this.disallowProperty(n,"initializer","A method descriptor"):(this.disallowProperty(s,"get","The property descriptor of a field descriptor"),this.disallowProperty(s,"set","The property descriptor of a field descriptor"),this.disallowProperty(s,"value","The property descriptor of a field descriptor"),l.initializer=n.initializer),l},toElementFinisherExtras:function(n){return{element:this.toElementDescriptor(n),finisher:jf(n,"finisher"),extras:this.toElementDescriptors(n.extras)}},fromClassDescriptor:function(n){var t={kind:"class",elements:n.map(this.fromElementDescriptor,this)};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(n){var t=String(n.kind);if(t!=="class")throw new TypeError(`A class descriptor's .kind property must be "class", but a decorator created a class descriptor with .kind "`+t+'"');this.disallowProperty(n,"key","A class descriptor"),this.disallowProperty(n,"placement","A class descriptor"),this.disallowProperty(n,"descriptor","A class descriptor"),this.disallowProperty(n,"initializer","A class descriptor"),this.disallowProperty(n,"extras","A class descriptor");var r=jf(n,"finisher");return{elements:this.toElementDescriptors(n.elements),finisher:r}},runClassFinishers:function(n,t){for(var r=0;r<t.length;r++){var o=(0,t[r])(n);if(o!==void 0){if(typeof o!="function")throw new TypeError("Finishers must return a constructor.");n=o}}return n},disallowProperty:function(n,t,r){if(n[t]!==void 0)throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function $p(e){var n,t=Rc(e.key);e.kind==="method"?n={value:e.value,writable:!0,configurable:!0,enumerable:!1}:e.kind==="get"?n={get:e.value,configurable:!0,enumerable:!1}:e.kind==="set"?n={set:e.value,configurable:!0,enumerable:!1}:e.kind==="field"&&(n={configurable:!0,writable:!0,enumerable:!0});var r={kind:e.kind==="field"?"field":"method",key:t,placement:e.static?"static":e.kind==="field"?"own":"prototype",descriptor:n};return e.decorators&&(r.decorators=e.decorators),e.kind==="field"&&(r.initializer=e.value),r}function qp(e,n){e.descriptor.get!==void 0?n.descriptor.get=e.descriptor.get:n.descriptor.set=e.descriptor.set}function us(e){return e.decorators&&e.decorators.length}function Vf(e){return e!==void 0&&!(e.value===void 0&&e.writable===void 0)}function jf(e,n){var t=e[n];if(t!==void 0&&typeof t!="function")throw new TypeError("Expected '"+n+"' to be a function");return t}(function(e){e[e.DIAL_CANCELED=1800100]="DIAL_CANCELED",e[e.MY_USER_ID_NOT_ALLOWED=1800101]="MY_USER_ID_NOT_ALLOWED",e[e.ERR_REQUEST_FAILED=1800200]="ERR_REQUEST_FAILED",e[e.ERR_WEBSOCKET_CONNECTION_NOT_OPENED=1800201]="ERR_WEBSOCKET_CONNECTION_NOT_OPENED",e[e.ERR_WEBSOCKET_CONNECTION_FAILED=1800202]="ERR_WEBSOCKET_CONNECTION_FAILED",e[e.ERR_NO_RESPONSE_DUE_TO_TIMEOUT=1800203]="ERR_NO_RESPONSE_DUE_TO_TIMEOUT",e[e.ERR_REQUEST_FAILED_DUE_TO_WEBSOCKET_CONNECTION_LOST=1800204]="ERR_REQUEST_FAILED_DUE_TO_WEBSOCKET_CONNECTION_LOST",e[e.ERR_WRONG_RESPONSE=1800205]="ERR_WRONG_RESPONSE",e[e.ERR_QUERY_IN_PROGRESS=1800206]="ERR_QUERY_IN_PROGRESS",e[e.INTERNAL_SERVER_ERROR=1800207]="INTERNAL_SERVER_ERROR",e[e.ERR_MALFORMED_DATA=1800208]="ERR_MALFORMED_DATA",e[e.ERR_PARTICIPANT_ALREADY_IN_ROOM=1800700]="ERR_PARTICIPANT_ALREADY_IN_ROOM",e[e.ERR_ENTERING_ROOM_STILL_IN_PROGRESS=1800701]="ERR_ENTERING_ROOM_STILL_IN_PROGRESS",e[e.ERR_PARTICIPANT_NOT_IN_ROOM=1800702]="ERR_PARTICIPANT_NOT_IN_ROOM",e[e.ERR_EXITING_ROOM_STILL_IN_PROGRESS=1800703]="ERR_EXITING_ROOM_STILL_IN_PROGRESS",e[e.ERR_FAILED_TO_ESTABLISH_CONNECTION_TO_SEND_STREAM=1800704]="ERR_FAILED_TO_ESTABLISH_CONNECTION_TO_SEND_STREAM",e[e.ERR_FAILED_TO_ESTABLISH_CONNECTION_TO_RECEIVE_STREAM=1800705]="ERR_FAILED_TO_ESTABLISH_CONNECTION_TO_RECEIVE_STREAM",e[e.ERR_LOCAL_PARTICIPANT_LOST_CONNECTION=1800706]="ERR_LOCAL_PARTICIPANT_LOST_CONNECTION",e[e.ERR_LOCAL_PARTICIPANT_KICKED_OUT=1800707]="ERR_LOCAL_PARTICIPANT_KICKED_OUT",e[e.INVALID_PARAMETER_VALUE=1800300]="INVALID_PARAMETER_VALUE",e[e.INVALID_PARAMETER_TYPE=1800301]="INVALID_PARAMETER_TYPE",e[e.INSTANCE_NOT_INITIALIZED=1800302]="INSTANCE_NOT_INITIALIZED",e[e.USER_NOT_AUTHENTICATED=1800303]="USER_NOT_AUTHENTICATED",e[e.CAMERA_ALREADY_SWITCHING=1800400]="CAMERA_ALREADY_SWITCHING",e[e.ERR_CAMERA_SWITCH=1800401]="ERR_CAMERA_SWITCH",e[e.ERR_CHANGING_AUDIO_DEVICE=1800402]="ERR_CHANGING_AUDIO_DEVICE",e[e.ERR_CAPTURE_NOT_ALLOWED_ON_AUDIO_CALL=1800600]="ERR_CAPTURE_NOT_ALLOWED_ON_AUDIO_CALL",e[e.ERR_VIDEO_VIEW_NOT_READY=1800601]="ERR_VIDEO_VIEW_NOT_READY",e[e.ERR_VIDEO_CALL_NOT_CONNECTED_YET=1800602]="ERR_VIDEO_CALL_NOT_CONNECTED_YET",e[e.ERR_FAILED_TO_GET_IMAGE_FROM_VIDEO_STREAM=1800603]="ERR_FAILED_TO_GET_IMAGE_FROM_VIDEO_STREAM",e[e.ERR_SERVER_INTERNAL_ERROR=1400999]="ERR_SERVER_INTERNAL_ERROR",e[e.ERR_INVALID_CALL_STATUS=1400101]="ERR_INVALID_CALL_STATUS",e[e.ERR_CALL_DOES_NOT_EXIST=1400102]="ERR_CALL_DOES_NOT_EXIST",e[e.ERR_CALLEE_DOES_NOT_EXIST=1400103]="ERR_CALLEE_DOES_NOT_EXIST",e[e.ERR_DIAL_MYSELF=1400104]="ERR_DIAL_MYSELF",e[e.ERR_NO_PERMISSION=1400105]="ERR_NO_PERMISSION",e[e.ERR_CALLEE_NEVER_AUTHENTICATE=1400106]="ERR_CALLEE_NEVER_AUTHENTICATE",e[e.ERR_ROOM_MAX_PARTICIPANTS=1400120]="ERR_ROOM_MAX_PARTICIPANTS",e[e.ERR_INVALID_ROOM_PARTICIPANT=1400121]="ERR_INVALID_ROOM_PARTICIPANT",e[e.ERR_CLIENT_ALREADY_ENTERED=1400122]="ERR_CLIENT_ALREADY_ENTERED",e[e.ERR_SEND_ENDPOINT_CANNOT_ATTACH=1400123]="ERR_SEND_ENDPOINT_CANNOT_ATTACH",e[e.ERR_PARTICIPANT_ALREADY_HAS_SEND_ENDPOINT=1400124]="ERR_PARTICIPANT_ALREADY_HAS_SEND_ENDPOINT",e[e.ERR_ROOM_DELETED=1400126]="ERR_ROOM_DELETED",e[e.ERR_CALL_NOT_CONNECTED_YET=1800610]="ERR_CALL_NOT_CONNECTED_YET",e[e.ERR_WRONG_RECORDING_TYPE_FOR_AUDIO_CALL=1800611]="ERR_WRONG_RECORDING_TYPE_FOR_AUDIO_CALL",e[e.ERR_RECORDING_ALREADY_IN_PROGRESS=1800612]="ERR_RECORDING_ALREADY_IN_PROGRESS",e[e.ERR_FAILED_TO_OPEN_FILE=1800613]="ERR_FAILED_TO_OPEN_FILE",e[e.ERR_FAILED_TO_START_RECORDING=1800614]="ERR_FAILED_TO_START_RECORDING",e[e.ERR_FAILED_TO_STOP_RECORDING=1800615]="ERR_FAILED_TO_STOP_RECORDING",e[e.ERR_NOT_SUPPORTED_BROWSER_FOR_RECORDING=1800616]="ERR_NOT_SUPPORTED_BROWSER_FOR_RECORDING",e[e.ERR_INVALID_RECORDING_TYPE=1800617]="ERR_INVALID_RECORDING_TYPE",e[e.ERR_NOT_SUPPORTED_OS_VERSION_FOR_RECORDING=1800618]="ERR_NOT_SUPPORTED_OS_VERSION_FOR_RECORDING",e[e.ERR_SCREEN_SHARE_RESTRICTED_FROM_AUDIO_CALL=1800620]="ERR_SCREEN_SHARE_RESTRICTED_FROM_AUDIO_CALL",e[e.ERR_SCREEN_SHARE_REQUEST_BEFORE_CALL_IS_CONNECTED=1800621]="ERR_SCREEN_SHARE_REQUEST_BEFORE_CALL_IS_CONNECTED",e[e.ERR_SCREEN_SHARE_ALREADY_IN_PROGRESS=1800622]="ERR_SCREEN_SHARE_ALREADY_IN_PROGRESS",e[e.ERR_NO_SCREEN_SHARE_EXISTS=1800623]="ERR_NO_SCREEN_SHARE_EXISTS",e[e.ERR_NOT_SUPPORTED_BROWSER_FOR_SCREEN_SHARE=1800625]="ERR_NOT_SUPPORTED_BROWSER_FOR_SCREEN_SHARE",e[e.ERR_SCREEN_SHARE_FAILED_DUE_TO_UNKNOWN_REASON=1800626]="ERR_SCREEN_SHARE_FAILED_DUE_TO_UNKNOWN_REASON",e[e.ERR_NOT_SUPPORTED_APP_STATE_FOR_SCREEN_SHARE=1800627]="ERR_NOT_SUPPORTED_APP_STATE_FOR_SCREEN_SHARE",e[e.ERR_PERMISSION_DENIED_FOR_SCREEN_SHARE=1800628]="ERR_PERMISSION_DENIED_FOR_SCREEN_SHARE",e[e.ERR_SELECTED_CONTENT_NOT_EXIST=1800629]="ERR_SELECTED_CONTENT_NOT_EXIST",e[e.ERR_SELECTED_CONTENT_INACCESSIBLE=1800630]="ERR_SELECTED_CONTENT_INACCESSIBLE",e[e.ERR_MEDIA_STREAM_NOT_ALLOWED_ON_HOLD=1800631]="ERR_MEDIA_STREAM_NOT_ALLOWED_ON_HOLD",e[e.ERR_CALL_ALREADY_ON_HOLD=1800801]="ERR_CALL_ALREADY_ON_HOLD",e[e.ERR_ACTIVE_CALL_IN_PROGRESS=1800802]="ERR_ACTIVE_CALL_IN_PROGRESS",e[e.ERR_ANOTHER_CALL_IN_PROGRESS=1800803]="ERR_ANOTHER_CALL_IN_PROGRESS"})(Y||(Y={}));var kn,Si,oi=function(){function e(){b(this,e)}return x(e,null,[{key:"getErrorMessage",value:function(n){var t=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).invalidParameter,r=t===void 0?"":t;switch(n){case Y.DIAL_CANCELED:return"Call canceled before receiving a callback.";case Y.MY_USER_ID_NOT_ALLOWED:return"The caller can't dial their own user ID.";case Y.ERR_REQUEST_FAILED:return"The http request failed.";case Y.ERR_WEBSOCKET_CONNECTION_NOT_OPENED:return"Websocket connection not established.";case Y.ERR_WEBSOCKET_CONNECTION_FAILED:return"Websocket connection failed.";case Y.ERR_NO_RESPONSE_DUE_TO_TIMEOUT:return"The request failed to receive a response due to timeout.";case Y.ERR_REQUEST_FAILED_DUE_TO_WEBSOCKET_CONNECTION_LOST:return"The request failed because the websocket connection is lost.";case Y.ERR_WRONG_RESPONSE:return"The response contains an unexpected object type of data.";case Y.ERR_QUERY_IN_PROGRESS:return"The previous query is still in progress.";case Y.INTERNAL_SERVER_ERROR:return"An internal server error has occurred.";case Y.ERR_MALFORMED_DATA:return"The data format of the response is invalid.";case Y.INVALID_PARAMETER_VALUE:return"".concat(r," is an invalid or empty value.");case Y.INVALID_PARAMETER_TYPE:return"The data type of ".concat(r," is invalid.");case Y.INSTANCE_NOT_INITIALIZED:return"SendBirdCall instance not initialized.";case Y.USER_NOT_AUTHENTICATED:return"The user is not authenticated.";case Y.CAMERA_ALREADY_SWITCHING:return"Camera is already switching.";case Y.ERR_CAMERA_SWITCH:return"A camera switch error has occurred.";case Y.ERR_CHANGING_AUDIO_DEVICE:return"An error occurred while changing audio device.";case Y.ERR_CAPTURE_NOT_ALLOWED_ON_AUDIO_CALL:return"Capturing a video view isn't allowed while on an audio call.";case Y.ERR_VIDEO_VIEW_NOT_READY:return"A video view isn't ready to be captured.";case Y.ERR_VIDEO_CALL_NOT_CONNECTED_YET:return"A video call isn't connected yet therefore can't capture a video view.";case Y.ERR_FAILED_TO_GET_IMAGE_FROM_VIDEO_STREAM:return"An error occurred while getting an image form the video stream.";case Y.ERR_ROOM_MAX_PARTICIPANTS:return"The room has reached max participants.";case Y.ERR_INVALID_ROOM_PARTICIPANT:return"The room participant argument is not valid.";case Y.ERR_CLIENT_ALREADY_ENTERED:return"The given client is already entered.";case Y.ERR_SEND_ENDPOINT_CANNOT_ATTACH:return"The send endpoint failed to attach.";case Y.ERR_PARTICIPANT_ALREADY_HAS_SEND_ENDPOINT:return"The given participant already has send endpoint.";case Y.ERR_CALL_NOT_CONNECTED_YET:return"A call isn’t connected yet therefore can’t start media recording.";case Y.ERR_WRONG_RECORDING_TYPE_FOR_AUDIO_CALL:return"A wrong recording type is selected in an audio call.";case Y.ERR_RECORDING_ALREADY_IN_PROGRESS:return"An ongoing recording session is already in progress.";case Y.ERR_FAILED_TO_OPEN_FILE:return"Couldn't open a recording file due to an error.";case Y.ERR_FAILED_TO_START_RECORDING:return"Couldn't start a recording session due to an error.";case Y.ERR_FAILED_TO_STOP_RECORDING:return"Coudln't stop a recording session due to an error.";case Y.ERR_NOT_SUPPORTED_BROWSER_FOR_RECORDING:return"The browser doesn't support media recording.";case Y.ERR_INVALID_RECORDING_TYPE:return"Invalid recording type is selected.";case Y.ERR_NOT_SUPPORTED_OS_VERSION_FOR_RECORDING:return"The operating system version doesn't support media recording.";case Y.ERR_SCREEN_SHARE_RESTRICTED_FROM_AUDIO_CALL:return"Screen share is restricted from audio calls.";case Y.ERR_SCREEN_SHARE_REQUEST_BEFORE_CALL_IS_CONNECTED:return"A call isn't connected yet, but the request for screen share has been made.";case Y.ERR_SCREEN_SHARE_ALREADY_IN_PROGRESS:return"The user is trying to share the screen while the previous request is still in progress.";case Y.ERR_MEDIA_STREAM_NOT_ALLOWED_ON_HOLD:return"Screen sharing or any other actions that need media streaming as well as capturing screen aren't allowed while a call is on hold.";case Y.ERR_NOT_SUPPORTED_BROWSER_FOR_SCREEN_SHARE:return"The browser doesn't support screen share.";case Y.ERR_SCREEN_SHARE_FAILED_DUE_TO_UNKNOWN_REASON:return"Screen share failed due to unknown reason.";case Y.ERR_NOT_SUPPORTED_APP_STATE_FOR_SCREEN_SHARE:return"The application state isn't supported for screen share.";case Y.ERR_PERMISSION_DENIED_FOR_SCREEN_SHARE:return"An access permission denied for screen share.";case Y.ERR_SELECTED_CONTENT_NOT_EXIST:return"The selected content for screen share doesn't exist.";case Y.ERR_SELECTED_CONTENT_INACCESSIBLE:return"The selected content for screen share is inaccessible by the system.";case Y.ERR_PARTICIPANT_ALREADY_IN_ROOM:return"The participant is trying to enter the same room they're already in.";case Y.ERR_ENTERING_ROOM_STILL_IN_PROGRESS:return"The participant is trying to enter the room while the previous request is still in progress.";case Y.ERR_PARTICIPANT_NOT_IN_ROOM:return"The participant is not in the room and the request can't be processed.";case Y.ERR_EXITING_ROOM_STILL_IN_PROGRESS:return"The participant is trying to exit the same room.";case Y.ERR_FAILED_TO_ESTABLISH_CONNECTION_TO_SEND_STREAM:return"Couldn't establish a connection to send media streaming.";case Y.ERR_FAILED_TO_ESTABLISH_CONNECTION_TO_RECEIVE_STREAM:return"Couldn't establish a connection to receive media streaming.";case Y.ERR_LOCAL_PARTICIPANT_LOST_CONNECTION:return"The local participant exited the room due to lost connection.";case Y.ERR_LOCAL_PARTICIPANT_KICKED_OUT:return"An existing participant has been disconnected from the room because a new participant entered with the same user ID.";case Y.ERR_CALL_ALREADY_ON_HOLD:return"The call is already on hold.";case Y.ERR_ACTIVE_CALL_IN_PROGRESS:return"The active call is in progress. Cannot remove the active call from a hold because the call is not on hold.";case Y.ERR_ANOTHER_CALL_IN_PROGRESS:return"The active call is in progress. Cannot remove a hold from another call while there is an active call.";default:return""}}}]),e}(),sa=function(e,n,t){var r=Te(n);r in e?xt.f(e,r,X(0,t)):e[r]=t},eo=Zr("navigator","userAgent")||"",Tc=S.process,Ku=Tc&&Tc.versions,Bf=Ku&&Ku.v8;Bf?Si=(kn=Bf.split("."))[0]+kn[1]:eo&&(!(kn=eo.match(/Edge\/(\d+)/))||kn[1]>=74)&&(kn=eo.match(/Chrome\/(\d+)/))&&(Si=kn[1]);var to=Si&&+Si,no=Ot("species"),ua=function(e){return to>=51||!O(function(){var n=[];return(n.constructor={})[no]=function(){return{foo:1}},n[e](Boolean).foo!==1})},ro=Ot("isConcatSpreadable"),Qu=9007199254740991,Ac="Maximum allowed index exceeded",Yu=to>=51||!O(function(){var e=[];return e[ro]=!1,e.concat()[0]!==e}),io=ua("concat"),Oc=function(e){if(!we(e))return!1;var n=e[ro];return n!==void 0?!!n:ti(e)};Ye({target:"Array",proto:!0,forced:!Yu||!io},{concat:function(e){var n,t,r,o,s,l=ei(this),f=Nu(l,0),h=0;for(n=-1,r=arguments.length;n<r;n++)if(Oc(s=n===-1?l:arguments[n])){if(h+(o=En(s.length))>Qu)throw TypeError(Ac);for(t=0;t<o;t++,h++)t in s&&sa(f,h,s[t])}else{if(h>=Qu)throw TypeError(Ac);sa(f,h++,s)}return f.length=h,f}});var zf=Ba.map,Xu=ua("map"),Hf=fr("map");Ye({target:"Array",proto:!0,forced:!Xu||!Hf},{map:function(e){return zf(this,e,arguments.length>1?arguments[1]:void 0)}});var bc=function(){var e=lt(this),n="";return e.global&&(n+="g"),e.ignoreCase&&(n+="i"),e.multiline&&(n+="m"),e.dotAll&&(n+="s"),e.unicode&&(n+="u"),e.sticky&&(n+="y"),n},Zu="toString",Dc=RegExp.prototype,Nc=Dc[Zu],Wf=O(function(){return Nc.call({source:"a",flags:"b"})!="/a/b"}),Ti=Nc.name!=Zu;(Wf||Ti)&&Xt(RegExp.prototype,Zu,function(){var e=lt(this),n=String(e.source),t=e.flags;return"/"+n+"/"+String(t===void 0&&e instanceof RegExp&&!("flags"in Dc)?bc.call(e):t)},{unsafe:!0});var tn,ao="".repeat||function(e){var n=String(oe(this)),t="",r=Jr(e);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(n+=n))1&r&&(t+=n);return t},Kp=Math.ceil,Gf=function(e){return function(n,t,r){var o,s,l=String(oe(n)),f=l.length,h=r===void 0?" ":String(r),_=En(t);return _<=f||h==""?l:(o=_-f,(s=ao.call(h,Kp(o/h.length))).length>o&&(s=s.slice(0,o)),e?l+s:s+l)}},ls={start:Gf(!1),end:Gf(!0)},Qp=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(eo),$f=ls.start;Ye({target:"String",proto:!0,forced:Qp},{padStart:function(e){return $f(this,e,arguments.length>1?arguments[1]:void 0)}}),function(e){e.VERBOSE="VERBOSE",e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.NONE="NONE"}(tn||(tn={}));var oo={VERBOSE:{level:-1,name:tn.VERBOSE,public:!1},DEBUG:{level:1,name:tn.DEBUG,public:!1},INFO:{level:2,name:tn.INFO,public:!0},WARNING:{level:3,name:tn.WARNING,public:!0},ERROR:{level:4,name:tn.ERROR,public:!0},NONE:{level:100,name:tn.NONE,public:!0}},bt=Ba.some,xc=Ji("some"),Ju=fr("some");Ye({target:"Array",proto:!0,forced:!xc||!Ju},{some:function(e){return bt(this,e,arguments.length>1?arguments[1]:void 0)}});var cs=O(function(){ea(1)});Ye({target:"Object",stat:!0,forced:cs},{keys:function(e){return ea(ei(e))}});var la,el,ca,da=S.Promise,so=Ot("species"),Lc=function(e,n){var t,r=lt(e).constructor;return r===void 0||(t=lt(r)[so])==null?n:Ar(t)},qf=/(iphone|ipod|ipad).*applewebkit/i.test(eo),xr=ue(S.process)=="process",ds=S.location,uo=S.setImmediate,lo=S.clearImmediate,Pc=S.process,tl=S.MessageChannel,fs=S.Dispatch,hs=0,ps={},Mc="onreadystatechange",Fc=function(e){if(ps.hasOwnProperty(e)){var n=ps[e];delete ps[e],n()}},Uc=function(e){return function(){Fc(e)}},nl=function(e){Fc(e.data)},si=function(e){S.postMessage(e+"",ds.protocol+"//"+ds.host)};uo&&lo||(uo=function(e){for(var n=[],t=1;arguments.length>t;)n.push(arguments[t++]);return ps[++hs]=function(){(typeof e=="function"?e:Function(e)).apply(void 0,n)},la(hs),hs},lo=function(e){delete ps[e]},xr?la=function(e){Pc.nextTick(Uc(e))}:fs&&fs.now?la=function(e){fs.now(Uc(e))}:tl&&!qf?(ca=(el=new tl).port2,el.port1.onmessage=nl,la=Or(ca.postMessage,ca,1)):S.addEventListener&&typeof postMessage=="function"&&!S.importScripts&&ds&&ds.protocol!=="file:"&&!O(si)?(la=si,S.addEventListener("message",nl,!1)):la=Mc in pt("script")?function(e){Wa.appendChild(pt("script"))[Mc]=function(){Wa.removeChild(this),Fc(e)}}:function(e){setTimeout(Uc(e),0)});var co,Zn,Fn,ui,vr,_s,Vc,Kf,Ai={set:uo,clear:lo},ms=cn.f,fo=Ai.set,vs=S.MutationObserver||S.WebKitMutationObserver,rl=S.document,fa=S.process,Lr=S.Promise,Rt=ms(S,"queueMicrotask"),vt=Rt&&Rt.value;vt||(co=function(){var e,n;for(xr&&(e=fa.domain)&&e.exit();Zn;){n=Zn.fn,Zn=Zn.next;try{n()}catch(t){throw Zn?ui():Fn=void 0,t}}Fn=void 0,e&&e.enter()},!qf&&!xr&&vs&&rl?(vr=!0,_s=rl.createTextNode(""),new vs(co).observe(_s,{characterData:!0}),ui=function(){_s.data=vr=!vr}):Lr&&Lr.resolve?(Vc=Lr.resolve(void 0),Kf=Vc.then,ui=function(){Kf.call(Vc,co)}):ui=xr?function(){fa.nextTick(co)}:function(){fo.call(S,co)});var Pr,fn,On,Oi,ha=vt||function(e){var n={fn:e,next:void 0};Fn&&(Fn.next=n),Zn||(Zn=n,ui()),Fn=n},Un=function(e){var n,t;this.promise=new e(function(r,o){if(n!==void 0||t!==void 0)throw TypeError("Bad Promise constructor");n=r,t=o}),this.resolve=Ar(n),this.reject=Ar(t)},ho={f:function(e){return new Un(e)}},jc=function(e,n){if(lt(e),we(n)&&n.constructor===e)return n;var t=ho.f(e);return(0,t.resolve)(n),t.promise},il=function(e){try{return{error:!1,value:e()}}catch(n){return{error:!0,value:n}}},gs=Ai.set,Qf=Ot("species"),on="Promise",ys=an.get,Bc=an.set,Yf=an.getterFor(on),Vn=da,li=S.TypeError,bi=S.document,Di=S.process,Es=Zr("fetch"),ci=ho.f,Jn=ci,er=!!(bi&&bi.createEvent&&S.dispatchEvent),Ni=typeof PromiseRejectionEvent=="function",Mr="unhandledrejection",Gn=Xi(on,function(){if(We(Vn)===String(Vn)&&(to===66||!xr&&!Ni))return!0;if(to>=51&&/native code/.test(Vn))return!1;var e=Vn.resolve(1),n=function(t){t(function(){},function(){})};return(e.constructor={})[Qf]=n,!(e.then(function(){})instanceof n)}),pa=Gn||!rs(function(e){Vn.all(e).catch(function(){})}),zc=function(e){var n;return!(!we(e)||typeof(n=e.then)!="function")&&n},ks=function(e,n){if(!e.notified){e.notified=!0;var t=e.reactions;ha(function(){for(var r=e.value,o=e.state==1,s=0;t.length>s;){var l,f,h,_=t[s++],k=o?_.ok:_.fail,E=_.resolve,y=_.reject,w=_.domain;try{k?(o||(e.rejection===2&&Lt(e),e.rejection=1),k===!0?l=r:(w&&w.enter(),l=k(r),w&&(w.exit(),h=!0)),l===_.promise?y(li("Promise-chain cycle")):(f=zc(l))?f.call(l,E,y):E(l)):y(r)}catch(T){w&&!h&&w.exit(),y(T)}}e.reactions=[],e.notified=!1,n&&!e.rejection&&$n(e)})}},al=function(e,n,t){var r,o;er?((r=bi.createEvent("Event")).promise=n,r.reason=t,r.initEvent(e,!1,!0),S.dispatchEvent(r)):r={promise:n,reason:t},!Ni&&(o=S["on"+e])?o(r):e===Mr&&function(s,l){var f=S.console;f&&f.error&&(arguments.length===1?f.error(s):f.error(s,l))}("Unhandled promise rejection",t)},$n=function(e){gs.call(S,function(){var n,t=e.facade,r=e.value;if(jn(e)&&(n=il(function(){xr?Di.emit("unhandledRejection",r,t):al(Mr,t,r)}),e.rejection=xr||jn(e)?2:1,n.error))throw n.value})},jn=function(e){return e.rejection!==1&&!e.parent},Lt=function(e){gs.call(S,function(){var n=e.facade;xr?Di.emit("rejectionHandled",n):al("rejectionhandled",n,e.value)})},wn=function(e,n,t){return function(r){e(n,r,t)}},_a=function(e,n,t){e.done||(e.done=!0,t&&(e=t),e.value=n,e.state=2,ks(e,!0))},ol=function(e,n,t){if(!e.done){e.done=!0,t&&(e=t);try{if(e.facade===n)throw li("Promise can't be resolved itself");var r=zc(n);r?ha(function(){var o={done:!1};try{r.call(n,wn(ol,o,e),wn(_a,o,e))}catch(s){_a(o,s,e)}}):(e.value=n,e.state=1,ks(e,!1))}catch(o){_a({done:!1},o,e)}}};function sl(e,n){return RegExp(e,n)}Gn&&(Vn=function(e){Ii(this,Vn,on),Ar(e),Pr.call(this);var n=ys(this);try{e(wn(ol,n),wn(_a,n))}catch(t){_a(n,t)}},(Pr=function(e){Bc(this,{type:on,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=Uu(Vn.prototype,{then:function(e,n){var t=Yf(this),r=ci(Lc(this,Vn));return r.ok=typeof e!="function"||e,r.fail=typeof n=="function"&&n,r.domain=xr?Di.domain:void 0,t.parent=!0,t.reactions.push(r),t.state!=0&&ks(t,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),fn=function(){var e=new Pr,n=ys(e);this.promise=e,this.resolve=wn(ol,n),this.reject=wn(_a,n)},ho.f=ci=function(e){return e===Vn||e===On?new fn(e):Jn(e)},typeof da=="function"&&(Oi=da.prototype.then,Xt(da.prototype,"then",function(e,n){var t=this;return new Vn(function(r,o){Oi.call(t,r,o)}).then(e,n)},{unsafe:!0}),typeof Es=="function"&&Ye({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return jc(Vn,Es.apply(S,arguments))}}))),Ye({global:!0,wrap:!0,forced:Gn},{Promise:Vn}),ia(Vn,on,!1),ju(on),On=Zr(on),Ye({target:on,stat:!0,forced:Gn},{reject:function(e){var n=ci(this);return n.reject.call(void 0,e),n.promise}}),Ye({target:on,stat:!0,forced:Gn},{resolve:function(e){return jc(this,e)}}),Ye({target:on,stat:!0,forced:pa},{all:function(e){var n=this,t=ci(n),r=t.resolve,o=t.reject,s=il(function(){var l=Ar(n.resolve),f=[],h=0,_=1;ts(e,function(k){var E=h++,y=!1;f.push(void 0),_++,l.call(n,k).then(function(w){y||(y=!0,f[E]=w,--_||r(f))},o)}),--_||r(f)});return s.error&&o(s.value),t.promise},race:function(e){var n=this,t=ci(n),r=t.reject,o=il(function(){var s=Ar(n.resolve);ts(e,function(l){s.call(n,l).then(t.resolve,r)})});return o.error&&r(o.value),t.promise}});var ws,ul,Cs={UNSUPPORTED_Y:O(function(){var e=sl("a","y");return e.lastIndex=2,e.exec("abcd")!=null}),BROKEN_CARET:O(function(){var e=sl("^r","gy");return e.lastIndex=2,e.exec("str")!=null})},Rs=RegExp.prototype.exec,po=String.prototype.replace,ll=Rs,Hc=(ws=/a/,ul=/b*/g,Rs.call(ws,"a"),Rs.call(ul,"a"),ws.lastIndex!==0||ul.lastIndex!==0),_o=Cs.UNSUPPORTED_Y||Cs.BROKEN_CARET,mo=/()??/.exec("")[1]!==void 0;(Hc||mo||_o)&&(ll=function(e){var n,t,r,o,s=this,l=_o&&s.sticky,f=bc.call(s),h=s.source,_=0,k=e;return l&&((f=f.replace("y","")).indexOf("g")===-1&&(f+="g"),k=String(e).slice(s.lastIndex),s.lastIndex>0&&(!s.multiline||s.multiline&&e[s.lastIndex-1]!==`
`)&&(h="(?: "+h+")",k=" "+k,_++),t=new RegExp("^(?:"+h+")",f)),mo&&(t=new RegExp("^"+h+"$(?!\\s)",f)),Hc&&(n=s.lastIndex),r=Rs.call(l?t:s,k),l?r?(r.input=r.input.slice(_),r[0]=r[0].slice(_),r.index=s.lastIndex,s.lastIndex+=r[0].length):s.lastIndex=0:Hc&&r&&(s.lastIndex=s.global?r.index+r[0].length:n),mo&&r&&r.length>1&&po.call(r[0],t,function(){for(o=1;o<arguments.length-2;o++)arguments[o]===void 0&&(r[o]=void 0)}),r});var vo=ll;Ye({target:"RegExp",proto:!0,forced:/./.exec!==vo},{exec:vo});var Xf=Ot("species"),go=!O(function(){var e=/./;return e.exec=function(){var n=[];return n.groups={a:"7"},n},"".replace(e,"$<a>")!=="7"}),Wc="a".replace(/./,"$0")==="$0",Is=Ot("replace"),Ss=!!/./[Is]&&/./[Is]("a","$0")==="",yo=!O(function(){var e=/(?:)/,n=e.exec;e.exec=function(){return n.apply(this,arguments)};var t="ab".split(e);return t.length!==2||t[0]!=="a"||t[1]!=="b"}),Ts=function(e,n,t,r){var o=Ot(e),s=!O(function(){var E={};return E[o]=function(){return 7},""[e](E)!=7}),l=s&&!O(function(){var E=!1,y=/a/;return e==="split"&&((y={}).constructor={},y.constructor[Xf]=function(){return y},y.flags="",y[o]=/./[o]),y.exec=function(){return E=!0,null},y[o](""),!E});if(!s||!l||e==="replace"&&(!go||!Wc||Ss)||e==="split"&&!yo){var f=/./[o],h=t(o,""[e],function(E,y,w,T,A){return y.exec===vo?s&&!A?{done:!0,value:f.call(y,w,T)}:{done:!0,value:E.call(w,y,T)}:{done:!1}},{REPLACE_KEEPS_$0:Wc,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:Ss}),_=h[0],k=h[1];Xt(String.prototype,e,_),Xt(RegExp.prototype,o,n==2?function(E,y){return k.call(E,this,y)}:function(E){return k.call(E,this)})}r&&At(RegExp.prototype[o],"sham",!0)},Gc=vc.charAt,As=function(e,n,t){return n+(t?Gc(e,n).length:1)},ma=function(e,n){var t=e.exec;if(typeof t=="function"){var r=t.call(e,n);if(typeof r!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return r}if(ue(e)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return vo.call(e,n)};Ts("match",1,function(e,n,t){return[function(r){var o=oe(this),s=r==null?void 0:r[e];return s!==void 0?s.call(r,o):new RegExp(r)[e](String(o))},function(r){var o=t(n,r,this);if(o.done)return o.value;var s=lt(r),l=String(this);if(!s.global)return ma(s,l);var f=s.unicode;s.lastIndex=0;for(var h,_=[],k=0;(h=ma(s,l))!==null;){var E=String(h[0]);_[k]=E,E===""&&(s.lastIndex=As(l,En(s.lastIndex),f)),k++}return k===0?null:_}]});var Eo=Math.max,tr=Math.min,va=Math.floor,$c=/\$([$&'`]|\d\d?|<[^>]*>)/g,Zf=/\$([$&'`]|\d\d?)/g;Ts("replace",2,function(e,n,t,r){var o=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,s=r.REPLACE_KEEPS_$0,l=o?"$":"$0";return[function(h,_){var k=oe(this),E=h==null?void 0:h[e];return E!==void 0?E.call(h,k,_):n.call(String(k),h,_)},function(h,_){if(!o&&s||typeof _=="string"&&_.indexOf(l)===-1){var k=t(n,h,this,_);if(k.done)return k.value}var E=lt(h),y=String(this),w=typeof _=="function";w||(_=String(_));var T=E.global;if(T){var A=E.unicode;E.lastIndex=0}for(var H=[];;){var j=ma(E,y);if(j===null||(H.push(j),!T))break;String(j[0])===""&&(E.lastIndex=As(y,En(E.lastIndex),A))}for(var $,se="",fe=0,ge=0;ge<H.length;ge++){j=H[ge];for(var De=String(j[0]),Ne=Eo(tr(Jr(j.index),y.length),0),Be=[],He=1;He<j.length;He++)Be.push(($=j[He])===void 0?$:String($));var Le=j.groups;if(w){var rt=[De].concat(Be,Ne,y);Le!==void 0&&rt.push(Le);var Yr=String(_.apply(void 0,rt))}else Yr=f(De,y,Ne,Be,Le,_);Ne>=fe&&(se+=y.slice(fe,Ne)+Yr,fe=Ne+De.length)}return se+y.slice(fe)}];function f(h,_,k,E,y,w){var T=k+h.length,A=E.length,H=Zf;return y!==void 0&&(y=ei(y),H=$c),n.call(w,H,function(j,$){var se;switch($.charAt(0)){case"$":return"$";case"&":return h;case"`":return _.slice(0,k);case"'":return _.slice(T);case"<":se=y[$.slice(1,-1)];break;default:var fe=+$;if(fe===0)return j;if(fe>A){var ge=va(fe/10);return ge===0?j:ge<=A?E[ge-1]===void 0?$.charAt(1):E[ge-1]+$.charAt(1):j}se=E[fe-1]}return se===void 0?"":se})}});var nr=function(e){F(t,e);var n=U(t);function t(r){var o,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=s.message,f=s.error,h=Cc(s,["message","error"]);b(this,t);var _=l||oi.getErrorMessage(r,h);return(o=n.call(this,_)).code=r,o._error=f,o}return t}(wc(Error)),ze=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return t}(nr);function bn(e){return function(n){e.then(function(t){return n(t)},function(t){return n(null,t)})}}var gr,qn,Fr=function(e,n){if(Object.keys(e).some(function(r){return typeof e[r]!="string"})){var t=Promise.reject(new ze(Y.INVALID_PARAMETER_TYPE));return n&&bn(t)(n),[!1,t]}return[!0]},ko=function(e,n){if(e.some(function(r){return typeof r!="string"})){var t=Promise.reject(new ze(Y.INVALID_PARAMETER_TYPE));return n&&bn(t)(n),[!1,t]}return[!0]},Os=function(e,n,t){var r=e.match(n);return r&&r.length>=t&&parseInt(r[t],10)},wo=function(){var e={browser:null,version:null};if(typeof window>"u"||!window.navigator)return e.browser="Not a browser.",e;var n=window.navigator;if(n.mozGetUserMedia)e.browser="firefox",e.version=Os(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||window.isSecureContext===!1&&window.webkitRTCPeerConnection&&!window.RTCIceGatherer)e.browser="chrome",e.version=Os(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.mediaDevices&&n.userAgent.match(/Edge\/(\d+).(\d+)$/))e.browser="edge",e.version=Os(n.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!window.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return e.browser="Not a supported browser.",e;e.browser="safari",e.version=Os(n.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=window.RTCRtpTransceiver&&"currentDirection"in window.RTCRtpTransceiver.prototype}return e},bs=wo().browser==="safari",Ds=wo().browser==="firefox",Ur=function(e){return e.replace(/"access_token":".*?"/gm,'"access_token":"*************"').replace(/"password":".*?"/gm,'"password":"*************"').replace(/"sbcall_session_token":".*?"/gm,'"sbcall_session_token":"*************"').replace(/"turn_urls":\[".*?"\]/gm,'"turn_urls":"[*************]"').replace(/(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)/gm,"*************").replace(/((?:[0-9A-Fa-f]{1,4}))((?::[0-9A-Fa-f]{1,4}))*::((?:[0-9A-Fa-f]{1,4}))((?::[0-9A-Fa-f]{1,4}))*|((?:[0-9A-Fa-f]{1,4}))((?::[0-9A-Fa-f]{1,4})){7}/gm,"*************")},sn=function(e){return{userId:e.user_id,nickname:e.nickname,profileUrl:e.profile_url,metaData:e.metadata,isActive:e.is_active}},Ns=function(){function e(){b(this,e),this.level=tn.NONE}return x(e,[{key:"setLoggerLevel",value:function(n){var t;return(t=oo[n])!==null&&t!==void 0&&t.public&&(this.level=n),this.level}},{key:"verbose",value:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];this._permit.apply(this,[tn.VERBOSE].concat(t))}},{key:"debug",value:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];this._permit.apply(this,[tn.DEBUG].concat(t))}},{key:"info",value:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];this._permit.apply(this,[tn.INFO].concat(t))}},{key:"warning",value:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];this._permit.apply(this,[tn.WARNING].concat(t))}},{key:"error",value:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];this._permit.apply(this,[tn.ERROR].concat(t))}},{key:"_enabledFor",value:function(n){try{return oo[this.level].level<=oo[n].level}catch{return!1}}},{key:"_getLogType",value:function(n){switch(n){case tn.ERROR:return"error";case tn.WARNING:return"warn";default:return"log"}}},{key:"_getTimeString",value:function(n){var t=n.getFullYear().toString().padStart(2,"0"),r=(n.getMonth()+1).toString().padStart(2,"0"),o=n.getDate().toString().padStart(2,"0"),s=n.getHours().toString().padStart(2,"0"),l=n.getMinutes().toString().padStart(2,"0"),f=n.getSeconds().toString().padStart(2,"0"),h=n.getMilliseconds().toString().padStart(2,"0");return"[".concat(t,".").concat(r,".").concat(o," ").concat(s,":").concat(l,":").concat(f,":").concat(h,"]")}},{key:"_permit",value:function(n){for(var t=this._getLogType(n),r=new Date,o=arguments.length,s=new Array(o>1?o-1:0),l=1;l<o;l++)s[l-1]=arguments[l];if(this._enabledFor(n)&&console&&console[t]){var f,h="".concat(this._getTimeString(r)," [").concat(n,"]");(f=console)[t].apply(f,[h].concat(s))}if(this._logCollector){var _={logDt:r.getTime(),logLevel:n,logMessage:this._makeSDKLogMessage.apply(this,s)};this._logCollector.addLog(_)}}},{key:"_makeSDKLogMessage",value:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];var o=t.map(function(s){return JSON.stringify(s)});return Ur(o.toString())}},{key:"logCollector",set:function(n){this._logCollector=n}}]),e}(),N=new Ns,qc=function(){if(!navigator.mediaDevices.getDisplayMedia){var e=oi.getErrorMessage(Y.ERR_NOT_SUPPORTED_BROWSER_FOR_SCREEN_SHARE);throw N.error(e),e}},hn=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return t}(nr),cl=function(){function e(n){b(this,e);var t=Ct(Ct({},e.default),n);this.localMediaView=t.localMediaView,this.remoteMediaView=t.remoteMediaView,this.videoEnabled=t.videoEnabled,this.audioEnabled=t.audioEnabled,this.videoWidth=t.videoWidth,this.videoHeight=t.videoHeight,this.videoFps=t.videoFps,this.frontCamera=t.frontCamera}return x(e,null,[{key:"default",get:function(){return{localMediaView:null,remoteMediaView:null,audioEnabled:!0,videoEnabled:!0,videoWidth:null,videoHeight:null,videoFps:null,frontCamera:!0}}}]),e}(),xi=Object.assign,Pt=Object.defineProperty,Li=!xi||O(function(){if(L&&xi({b:1},xi(Pt({},"a",{enumerable:!0,get:function(){Pt(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},n={},t=Symbol(),r="abcdefghijklmnopqrst";return e[t]=7,r.split("").forEach(function(o){n[o]=o}),xi({},e)[t]!=7||ea(xi({},n)).join("")!=r})?function(e,n){for(var t=ei(e),r=arguments.length,o=1,s=bu.f,l=Q.f;r>o;)for(var f,h=ye(arguments[o++]),_=s?ea(h).concat(s(h)):ea(h),k=_.length,E=0;k>E;)f=_[E++],L&&!l.call(h,f)||(t[f]=h[f]);return t}:xi;Ye({target:"Object",stat:!0,forced:Object.assign!==Li},{assign:Li}),function(e){e.UNAVAILABLE="unavailable",e.POOR="poor",e.FAIR="fair",e.AVERAGE="average",e.GOOD="good",e.EXCELLENT="excellent"}(gr||(gr={})),function(e){e.FREQUENCY="frequency",e.CONNECTION_QUALITY_CHANGE="connectionQualityChange"}(qn||(qn={}));var nt,yr,xs=function(){function e(n){b(this,e),Object.assign(this,n)}return x(e,[{key:"connectionQuality",get:function(){var n=this.mos;return n?0<=n&&n<2?gr.POOR:2<=n&&n<3?gr.FAIR:3<=n&&n<3.6?gr.AVERAGE:3.6<=n&&n<4.2?gr.GOOD:n>=4.2?gr.EXCELLENT:gr.UNAVAILABLE:gr.UNAVAILABLE}}]),e}();(function(e){e.NO_ANSWER="no_answer",e.CANCELED="canceled",e.DECLINED="declined",e.OTHER_DEVICE_ACCEPTED="other_device_accepted",e.COMPLETED="completed",e.CONNECTION_LOST="connection_lost",e.TIMED_OUT="timed_out",e.DIAL_FAILED="dial_failed",e.ACCEPT_FAILED="accept_failed",e.NOT_CONNECTED="not_connected",e.UNKNOWN="unknown"})(nt||(nt={})),function(e){e.CALLER="dc_caller",e.CALLEE="dc_callee"}(yr||(yr={}));var Kc=Math.min,di=[].lastIndexOf,Mt=!!di&&1/[1].lastIndexOf(1,-0)<0,nn=Ji("lastIndexOf"),un=fr("indexOf",{ACCESSORS:!0,1:0}),Ls=Mt||!nn||!un?function(e){if(Mt)return di.apply(this,arguments)||0;var n=_e(this),t=En(n.length),r=t-1;for(arguments.length>1&&(r=Kc(r,Jr(arguments[1]))),r<0&&(r=t+r);r>=0;r--)if(r in n&&n[r]===e)return r||0;return-1}:di;Ye({target:"Array",proto:!0,forced:Ls!==[].lastIndexOf},{lastIndexOf:Ls});var Gt,Ps=Ot("match"),Jf=function(e){var n;return we(e)&&((n=e[Ps])!==void 0?!!n:ue(e)=="RegExp")},Cn=[].push,Qc=Math.min,Ms=4294967295,Pi=!O(function(){return!RegExp(Ms,"y")});Ts("split",2,function(e,n,t){var r;return r="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?function(o,s){var l=String(oe(this)),f=s===void 0?Ms:s>>>0;if(f===0)return[];if(o===void 0)return[l];if(!Jf(o))return n.call(l,o,f);for(var h,_,k,E=[],y=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(o.sticky?"y":""),w=0,T=new RegExp(o.source,y+"g");(h=vo.call(T,l))&&!((_=T.lastIndex)>w&&(E.push(l.slice(w,h.index)),h.length>1&&h.index<l.length&&Cn.apply(E,h.slice(1)),k=h[0].length,w=_,E.length>=f));)T.lastIndex===h.index&&T.lastIndex++;return w===l.length?!k&&T.test("")||E.push(""):E.push(l.slice(w)),E.length>f?E.slice(0,f):E}:"0".split(void 0,0).length?function(o,s){return o===void 0&&s===0?[]:n.call(this,o,s)}:n,[function(o,s){var l=oe(this),f=o==null?void 0:o[e];return f!==void 0?f.call(o,l,s):r.call(String(l),o,s)},function(o,s){var l=t(r,o,this,s,r!==n);if(l.done)return l.value;var f=lt(o),h=String(this),_=Lc(f,RegExp),k=f.unicode,E=(f.ignoreCase?"i":"")+(f.multiline?"m":"")+(f.unicode?"u":"")+(Pi?"y":"g"),y=new _(Pi?f:"^(?:"+f.source+")",E),w=s===void 0?Ms:s>>>0;if(w===0)return[];if(h.length===0)return ma(y,h)===null?[h]:[];for(var T=0,A=0,H=[];A<h.length;){y.lastIndex=Pi?A:0;var j,$=ma(y,Pi?h:h.slice(A));if($===null||(j=Qc(En(y.lastIndex+(Pi?0:A)),h.length))===T)A=As(h,A,k);else{if(H.push(h.slice(T,A)),H.length===w)return H;for(var se=1;se<=$.length-1;se++)if(H.push($[se]),H.length===w)return H;A=T=j}}return H.push(h.slice(T)),H}]},!Pi),function(e){e.REMOTE_AUDIO_AND_VIDEO="remote_audio_and_video",e.REMOTE_AUDIO_ONLY="remote_audio_only",e.LOCAL_REMOTE_AUDIOS="local_remote_audios",e.LOCAL_AUDIO_REMOTE_AUDIO_AND_VIDEO="local_audio_remote_audio_and_video",e.LOCAL_AUDIO_AND_VIDEO_REMOTE_AUDIO="local_audio_and_video_remote_audio"}(Gt||(Gt={}));var Er=function(){function e(n){if(b(this,e),this.recordingType=n.recordingType,this.callId=n.callId,n.fileName){var t=bs?"mp4":"webm";n.fileName.toLocaleLowerCase().split(".").reverse()[0]!==t?this.fileName="".concat(n.fileName,".").concat(t):this.fileName=n.fileName}else this.fileName=e.defaultFileName(this.recordingType,this.callId)}return x(e,[{key:"isVideo",get:function(){return this.recordingType===Gt.LOCAL_AUDIO_AND_VIDEO_REMOTE_AUDIO||this.recordingType===Gt.LOCAL_AUDIO_REMOTE_AUDIO_AND_VIDEO||this.recordingType===Gt.REMOTE_AUDIO_AND_VIDEO}}],[{key:"defaultFileName",value:function(n,t){var r=new Date(Date.now()-6e4*new Date().getTimezoneOffset()).toISOString(),o=(r=r.replace(/-|:/g,"")).lastIndexOf(".");return"".concat(n,"_").concat(t,"_").concat(r.substring(0,o)).concat(bs?".mp4":".webm")}}]),e}(),rr=(C(function(e){var n=function(t){var r,o=Object.prototype,s=o.hasOwnProperty,l=Object.defineProperty||function(me,pe,Re){me[pe]=Re.value},f=typeof Symbol=="function"?Symbol:{},h=f.iterator||"@@iterator",_=f.asyncIterator||"@@asyncIterator",k=f.toStringTag||"@@toStringTag";function E(me,pe,Re){return Object.defineProperty(me,pe,{value:Re,enumerable:!0,configurable:!0,writable:!0}),me[pe]}try{E({},"")}catch{E=function(pe,Re,Je){return pe[Re]=Je}}function y(me,pe,Re,Je){var Ue=pe&&pe.prototype instanceof se?pe:se,It=Object.create(Ue.prototype),yn=new jo(Je||[]);return l(It,"_invoke",{value:Yr(me,Re,yn)}),It}function w(me,pe,Re){try{return{type:"normal",arg:me.call(pe,Re)}}catch(Je){return{type:"throw",arg:Je}}}t.wrap=y;var T="suspendedStart",A="suspendedYield",H="executing",j="completed",$={};function se(){}function fe(){}function ge(){}var De={};E(De,h,function(){return this});var Ne=Object.getPrototypeOf,Be=Ne&&Ne(Ne(ql([])));Be&&Be!==o&&s.call(Be,h)&&(De=Be);var He=ge.prototype=se.prototype=Object.create(De);function Le(me){["next","throw","return"].forEach(function(pe){E(me,pe,function(Re){return this._invoke(pe,Re)})})}function rt(me,pe){function Re(Ue,It,yn,Sr){var Tr=w(me[Ue],me,It);if(Tr.type!=="throw"){var Kl=Tr.arg,Qd=Kl.value;return Qd&&typeof Qd=="object"&&s.call(Qd,"__await")?pe.resolve(Qd.__await).then(function(Eu){Re("next",Eu,yn,Sr)},function(Eu){Re("throw",Eu,yn,Sr)}):pe.resolve(Qd).then(function(Eu){Kl.value=Eu,yn(Kl)},function(Eu){return Re("throw",Eu,yn,Sr)})}Sr(Tr.arg)}var Je;l(this,"_invoke",{value:function(Ue,It){function yn(){return new pe(function(Sr,Tr){Re(Ue,It,Sr,Tr)})}return Je=Je?Je.then(yn,yn):yn()}})}function Yr(me,pe,Re){var Je=T;return function(Ue,It){if(Je===H)throw new Error("Generator is already running");if(Je===j){if(Ue==="throw")throw It;return Iy()}for(Re.method=Ue,Re.arg=It;;){var yn=Re.delegate;if(yn){var Sr=Kd(yn,Re);if(Sr){if(Sr===$)continue;return Sr}}if(Re.method==="next")Re.sent=Re._sent=Re.arg;else if(Re.method==="throw"){if(Je===T)throw Je=j,Re.arg;Re.dispatchException(Re.arg)}else Re.method==="return"&&Re.abrupt("return",Re.arg);Je=H;var Tr=w(me,pe,Re);if(Tr.type==="normal"){if(Je=Re.done?j:A,Tr.arg===$)continue;return{value:Tr.arg,done:Re.done}}Tr.type==="throw"&&(Je=j,Re.method="throw",Re.arg=Tr.arg)}}}function Kd(me,pe){var Re=pe.method,Je=me.iterator[Re];if(Je===r)return pe.delegate=null,Re==="throw"&&me.iterator.return&&(pe.method="return",pe.arg=r,Kd(me,pe),pe.method==="throw")||Re!=="return"&&(pe.method="throw",pe.arg=new TypeError("The iterator does not provide a '"+Re+"' method")),$;var Ue=w(Je,me.iterator,pe.arg);if(Ue.type==="throw")return pe.method="throw",pe.arg=Ue.arg,pe.delegate=null,$;var It=Ue.arg;return It?It.done?(pe[me.resultName]=It.value,pe.next=me.nextLoc,pe.method!=="return"&&(pe.method="next",pe.arg=r),pe.delegate=null,$):It:(pe.method="throw",pe.arg=new TypeError("iterator result is not an object"),pe.delegate=null,$)}function qi(me){var pe={tryLoc:me[0]};1 in me&&(pe.catchLoc=me[1]),2 in me&&(pe.finallyLoc=me[2],pe.afterLoc=me[3]),this.tryEntries.push(pe)}function Vo(me){var pe=me.completion||{};pe.type="normal",delete pe.arg,me.completion=pe}function jo(me){this.tryEntries=[{tryLoc:"root"}],me.forEach(qi,this),this.reset(!0)}function ql(me){if(me){var pe=me[h];if(pe)return pe.call(me);if(typeof me.next=="function")return me;if(!isNaN(me.length)){var Re=-1,Je=function Ue(){for(;++Re<me.length;)if(s.call(me,Re))return Ue.value=me[Re],Ue.done=!1,Ue;return Ue.value=r,Ue.done=!0,Ue};return Je.next=Je}}return{next:Iy}}function Iy(){return{value:r,done:!0}}return fe.prototype=ge,l(He,"constructor",{value:ge,configurable:!0}),l(ge,"constructor",{value:fe,configurable:!0}),fe.displayName=E(ge,k,"GeneratorFunction"),t.isGeneratorFunction=function(me){var pe=typeof me=="function"&&me.constructor;return!!pe&&(pe===fe||(pe.displayName||pe.name)==="GeneratorFunction")},t.mark=function(me){return Object.setPrototypeOf?Object.setPrototypeOf(me,ge):(me.__proto__=ge,E(me,k,"GeneratorFunction")),me.prototype=Object.create(He),me},t.awrap=function(me){return{__await:me}},Le(rt.prototype),E(rt.prototype,_,function(){return this}),t.AsyncIterator=rt,t.async=function(me,pe,Re,Je,Ue){Ue===void 0&&(Ue=Promise);var It=new rt(y(me,pe,Re,Je),Ue);return t.isGeneratorFunction(pe)?It:It.next().then(function(yn){return yn.done?yn.value:It.next()})},Le(He),E(He,k,"Generator"),E(He,h,function(){return this}),E(He,"toString",function(){return"[object Generator]"}),t.keys=function(me){var pe=Object(me),Re=[];for(var Je in pe)Re.push(Je);return Re.reverse(),function Ue(){for(;Re.length;){var It=Re.pop();if(It in pe)return Ue.value=It,Ue.done=!1,Ue}return Ue.done=!0,Ue}},t.values=ql,jo.prototype={constructor:jo,reset:function(me){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(Vo),!me)for(var pe in this)pe.charAt(0)==="t"&&s.call(this,pe)&&!isNaN(+pe.slice(1))&&(this[pe]=r)},stop:function(){this.done=!0;var me=this.tryEntries[0].completion;if(me.type==="throw")throw me.arg;return this.rval},dispatchException:function(me){if(this.done)throw me;var pe=this;function Re(Tr,Kl){return It.type="throw",It.arg=me,pe.next=Tr,Kl&&(pe.method="next",pe.arg=r),!!Kl}for(var Je=this.tryEntries.length-1;Je>=0;--Je){var Ue=this.tryEntries[Je],It=Ue.completion;if(Ue.tryLoc==="root")return Re("end");if(Ue.tryLoc<=this.prev){var yn=s.call(Ue,"catchLoc"),Sr=s.call(Ue,"finallyLoc");if(yn&&Sr){if(this.prev<Ue.catchLoc)return Re(Ue.catchLoc,!0);if(this.prev<Ue.finallyLoc)return Re(Ue.finallyLoc)}else if(yn){if(this.prev<Ue.catchLoc)return Re(Ue.catchLoc,!0)}else{if(!Sr)throw new Error("try statement without catch or finally");if(this.prev<Ue.finallyLoc)return Re(Ue.finallyLoc)}}}},abrupt:function(me,pe){for(var Re=this.tryEntries.length-1;Re>=0;--Re){var Je=this.tryEntries[Re];if(Je.tryLoc<=this.prev&&s.call(Je,"finallyLoc")&&this.prev<Je.finallyLoc){var Ue=Je;break}}Ue&&(me==="break"||me==="continue")&&Ue.tryLoc<=pe&&pe<=Ue.finallyLoc&&(Ue=null);var It=Ue?Ue.completion:{};return It.type=me,It.arg=pe,Ue?(this.method="next",this.next=Ue.finallyLoc,$):this.complete(It)},complete:function(me,pe){if(me.type==="throw")throw me.arg;return me.type==="break"||me.type==="continue"?this.next=me.arg:me.type==="return"?(this.rval=this.arg=me.arg,this.method="return",this.next="end"):me.type==="normal"&&pe&&(this.next=pe),$},finish:function(me){for(var pe=this.tryEntries.length-1;pe>=0;--pe){var Re=this.tryEntries[pe];if(Re.finallyLoc===me)return this.complete(Re.completion,Re.afterLoc),Vo(Re),$}},catch:function(me){for(var pe=this.tryEntries.length-1;pe>=0;--pe){var Re=this.tryEntries[pe];if(Re.tryLoc===me){var Je=Re.completion;if(Je.type==="throw"){var Ue=Je.arg;Vo(Re)}return Ue}}throw new Error("illegal catch attempt")},delegateYield:function(me,pe,Re){return this.delegate={iterator:ql(me),resultName:pe,nextLoc:Re},this.method==="next"&&(this.arg=r),$}},t}(e.exports);try{regeneratorRuntime=n}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}}),ua("slice")),Fs=fr("slice",{ACCESSORS:!0,0:0,1:2}),Yc=Ot("species"),Xc=[].slice,eh=Math.max;Ye({target:"Array",proto:!0,forced:!rr||!Fs},{slice:function(e,n){var t,r,o,s=_e(this),l=En(s.length),f=ki(e,l),h=ki(n===void 0?l:n,l);if(ti(s)&&(typeof(t=s.constructor)!="function"||t!==Array&&!ti(t.prototype)?we(t)&&(t=t[Yc])===null&&(t=void 0):t=void 0,t===Array||t===void 0))return Xc.call(s,f,h);for(r=new(t===void 0?Array:t)(eh(h-f,0)),o=0;f<h;f++,o++)f in s&&sa(r,o,s[f]);return r.length=o,r}});var th=ua("splice"),nh=fr("splice",{ACCESSORS:!0,0:0,1:2}),rh=Math.max,ih=Math.min,ah=9007199254740991,oh="Maximum allowed length exceeded";Ye({target:"Array",proto:!0,forced:!th||!nh},{splice:function(e,n){var t,r,o,s,l,f,h=ei(this),_=En(h.length),k=ki(e,_),E=arguments.length;if(E===0?t=r=0:E===1?(t=0,r=_-k):(t=E-2,r=ih(rh(Jr(n),0),_-k)),_+t-r>ah)throw TypeError(oh);for(o=Nu(h,r),s=0;s<r;s++)(l=k+s)in h&&sa(o,s,h[l]);if(o.length=r,t<r){for(s=k;s<_-r;s++)f=s+t,(l=s+r)in h?h[f]=h[l]:delete h[f];for(s=_;s>_-r+t;s--)delete h[s-1]}else if(t>r)for(s=_-r;s>k;s--)f=s+t-1,(l=s+r-1)in h?h[f]=h[l]:delete h[f];for(s=0;s<t;s++)h[s+k]=arguments[s+2];return h.length=_-r+t,o}});var pn=function(){function e(){b(this,e),Z(this,"_listeners",{}),Z(this,"on",this.addEventListener),Z(this,"off",this.removeEventListener)}return x(e,[{key:"addEventListener",value:function(n,t){var r=this;return n in this._listeners||(this._listeners[n]=[]),this._listeners[n].push(t),function(){return r.removeEventListener(n,t)}}},{key:"once",value:function(n,t){var r=this;return this.on(n,function o(){t.apply(void 0,arguments),r.removeEventListener(n,o)})}},{key:"removeEventListener",value:function(n,t){if(n in this._listeners){for(var r=this._listeners[n],o=0,s=r.length;o<s;o++)if(r[o]===t)return void r.splice(o,1)}}},{key:"removeAllEventListeners",value:function(){this._listeners={}}},{key:"_dispatchEvent",value:function(n){if(n in this._listeners){for(var t=this._listeners[n].slice(),r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];for(var l=0,f=t.length;l<f;l++){var h;(h=t[l]).call.apply(h,[this].concat(o))}}}}]),e}(),Us=xt.f,dl=Function.prototype,fl=dl.toString,hl=/^\s*function ([^ (]*)/,Zc="name";L&&!(Zc in dl)&&Us(dl,Zc,{configurable:!0,get:function(){try{return fl.call(this).match(hl)[1]}catch{return""}}});var re,Jc=function(){function e(n){b(this,e),this.active=!1,this.queue=[],this.name=n}return x(e,[{key:"acquire",value:function(){var n=this;return new Promise(function(t){var r=function(){n.active=!0,t()};n.active?n.queue.push(r):r()})}},{key:"release",value:function(){if(this.active){this.active=!1;var n=this.queue.shift();n&&n()}}}]),e}(),ir=function e(){b(this,e)},sh=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return x(t,[{key:"getApiOption",value:function(){return{auth:this.getAuth(),path:this.getPath(),method:this.getMethod(),body:this.getData(),headers:this.getHeaders()}}},{key:"getAuth",value:function(){return!0}},{key:"getHeaders",value:function(){return{}}}]),t}(ir),uh=function(e){F(t,e);var n=U(t);function t(r){var o;return b(this,t),(o=n.call(this)).payload=r.payload||{},o}return t}(ir),pl=function(e){F(t,e);var n=U(t);function t(r){var o;return b(this,t),(o=n.call(this)).type=r.type,o.version=r.version,o.messageId=r.message_id,o.deliveryInfo=r.delivery_info,o.sequenceNumber=r.sequence_number,o.payload=o.parseData(r.payload),o}return x(t,[{key:"isSequential",value:function(){return typeof this.sequenceNumber=="number"}}]),t}(ir),lh=function(e){F(t,e);var n=U(t);function t(r){var o;return b(this,t),(o=n.call(this)).payload=o.parseData(r),o}return t}(ir),ed=function(e){F(t,e);var n=U(t);function t(r){var o;return b(this,t),(o=n.call(this)).version=r.version,o.messageId=r.message_id,o.type=r.type,o.deliveryInfo=r.delivery_info,o.sequenceNumber=r.sequence_number,o.payload=o.parseData(r.payload),o}return x(t,[{key:"isSequential",value:function(){return typeof this.sequenceNumber=="number"}}]),t}(ir),Dt=function(e){F(t,e);var n=U(t);function t(r){var o;return b(this,t),(o=n.call(this)).roomId=r,o}return x(t,[{key:"getPath",value:function(){return"/v1/rooms".concat(this.getSubPath())}}]),t}(sh),Dn=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return x(t,[{key:"getRoomId",value:function(){return this.payload.roomId}}]),t}(pl),Zt=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return t}(lh),Yp=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return x(t,[{key:"getRoomId",value:function(){return this.payload.roomId}}]),t}(ed);(function(e){e.CREATE="create",e.GET="get",e.QUERY="query",e.ENTER="enter",e.EXIT="exit",e.ALIVE="alive",e.AUDIO="audio",e.VIDEO="video",e.CUSTOM_ITEMS_FETCH="custom_items_fetch",e.CUSTOM_ITEMS_UPDATE="custom_items_update",e.CUSTOM_ITEMS_DELETE="custom_items_delete",e.INVITATION_SENT="invitation_sent",e.INVITATION_CANCELED="invitation_canceled",e.INVITATION_RECEIVED="invitation_received",e.INVITATION_ACCEPTED="invitation_accepted",e.INVITATION_DECLINED="invitation_declined",e.INVITATION_OTHER_DEVICE_ACCEPTED="invitation_other_device_accepted",e.INVITATION_OTHER_DEVICE_DECLINED="invitation_other_device_declined",e.ATTACH="attach",e.CONNECTED="connected",e.DETACH="detach",e.CREATE_ENDPOINT="create_endpoint",e.PUT_ENDPOINT="put_endpoint",e.RELEASE_ENDPOINT="release_endpoint",e.ROOM_DELETED="room_deleted",e.PARTICIPANT_ENTERED="participant_entered",e.PARTICIPANT_CONNECTED="participant_connected",e.PARTICIPANT_EXITED="participant_exited",e.PARTICIPANT_DISCONNECTED="participant_disconnected",e.PARTICIPANT_AUDIO_STATUS_CHANGED="participant_audio_status_changed",e.PARTICIPANT_VIDEO_STATUS_CHANGED="participant_video_status_changed"})(re||(re={}));var Xp=function(e){F(t,e);var n=U(t);function t(r,o){var s;return b(this,t),Z(ee(s=n.call(this,r)),"type",re.ALIVE),s.participantId=o,s}return x(t,[{key:"getData",value:function(){return{}}},{key:"getMethod",value:function(){return"POST"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/participants/").concat(this.participantId,"/alive")}}]),t}(Dt),ch=function(e){F(t,e);var n=U(t);function t(r,o,s,l){var f;return b(this,t),Z(ee(f=n.call(this,r)),"type",re.ATTACH),f.participantId=o,f.endpointId=s,f.attachTo=l,f}return x(t,[{key:"getData",value:function(){return{attach_to:this.attachTo}}},{key:"getMethod",value:function(){return"POST"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/participants/").concat(this.participantId,"/endpoints/").concat(this.endpointId,"/attach")}}]),t}(Dt),dh=function(e){F(t,e);var n=U(t);function t(r,o,s){var l;return b(this,t),Z(ee(l=n.call(this,r)),"type",re.AUDIO),l.participantId=o,l.enabled=s,l}return x(t,[{key:"getData",value:function(){return{on:this.enabled}}},{key:"getMethod",value:function(){return"PUT"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/participants/").concat(this.participantId,"/audio")}}]),t}(Dt),fh=function(e){F(t,e);var n=U(t);function t(r,o,s){var l;return b(this,t),Z(ee(l=n.call(this,r)),"type",re.CONNECTED),l.participantId=o,l.endpointId=s,l}return x(t,[{key:"getData",value:function(){return{}}},{key:"getMethod",value:function(){return"POST"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/participants/").concat(this.participantId,"/endpoints/").concat(this.endpointId,"/connected")}}]),t}(Dt),_l=function(e){F(t,e);var n=U(t);function t(r){var o;return b(this,t),Z(ee(o=n.call(this,void 0)),"type",re.CREATE),o.params=r,o}return x(t,[{key:"getData",value:function(){return{type:this.params.roomType,custom_items:this.params.customItems}}},{key:"getMethod",value:function(){return"POST"}},{key:"getSubPath",value:function(){return""}}]),t}(Dt),Zp=function(e){F(t,e);var n=U(t);function t(r,o,s,l){var f;return b(this,t),Z(ee(f=n.call(this,r)),"type",re.CREATE_ENDPOINT),f.participantId=o,f.sdp=s,f.mediaDirection=l,f}return x(t,[{key:"getData",value:function(){return{sdp:this.sdp,audio_attr:this.mediaDirection.audio,video_attr:this.mediaDirection.video}}},{key:"getMethod",value:function(){return"POST"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/participants/").concat(this.participantId,"/endpoints")}}]),t}(Dt),Jp=function(e){F(t,e);var n=U(t);function t(r,o){var s;return b(this,t),Z(ee(s=n.call(this,r)),"type",re.CUSTOM_ITEMS_DELETE),s.customItemKeys=o,s}return x(t,[{key:"getData",value:function(){return this.customItemKeys.length>0?{keys:this.customItemKeys}:{}}},{key:"getMethod",value:function(){return"DELETE"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/custom_items")}}]),t}(Dt),e_=function(e){F(t,e);var n=U(t);function t(r,o,s,l){var f;return b(this,t),Z(ee(f=n.call(this,r)),"type",re.DETACH),f.participantId=o,f.endpointId=s,f.attachTo=l,f}return x(t,[{key:"getData",value:function(){return{attach_to:this.attachTo}}},{key:"getMethod",value:function(){return"DELETE"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/participants/").concat(this.participantId,"/endpoints/").concat(this.endpointId)}}]),t}(Dt),kr=function(e){F(t,e);var n=U(t);function t(r,o){var s;return b(this,t),Z(ee(s=n.call(this,r)),"type",re.ENTER),s.params=o,s}return x(t,[{key:"getData",value:function(){return{is_audio_on:this.params.audioEnabled,is_video_on:this.params.videoEnabled,kick_siblings:this.params.kickSiblings}}},{key:"getMethod",value:function(){return"POST"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/participants")}}]),t}(Dt),td=function(e){F(t,e);var n=U(t);function t(r,o){var s;return b(this,t),Z(ee(s=n.call(this,r)),"type",re.EXIT),s.participantId=o,s}return x(t,[{key:"getData",value:function(){return{}}},{key:"getMethod",value:function(){return"DELETE"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/participants/").concat(this.participantId)}}]),t}(Dt),ml=function(e){F(t,e);var n=U(t);function t(r){var o;return b(this,t),Z(ee(o=n.call(this,r)),"type",re.CUSTOM_ITEMS_FETCH),o}return x(t,[{key:"getData",value:function(){}},{key:"getMethod",value:function(){return"GET"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/custom_items")}}]),t}(Dt),hh=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"type",re.GET),r}return x(t,[{key:"getData",value:function(){}},{key:"getMethod",value:function(){return"GET"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId)}}]),t}(Dt),ph=function(e){F(t,e);var n=U(t);function t(r,o,s,l){var f;return b(this,t),Z(ee(f=n.call(this,r)),"type",re.PUT_ENDPOINT),f.participantId=o,f.endpointId=s,f.sdp=l,f}return x(t,[{key:"getData",value:function(){return{sdp:this.sdp}}},{key:"getMethod",value:function(){return"PUT"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/participants/").concat(this.participantId,"/endpoints/").concat(this.endpointId)}}]),t}(Dt),_h=function(e){F(t,e);var n=U(t);function t(r,o,s){var l;return b(this,t),Z(ee(l=n.call(this,r)),"type",re.RELEASE_ENDPOINT),l.participantId=o,l.endpointId=s,l}return x(t,[{key:"getData",value:function(){return{}}},{key:"getMethod",value:function(){return"DELETE"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/participants/").concat(this.participantId,"/endpoints/").concat(this.endpointId)}}]),t}(Dt),nd=Ba.filter,Co=ua("filter"),rd=fr("filter");Ye({target:"Array",proto:!0,forced:!Co||!rd},{filter:function(e){return nd(this,e,arguments.length>1?arguments[1]:void 0)}});var id=[].join,t_=ye!=Object,mh=Ji("join",",");Ye({target:"Array",proto:!0,forced:t_||!mh},{join:function(e){return id.call(_e(this),e===void 0?",":e)}});var ad=function(){function e(){b(this,e)}return x(e,null,[{key:"createQuery",value:function(n){var t=this;return Object.keys(n).filter(function(r){return n[r]!=null}).map(function(r){return"".concat(encodeURIComponent(r),"=").concat(t.toQueryParam(n[r]))}).join("&")}},{key:"toQueryParam",value:function(n){return Array.isArray(n)?n.map(function(t){return encodeURIComponent(t.toString())}).join(","):encodeURIComponent(n.toString())}}]),e}(),vh=function(e){F(t,e);var n=U(t);function t(r,o,s){var l;return b(this,t),Z(ee(l=n.call(this)),"type",re.QUERY),l.params=l._normalizeParams(r),l.prev=o,l.next=s,l}return x(t,[{key:"getData",value:function(){}},{key:"getSubPath",value:function(){return"?".concat(this._createQuery())}},{key:"getMethod",value:function(){return"GET"}},{key:"_normalizeParams",value:function(r){var o=r.type,s=r.limit,l=r.state,f=r.currentParticipantCount,h=r.createdByUserIds,_=r.roomIds,k=r.createdAt;return{type:o,limit:s!=null?Math.min(Math.max(1,s),100):void 0,state:l,currentParticipantCount:f,createdByUserIds:h,roomIds:_,createdAt:k}}},{key:"_createQuery",value:function(){var r,o,s,l;return ad.createQuery({type:this.params.type,limit:this.params.limit,state:this.params.state,current_participant_range_gte:(r=this.params.currentParticipantCount)===null||r===void 0?void 0:r[0],current_participant_range_lte:(o=this.params.currentParticipantCount)===null||o===void 0?void 0:o[1],created_by_user_ids:this.params.createdByUserIds,room_ids:this.params.roomIds,created_at_start_date:(s=this.params.createdAt)===null||s===void 0?void 0:s[0],created_at_end_date:(l=this.params.createdAt)===null||l===void 0?void 0:l[1],prev:this.prev,next:this.next})}}]),t}(Dt),gh=function(e){F(t,e);var n=U(t);function t(r,o,s){var l;return b(this,t),Z(ee(l=n.call(this,r)),"type",re.CUSTOM_ITEMS_UPDATE),l.customItems=o,l.mode=s,l}return x(t,[{key:"getData",value:function(){return{custom_items:this.customItems,mode:this.mode}}},{key:"getMethod",value:function(){return"PUT"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/custom_items")}}]),t}(Dt),yh=function(e){F(t,e);var n=U(t);function t(r,o,s){var l;return b(this,t),Z(ee(l=n.call(this,r)),"type",re.VIDEO),l.participantId=o,l.enabled=s,l}return x(t,[{key:"getData",value:function(){return{on:this.enabled}}},{key:"getMethod",value:function(){return"PUT"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/participants/").concat(this.participantId,"/video")}}]),t}(Dt),n_=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"type",re.CUSTOM_ITEMS_DELETE),r}return x(t,[{key:"parseData",value:function(r){return{roomId:r.room_id,deleted:r.deleted,customItems:r.custom_items,affectedAt:r.affected_at}}}]),t}(Dn),gt=function e(n){b(this,e),Object.assign(this,n)},Xe=function(){function e(){b(this,e)}return x(e,null,[{key:"parseRoom",value:function(n){return n?{roomId:n.room_id,state:n.state,roomType:n.room_type,customItems:n.custom_items,createdAt:n.created_at,createdBy:n.created_by,participants:e.parseParticipants(n.current_participants)}:{}}},{key:"parseCustomItemsResult",value:function(n){return{customItems:n.custom_items||{},affectedKeys:[].concat(Nr(n.updated||[]),Nr(n.deleted||[])),affectedAt:n.affected_at||0}}},{key:"parseParticipants",value:function(n){return n&&Array.isArray(n)?n.map(function(t){return e.parseParticipant(t)}):[]}},{key:"parseParticipant",value:function(n){return n?{participantId:n.participant_id,enteredAt:n.entered_at,updatedAt:n.updated_at,exitedAt:n.exited_at,duration:n.duration,state:n.state,user:new gt(sn(n.user)),isLocalParticipant:n.is_local_participant,clientId:n.client_id,isAudioEnabled:n.is_audio_on,isVideoEnabled:n.is_video_on}:{}}}]),e}(),Eh=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"type",re.PARTICIPANT_AUDIO_STATUS_CHANGED),r}return x(t,[{key:"parseData",value:function(r){return{roomId:r.room_id,participant:Xe.parseParticipant(r.participant),on:r.on}}}]),t}(Dn),kh=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"type",re.PARTICIPANT_CONNECTED),r}return x(t,[{key:"parseData",value:function(r){return{roomId:r.room_id,participant:Xe.parseParticipant(r.participant)}}}]),t}(Dn),wh=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"type",re.PARTICIPANT_DISCONNECTED),r}return x(t,[{key:"parseData",value:function(r){return{roomId:r.room_id,participant:Xe.parseParticipant(r.participant),reason:r.reason}}}]),t}(Dn),Ch=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"type",re.PARTICIPANT_ENTERED),r}return x(t,[{key:"parseData",value:function(r){return{roomId:r.room_id,participant:Xe.parseParticipant(r.participant)}}}]),t}(Dn),Rh=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"type",re.PARTICIPANT_EXITED),r}return x(t,[{key:"parseData",value:function(r){return{roomId:r.room_id,participant:Xe.parseParticipant(r.participant)}}}]),t}(Dn),od=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"type",re.PARTICIPANT_VIDEO_STATUS_CHANGED),r}return x(t,[{key:"parseData",value:function(r){return{roomId:r.room_id,participant:Xe.parseParticipant(r.participant),on:r.on}}}]),t}(Dn),Ih=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"type",re.ROOM_DELETED),r}return x(t,[{key:"parseData",value:function(r){return{roomId:r.room_id}}}]),t}(Dn),sd=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"type",re.CUSTOM_ITEMS_UPDATE),r}return x(t,[{key:"parseData",value:function(r){return{roomId:r.room_id,updated:r.updated,customItems:r.custom_items,affectedAt:r.affected_at}}}]),t}(Dn),Sh=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return x(t,[{key:"parseData",value:function(r){return{}}}]),t}(Zt),Th=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return x(t,[{key:"parseData",value:function(r){return{}}}]),t}(Zt),ud=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return x(t,[{key:"parseData",value:function(r){return{me:Xe.parseParticipant(r.me)}}}]),t}(Zt),ld=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return x(t,[{key:"parseData",value:function(r){return{}}}]),t}(Zt),Ah=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return x(t,[{key:"parseData",value:function(r){return{endpointId:r.endpoint_id,sdp:r.sdp}}}]),t}(Zt),cd=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return x(t,[{key:"parseData",value:function(r){return{room:Xe.parseRoom(r.room)}}}]),t}(Zt),vl=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return x(t,[{key:"parseData",value:function(r){return Xe.parseCustomItemsResult(r)}}]),t}(Zt),r_=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return x(t,[{key:"parseData",value:function(r){return{}}}]),t}(Zt),Oh=Ba.find,Ro="find",dd=!0,gl=fr(Ro);Ro in[]&&Array(1)[Ro](function(){dd=!1}),Ye({target:"Array",proto:!0,forced:dd||!gl},{find:function(e){return Oh(this,e,arguments.length>1?arguments[1]:void 0)}}),na(Ro);var fi=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return x(t,[{key:"parseData",value:function(r){return r.room.current_participants.find(function(o){return o.participant_id===r.me.participant_id}).is_local_participant=!0,r.me.is_local_participant=!0,{me:Xe.parseParticipant(r.me),room:Xe.parseRoom(r.room)}}}]),t}(Zt),i_=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return x(t,[{key:"parseData",value:function(r){return{}}}]),t}(Zt),bh=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return x(t,[{key:"parseData",value:function(r){return Xe.parseCustomItemsResult(r)}}]),t}(Zt),fd=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return x(t,[{key:"parseData",value:function(r){return{room:Xe.parseRoom(r.room)}}}]),t}(Zt),Dh=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return x(t,[{key:"parseData",value:function(r){return{endpointId:r.endpoint_id,sdp:r.sdp}}}]),t}(Zt),Nh=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return x(t,[{key:"parseData",value:function(r){return{}}}]),t}(Zt),Vs=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return x(t,[{key:"parseData",value:function(r){return{rooms:r.rooms.map(function(o){return Xe.parseRoom(o)}),prev:r.prev,next:r.next}}}]),t}(Zt),Rn=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return x(t,[{key:"parseData",value:function(r){return Xe.parseCustomItemsResult(r)}}]),t}(Zt),a_=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return x(t,[{key:"parseData",value:function(r){return{me:Xe.parseParticipant(r.me)}}}]),t}(Zt),o_=function(e){F(t,e);var n=U(t);function t(r,o){var s;return b(this,t),Z(ee(s=n.call(this,r)),"type",re.INVITATION_ACCEPTED),s.inviterId=o,s}return x(t,[{key:"getData",value:function(){return{action:"accept",inviter_id:this.inviterId}}},{key:"getMethod",value:function(){return"PUT"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/invitation")}}]),t}(Dt),yl=function(e){F(t,e);var n=U(t);function t(r,o){var s;return b(this,t),Z(ee(s=n.call(this,r)),"type",re.INVITATION_CANCELED),s.inviteeId=o,s}return x(t,[{key:"getData",value:function(){return{invitee_id:this.inviteeId}}},{key:"getMethod",value:function(){return"DELETE"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/invitation")}}]),t}(Dt),In=function(e){F(t,e);var n=U(t);function t(r,o){var s;return b(this,t),Z(ee(s=n.call(this,r)),"type",re.INVITATION_DECLINED),s.inviterId=o,s}return x(t,[{key:"getData",value:function(){return{action:"decline",inviter_id:this.inviterId}}},{key:"getMethod",value:function(){return"PUT"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/invitation")}}]),t}(Dt),s_=function(e){F(t,e);var n=U(t);function t(r){var o;return b(this,t),Z(ee(o=n.call(this,void 0)),"type",re.ROOM_DELETED),o.roomId=r,o}return x(t,[{key:"getData",value:function(){return{}}},{key:"getMethod",value:function(){return"DELETE"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId)}}]),t}(Dt),Ae=function(e){F(t,e);var n=U(t);function t(r,o,s){var l;return b(this,t),Z(ee(l=n.call(this,r)),"type",re.INVITATION_RECEIVED),l.inviterId=o,l.shortLivedToken=s,l}return x(t,[{key:"getHeaders",value:function(){return{"SBCall-Short-Lived-Token":this.shortLivedToken}}},{key:"getData",value:function(){return{action:"receive",inviter_id:this.inviterId}}},{key:"getMethod",value:function(){return"PUT"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/invitation")}}]),t}(Dt),Io=function(e){F(t,e);var n=U(t);function t(r,o){var s;return b(this,t),Z(ee(s=n.call(this,r)),"type",re.INVITATION_SENT),s.inviteeId=o,s}return x(t,[{key:"getData",value:function(){return{invitee_id:this.inviteeId}}},{key:"getMethod",value:function(){return"POST"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/invitation")}}]),t}(Dt),hd=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"type",re.INVITATION_ACCEPTED),r}return x(t,[{key:"getRoomId",value:function(){return this.payload.room.roomId}},{key:"parseData",value:function(r){return{room:Xe.parseRoom(r.room),inviter:new gt(sn(r.inviter)),invitee:new gt(sn(r.invitee))}}}]),t}(Dn),xh=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"type",re.INVITATION_CANCELED),r}return x(t,[{key:"getRoomId",value:function(){return this.payload.room.roomId}},{key:"parseData",value:function(r){return{room:Xe.parseRoom(r.room),inviter:new gt(sn(r.inviter)),invitee:new gt(sn(r.invitee))}}}]),t}(Dn),u_=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"type",re.INVITATION_DECLINED),r}return x(t,[{key:"getRoomId",value:function(){return this.payload.room.roomId}},{key:"parseData",value:function(r){return{room:Xe.parseRoom(r.room),inviter:new gt(sn(r.inviter)),invitee:new gt(sn(r.invitee))}}}]),t}(Dn),js=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"type",re.INVITATION_RECEIVED),r}return x(t,[{key:"getRoomId",value:function(){return this.payload.room.roomId}},{key:"parseData",value:function(r){return{room:Xe.parseRoom(r.room),inviter:new gt(sn(r.inviter)),invitee:new gt(sn(r.invitee))}}}]),t}(Dn),El=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"type",re.INVITATION_SENT),r}return x(t,[{key:"getRoomId",value:function(){return this.payload.room.roomId}},{key:"parseData",value:function(r){return{room:Xe.parseRoom(r.room),inviter:new gt(sn(r.inviter)),invitee:new gt(sn(r.invitee)),shortLivedToken:r.sbcall_short_lived_token}}}]),t}(Dn),pd=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return x(t,[{key:"parseData",value:function(r){return{room:Xe.parseRoom(r.room)}}}]),t}(Zt),Lh=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return x(t,[{key:"parseData",value:function(r){return{room:Xe.parseRoom(r.room),inviter:new gt(sn(r.inviter)),invitee:new gt(sn(r.invitee)),shortLivedToken:r.shortLivedToken}}}]),t}(Zt),Nt=function(){function e(){b(this,e)}return x(e,null,[{key:"createCreate",value:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return ut(_l,t)}},{key:"createDeleteRoom",value:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return ut(s_,t)}},{key:"createGet",value:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return ut(hh,t)}},{key:"createRoomListQuery",value:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return ut(vh,t)}},{key:"createEnter",value:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return ut(kr,t)}},{key:"createExit",value:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return ut(td,t)}},{key:"createCreateEndpoint",value:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return ut(Zp,t)}},{key:"createPutEndpoint",value:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return ut(ph,t)}},{key:"createReleaseEndpoint",value:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return ut(_h,t)}},{key:"createAttach",value:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return ut(ch,t)}},{key:"createConnected",value:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return ut(fh,t)}},{key:"createDetach",value:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return ut(e_,t)}},{key:"createAlive",value:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return ut(Xp,t)}},{key:"createAudio",value:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return ut(dh,t)}},{key:"createVideo",value:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return ut(yh,t)}},{key:"createFetchCustomItems",value:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return ut(ml,t)}},{key:"createUpdateCustomItems",value:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return ut(gh,t)}},{key:"createDeleteCustomItems",value:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return ut(Jp,t)}},{key:"createSendInvitation",value:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return ut(Io,t)}},{key:"createCancelInvitation",value:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return ut(yl,t)}},{key:"createInvitationReceive",value:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return ut(Ae,t)}},{key:"createAcceptInvitation",value:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return ut(o_,t)}},{key:"createDeclineInvitation",value:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return ut(In,t)}},{key:"parseResponse",value:function(n,t){switch(n){case re.CREATE:return new cd(t);case re.ROOM_DELETED:return new pd(t);case re.GET:return new fd(t);case re.QUERY:return new Vs(t);case re.ENTER:return new fi(t);case re.EXIT:return new i_(t);case re.CUSTOM_ITEMS_FETCH:return new bh(t);case re.CUSTOM_ITEMS_UPDATE:return new Rn(t);case re.CUSTOM_ITEMS_DELETE:return new vl(t);case re.CREATE_ENDPOINT:return new Ah(t);case re.PUT_ENDPOINT:return new Dh(t);case re.RELEASE_ENDPOINT:return new Nh(t);case re.ATTACH:return new Th(t);case re.CONNECTED:return new ld(t);case re.DETACH:return new r_(t);case re.ALIVE:return new Sh(t);case re.AUDIO:return new ud(t);case re.VIDEO:return new a_(t);case re.INVITATION_SENT:return new Lh(t);default:return void N.error(new ze(Y.ERR_WRONG_RESPONSE,{error:new Error("unhandled command data. ".concat(JSON.stringify(t)))}))}}},{key:"parse",value:function(n){switch(n.type){case re.CUSTOM_ITEMS_UPDATE:return new sd(n);case re.CUSTOM_ITEMS_DELETE:return new n_(n);case re.ROOM_DELETED:return new Ih(n);case re.PARTICIPANT_ENTERED:return new Ch(n);case re.PARTICIPANT_CONNECTED:return new kh(n);case re.PARTICIPANT_EXITED:return new Rh(n);case re.PARTICIPANT_DISCONNECTED:return new wh(n);case re.PARTICIPANT_AUDIO_STATUS_CHANGED:return new Eh(n);case re.PARTICIPANT_VIDEO_STATUS_CHANGED:return new od(n);case re.INVITATION_SENT:return new El(n);case re.INVITATION_CANCELED:return new xh(n);case re.INVITATION_RECEIVED:return new js(n);case re.INVITATION_ACCEPTED:return new hd(n);case re.INVITATION_DECLINED:return new u_(n);default:return void N.error(new ze(Y.ERR_WRONG_RESPONSE,{error:new Error("unhandled command data. ".concat(JSON.stringify(n)))}))}}}]),e}(),Ph=function(e,n,t,r){try{return r?n(lt(t)[0],t[1]):n(t)}catch(o){throw es(e),o}},hi=function(e){var n,t,r,o,s,l,f=ei(e),h=typeof this=="function"?this:Array,_=arguments.length,k=_>1?arguments[1]:void 0,E=k!==void 0,y=mr(f),w=0;if(E&&(k=Or(k,_>2?arguments[2]:void 0,2)),y==null||h==Array&&Zo(y))for(t=new h(n=En(f.length));n>w;w++)l=E?k(f[w],w):f[w],sa(t,w,l);else for(s=(o=y.call(f)).next,t=new h;!(r=s.call(o)).done;w++)l=E?Ph(o,k,[r.value,w],!0):r.value,sa(t,w,l);return t.length=w,t},_d=!rs(function(e){Array.from(e)});Ye({target:"Array",stat:!0,forced:_d},{from:hi});for(var _n=function(e,n){return e(n={exports:{}},n.exports),n.exports}(function(e){var n=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(n){var t=new Uint8Array(16);e.exports=function(){return n(t),t}}else{var r=new Array(16);e.exports=function(){for(var o,s=0;s<16;s++)!(3&s)&&(o=4294967296*Math.random()),r[s]=o>>>((3&s)<<3)&255;return r}}}),ar=[],wr=0;wr<256;++wr)ar[wr]=(wr+256).toString(16).substr(1);var Mh=function(e,n){var t=0,r=ar;return[r[e[t++]],r[e[t++]],r[e[t++]],r[e[t++]],"-",r[e[t++]],r[e[t++]],"-",r[e[t++]],r[e[t++]],"-",r[e[t++]],r[e[t++]],"-",r[e[t++]],r[e[t++]],r[e[t++]],r[e[t++]],r[e[t++]],r[e[t++]]].join("")},Bs=function(e,n,t){var r=n&&t||0;typeof e=="string"&&(n=e==="binary"?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||_n)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,n)for(var s=0;s<16;++s)n[r+s]=o[s];return n||Mh(o)},Cr=Au.includes,Fh=fr("indexOf",{ACCESSORS:!0,1:0});Ye({target:"Array",proto:!0,forced:!Fh},{includes:function(e){return Cr(this,e,arguments.length>1?arguments[1]:void 0)}}),na("includes");var Vr=function(e){if(Jf(e))throw TypeError("The method doesn't accept regular expressions");return e},l_=Ot("match");Ye({target:"String",proto:!0,forced:!function(e){var n=/./;try{"/./"[e](n)}catch{try{return n[l_]=!1,"/./"[e](n)}catch{}}return!1}("includes")},{includes:function(e){return!!~String(oe(this)).indexOf(Vr(e),arguments.length>1?arguments[1]:void 0)}});var zs=`[	
\v\f\r                　\u2028\u2029\uFEFF]`,Uh=RegExp("^"+zs+zs+"*"),Vh=RegExp(zs+zs+"*$"),kl=function(e){return function(n){var t=String(oe(n));return 1&e&&(t=t.replace(Uh,"")),2&e&&(t=t.replace(Vh,"")),t}},c_={start:kl(1),end:kl(2),trim:kl(3)},wl=Ou.f,md=cn.f,or=xt.f,at=c_.trim,jt="Number",yt=S[jt],Jt=yt.prototype,Kn=ue(Ci(Jt))==jt,ga=function(e){var n,t,r,o,s,l,f,h,_=Te(e,!1);if(typeof _=="string"&&_.length>2){if((n=(_=at(_)).charCodeAt(0))===43||n===45){if((t=_.charCodeAt(2))===88||t===120)return NaN}else if(n===48){switch(_.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+_}for(l=(s=_.slice(2)).length,f=0;f<l;f++)if((h=s.charCodeAt(f))<48||h>o)return NaN;return parseInt(s,r)}}return+_};if(Xi(jt,!yt(" 0o1")||!yt("0b1")||yt("+0x1"))){for(var Bt,Rr=function(e){var n=arguments.length<1?0:e,t=this;return t instanceof Rr&&(Kn?O(function(){Jt.valueOf.call(t)}):ue(t)!=jt)?Xa(new yt(ga(n)),t,Rr):ga(n)},Mi=L?wl(yt):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),So=0;Mi.length>So;So++)Me(yt,Bt=Mi[So])&&!Me(Rr,Bt)&&or(Rr,Bt,md(yt,Bt));Rr.prototype=Jt,Jt.constructor=Rr,Xt(S,jt,Rr)}Ye({target:"Number",stat:!0},{isNaN:function(e){return e!=e}});var To=function(e){return e===void 0||Number.isNaN(e)||e===""||e===[]},ya=function(e){Object.keys(e).forEach(function(n){To(e[n])&&delete e[n]})},$t,vd=function(){var e=Ie(regeneratorRuntime.mark(function n(t){var r,o,s,l,f,h,_,k,E,y,w,T,A;return regeneratorRuntime.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(t){H.next=2;break}throw new Error("'getCandidateInfo()' is called without rtcConnection");case 2:return H.next=4,t.getStats();case 4:r=H.sent,s=r.entries(),l=0;case 7:if(!(l<r.size)){H.next=18;break}if(f=s.next(),h=f.value){H.next=11;break}return H.abrupt("continue",15);case 11:if((_=h[1]).type!=="candidate-pair"||_.state!=="succeeded"){H.next=15;break}return o=_.localCandidateId,H.abrupt("break",18);case 15:l++,H.next=7;break;case 18:if(!(l<r.size)){H.next=28;break}if(k=s.next(),E=k.value){H.next=22;break}return H.abrupt("continue",25);case 22:if((y=E[1]).type!=="local-candidate"||y.id!==o){H.next=25;break}return H.abrupt("return",{connectionType:(w=y.candidateType)!==null&&w!==void 0?w:"",protocol:(T=y.protocol)!==null&&T!==void 0?T:"",relayProtocol:(A=y.relayProtocol)!==null&&A!==void 0?A:""});case 25:l++,H.next=18;break;case 28:return H.abrupt("return",null);case 29:case"end":return H.stop()}},n)}));return function(n){return e.apply(this,arguments)}}(),Ao=function(){var e=Ie(regeneratorRuntime.mark(function n(t){var r,o,s,l,f,h,_;return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return r={},o={},s={},l={},f=new Map,h=new Map,t.forEach(function(E){E.type==="codec"&&f.set(E.id,E),E.type==="candidate-pair"&&E.state==="succeeded"&&(_=E.localCandidateId,r.webrtc_timestamp=E.time),E.type==="media-source"&&h.set(E.kind,E)}),t.forEach(function(E){if(E.type==="local-candidate"&&E.id===_&&(r.network_type=E.networkType,o.network_type=E.networkType,o.protocol=E.protocol,o.candidate_type=E.candidateType),E.kind==="audio"||E.mediaType==="audio"){if(E.type==="outbound-rtp"){var y=f.get(E.codecId);y&&(s.codec=y.mimeType),s.total_packets_sent=E.packetsSent,s.total_bytes_sent=E.bytesSent,s.total_retransmitted_packets_sent=E.retransmittedPacketsSent,s.total_retransmitted_bytes_sent=E.retransmittedBytesSent,s.target_bitrate=E.targetBitrate,s.outbound_nack_count=E.nackCount}if(E.type==="remote-inbound-rtp"&&(s.remote_jitter=E.jitter,s.remote_rtt=1e3*E.roundTripTime,s.remote_total_packets_lost=E.packetsLost,s.remote_fraction_lost=E.fractionLost),E.type==="inbound-rtp"){var w=f.get(E.codecId);w&&(s.codec=w.mimeType),s.total_packets_lost=E.packetsLost,s.total_packets_received=E.packetsReceived,s.total_bytes_received=E.bytesReceived,s.inbound_jitter=E.jitter,s.total_packets_discarded=E.packetsDiscarded,s.total_fec_packets_received=E.fecPacketsReceived,s.total_fec_packets_discarded=E.fecPacketsDiscarded,s.jitter_buffer_delay=E.jitterBufferDelay,s.jitter_buffer_emitted_count=E.jitterBufferEmittedCount,s.jitter_buffer_target_delay=E.jitterBufferTargetDelay,s.total_samples_received=E.totalSamplesReceived,s.total_concealed_samples=E.concealedSamples,s.concealed_samples_ratio=E.concealedSamples/E.totalSamplesReceived*100,s.total_silent_concealed_samples=E.silentConcealedSamples,s.total_inserted_samples_for_deceleration=E.insertedSamplesForDeceleration,s.total_removed_samples_for_acceleration=E.removedSamplesForAcceleration}}if(E.kind==="video"||E.mediaType==="video"){var T,A,H;if(l.video_source_width=(T=h.get("video"))===null||T===void 0?void 0:T.width,l.video_source_height=(A=h.get("video"))===null||A===void 0?void 0:A.height,l.video_source_frames_per_second=(H=h.get("video"))===null||H===void 0?void 0:H.framesPerSecond,E.type==="outbound-rtp"){var j=f.get(E.codecId);j&&(l.codec=j.mimeType),l.target_bitrate=E.targetBitrate,l.sent_frame_width=E.frameWidth,l.sent_frame_height=E.frameHeight,l.outbound_fir_count=E.firCount,l.outbound_pli_count=E.pliCount,l.outbound_nack_count=E.nackCount,l.total_packets_sent=E.packetsSent,l.total_bytes_sent=E.bytesSent,l.total_frames_encoded=E.framesEncoded,l.total_key_frames_encoded=E.keyFramesEncoded,l.total_frames_sent=E.framesSent,l.huge_frames_sent=E.hugeFramesSent,l.quality_limitation_reason=E.qualityLimitationReason,l.quality_limitation_durations=E.qualityLimitationDurations,l.quality_limitation_resolution_changes=E.qualityLimitationResolutionChanges,l.total_retransmitted_packets_sent=E.retransmittedPacketsSent,l.total_retransmitted_bytes_sent=E.retransmittedBytesSent}if(E.type==="remote-inbound-rtp"&&(l.remote_jitter=E.jitter,l.remote_rtt=1e3*E.roundTripTime,l.remote_total_packets_lost=E.packetsLost,l.remote_packets_lost_rate=E.remote_packets_lost/l.packets_sent*100,l.remote_fraction_lost=E.fractionLost),E.type==="inbound-rtp"){var $=f.get(E.codecId);$&&(l.codec=$.mimeType),l.received_frame_width=E.frameWidth,l.received_frame_height=E.frameHeight,l.total_frames_received=E.framesReceived,l.total_frames_decoded=E.framesDecoded,l.total_key_frames_decoded=E.keyFramesDecoded,l.total_frames_dropped=E.framesDropped,l.inbound_jitter=E.jitter,l.total_bytes_received=E.bytesReceived,l.total_decode_time=E.totalDecodeTime,l.total_inter_frame_delay=E.totalInterFrameDelay,l.average_inter_frame_delay=E.totalInterFrameDelay/E.framesDecoded,l.total_squared_inter_frame_delay=E.totalSquaredInterFrameDelay,l.jitter_buffer_delay=E.jitterBufferDelay,l.jitter_buffer_emitted_count=E.jitterBufferEmittedCount,l.jitter_buffer_target_delay=E.jitterBufferTargetDelay,l.freeze_count=E.freezeCount,l.pause_count=E.pauseCount,l.total_freezes_duration=E.totalFreezesDuration,l.total_pauses_duration=E.totalPausesDuration,E.packetsLost,E.packetsLost,E.packetsReceived,l.total_packets_lost=E.packetsLost,l.total_packets_received=E.packetsReceived,l.inbound_fir_count=E.firCount,l.inbound_pli_count=E.pliCount,l.inbound_nack_count=E.nackCount}}}),ya(o),ya(s),ya(l),r.transport_info=o,r.audio=s,r.video=l,k.abrupt("return",r);case 15:case"end":return k.stop()}},n)}));return function(n){return e.apply(this,arguments)}}(),pi=function(){var e=Ie(regeneratorRuntime.mark(function n(t){var r;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(t){o.next=2;break}throw new Error("'getStats()' is called without rtcConnection");case 2:return o.next=4,t.getStats();case 4:return r=o.sent,o.abrupt("return",Ao(r));case 6:case"end":return o.stop()}},n)}));return function(n){return e.apply(this,arguments)}}(),Oo=function(e){var n=Ct(Ct({},e),{},{transport_info:Ct({},e.transport_info),audio:Ct({},e.audio)});return e.video&&(n.video=Ct({},e.video)),n},Hs=function(e,n){var t=Oo(e),r=t.audio,o=t.video;return r.packets_lost=r.total_packets_lost,r.packets_sent=r.total_packets_sent,r.packets_received=r.total_packets_received,r.bytes_sent=r.total_bytes_sent,r.bytes_received=r.total_bytes_received,r.remote_packets_lost=r.remote_total_packets_lost,r.retransmitted_packets_sent=r.total_retransmitted_packets_sent,r.retransmitted_bytes_sent=r.total_retransmitted_bytes_sent,r.fec_packets_received=r.total_fec_packets_received,r.samples_received=r.total_samples_received,r.concealed_samples=r.total_concealed_samples,r.silent_concealed_samples=r.total_silent_concealed_samples,r.inserted_samples_for_deceleration=r.total_inserted_samples_for_deceleration,r.removed_samples_for_acceleration=r.total_removed_samples_for_acceleration,n&&(r.packets_lost-=n.audio.total_packets_lost,r.packets_sent-=n.audio.total_packets_sent,r.packets_received-=n.audio.total_packets_received,r.bytes_sent-=n.audio.total_bytes_sent,r.remote_packets_lost-=n.audio.remote_total_packets_lost,r.retransmitted_packets_sent-=n.audio.total_retransmitted_packets_sent,r.retransmitted_bytes_sent-=n.audio.total_retransmitted_bytes_sent,r.fec_packets_received-=n.audio.total_fec_packets_received,r.bytes_received-=n.audio.total_bytes_received,r.samples_received-=n.audio.total_samples_received,r.concealed_samples-=n.audio.total_concealed_samples,r.silent_concealed_samples-=n.audio.total_silent_concealed_samples,r.inserted_samples_for_deceleration-=n.audio.total_inserted_samples_for_deceleration,r.removed_samples_for_acceleration-=n.audio.total_removed_samples_for_acceleration),r.packets_lost_rate=r.packets_lost/(r.packets_lost+r.packets_received)*100,r.remote_packets_lost_rate=r.remote_packets_lost/r.packets_sent*100,o.packets_lost=o.total_packets_lost,o.remote_packets_lost=o.remote_total_packets_lost,o.packets_sent=o.total_packets_sent,o.packets_received=o.total_packets_received,o.bytes_sent=o.total_bytes_sent,o.bytes_received=o.total_bytes_received,o.retransmitted_packets_sent=o.total_retransmitted_packets_sent,o.retransmitted_bytes_sent=o.total_retransmitted_bytes_sent,o.frames_encoded=o.total_frames_encoded,o.key_frames_encoded=o.total_key_frames_encoded,o.frames_decoded=o.total_frames_decoded,o.key_frames_decoded=o.total_key_frames_decoded,o.frames_sent=o.total_frames_sent,o.frames_received=o.total_frames_received,n&&(o.packets_lost-=n.video.total_packets_lost,o.remote_packets_lost-=n.video.remote_total_packets_lost,o.packets_sent-=n.video.total_packets_sent,o.packets_received-=n.video.total_packets_received,o.bytes_sent-=n.video.total_bytes_sent,o.bytes_received-=n.video.total_bytes_received,o.retransmitted_packets_sent-=n.video.total_retransmitted_packets_sent,o.retransmitted_bytes_sent-=n.video.total_retransmitted_bytes_sent,o.frames_encoded-=n.video.total_frames_encoded,o.key_frames_encoded-=n.video.total_key_frames_encoded,o.frames_decoded-=n.video.total_frames_decoded,o.key_frames_decoded-=n.video.total_key_frames_decoded,o.frames_sent-=n.video.total_frames_sent,o.frames_received-=n.video.total_frames_received),o.packets_lost_rate=o.packets_lost/(o.packets_lost+o.packets_received)*100,o.remote_packets_lost_rate=o.remote_packets_lost/o.packets_sent*100,r.remote_rtt&&(r.mos=function(s,l,f){if(!(To(s)||To(l)||To(f))){var h,_,k=f/2+2*l+10;return h=k<160?93.2-k/40:93.2-(k-120)/10,(h-=2.5*s)<=0?_=1:0<h&&h<100?_=1+.035*h+7e-6*h*(h-60)*(100-h):h>=100&&(_=4.5),_<1&&(_=1),_>4.5&&(_=4.5),_}}(r.packets_lost,r.remote_jitter,r.remote_rtt)),t},_i=function(e,n){if(e!==void 0||n!==void 0)return(e??0)+(n??0)},Ws=function(e,n,t){if(e!==void 0||n!==void 0)return(e??0)*t+(n??0)*(1-t)},mi=function(e,n){var t=Oo(e);if(!n)return t;function r(o){return o==="audio"?function(s){t.audio[s]=_i(t.audio[s],n.audio[s])}:function(s){t.video[s]=_i(t.video[s],n.video[s])}}return r("audio")("total_packets_sent"),r("audio")("total_packets_received"),r("audio")("total_packets_lost"),r("audio")("retransmitted_packets_sent"),r("audio")("jitter_buffer_delay"),r("video")("outbound_fir_count"),r("video")("outbound_pli_count"),r("video")("outbound_nack_count"),r("video")("retransmitted_packets_sent"),r("video")("quality_limitation_resolution_changes"),t.video.quality_limitation_reason==="none"&&(t.video.quality_limitation_reason=n.video.quality_limitation_reason),r("video")("key_frames_decoded"),r("video")("total_decode_time"),r("video")("total_inter_frame_delay"),r("video")("total_squared_inter_frame_delay"),r("video")("total_packets_lost"),r("video")("total_packets_received"),r("video")("jitter_buffer_delay"),r("video")("jitter_buffer_emitted_count"),r("video")("frames_received"),r("video")("frames_decoded"),r("video")("freeze_count"),r("video")("pause_count"),r("video")("total_freezes_duration"),r("video")("total_pauses_duration"),t},Gs=function(e,n,t){var r=Oo(e);if(t<=1||!n)return r;var o=1/t,s=1/(t-1);function l(h){return h==="audio"?function(_){r.audio[_]=Ws(r.audio[_],n.audio[_],["rtt","mos"].includes(_)?s:o)}:function(_){r.video[_]=Ws(r.video[_],n.video[_],["rtt","mos"].includes(_)?s:o)}}function f(h){return h==="audio"?function(_){r.audio[_]=n.audio[_]}:function(_){r.video[_]=n.video[_]}}return f("audio")("codec"),l("audio")("remote_rtt"),l("audio")("packets_sent"),l("audio")("packets_received"),l("audio")("bytes_sent"),l("audio")("bytes_received"),l("audio")("retransmitted_packets_sent"),l("audio")("retransmitted_bytes_sent"),l("audio")("fec_packets_received"),l("audio")("samples_received"),l("audio")("concealed_samples"),l("audio")("silent_concealed_samples"),l("audio")("inserted_samples_for_deceleration"),l("audio")("removed_samples_for_acceleration"),l("audio")("target_bitrate"),l("audio")("remote_fraction_lost"),l("audio")("inbound_jitter"),l("audio")("remote_jitter"),l("audio")("packets_lost"),l("audio")("packets_lost_rate"),l("audio")("remote_packets_lost"),l("audio")("remote_packets_lost_rate"),l("audio")("mos"),f("video")("codec"),l("video")("remote_rtt"),l("video")("packets_sent"),l("video")("packets_received"),l("video")("packets_lost"),l("video")("bytes_sent"),l("video")("bytes_received"),l("video")("retransmitted_packets_sent"),l("video")("retransmitted_bytes_sent"),l("video")("packets_lost_rate"),l("video")("remote_packets_lost"),l("video")("remote_packets_lost_rate"),l("video")("frames_sent"),l("video")("frames_received"),l("video")("frames_encoded"),l("video")("key_frames_encoded"),l("video")("frames_decoded"),l("video")("key_frames_decoded"),l("video")("video_source_width"),l("video")("video_source_height"),l("video")("video_source_frames_per_second"),l("video")("received_frame_width"),l("video")("received_frame_height"),l("video")("sent_frame_width"),l("video")("sent_frame_height"),l("video")("target_bitrate"),l("video")("inbound_jitter"),l("video")("remote_jitter"),l("video")("remote_fraction_lost"),r.video.quality_limitation_reason==="none"&&(r.video.quality_limitation_reason=n.video.quality_limitation_reason),r},Ea=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return t}(uh);(function(e){e.OFFER="offer",e.ANSWER="answer",e.CANDIDATE="candidate"})($t||($t={}));var tt,Cl=function(e){F(t,e);var n=U(t);function t(r){var o;return b(this,t),Z(ee(o=n.call(this,{payload:r})),"type",$t.ANSWER),o}return t}(Ea),Rl=function(e){F(t,e);var n=U(t);function t(r){var o;return b(this,t),Z(ee(o=n.call(this,{payload:r})),"type",$t.CANDIDATE),o}return t}(Ea),Nn=function(e){F(t,e);var n=U(t);function t(r){var o;return b(this,t),Z(ee(o=n.call(this,{payload:r})),"type",$t.OFFER),o}return t}(Ea),Ir=function(){function e(){b(this,e)}return x(e,null,[{key:"createOffer",value:function(n,t){return new Nn({peerConnectionId:n,sdp:t})}},{key:"createAnswer",value:function(n,t){return new Cl({peerConnectionId:n,sdp:t})}},{key:"createCandidate",value:function(n,t){return new Rl({peerConnectionId:n,candidate:t})}}]),e}(),sr=function(){function e(n){b(this,e),this._context=n}return x(e,[{key:"_changeState",value:function(n){this._state&&this._state.type===n.type?N.error(new Error("self-transition is not allowed")):(N.debug("[".concat(this.name,"] state: ").concat(this._state?this._state.type:"null"," -> ").concat(n.type)),this._state&&this._state.destroy(),this._state=n,this._state.context=this._context,this._state.start())}},{key:"state",get:function(){return this._state}}]),e}(),xn=function(){function e(n){b(this,e),this._stateMutator=n}return x(e,[{key:"start",value:function(){this._onStart()}},{key:"destroy",value:function(){this._onDestroy()}},{key:"context",set:function(n){this._context=n}}]),e}(),gd=function(){function e(n,t){b(this,e),this._context=n,this._stateMutator=t}return x(e,[{key:"state",get:function(){return this._stateMutator.state}}]),e}(),jr=function(e){F(t,e);var n=U(t);function t(r){var o;return b(this,t),(o=n.call(this,r))._stateMutator=r,o}return t}(xn);(function(e){e.IDLE="idle",e.OFFERING="offering",e.ANSWERING="answering",e.CONNECTED="connected",e.RECONNECTING="reconnecting",e.ICE_RESTART_OFFERING="iceRestartOffering",e.ICE_RESTART_ANSWERING="iceRestartAnswering",e.CLOSED="closed"})(tt||(tt={}));var $s,d_=function(e){F(r,e);var n,t=U(r);function r(o,s){var l;return b(this,r),Z(ee(l=t.call(this,o)),"type",tt.ANSWERING),l._stateMutator=o,l._offerCommand=s,l}return x(r,[{key:"_onStart",value:function(){this._context.dispatchEvent("answering"),this._context.createRTCConnection(),this._offerCommand&&this.onOfferReceived(this._offerCommand)}},{key:"_onDestroy",value:function(){}},{key:"onOfferReceived",value:(n=Ie(regeneratorRuntime.mark(function o(s){return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this._context.setRemoteDescription("offer",s.payload.sdp);case 2:this._context.prepareSessionDescription(),this._context.sendAnswer().catch(function(f){return N.debug(f)});case 4:case"end":return l.stop()}},o,this)})),function(o){return n.apply(this,arguments)})},{key:"onIceConnected",value:function(){this._stateMutator.toConnected(!1)}},{key:"onClose",value:function(){this._stateMutator.toClosed()}}]),r}(jr),Fi=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"type",tt.CLOSED),r}return x(t,[{key:"_onStart",value:function(){this._context.dispatchEvent("closed")}},{key:"_onDestroy",value:function(){}}]),t}(jr),jh=function(e){F(r,e);var n,t=U(r);function r(o,s){var l;return b(this,r),Z(ee(l=t.call(this,o)),"type",tt.CONNECTED),l._stateMutator=o,l._isReconnected=s,l}return x(r,[{key:"_onStart",value:function(){this._context.dispatchEvent("connected")}},{key:"_onDestroy",value:function(){}},{key:"onOfferReceived",value:(n=Ie(regeneratorRuntime.mark(function o(s){return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:this._stateMutator.toReconnecting(s);case 1:case"end":return l.stop()}},o,this)})),function(o){return n.apply(this,arguments)})},{key:"onIceDisconnected",value:function(){this._stateMutator.toReconnecting()}},{key:"onIceFailed",value:function(){this._context.isDisposable&&this.onClose(),this._context.isInitiator?this._stateMutator.toIceRestartOffering():this._stateMutator.toIceRestartAnswering()}},{key:"onClose",value:function(){this._stateMutator.toClosed()}}]),r}(jr),yd=function(e){F(r,e);var n,t=U(r);function r(o,s){var l;return b(this,r),Z(ee(l=t.call(this,o)),"type",tt.ICE_RESTART_ANSWERING),l._stateMutator=o,l._offerCommand=s,l}return x(r,[{key:"_onStart",value:function(){this._context.dispatchEvent("iceRestartAnswering"),this._offerCommand&&this.onOfferReceived(this._offerCommand)}},{key:"_onDestroy",value:function(){}},{key:"onOfferReceived",value:(n=Ie(regeneratorRuntime.mark(function o(s){return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this._context.setRemoteDescription("offer",s.payload.sdp);case 2:this._context.sendAnswer().catch(function(f){return N.debug(f)});case 3:case"end":return l.stop()}},o,this)})),function(o){return n.apply(this,arguments)})},{key:"onIceConnected",value:function(){this._stateMutator.toConnected(!0)}},{key:"onClose",value:function(){this._stateMutator.toClosed()}}]),r}(jr),ka=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"type",tt.ICE_RESTART_OFFERING),r}return x(t,[{key:"_onStart",value:function(){this._context.dispatchEvent("iceRestartOffering"),this._context.sendOffer(!0)}},{key:"_onDestroy",value:function(){}},{key:"onAnswerReceived",value:function(r){this._context.setRemoteDescription("answer",r.payload.sdp)}},{key:"onIceConnected",value:function(){this._stateMutator.toConnected(!0)}},{key:"onClose",value:function(){this._stateMutator.toClosed()}}]),t}(jr),Ed=function(e){F(r,e);var n,t=U(r);function r(){var o;b(this,r);for(var s=arguments.length,l=new Array(s),f=0;f<s;f++)l[f]=arguments[f];return Z(ee(o=t.call.apply(t,[this].concat(l))),"type",tt.IDLE),o}return x(r,[{key:"_onStart",value:function(){}},{key:"_onDestroy",value:function(){}},{key:"createOffer",value:function(){this._stateMutator.toOffering()}},{key:"onOfferReceived",value:(n=Ie(regeneratorRuntime.mark(function o(s){return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:this._stateMutator.toAnswering(s);case 1:case"end":return l.stop()}},o,this)})),function(o){return n.apply(this,arguments)})},{key:"onClose",value:function(){this._stateMutator.toClosed()}}]),r}(jr),wa=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"type",tt.OFFERING),r}return x(t,[{key:"_onStart",value:function(){this._context.dispatchEvent("offering"),this._context.createRTCConnection(),this._context.prepareSessionDescription()}},{key:"_onDestroy",value:function(){}},{key:"onAnswerReceived",value:function(r){this._context.setRemoteDescription("answer",r.payload.sdp)}},{key:"onIceConnected",value:function(){this._stateMutator.toConnected(!1)}},{key:"onClose",value:function(){this._stateMutator.toClosed()}}]),t}(jr),Bh=function(e){F(t,e);var n=U(t);function t(r,o){var s;return b(this,t),Z(ee(s=n.call(this,r)),"type",tt.RECONNECTING),s._stateMutator=r,s._offerCommand=o,s}return x(t,[{key:"_onStart",value:function(){this._context.dispatchEvent("reconnecting"),this._offerCommand&&this.onOfferReceived(this._offerCommand)}},{key:"_onDestroy",value:function(){}},{key:"onOfferReceived",value:function(r){this._stateMutator.toIceRestartAnswering(r)}},{key:"onIceConnected",value:function(){this._stateMutator.toConnected(!0)}},{key:"onIceFailed",value:function(){this._context.isDisposable&&this.onClose(),this._context.isInitiator?this._stateMutator.toIceRestartOffering():this._stateMutator.toIceRestartAnswering()}},{key:"onClose",value:function(){this._stateMutator.toClosed()}}]),t}(jr),zh=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return x(t,[{key:"toIdle",value:function(){this._changeState(new Ed(this))}},{key:"toOffering",value:function(){this._changeState(new wa(this))}},{key:"toAnswering",value:function(r){this._changeState(new d_(this,r))}},{key:"toConnected",value:function(r){this._changeState(new jh(this,r))}},{key:"toReconnecting",value:function(r){this._changeState(new Bh(this,r))}},{key:"toIceRestartOffering",value:function(){this._changeState(new ka(this))}},{key:"toIceRestartAnswering",value:function(r){this._changeState(new yd(this,r))}},{key:"toClosed",value:function(){this._changeState(new Fi(this))}},{key:"state",get:function(){return this._state}},{key:"name",get:function(){return"PeerConnection"}}]),t}(sr),kd=function(e){F(t,e);var n=U(t);function t(r){var o;return b(this,t),(o=n.call(this,r,new zh(r)))._context=r,o._stateMutator.toIdle(),o}return x(t,[{key:"onOfferReceived",value:function(r){N.verbose("[".concat(this.state.type,"] onOfferReceived"));var o=this.state;switch(o.type){case tt.IDLE:case tt.ANSWERING:case tt.CONNECTED:case tt.RECONNECTING:case tt.ICE_RESTART_ANSWERING:o.onOfferReceived(r);break;default:N.error("[".concat(this.state.type,"] onOfferReceived"))}}},{key:"onAnswerReceived",value:function(r){N.verbose("[".concat(this.state.type,"] onAnswerReceived"));var o=this.state;switch(o.type){case tt.OFFERING:case tt.ICE_RESTART_OFFERING:o.onAnswerReceived(r);break;default:N.error("[".concat(this.state.type,"] onAnswerReceived"))}}},{key:"onClose",value:function(){N.verbose("[".concat(this.state.type,"] onClose"));var r=this.state;switch(r.type){case tt.IDLE:case tt.OFFERING:case tt.ANSWERING:case tt.CONNECTED:case tt.RECONNECTING:case tt.ICE_RESTART_OFFERING:case tt.ICE_RESTART_ANSWERING:r.onClose();break;default:N.error("[".concat(this.state.type,"] onClose"))}}},{key:"createOffer",value:function(){N.verbose("[".concat(this.state.type,"] createOffer"));var r=this.state;r.type===tt.IDLE?r.createOffer():N.error("[".concat(this.state.type,"] createOffer"))}},{key:"onIceConnected",value:function(){N.verbose("[".concat(this.state.type,"] onIceConnected"));var r=this.state;switch(r.type){case tt.OFFERING:case tt.ANSWERING:case tt.RECONNECTING:case tt.ICE_RESTART_OFFERING:case tt.ICE_RESTART_ANSWERING:r.onIceConnected();break;default:N.error("[".concat(this.state.type,"] onIceConnected"))}}},{key:"onIceDisconnected",value:function(){N.verbose("[".concat(this.state.type,"] onIceDisconnected"));var r=this.state;r.type===tt.CONNECTED?r.onIceDisconnected():N.error("[".concat(this.state.type,"] onIceDisconnected"))}},{key:"onIceFailed",value:function(){N.verbose("[".concat(this.state.type,"] onIceFailed"));var r=this.state;switch(r.type){case tt.CONNECTED:case tt.RECONNECTING:r.onIceFailed();break;default:N.error("[".concat(this.state.type,"] onIceFailed"))}}},{key:"state",get:function(){return this._stateMutator.state}}]),t}(gd);(function(e){e.RELAY="relay",e.ALL="all"})($s||($s={}));var Ke,Il=function e(){var n=this;b(this,e),this.promise=new Promise(function(t,r){n.resolve=t,n.reject=r})},qs=function(){var e=Ie(regeneratorRuntime.mark(function n(t,r,o){var s,l,f,h,_,k,E,y,w,T=arguments;return regeneratorRuntime.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(s=T.length>3&&T[3]!==void 0&&T[3],l=T.length>4&&T[4]!==void 0?T[4]:{count:0,deferred:new Il},f=l.deferred,h=l.count,!s){A.next=6;break}return f.reject("retry is halted."),A.abrupt("return",f.promise);case 6:return A.prev=6,A.next=9,r();case 9:k=A.sent,h>0&&((_=o.onRecover)===null||_===void 0||_.call(o)),f.resolve(k),A.next=23;break;case 14:if(A.prev=14,A.t0=A.catch(6),(E=o.onError)===null||E===void 0||E.call(o,A.t0),!((y=t.calcTimeout(h+1))>=0)){A.next=22;break}return(w=o.onRetrial)===null||w===void 0||w.call(o,h+1,A.t0),setTimeout(function(){qs(t,r,o,s,{count:h+1,deferred:f})},y),A.abrupt("return",f.promise);case 22:f.reject(A.t0);case 23:return A.abrupt("return",f.promise);case 24:case"end":return A.stop()}},n,null,[[6,14]])}));return function(n,t,r){return e.apply(this,arguments)}}(),wd=function(){function e(){b(this,e)}return x(e,[{key:"calcTimeout",value:function(n){switch(n){case 1:return 1e3;case 2:return 2e3;case 3:return 3e3;default:return-1}}}]),e}(),Ks=function(){function e(n,t,r){b(this,e),this.interval=n,this.noise=t,this.maxRetrial=r}return x(e,[{key:"calcTimeout",value:function(n){return n>this.maxRetrial?-1:this.interval+(Math.random()-.5)*this.noise*2}}]),e}(),Ui=function(e){F(l,e);var n,t,r,o,s=U(l);function l(f,h,_,k,E,y,w,T){var A;return b(this,l),(A=s.call(this))._ctx=f,A.id=h,A._signalingClient=_,A._localStream=k,A._isInitiator=E,A._turnCredential=y,A._mediaDirections=w,A._isDisposable=T,A._stateMachine=new kd({dispatchEvent:A._dispatchEvent.bind(ee(A)),isInitiator:A._isInitiator,setRemoteDescription:A._setRemoteDescription.bind(ee(A)),sendAnswer:A._sendAnswer.bind(ee(A)),sendOffer:A._sendOffer.bind(ee(A)),createRTCConnection:A._createRTCConnection.bind(ee(A)),prepareSessionDescription:A._prepareSessionDescription.bind(ee(A)),isDisposable:A._isDisposable}),k&&k.on("streamChanged",function(H){return A.onLocalStream(H)}),A._halts=[],A}return x(l,[{key:"onEvent",value:function(f){switch(f.type){case $t.CANDIDATE:return void this._receiveCandidate(f);case $t.OFFER:this._stateMachine.onOfferReceived(f);break;case $t.ANSWER:this._stateMachine.onAnswerReceived(f);break;default:N.error(new Error("unhandled call event ".concat(f)))}}},{key:"createOffer",value:function(){this._stateMachine.createOffer()}},{key:"close",value:function(){this._halts.forEach(function(f){return f()}),this._closeRTCConnection(),this._stateMachine.onClose()}},{key:"onLocalStream",value:function(f){if(this._rtcConnection){var h,_=mt(f.getTracks());try{for(_.s();!(h=_.n()).done;){var k=h.value;this._replaceTrack(k)}}catch(E){_.e(E)}finally{_.f()}}}},{key:"getCandidateInfo",value:(o=Ie(regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",vd(this.rtcConnection));case 1:case"end":return h.stop()}},f,this)})),function(){return o.apply(this,arguments)})},{key:"getStatsLog",value:(r=Ie(regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",pi(this.rtcConnection));case 1:case"end":return h.stop()}},f,this)})),function(){return r.apply(this,arguments)})},{key:"_replaceTrack",value:function(f){var h,_=mt(this._rtcConnection.getSenders());try{for(_.s();!(h=_.n()).done;){var k=h.value;k.track&&k.track.kind===f.kind&&k.replaceTrack(f)}}catch(E){_.e(E)}finally{_.f()}}},{key:"_createRTCConnection",value:function(){var f,h=this;this._turnCredential&&(f={iceServers:[{username:this._turnCredential.username,credential:this._turnCredential.password,urls:this._turnCredential.turnUrls}],iceTransportPolicy:this._turnCredential.transportPolicy||$s.ALL});var _=new RTCPeerConnection(f);_.onnegotiationneeded=function(){h._sendOffer(!1)},_.onicecandidate=function(k){var E,y;k.candidate&&((E=(y=h._signalingClient).sendCandidate)===null||E===void 0||E.call(y,k.candidate))},_.onconnectionstatechange=function(){return h._handleConnectionStateChange(_)},_.oniceconnectionstatechange=function(){return h._handleIceConnectionStateChange(_)},_.ontrack=function(k){return h._onRemoteTrack(k)},this._rtcConnection=_}},{key:"_closeRTCConnection",value:function(){this._rtcConnection&&(this._rtcConnection.onnegotiationneeded=null,this._rtcConnection.onicecandidate=null,this._rtcConnection.oniceconnectionstatechange=null,this._rtcConnection.onconnectionstatechange=null,this._rtcConnection.close(),this._rtcConnection=null,delete this._remoteStream)}},{key:"_prepareSessionDescription",value:function(){var f=this._mediaDirections,h=f.audio,_=f.video,k={sendrecv:[],sendonly:[],recvonly:[],none:[]};k[h].push("audio"),k[_].push("video"),k.sendrecv.length&&this._addTracks(k.sendrecv),k.sendonly.length&&this._addSendOnlyTransceivers(k.sendonly),k.recvonly.length&&this._addReceiveOnlyTransceivers(k.recvonly)}},{key:"_addTracks",value:function(f){var h=this;N.debug("_addTracks()");var _=this._localStream.localStream;_.getTracks().forEach(function(k){f.includes(k.kind)&&h._rtcConnection.addTrack(k,_)})}},{key:"_addReceiveOnlyTransceivers",value:function(f){var h=this;f.forEach(function(_){h._rtcConnection.addTransceiver(_,{direction:"recvonly"})})}},{key:"_addSendOnlyTransceivers",value:function(f){var h=this,_=this._localStream.localStream;f.forEach(function(k){_.getTracks().forEach(function(E){E.kind===k&&h._rtcConnection.addTransceiver(E,{direction:"sendonly",streams:[_]})})})}},{key:"_setRemoteDescription",value:function(f,h){var _=new RTCSessionDescription({type:f,sdp:h});return this._rtcConnection.setRemoteDescription(_)}},{key:"_sendOffer",value:(t=Ie(regeneratorRuntime.mark(function f(h){var _,k,E,y,w=this;return regeneratorRuntime.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return _={iceRestart:h||!1},T.next=3,this._rtcConnection.createOffer(_);case 3:return k=T.sent,T.next=6,this._rtcConnection.setLocalDescription(k);case 6:return E=function(){return w._signalingClient.sendOfferSdp(w._rtcConnection.localDescription)},y=!1,this._halts.push(function(){y=!0}),T.abrupt("return",qs(new Ks(2500,1e3,12),E,{onError:function(A){N.warning("Failed to send offer command",A)}},y));case 10:case"end":return T.stop()}},f,this)})),function(f){return t.apply(this,arguments)})},{key:"_sendAnswer",value:(n=Ie(regeneratorRuntime.mark(function f(){var h,_,k,E=this;return regeneratorRuntime.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,this._rtcConnection.createAnswer();case 2:return(h=y.sent).sdp=h.sdp.replace("actpass","active"),y.next=6,this._rtcConnection.setLocalDescription(h);case 6:return _=function(){return E._signalingClient.sendAnswerSdp(E._rtcConnection.localDescription)},k=!1,this._halts.push(function(){k=!0}),y.abrupt("return",qs(new Ks(2500,1e3,12),_,{onError:function(w){N.warning("Failed to send answer command",w)}},k));case 10:case"end":return y.stop()}},f,this)})),function(){return n.apply(this,arguments)})},{key:"_handleIceConnectionStateChange",value:function(f){switch(N.verbose("[".concat(this._state.type,"] iceConnectionState ").concat(f.iceConnectionState)),f.iceConnectionState){case"connected":this._stateMachine.onIceConnected();break;case"disconnected":this._stateMachine.onIceDisconnected();break;case"failed":this._stateMachine.onIceFailed(),this._dispatchEvent("iceFailed")}}},{key:"_handleConnectionStateChange",value:function(f){f.connectionState==="failed"&&(this._stateMachine.onIceFailed(),this._dispatchEvent("iceFailed"))}},{key:"_receiveCandidate",value:function(f){var h=f.payload.candidate;this._rtcConnection.addIceCandidate({sdpMLineIndex:h.sdpMLineIndex,sdpMid:h.sdpMid,candidate:h.sdp}).catch(function(_){N.error(_)})}},{key:"_onRemoteTrack",value:function(f){this._remoteStream=f.streams[0],this._dispatchEvent("remoteStream",this._remoteStream)}},{key:"_state",get:function(){return this._stateMachine.state}},{key:"rtcConnection",get:function(){return this._rtcConnection}},{key:"remoteStream",get:function(){return this._remoteStream}},{key:"signalingClient",get:function(){return this._signalingClient}}]),l}(pn),f_=function(){function e(){b(this,e)}var n;return x(e,[{key:"addStatsLog",value:function(t){this._accumulated=mi(t,this._accumulated)}},{key:"getAccumulatedStats",value:(n=Ie(regeneratorRuntime.mark(function t(r){var o;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,r.getStatsLog();case 2:return o=s.sent,s.abrupt("return",mi(o,this._accumulated));case 4:case"end":return s.stop()}},t,this)})),function(t){return n.apply(this,arguments)})}]),e}(),bo=function(e){F(r,e);var n,t=U(r);function r(o,s){var l;return b(this,r),Z(ee(l=t.call(this)),"_peerConnections",new Map),Z(ee(l),"_unhandledCommands",[]),l._ctx=o,l._mediaDirections=s,l._statsLogAccumulator=new f_,l}return x(r,[{key:"_activePC",get:function(){return this._peerConnections.get(this._activePCId)},set:function(o){this._peerConnections.has(o.id)||this._addPC(o),this._activePCId=o.id}},{key:"_preparingPC",get:function(){return this._peerConnections.get(this._preparingPCId)},set:function(o){this._peerConnections.has(o.id)||this._addPC(o),this._preparingPCId=o.id}},{key:"activePeerConnection",get:function(){return this._activePC}}]),x(r,[{key:"createPeerConnection",value:function(o,s,l,f,h){N.debug("Create new peer connection");var _=new Ui(this._ctx,o,s,l,f,h,this._mediaDirections,!1);return this._activePC?(this._replacePreparing(_,f),this._dispatchUnhandledCommands(_),_):(this._activePC=_,this._dispatchEvent("initialized"),this._dispatchUnhandledCommands(_),_)}},{key:"createOffer",value:function(){this._activePC&&this._activePC.createOffer()}},{key:"close",value:function(){this._deactivatePreparing(),this._deactivateActive()}},{key:"onEvent",value:function(o){var s,l=(s=o.payload.peerConnectionId)!==null&&s!==void 0?s:void 0,f=this._peerConnections.get(l);this._isActive(l)||this._isPreparing(l)?f.onEvent(o):this._isInactive(l)||this._dispatchOnCreation(o)}},{key:"getStatsLog",value:(n=Ie(regeneratorRuntime.mark(function o(){return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(this._activePC){s.next=2;break}return s.abrupt("return",void 0);case 2:return s.abrupt("return",this._statsLogAccumulator.getAccumulatedStats(this._activePC));case 3:case"end":return s.stop()}},o,this)})),function(){return n.apply(this,arguments)})},{key:"_addPC",value:function(o){this._peerConnections.set(o.id,o)}},{key:"_isActive",value:function(o){return o===this._activePCId}},{key:"_isPreparing",value:function(o){return o===this._preparingPCId}},{key:"_isInactive",value:function(o){return!this._isActive(o)&&!this._isPreparing(o)&&!!this._peerConnections.get(o)}},{key:"_deactivateActive",value:function(){N.debug("Close active pc if exist"),this._activePC&&(this._activePC.removeAllEventListeners(),this._activePC.close(),delete this._activePCId)}},{key:"_activatePreparing",value:function(){var o=this;if(N.debug("Activate preparing pc if exist"),this._preparingPC){var s=this._activePC;this._activePC=this._preparingPC,delete this._preparingPCId,this._dispatchEvent("replaced"),s.removeAllEventListeners(),s.getStatsLog().then(function(l){o._statsLogAccumulator.addStatsLog(l),s.close()})}}},{key:"_deactivatePreparing",value:function(){N.debug("Close preparing pc if exist"),this._preparingPC&&(this._preparingPC.removeAllEventListeners(),this._preparingPC.close(),delete this._preparingPCId)}},{key:"_replacePreparing",value:function(o,s){var l=this;N.debug("Create preparing peer connection"),this._deactivatePreparing(),this._preparingPC=o,this._preparingPC.once("connected",function(){setTimeout(function(){l._activatePreparing()},2e3)}),s&&this._preparingPC.createOffer()}},{key:"_dispatchUnhandledCommands",value:function(o){this._unhandledCommands.filter(function(s){return s.payload.peerConnectionId===o.id}).forEach(function(s){return o.onEvent(s)}),this._unhandledCommands=this._unhandledCommands.filter(function(s){return s.payload.peerConnectionId!==o.id})}},{key:"_dispatchOnCreation",value:function(o){this._unhandledCommands.push(o)}}]),r}(pn),Cd=function(){function e(n){b(this,e),this._requests=new Map,this.timeoutTime=n}return x(e,[{key:"has",value:function(n){return this._requests.has(n)}},{key:"get",value:function(n){return this._requests.get(n)}},{key:"register",value:function(n){if(!n)throw new Error("invalid request id");if(this._requests.has(n))throw new Error("duplicate requests");var t=new Il;return this._requests.set(n,{deferred:t,timer:this._createTimeoutTimer(n)}),t}},{key:"unregister",value:function(n){if(!this._requests.has(n))return null;var t=this._requests.get(n),r=t.timer,o=t.deferred;return clearTimeout(r),this._requests.delete(n),o}},{key:"_createTimeoutTimer",value:function(n){var t=this;return setTimeout(function(){t.unregister(n).reject(new ze(Y.ERR_NO_RESPONSE_DUE_TO_TIMEOUT))},this._getTimeoutTime())}},{key:"rejectAll",value:function(n){var t,r=mt(this._requests.keys());try{for(r.s();!(t=r.n()).done;){var o=t.value,s=this._requests.get(o);clearTimeout(s.timer),s.deferred.reject(n)}}catch(l){r.e(l)}finally{r.f()}this._requests.clear()}},{key:"_getTimeoutTime",value:function(){return this.timeoutTime}}]),e}(),zt=function(){function e(o,s,l,f){b(this,e),Z(this,"_timeoutTime",6e4),this._ctx=o,this._participantId=s,this._mediaDirections=l,this._endpointId=f,this._requestMap=new Cd(this._timeoutTime)}var n,t,r;return x(e,[{key:"sendOfferSdp",value:(r=Ie(regeneratorRuntime.mark(function o(s){return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(this._endpointId){l.next=5;break}return l.next=3,this._sendOfferAndUnregisterCreateEndpointRequest(s);case 3:l.next=7;break;case 5:return l.next=7,this._sendOfferAndUnregisterPutEndpointRequest(s);case 7:case"end":return l.stop()}},o,this)})),function(o){return r.apply(this,arguments)})},{key:"_sendOfferAndUnregisterCreateEndpointRequest",value:(t=Ie(regeneratorRuntime.mark(function o(s){var l,f;return regeneratorRuntime.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return l=this._requestMap.unregister("".concat(this._participantId,":create-endpoint-request")),h.prev=1,h.next=4,this._sendCreateEndpoint(s);case 4:return f=h.sent,l&&l.resolve(f),h.abrupt("return",f);case 9:throw h.prev=9,h.t0=h.catch(1),l&&l.reject(h.t0),h.t0;case 13:case"end":return h.stop()}},o,this,[[1,9]])})),function(o){return t.apply(this,arguments)})},{key:"_sendOfferAndUnregisterPutEndpointRequest",value:(n=Ie(regeneratorRuntime.mark(function o(s){var l,f;return regeneratorRuntime.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return l=this._requestMap.unregister("".concat(this._participantId,":put-endpoint-request")),h.prev=1,h.next=4,this._sendPutEndpoint(s);case 4:return f=h.sent,l&&l.resolve(f),h.abrupt("return",f);case 9:throw h.prev=9,h.t0=h.catch(1),l&&l.reject(h.t0),h.t0;case 13:case"end":return h.stop()}},o,this,[[1,9]])})),function(o){return n.apply(this,arguments)})},{key:"registerCreateEndpointRequest",value:function(){if(N.debug("registerCreateEndpointRequest()"),this._endpointId)throw new Error("Cannot register create endpoint request on endpoint recycle");return this._requestMap.register("".concat(this._participantId,":create-endpoint-request"))}},{key:"registerPutEndpointRequest",value:function(){if(N.debug("registerPutEndpointRequest()"),!this._endpointId)throw new Error("Cannot register put endpoint request without endpoint id");return this._requestMap.register("".concat(this._participantId,":put-endpoint-request"))}},{key:"_sendCreateEndpoint",value:function(o){var s=Nt.createCreateEndpoint(this._ctx.roomId,this._participantId,o.sdp,this._mediaDirections);return this._ctx.sender.send(s)}},{key:"_sendPutEndpoint",value:function(o){var s=Nt.createPutEndpoint(this._ctx.roomId,this._participantId,this._endpointId,o.sdp);return this._ctx.sender.send(s)}}]),e}(),Vi=function(e){F(t,e);var n=U(t);function t(r){var o;return b(this,t),(o=n.call(this,r))._stateMutator=r,o}return t}(xn);(function(e){e.IDLE="idle",e.OFFERING="offering",e.ESTABLISHED="established",e.CONNECTED="connected",e.DISCONNECTED="disconnected",e.RECONNECTING="reconnecting",e.RELEASING="releasing",e.CLOSED="closed"})(Ke||(Ke={}));var Hh=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"type",Ke.CLOSED),r}return x(t,[{key:"_onStart",value:function(){this._context.dispatchEvent("closed")}},{key:"_onDestroy",value:function(){}}]),t}(Vi),h_=function(e){F(t,e);var n=U(t);function t(r){var o;return b(this,t),Z(ee(o=n.call(this,r)),"type",Ke.CONNECTED),o._stateMutator=r,o}return x(t,[{key:"_onStart",value:function(){var r=this._context.reconnectCount>0;this._context.dispatchEvent("connected",r)}},{key:"_onDestroy",value:function(){}},{key:"onICEFailed",value:function(){this._stateMutator.toDisconnected(!0)}},{key:"onAttach",value:function(){this._context.requestAttach()}},{key:"onRelease",value:function(){this._stateMutator.toReleasing()}},{key:"onExit",value:function(){this._stateMutator.toClosed()}}]),t}(Vi),p_=function(e){F(t,e);var n=U(t);function t(r,o,s){var l;return b(this,t),Z(ee(l=n.call(this,r)),"type",Ke.ESTABLISHED),l._stateMutator=r,l._sdp=o,l._hasPendingAttach=s,l}return x(t,[{key:"_onStart",value:function(){this._context.dispatchEvent("established"),this._context.setRemoteDescription(this._sdp),this._hasPendingAttach&&this.onAttach()}},{key:"_onDestroy",value:function(){}},{key:"onPCConnected",value:function(){this._stateMutator.toConnected()}},{key:"onICEFailed",value:function(){this._stateMutator.toDisconnected(!1)}},{key:"onAttach",value:function(){this._context.requestAttach()}},{key:"onRelease",value:function(){this._stateMutator.toReleasing()}},{key:"onExit",value:function(){this._stateMutator.toClosed()}}]),t}(Vi),Wh=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"type",Ke.IDLE),r}return x(t,[{key:"_onStart",value:function(){this._context.dispatchEvent("idle"),this._stateMutator.toOffering()}},{key:"_onDestroy",value:function(){}},{key:"onRelease",value:function(){this._stateMutator.toReleasing()}},{key:"onExit",value:function(){this._stateMutator.toClosed()}}]),t}(Vi),Gh=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"type",Ke.RELEASING),r}return x(t,[{key:"_onStart",value:function(){this._context.dispatchEvent("releasing"),this._context.closePeerConnection(),this._context.endpoint.id&&this._context.requestRelease()}},{key:"_onDestroy",value:function(){}},{key:"onEndpointRequestSucceeded",value:function(){this._context.requestRelease()}},{key:"onEndpointRequestFailed",value:function(){this._stateMutator.toClosed()}},{key:"onReleased",value:function(){this._stateMutator.toClosed()}},{key:"onExit",value:function(){this._stateMutator.toClosed()}}]),t}(Vi),__=function(e){F(t,e);var n=U(t);function t(r){var o;return b(this,t),Z(ee(o=n.call(this,r)),"type",Ke.OFFERING),o._stateMutator=r,o}return x(t,[{key:"_onStart",value:function(){this._request()}},{key:"_onDestroy",value:function(){this._requestTimeout&&clearTimeout(this._requestTimeout),delete this._requestTimeout}},{key:"_request",value:function(){this._context.createSession(),this._context.requestCreateOrPutEndpoint()}},{key:"onICEFailed",value:function(){this._stateMutator.toDisconnected(!1)}},{key:"onEndpointRequestSucceeded",value:function(r){this._stateMutator.toEstablished(r,this._hasPendingAttach)}},{key:"onEndpointRequestFailed",value:function(){this._stateMutator.toDisconnected(!1)}},{key:"onAttach",value:function(){this._hasPendingAttach=!0}},{key:"onRelease",value:function(){this._stateMutator.toReleasing()}},{key:"onExit",value:function(){this._stateMutator.toClosed()}}]),t}(Vi),ur=function(e){F(t,e);var n=U(t);function t(r,o){var s;return b(this,t),Z(ee(s=n.call(this,r)),"type",Ke.DISCONNECTED),s._stateMutator=r,s.shouldDispatchEvent=o,s}return x(t,[{key:"_onStart",value:function(){this.shouldDispatchEvent&&this._context.dispatchEvent("disconnected"),this._stateMutator.toReconnecting()}},{key:"_onDestroy",value:function(){}},{key:"onRelease",value:function(){this._stateMutator.toReleasing()}},{key:"onExit",value:function(){this._stateMutator.toClosed()}}]),t}(Vi),Rd=function(e){F(t,e);var n=U(t);function t(r){var o;return b(this,t),Z(ee(o=n.call(this,r)),"type",Ke.RECONNECTING),o._stateMutator=r,o}return x(t,[{key:"_onStart",value:function(){var r=this;this._context.reconnectCount+=1,setTimeout(function(){r._stateMutator.toOffering()},5e3+1e3*Math.random())}},{key:"_onDestroy",value:function(){}},{key:"onRelease",value:function(){this._stateMutator.toReleasing()}},{key:"onExit",value:function(){this._stateMutator.toClosed()}}]),t}(Vi),m_=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return x(t,[{key:"toIdle",value:function(){this._changeState(new Wh(this))}},{key:"toOffering",value:function(){this._changeState(new __(this))}},{key:"toEstablished",value:function(r,o){this._changeState(new p_(this,r,o))}},{key:"toConnected",value:function(){this._changeState(new h_(this))}},{key:"toDisconnected",value:function(r){this._changeState(new ur(this,r))}},{key:"toReconnecting",value:function(){this._changeState(new Rd(this))}},{key:"toReleasing",value:function(){this._changeState(new Gh(this))}},{key:"toClosed",value:function(){this._changeState(new Hh(this))}},{key:"state",get:function(){return this._state}},{key:"name",get:function(){return"Endpoint"}}]),t}(sr),ji=function(e){F(t,e);var n=U(t);function t(r){var o;return b(this,t),(o=n.call(this,r,new m_(r)))._context=r,o._stateMutator.toIdle(),o}return x(t,[{key:"onEndpointRequestSucceeded",value:function(r){N.verbose("[".concat(this.state.type,"] onEndpointRequestSucceeded"));var o=this.state;switch(o.type){case Ke.OFFERING:o.onEndpointRequestSucceeded(r);break;case Ke.RELEASING:o.onEndpointRequestSucceeded();break;default:N.error("[".concat(this.state.type,"] onEndpointRequestSucceeded"))}}},{key:"onEndpointRequestFailed",value:function(){N.verbose("[".concat(this.state.type,"] onEndpointCreateFailed"));var r=this.state;switch(r.type){case Ke.OFFERING:case Ke.RELEASING:r.onEndpointRequestFailed();break;default:N.error("[".concat(this.state.type,"] onEndpointCreateFailed"))}}},{key:"onICEFailed",value:function(){N.verbose("[".concat(this.state.type,"] onICEFailed"));var r=this.state;switch(r.type){case Ke.OFFERING:case Ke.ESTABLISHED:case Ke.CONNECTED:r.onICEFailed();break;default:N.error("[".concat(this.state.type,"] onICEFailed"))}}},{key:"onPCConnected",value:function(){N.verbose("[".concat(this.state.type,"] onPCConnected"));var r=this.state;r.type===Ke.ESTABLISHED?r.onPCConnected():N.error("[".concat(this.state.type,"] onPCConnected"))}},{key:"onAttach",value:function(){N.verbose("[".concat(this.state.type,"] onAttach"));var r=this.state;switch(r.type){case Ke.OFFERING:case Ke.ESTABLISHED:case Ke.CONNECTED:r.onAttach();break;default:N.error("[".concat(this.state.type,"] onAttach"))}}},{key:"onRelease",value:function(){N.verbose("[".concat(this.state.type,"] onRelease"));var r=this.state;switch(r.type){case Ke.IDLE:case Ke.OFFERING:case Ke.ESTABLISHED:case Ke.CONNECTED:case Ke.DISCONNECTED:case Ke.RECONNECTING:r.onRelease();break;default:N.error("[".concat(this.state.type,"] onRelease"))}}},{key:"onReleased",value:function(){N.verbose("[".concat(this.state.type,"] onReleased"));var r=this.state;r.type===Ke.RELEASING?r.onReleased():N.error("[".concat(this.state.type,"] onReleased"))}},{key:"onExit",value:function(){N.verbose("[".concat(this.state.type,"] onExit"));var r=this.state;switch(r.type){case Ke.RELEASING:case Ke.IDLE:case Ke.CONNECTED:case Ke.ESTABLISHED:case Ke.OFFERING:case Ke.DISCONNECTED:case Ke.RECONNECTING:r.onExit();break;default:N.error("[".concat(this.state.type,"] onExit"))}}},{key:"state",get:function(){return this._stateMutator.state}}]),t}(gd),Sl=function(e){F(t,e);var n=U(t);function t(r,o,s){var l;return b(this,t),Z(ee(l=n.call(this)),"tmpId",Bs()),Z(ee(l),"_createSession",function(){switch(N.debug("_createSession()"),l.type){case"master":l._createMasterSession();break;case"viewer":l._createViewerSession();break;default:N.error("Not supported endpoint type : ",l.type)}}),Z(ee(l),"_closePeerConnection",function(){var f,h;N.debug("_closePeerConnection()"),(f=l._pc)===null||f===void 0||f.removeAllEventListeners(),(h=l._pc)===null||h===void 0||h.close(),l._pc=null}),Z(ee(l),"_requestCreateOrPutEndpoint",function(){N.debug("_requestCreateEndpoint()");var f,h=l._pc;f=l.id?h.signalingClient.registerPutEndpointRequest():h.signalingClient.registerCreateEndpointRequest(),h.createOffer(),f.promise.then(function(_){l.id=_.payload.endpointId,l._stateMachine.onEndpointRequestSucceeded(_.payload.sdp)}).catch(function(_){N.error("Endpoint request failed",_),l._stateMachine.onEndpointRequestFailed()})}),Z(ee(l),"_requestAttach",function(){var f=l.attachedTo;qs(new Ks(5e3,1e3,8),function(){return l._sendAttach(f.id)},{onError:function(h){N.error("Fail attach endpoint endpointId = ".concat(l.id,", to = ").concat(f.id," ErrorCode = ").concat(h.code))}}).then(function(){l._dispatchEvent("attached",f)})}),Z(ee(l),"_requestRelease",function(){N.debug("_requestRelease()"),l._sendReleaseEndpoint().then(function(){l._stateMachine.onReleased()}).catch(function(f){N.error("Release request failed",f),l._stateMachine.onReleased()})}),Z(ee(l),"_setRemoteDescription",function(f){N.debug("_setRemoteDescription()");var h=l._pc,_=Ir.createAnswer(void 0,f);h.onEvent(_),h.once("connected",function(){l._stateMachine.onPCConnected(),l._sendConnected()}),h.once("iceFailed",function(){l._stateMachine.onICEFailed()})}),l._ctx=r,l._collection=o,l.type=s,l._stateMachine=new ji({endpoint:ee(l),dispatchEvent:l._dispatchEvent.bind(ee(l)),createSession:l._createSession,requestCreateOrPutEndpoint:l._requestCreateOrPutEndpoint,setRemoteDescription:l._setRemoteDescription,closePeerConnection:l._closePeerConnection,requestAttach:l._requestAttach,requestRelease:l._requestRelease,trialCount:0,reconnectCount:0}),l}return x(t,[{key:"attach",value:function(r){N.debug("attach()"),r.viewerEndpoint=this,this.attachedTo=r,this._stateMachine.onAttach()}},{key:"release",value:function(){N.debug("release()"),this._stateMachine.onRelease()}},{key:"exit",value:function(){N.debug("exit()"),this._closePeerConnection(),this._stateMachine.onExit()}},{key:"_createMasterSession",value:function(){N.debug("_createMasterSession()"),this._pc&&this._closePeerConnection(),this._createPeerConnection(this._masterSessionDirection,this._localParticipant.localStream)}},{key:"_createViewerSession",value:function(){N.debug("_createViewerSession()"),this._pc&&this._closePeerConnection(),this._createPeerConnection(this._viewerSessionDirection,void 0)}},{key:"_createPeerConnection",value:function(r,o){var s=this;N.debug("_createPeerConnection()");var l=new zt(this._ctx,this._localParticipant.id,r,this.id);this._pc=new Ui(this._ctx,void 0,l,o,!0,void 0,r,!0),this._dispatchEvent("pcChanged",this._pc),this._pc.on("remoteStream",function(f){s._dispatchEvent("remoteStream",f)})}},{key:"_sendConnected",value:function(){var r=Nt.createConnected(this._ctx.roomId,this._localParticipant.id,this.id);return this._ctx.sender.send(r)}},{key:"_sendReleaseEndpoint",value:function(){var r=Nt.createReleaseEndpoint(this._ctx.roomId,this._localParticipant.id,this.id);return this._ctx.sender.sendWithRetry(r)}},{key:"_sendAttach",value:function(r){var o=Nt.createAttach(this._ctx.roomId,this._localParticipant.id,this.id,r);return this._ctx.sender.sendWithRetry(o,new wd)}},{key:"remoteStream",get:function(){var r;return(r=this._pc)===null||r===void 0?void 0:r.remoteStream}},{key:"_state",get:function(){return this._stateMachine.state}},{key:"_localParticipant",get:function(){return this._collection.localParticipant}},{key:"_masterSessionDirection",get:function(){switch(this._ctx.roomType){case g.SMALL_ROOM_FOR_AUDIO_ONLY:return{audio:"sendonly",video:"none"};case g.LARGE_ROOM_FOR_AUDIO_ONLY:return{audio:"sendrecv",video:"none"};case g.SMALL_ROOM_FOR_VIDEO:return{audio:"sendonly",video:"sendonly"};case g.LARGE_ROOM_FOR_VIDEO:return{audio:"sendrecv",video:"sendonly"};default:return N.error("Not supported room type : ",this._ctx.roomType),{audio:"sendonly",video:"sendonly"}}}},{key:"_viewerSessionDirection",get:function(){switch(this._ctx.roomType){case g.SMALL_ROOM_FOR_AUDIO_ONLY:return{audio:"recvonly",video:"none"};case g.LARGE_ROOM_FOR_AUDIO_ONLY:return{audio:"none",video:"none"};case g.SMALL_ROOM_FOR_VIDEO:return{audio:"recvonly",video:"recvonly"};case g.LARGE_ROOM_FOR_VIDEO:return{audio:"none",video:"recvonly"};default:return N.error("Not supported room type : ",this._ctx.roomType),{audio:"recvonly",video:"recvonly"}}}}]),t}(pn),Ca=function(){function e(n,t){b(this,e),Z(this,"_endpoints",new Map),this._ctx=n,this._collection=t}return x(e,[{key:"getMaster",value:function(){return Array.from(this._endpoints.values()).find(function(n){return n.type==="master"})}},{key:"getViewers",value:function(){return Array.from(this._endpoints.values()).filter(function(n){return n.type==="viewer"})}},{key:"exit",value:function(){var n,t=mt(this._endpoints.values());try{for(t.s();!(n=t.n()).done;)n.value.exit()}catch(r){t.e(r)}finally{t.f()}}},{key:"releaseEndpoint",value:function(n){n.release(),n.removeAllEventListeners()}},{key:"createMaster",value:function(){return N.debug("_createSendSession()"),this._createEndpoint("master")}},{key:"createViewer",value:function(){return N.debug("_createRecvSession()"),this._createEndpoint("viewer")}},{key:"_createEndpoint",value:function(n){var t=this,r=new Sl(this._ctx,this._collection,n);return this._endpoints.set(r.tmpId,r),r.once("established",function(){t._endpoints.delete(r.tmpId),t._endpoints.set(r.id,r)}),r.once("closed",function(){t._endpoints.delete(r.id)}),r}}]),e}(),Qs=function(e){F(t,e);var n=U(t);function t(r,o){var s;return b(this,t),Z(ee(s=n.call(this)),"_unsubscribes",[]),s._ctx=r,s._collection=o,s._endpointManager=new Ca(r,o),s._registerParticipantCollectionListeners(),s}return x(t,[{key:"_registerParticipantCollectionListeners",value:function(){var r=this;this._unsubscribes.length&&this._unregisterParticipantCollectionListeners(),this._unsubscribes=[this._collection.on("entered",function(o){return r._onParticipantEntered(o)}),this._collection.on("connected",function(o){return r._onParticipantConnected(o)}),this._collection.on("exited",function(o){return r._onParticipantExited(o)})]}},{key:"_unregisterParticipantCollectionListeners",value:function(){this._unsubscribes.forEach(function(r){return r()}),this._unsubscribes=[]}},{key:"_clearParticipantToEndpoint",value:function(){this._collection.remoteParticipants.forEach(function(r){r.viewerEndpoint=null})}},{key:"onSelfEntered",value:function(){var r=this;N.debug("onSelfEntered()");var o=this._endpointManager.createMaster();this._localParticipant.masterEndpoint=o,o.on("connected",function(s){if(r._dispatchEvent("localParticipantConnected",r._localParticipant,s),s){r._onEndpointReconnected(o);var l,f=mt(r._endpointManager.getViewers());try{for(f.s();!(l=f.n()).done;){var h=l.value;r._onEndpointReconnected(h)}}catch(_){f.e(_)}finally{f.f()}}}),o.on("disconnected",function(){r._dispatchEvent("localParticipantDisconnected",r._localParticipant)})}},{key:"exit",value:function(){N.debug("exit()"),this._unregisterParticipantCollectionListeners(),this._clearParticipantToEndpoint(),this._endpointManager.exit()}},{key:"_onEndpointReconnected",value:function(r){N.debug("_remotePCChanged(endpointId: ".concat(r.id,")"))}},{key:"_onParticipantEntered",value:function(r){N.debug("_onParticipantEntered(id: ".concat(r.id,")"))}},{key:"_onParticipantConnected",value:function(r){N.debug("_onParticipantConnected(id : ".concat(r.id,")"))}},{key:"_onParticipantExited",value:function(r){N.debug("_onParticipantExited(id : ".concat(r.id,")"));var o=r.viewerEndpoint;r.viewerEndpoint=null,o&&this._endpointManager.releaseEndpoint(o)}},{key:"_updateLocalResolution",value:function(r){this._localParticipant.updateResolution(r)}},{key:"_localParticipant",get:function(){return this._collection.localParticipant}}]),t}(pn),mn=function(){function e(n,t){b(this,e),this.key=n,this.value=t}return x(e,[{key:"toString",value:function(){return this.key}},{key:"equals",value:function(n){return this.value.width===n.value.width&&this.value.height===n.value.height}}]),e}();Z(mn,"_720P",new mn("_720P",{width:1280,height:720})),Z(mn,"_540P",new mn("_540P",{width:960,height:540})),Z(mn,"_480P",new mn("_480P",{width:848,height:480})),Z(mn,"_360P",new mn("_360P",{width:640,height:360}));var Ys=mn._720P,v_=Au.indexOf,Tl=[].indexOf,$h=!!Tl&&1/[1].indexOf(1,-0)<0,qh=Ji("indexOf"),Kh=fr("indexOf",{ACCESSORS:!0,1:0});Ye({target:"Array",proto:!0,forced:$h||!qh||!Kh},{indexOf:function(e){return $h?Tl.apply(this,arguments)||0:v_(this,e,arguments.length>1?arguments[1]:void 0)}});var Xs=function(e){return function(n,t,r,o){Ar(t);var s=ei(n),l=ye(s),f=En(s.length),h=e?f-1:0,_=e?-1:1;if(r<2)for(;;){if(h in l){o=l[h],h+=_;break}if(h+=_,e?h<0:f<=h)throw TypeError("Reduce of empty array with no initial value")}for(;e?h>=0:f>h;h+=_)h in l&&(o=t(o,l[h],h,s));return o}},Al={left:Xs(!1),right:Xs(!0)}.left,Qh=Ji("reduce"),Id=fr("reduce",{1:0});Ye({target:"Array",proto:!0,forced:!Qh||!Id||!xr&&to>79&&to<83},{reduce:function(e){return Al(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}});var Ol,Br,zr,Ra,Ia,Zs,g_=function(e){F(t,e);var n=U(t);function t(r,o){var s;return b(this,t),Z(ee(s=n.call(this)),"hasVideoPermission",!1),s._streamManger=r,s.constraints=o,s}return x(t,[{key:"dispose",value:function(){var r;this.removeAllEventListeners(),(r=this.onDisposed)===null||r===void 0||r.call(this)}},{key:"streamChanged",value:function(r){this._dispatchEvent("streamChanged",r)}},{key:"audioOutputChanged",value:function(){this._dispatchEvent("audioOutputChanged")}},{key:"stream",get:function(){return this._streamManger.stream}}]),t}(pn),Js=function(e,n){n.audio&&e.getAudioTracks().length===0&&e.addTrack(function(){Ol||(Ol=new(window.AudioContext||window.webkitAudioContext));var t=Ol;Br=t.createOscillator();var r=t.createMediaStreamDestination(),o=t.createGain();return o.gain.setValueAtTime(0,t.currentTime),Br.connect(o).connect(r),Br.start(),Ia=r.stream.getAudioTracks()[0],r.stream.getAudioTracks()[0]}()),n.video&&e.getVideoTracks().length===0&&e.addTrack(function(t){var r=t.width,o=t.height,s=t.frameRate;zr||(zr=document.createElement("canvas")),zr.width=r,zr.height=o,zr.getContext("2d").fillRect(0,0,r,o),Ra||(Ra=setInterval(function(){zr.getContext("2d").fillRect(0,0,r,o)},1e3));var l=zr.captureStream(s);return Zs=l.getVideoTracks()[0],l.getVideoTracks()[0]}(Ct(Ct({},Ys.value),{},{frameRate:24})))};function Yh(){Ia&&Ia.stop(),Zs&&Zs.stop(),Ia=null,Zs=null,Ra&&(clearInterval(Ra),Ra=null),Br&&(Br.onended=function(){Br.disconnect(),Br=null},Br.stop())}function Sa(e){if(e){var n,t=mt(e.getTracks());try{for(t.s();!(n=t.n()).done;)n.value.stop()}catch(r){t.e(r)}finally{t.f()}}}var y_=function(){function e(r){b(this,e),this._deviceManager=r,this._updateQueued=!1}var n,t;return x(e,[{key:"_getUserMedia",value:(t=Ie(regeneratorRuntime.mark(function r(o){var s,l,f,h;return regeneratorRuntime.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.prev=0,_.next=3,navigator.mediaDevices.getUserMedia(o);case 3:return s=_.sent,Yh(),_.abrupt("return",s);case 8:return _.prev=8,_.t0=_.catch(0),N.warning("Failed to first 'getUserMedia()' call Error[".concat(_.t0,"]")),l=new MediaStream,_.prev=12,_.next=15,navigator.mediaDevices.getUserMedia({audio:o.audio});case 15:f=_.sent,l.addTrack(f.getAudioTracks()[0]),_.next=22;break;case 19:_.prev=19,_.t1=_.catch(12),N.warning("Failed to get local audio stream Error[".concat(_.t1,"]"));case 22:return _.prev=22,_.next=25,navigator.mediaDevices.getUserMedia({video:o.video});case 25:h=_.sent,l.addTrack(h.getVideoTracks()[0]),_.next=32;break;case 29:_.prev=29,_.t2=_.catch(22),N.warning("Failed to get local video stream Error[".concat(_.t2,"]"));case 32:return _.abrupt("return",l);case 33:case"end":return _.stop()}},r,null,[[0,8],[12,19],[22,29]])})),function(r){return t.apply(this,arguments)})},{key:"updateStream",value:(n=Ie(regeneratorRuntime.mark(function r(){var o,s,l,f,h,_,k,E,y,w;return regeneratorRuntime.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(!this._updateAt){T.next=3;break}return this._updateQueued=!0,T.abrupt("return");case 3:if(o=this._deviceManager.mediaAccesses.some(function(A){return A.constraints.audio}),s=this._deviceManager.mediaAccesses.some(function(A){return A.constraints.video}),o||s){T.next=9;break}return Sa(this.stream),Yh(),T.abrupt("return");case 9:return this._updateAt=Date.now(),(l=this.stream)||(f=new MediaStream,Js(f,{audio:o,video:s}),this.stream=f),bs&&Sa(l),T.next=15,this._deviceManager.getMediaConstraints({usingAudio:o,usingVideo:s});case 15:return h=T.sent,T.next=18,this._getUserMedia(h);case 18:if((_=T.sent).getVideoTracks().length>0){k=mt(this._deviceManager.mediaAccesses);try{for(k.s();!(E=k.n()).done;)E.value.hasVideoPermission=!0}catch(A){k.e(A)}finally{k.f()}}Js(_,{audio:o,video:s}),bs||Sa(l),this.stream=_,y=mt(this._deviceManager.mediaAccesses);try{for(y.s();!(w=y.n()).done;)w.value.streamChanged(this.stream)}catch(A){y.e(A)}finally{y.f()}delete this._updateAt,this._updateQueued?(this._updateQueued=!1,this.updateStream()):this._deviceManager.refreshMediaDevices({audio:o,video:s},!0);case 27:case"end":return T.stop()}},r,this)})),function(){return n.apply(this,arguments)})}]),e}();function eu(e,n){return(e==null?void 0:e.deviceId)===(n==null?void 0:n.deviceId)&&(e==null?void 0:e.label)===(n==null?void 0:n.label)&&(e==null?void 0:e.groupId)===(n==null?void 0:n.groupId)}var i,a=function(){function e(){var s=this;b(this,e),this.mediaAccesses=[],this._availableMediaDevices={audioinput:[],audiooutput:[],videoinput:[]},this._currentMediaDevices={audioinput:void 0,audiooutput:void 0,videoinput:void 0},this._sendbirdCallListeners=new Map,this._streamManager=new y_(this),navigator.mediaDevices.ondevicechange=function(){return s._onDeviceChanged()}}var n,t,r,o;return x(e,[{key:"_onDeviceChanged",value:function(){this.mediaAccesses.length!==0&&this.refreshMediaDevices({audio:this.mediaAccesses.some(function(s){return s.constraints.audio}),video:this.mediaAccesses.some(function(s){return s.constraints.video})})}},{key:"addSendBirdCallListener",value:function(s,l){this._sendbirdCallListeners.set(s,l)}},{key:"removeSendBirdCallListener",value:function(s){this._sendbirdCallListeners.delete(s)}},{key:"removeAllSendBirdCallListener",value:function(){this._sendbirdCallListeners.clear()}},{key:"getCurrentAudioInputDevice",value:function(){return this._currentMediaDevices.audioinput}},{key:"getCurrentAudioOutputDevice",value:function(){return this._currentMediaDevices.audiooutput}},{key:"getCurrentVideoInputDevice",value:function(){return this._currentMediaDevices.videoinput}},{key:"getAvailableAudioInputDevices",value:function(){return this._availableMediaDevices.audioinput}},{key:"getAvailableAudioOutputDevices",value:function(){return this._availableMediaDevices.audiooutput}},{key:"getAvailableVideoInputDevices",value:function(){return this._availableMediaDevices.videoinput}},{key:"updateStream",value:(o=Ie(regeneratorRuntime.mark(function s(){return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",this._streamManager.updateStream());case 1:case"end":return l.stop()}},s,this)})),function(){return o.apply(this,arguments)})},{key:"_registerMediaAccess",value:function(s){var l=this;this.mediaAccesses.push(s),s.onDisposed=function(){return l.stopMedia(s)}}},{key:"useMedia",value:function(s){if(s.audio||s.video){var l=new g_(this._streamManager,s);return this._registerMediaAccess(l),this.updateStream(),l}N.error(new Error("you should set true for at least 1 media type."))}},{key:"stopMedia",value:function(s){this.mediaAccesses.splice(this.mediaAccesses.indexOf(s),1),this.updateStream()}},{key:"fetchMediaDevices",value:(r=Ie(regeneratorRuntime.mark(function s(){var l;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,navigator.mediaDevices.enumerateDevices();case 2:return l=f.sent,f.abrupt("return",l.reduce(function(h,_){return h[_.kind].push(_),h},{audioinput:[],audiooutput:[],videoinput:[]}));case 4:case"end":return f.stop()}},s)})),function(){return r.apply(this,arguments)})},{key:"getMediaConstraints",value:(t=Ie(regeneratorRuntime.mark(function s(l){var f,h,_,k,E,y,w,T;return regeneratorRuntime.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return f=l.usingAudio,h=l.usingVideo,_={audio:!1,video:!1},A.next=4,this.fetchMediaDevices();case 4:return k=A.sent,E=k.audioinput,y=k.videoinput,f&&E.length&&(w=this.getCurrentAudioInputDevice(),_.audio={deviceId:w==null?void 0:w.deviceId}),h&&y.length&&(T=this.getCurrentVideoInputDevice(),_.video=Ct(Ct({deviceId:T==null?void 0:T.deviceId},Ys.value),{},{frameRate:24})),A.abrupt("return",_);case 10:case"end":return A.stop()}},s,this)})),function(s){return t.apply(this,arguments)})},{key:"_updateCurrentMediaDevice",value:function(s,l){var f,h=this._availableMediaDevices[s],_=this._currentMediaDevices[s],k=h.find(function(E){return E.deviceId===(l==null?void 0:l.deviceId)});return k||(N.warning("Selected device is unavailable. fallback to default device."),k=((f=k)!==null&&f!==void 0?f:h.length>0)?h[0]:null),this._currentMediaDevices[s]=k,!eu(_,k)}},{key:"_onAudioOutputChanged",value:function(){var s,l=mt(this.mediaAccesses);try{for(l.s();!(s=l.n()).done;){var f=s.value;f.constraints.audio&&f.audioOutputChanged()}}catch(h){l.e(h)}finally{l.f()}}},{key:"selectDevice",value:function(s,l){l.kind===s?this._updateCurrentMediaDevice(s,l)&&(s!=="audioinput"&&s!=="videoinput"||this.updateStream(),s==="audiooutput"&&this._onAudioOutputChanged()):N.error(new Error("Tried to select invalid device of type"))}},{key:"_updateAvailableDevices",value:function(s,l){var f,h,_,k=this._currentMediaDevices[s],E=!function(j,$){if(j.length!==$.length)return!1;for(var se=0;se<$.length;se++)if(!eu(j[se],$[se]))return!1;return!0}(this._availableMediaDevices[s],l);if(!E)return!1;var y;this._availableMediaDevices[s]=l,y=this._updateCurrentMediaDevice(s,k);var w,T=mt(this._sendbirdCallListeners.values());try{for(T.s();!(w=T.n()).done;){var A=w.value,H=this._currentMediaDevices[s];switch(s){case"audioinput":(f=A.onAudioInputDeviceChanged)===null||f===void 0||f.call(A,H,l);break;case"audiooutput":(h=A.onAudioOutputDeviceChanged)===null||h===void 0||h.call(A,H,l);break;case"videoinput":(_=A.onVideoInputDeviceChanged)===null||_===void 0||_.call(A,H,l)}}}catch(j){T.e(j)}finally{T.f()}return y}},{key:"refreshMediaDevices",value:(n=Ie(regeneratorRuntime.mark(function s(l){var f,h,_,k,E,y,w,T,A,H=arguments;return regeneratorRuntime.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(f=l.audio,h=l.video,_=H.length>1&&H[1]!==void 0&&H[1],f||h){j.next=4;break}throw new Error("at least one of the audio or video must be true");case 4:return j.next=6,this.fetchMediaDevices();case 6:k=j.sent,E=k.audioinput,y=k.audiooutput,w=k.videoinput,T=!1,A=!1,f&&(T=this._updateAvailableDevices("audioinput",E),A=this._updateAvailableDevices("audiooutput",y)),h&&(T=this._updateAvailableDevices("videoinput",w)||T),!_&&T&&this.updateStream(),A&&this._onAudioOutputChanged();case 16:case"end":return j.stop()}},s,this)})),function(s){return n.apply(this,arguments)})}]),e}(),u=function(){function e(o,s,l){var f=this;b(this,e),this._ctx=o,Object.assign(this,s),this._localStream=l,this._localStream.on("audioOutputChanged",function(){f._onAudioOutputChanged()})}var n,t,r;return x(e,[{key:"id",get:function(){return this.participantId}}]),x(e,[{key:"updateInfo",value:function(o){var s=this,l=new Map;return Object.keys(o).forEach(function(f){s[f]!==o[f]&&l.set(f,o[f])}),Object.assign(this,o),l}},{key:"setMediaView",value:(r=Ie(regeneratorRuntime.mark(function o(s){return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(this._mediaView!==s){l.next=2;break}return l.abrupt("return");case 2:if(this._mediaView&&(this._mediaView.srcObject=null),s){l.next=6;break}return delete this._mediaView,l.abrupt("return");case 6:return l.next=8,this._updateMediaViewStream(s,this.stream);case 8:this._mediaView=l.sent;case 9:case"end":return l.stop()}},o,this)})),function(o){return r.apply(this,arguments)})},{key:"_updateMediaViewStream",value:(t=Ie(regeneratorRuntime.mark(function o(s,l){var f,h;return regeneratorRuntime.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(!(f=this._ctx.deviceManager.getCurrentAudioOutputDevice())){_.next=4;break}return _.next=4,(h=s.setSinkId)===null||h===void 0?void 0:h.call(s,f.deviceId);case 4:return l&&(s.srcObject=l),_.abrupt("return",s);case 6:case"end":return _.stop()}},o,this)})),function(o,s){return t.apply(this,arguments)})},{key:"_onAudioOutputChanged",value:(n=Ie(regeneratorRuntime.mark(function o(){var s,l,f;return regeneratorRuntime.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(this._ctx.roomType!==g.SMALL_ROOM_FOR_VIDEO&&this._ctx.roomType!==g.SMALL_ROOM_FOR_AUDIO_ONLY){h.next=4;break}return f=this._ctx.deviceManager.getCurrentAudioOutputDevice(),h.next=4,(s=this._mediaView)===null||s===void 0||(l=s.setSinkId)===null||l===void 0?void 0:l.call(s,f.deviceId);case 4:case"end":return h.stop()}},o,this)})),function(){return n.apply(this,arguments)})}]),e}(),c=function(e){F(r,e);var n,t=U(r);function r(o,s,l){var f;return b(this,r),Z(ee(f=t.call(this,o,s,l)),"isLocalParticipant",!0),Z(ee(f),"_resolution",mn._720P),f._localStream.on("streamChanged",function(h){return f._onStream(h)}),f}return x(r,[{key:"stream",get:function(){var o;return(o=this._localStream)===null||o===void 0?void 0:o.localStream}},{key:"localStream",get:function(){return this._localStream}},{key:"masterEndpoint",get:function(){return this._masterEndpoint},set:function(o){this._masterEndpoint=o}}]),x(r,[{key:"exit",value:function(){this._release()}},{key:"setLocalMediaView",value:(n=Ie(regeneratorRuntime.mark(function o(s){return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",this.setMediaView(s));case 1:case"end":return l.stop()}},o,this)})),function(o){return n.apply(this,arguments)})},{key:"muteMicrophone",value:function(){N.info("muteMicrophone()"),this._toggleAudio(!1)}},{key:"unmuteMicrophone",value:function(){N.info("unmuteMicrophone()"),this._toggleAudio(!0)}},{key:"startVideo",value:function(){N.info("startVideo()"),this._toggleVideo(!0)}},{key:"stopVideo",value:function(){N.info("stopVideo()"),this._toggleVideo(!1)}},{key:"updateResolution",value:function(o){this._resolution.equals(o)||(this._resolution=o,this._applyConstraints())}},{key:"_toggleAudio",value:function(o){this.isAudioEnabled!==o&&(this.stream.getAudioTracks().forEach(function(s){s.enabled=o}),this.isAudioEnabled=o,this._sendAudioCommand(o).catch(function(s){return N.debug(s)}))}},{key:"_toggleVideo",value:function(o){this.isVideoEnabled!==o&&(this.stream.getVideoTracks().forEach(function(s){s.enabled=o}),this.isVideoEnabled=o,this._sendVideoCommand(o).catch(function(s){return N.debug(s)}))}},{key:"_isMediaEnabled",value:function(o){switch(o){case"audio":return this.isAudioEnabled;case"video":return this.isVideoEnabled;default:return N.error(new Error("unrecognized media type ".concat(o))),!1}}},{key:"_applyConstraints",value:function(){var o;if(N.debug("_applyConstraints()"),this.stream&&(o=this._localStream)!==null&&o!==void 0&&o.hasVideoPermission){var s,l=mt(this.stream.getVideoTracks());try{for(l.s();!(s=l.n()).done;){var f=s.value,h=void 0;h=this._resolution.equals(mn._360P)&&Ds?{height:this._resolution.value.height}:this._resolution.value,f.applyConstraints(h).catch(function(_){return N.error("Fail change local video resolution error = ",_)})}}catch(_){l.e(_)}finally{l.f()}}}},{key:"_onStream",value:function(o){var s,l=mt(o.getTracks());try{for(l.s();!(s=l.n()).done;){var f=s.value;f.enabled=this._isMediaEnabled(f.kind)}}catch(h){l.e(h)}finally{l.f()}this._applyConstraints(),this._mediaView&&(this._mediaView.srcObject=o)}},{key:"_release",value:function(){this._localStream.release(),delete this._localStream}},{key:"_sendAudioCommand",value:function(o){var s=Nt.createAudio(this._ctx.roomId,this.id,o);return this._ctx.sender.send(s)}},{key:"_sendVideoCommand",value:function(o){var s=Nt.createVideo(this._ctx.roomId,this.id,o);return this._ctx.sender.send(s)}}]),r}(u),m=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"isLocalParticipant",!1),Z(ee(r),"_onStream",function(){var f=ee(r).stream;r._mediaView&&r._updateMediaViewStream(r._mediaView,f)}),r}return x(t,[{key:"viewerEndpoint",set:function(r){var o;(o=this._unsubscribeRemoteStream)===null||o===void 0||o.call(this),this._viewerEndpoint=r,r&&(this._unsubscribeRemoteStream=r.on("remoteStream",this._onStream)),this._onStream()}},{key:"stream",get:function(){var r;return(r=this._viewerEndpoint)===null||r===void 0?void 0:r.remoteStream}}]),t}(u);(function(e){e.ENTERED="entered",e.CONNECTED="connected",e.EXITED="exited"})(i||(i={}));var g,I=function(e){F(r,e);var n,t=U(r);function r(){return b(this,r),t.apply(this,arguments)}return x(r,[{key:"onSelfEntered",value:function(){this._updateLocalResolution(this._localResolution),ai(Wn(r.prototype),"onSelfEntered",this).call(this),this._createRecvSessionsForConnectedParticipants()}},{key:"_onEndpointReconnected",value:function(o){ai(Wn(r.prototype),"_onEndpointReconnected",this).call(this,o),o.type==="viewer"&&o.attachedTo&&this._attach(o,o.attachedTo)}},{key:"_onParticipantEntered",value:function(o){ai(Wn(r.prototype),"_onParticipantEntered",this).call(this,o),this._updateLocalResolution(this._localResolution)}},{key:"_onParticipantConnected",value:(n=Ie(regeneratorRuntime.mark(function o(s){return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return ai(Wn(r.prototype),"_onParticipantConnected",this).call(this,s),l.abrupt("return",this._createParticipantRecvSession(s));case 2:case"end":return l.stop()}},o,this)})),function(o){return n.apply(this,arguments)})},{key:"_onParticipantExited",value:function(o){ai(Wn(r.prototype),"_onParticipantExited",this).call(this,o),this._updateLocalResolution(this._localResolution)}},{key:"_createParticipantRecvSession",value:function(o){N.debug("_createParticipantRecvSession(".concat(o.id,")"));var s=this._endpointManager.createViewer();return this._attach(s,o),s}},{key:"_attach",value:function(o,s){var l=this;o.attach(s),o.once("attached",function(){l._dispatchEvent("remoteParticipantStream",s)})}},{key:"_createRecvSessionsForConnectedParticipants",value:function(){N.debug("_createRecvSessionForConnectedParticipant()");var o,s=mt(this._collection.remoteParticipants);try{for(s.s();!(o=s.n()).done;){var l=o.value;l.isLocalParticipant||l.state===i.CONNECTED&&this._createParticipantRecvSession(l)}}catch(f){s.e(f)}finally{s.f()}}},{key:"_localResolution",get:function(){switch(this._collection.connectedRemoteParticipants.length){case 0:case 1:return mn._720P;case 2:return mn._540P;case 3:return mn._480P;default:return mn._360P}}}]),r}(Qs),D=function(e){F(f,e);var n,t,r,o,s,l=U(f);function f(h,_){var k;return b(this,f),(k=l.call(this,h,_))._ctx=h,k._collection=_,_.localStream.on("audioOutputChanged",function(){k._onAudioOutputChanged()}),k}return x(f,[{key:"onSelfEntered",value:(s=Ie(regeneratorRuntime.mark(function h(){var _=this;return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:ai(Wn(f.prototype),"onSelfEntered",this).call(this),this._localParticipant.masterEndpoint.on("remoteStream",function(E){_._onRemoteStream(E)});case 2:case"end":return k.stop()}},h,this)})),function(){return s.apply(this,arguments)})},{key:"_onParticipantEntered",value:function(h){}},{key:"_onParticipantConnected",value:(o=Ie(regeneratorRuntime.mark(function h(_){return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:case"end":return k.stop()}},h)})),function(h){return o.apply(this,arguments)})},{key:"_onParticipantExited",value:function(h){}},{key:"_onRemoteStream",value:function(h){this._mediaView&&(this._mediaView.srcObject=h)}},{key:"setMediaView",value:(r=Ie(regeneratorRuntime.mark(function h(_){return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(this._mediaView!==_){k.next=2;break}return k.abrupt("return");case 2:if(this._mediaView&&(this._mediaView.srcObject=null),_){k.next=6;break}return delete this._mediaView,k.abrupt("return");case 6:return k.next=8,this._updateMediaViewStream(_,this._stream);case 8:this._mediaView=k.sent;case 9:case"end":return k.stop()}},h,this)})),function(h){return r.apply(this,arguments)})},{key:"_updateMediaViewStream",value:(t=Ie(regeneratorRuntime.mark(function h(_,k){var E,y;return regeneratorRuntime.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(!(E=this._ctx.deviceManager.getCurrentAudioOutputDevice())){w.next=4;break}return w.next=4,(y=_.setSinkId)===null||y===void 0?void 0:y.call(_,E.deviceId);case 4:return k&&(_.srcObject=k),w.abrupt("return",_);case 6:case"end":return w.stop()}},h,this)})),function(h,_){return t.apply(this,arguments)})},{key:"_onAudioOutputChanged",value:(n=Ie(regeneratorRuntime.mark(function h(){var _,k,E;return regeneratorRuntime.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return E=this._ctx.deviceManager.getCurrentAudioOutputDevice(),y.next=3,(_=this._mediaView)===null||_===void 0||(k=_.setSinkId)===null||k===void 0?void 0:k.call(_,E.deviceId);case 3:case"end":return y.stop()}},h,this)})),function(){return n.apply(this,arguments)})},{key:"_stream",get:function(){return this._localParticipant.masterEndpoint.remoteStream}}]),f}(Qs),P=function(e){F(r,e);var n,t=U(r);function r(o,s){var l;return b(this,r),(l=t.call(this))._ctx=o,l._participantCollection=s,l._aliveFailureCount=0,l}return x(r,[{key:"onEntered",value:function(){var o=this;switch(this._keepAliveInterval=setInterval(function(){Promise.race([o._sendAlive(),new Promise(function(s,l){return setTimeout(l,5e3)})]).then(function(){o._aliveFailureCount=0}).catch(function(s){s&&(s.code!==Y.ERR_ROOM_DELETED?(o._aliveFailureCount+=1,(o._aliveFailureCount>=8||s.code===Y.ERR_INVALID_ROOM_PARTICIPANT)&&o._dispatchEvent("aliveFailed")):o._dispatchEvent("deleted"))})},5e3),this._ctx.roomType){case"small_room_for_video":this._participantManager=new I(this._ctx,this._participantCollection);break;case"large_room_for_audio_only":this._participantManager=new D(this._ctx,this._participantCollection);break;default:throw new Error("Unsupported room type : ".concat(this._ctx.roomType))}this._registerEventListeners(),this._participantManager.onSelfEntered()}},{key:"exit",value:function(){clearInterval(this._keepAliveInterval),delete this._keepAliveInterval,this._participantManager.removeAllEventListeners(),this._participantManager.exit()}},{key:"setAudioForLargeRoom",value:(n=Ie(regeneratorRuntime.mark(function o(s){var l;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(N.info("setAudioForLargeRoom()"),this._ctx.roomType==="large_room_for_audio_only"){f.next=5;break}throw l=new Error("Room type not audio mcu"),N.error(l),l;case 5:return f.abrupt("return",this._participantManager.setMediaView(s));case 6:case"end":return f.stop()}},o,this)})),function(o){return n.apply(this,arguments)})},{key:"_sendAlive",value:function(){var o=Nt.createAlive(this._ctx.roomId,this._localParticipant.id);return this._ctx.sender.send(o)}},{key:"_registerEventListeners",value:function(){var o=this;this._participantManager.on("remoteParticipantStream",function(s){o._dispatchEvent("remoteParticipantStream",s)}),this._participantManager.on("localParticipantConnected",function(s,l){o._dispatchEvent("localParticipantConnected",s,l)}),this._participantManager.on("localParticipantDisconnected",function(s){o._dispatchEvent("localParticipantDisconnected",s)})}},{key:"_localParticipant",get:function(){return this._participantCollection.localParticipant}}]),r}(pn),K=function(e){F(r,e);var n,t=U(r);function r(){return b(this,r),t.call(this)}return x(r,[{key:"startStream",value:(n=Ie(regeneratorRuntime.mark(function o(){var s,l,f=this;return regeneratorRuntime.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.prev=0,h.next=3,navigator.mediaDevices.getDisplayMedia({video:!0});case 3:s=h.sent,this._stream=s,this._stream.getVideoTracks()[0].onended=function(){f._releaseStream(),f._dispatchEvent("streamStopped")},h.next=23;break;case 8:h.prev=8,h.t0=h.catch(0),h.t1=h.t0.name,h.next=h.t1==="InvalidStateError"?13:h.t1==="NotAllowedError"?15:h.t1==="NotFoundError"?17:h.t1==="NotReadableError"?19:21;break;case 13:return l=Y.ERR_NOT_SUPPORTED_APP_STATE_FOR_SCREEN_SHARE,h.abrupt("break",22);case 15:return l=Y.ERR_PERMISSION_DENIED_FOR_SCREEN_SHARE,h.abrupt("break",22);case 17:return l=Y.ERR_SELECTED_CONTENT_NOT_EXIST,h.abrupt("break",22);case 19:return l=Y.ERR_SELECTED_CONTENT_INACCESSIBLE,h.abrupt("break",22);case 21:l=Y.ERR_SCREEN_SHARE_FAILED_DUE_TO_UNKNOWN_REASON;case 22:throw new ze(l);case 23:case"end":return h.stop()}},o,this,[[0,8]])})),function(){return n.apply(this,arguments)})},{key:"stopStream",value:function(){this._releaseStream(),this._dispatchEvent("streamStopped")}},{key:"_releaseStream",value:function(){if(this._stream){var o,s=mt(this._stream.getTracks());try{for(s.s();!(o=s.n()).done;)o.value.stop()}catch(l){s.e(l)}finally{s.f()}delete this._stream}}},{key:"stream",get:function(){return this._stream}},{key:"isSharing",get:function(){return!!this._stream}}]),r}(pn),ae=function(e){F(r,e);var n,t=U(r);function r(o){var s,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{audio:!0,video:!0};return b(this,r),(s=t.call(this))._deviceManager=o,s._mediaConstraints=l,s._screenShare=new K,s._screenShare.on("streamStopped",function(){s._releaseMergedStream(),s._dispatchEvent("screenShareStreamStopped")}),s}return x(r,[{key:"useScreenStream",value:(n=Ie(regeneratorRuntime.mark(function o(){return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return qc(),s.next=3,this._screenShare.startStream();case 3:this._mergeScreenShareStream(),this._dispatchEvent("streamChanged",this.localStream);case 5:case"end":return s.stop()}},o,this)})),function(){return n.apply(this,arguments)})},{key:"getLocalMediaStream",value:function(){return this._mediaAccess||this._grantMediaAccess(this._mediaConstraints),this._mediaAccess.stream}},{key:"stopScreenShare",value:function(){this._screenShare.isSharing&&this._screenShare.stopStream()}},{key:"revokeMediaAccess",value:function(){this._mediaAccess&&(this._mediaAccess.dispose(),this._mediaAccess=null)}},{key:"release",value:function(){this.stopScreenShare(),this.revokeMediaAccess()}},{key:"_grantMediaAccess",value:function(o){var s=this;this._mediaAccess=this._deviceManager.useMedia(o),this._mediaAccess.on("streamChanged",function(){s._screenShare.isSharing&&s._mergeScreenShareStream(),s._dispatchEvent("streamChanged",s.localStream)}),this._mediaAccess.on("audioOutputChanged",function(){return s._dispatchEvent("audioOutputChanged")})}},{key:"_mergeScreenShareStream",value:function(){if(this._screenShare.isSharing){var o=new MediaStream;this._mediaAccess.stream&&this._mediaAccess.stream.getAudioTracks().length>0&&o.addTrack(this._mediaAccess.stream.getAudioTracks()[0]),o.addTrack(this.screenStream.getVideoTracks()[0]),this._mergedStream=o}}},{key:"_releaseMergedStream",value:function(){this._mergedStream&&(this._mergedStream.removeTrack(this._mergedStream.getAudioTracks()[0]),delete this._mergedStream,this._dispatchEvent("streamChanged",this.localStream))}},{key:"mediaConstraints",set:function(o){this._mediaConstraints=o}},{key:"hasVideoPermission",get:function(){var o;return(o=this._mediaAccess)===null||o===void 0?void 0:o.hasVideoPermission}},{key:"localStream",get:function(){return this.isScreenSharing?this._mergedStream:this.getLocalMediaStream()}},{key:"mergedStream",get:function(){return this._mergedStream}},{key:"screenStream",get:function(){return this._screenShare.stream}},{key:"isScreenSharing",get:function(){return this._screenShare.isSharing}}]),r}(pn),le=function(e){F(t,e);var n=U(t);function t(r){var o,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return b(this,t),Z(ee(o=n.call(this)),"_remoteParticipants",[]),o._ctx=r,o.initialize(s),o}return x(t,[{key:"_getMediaConstraints",value:function(){switch(this._ctx.roomType){case"large_room_for_audio_only":case"small_room_for_audio_only":return{audio:!0,video:!1};default:return{audio:!0,video:!0}}}},{key:"findRemoteById",value:function(r){return this._remoteParticipants.find(function(o){return o.participantId===r})}},{key:"initialize",value:function(r){var o=this;N.debug("initialize()",r),this._localStream=new ae(this._ctx.deviceManager),this._localStream.mediaConstraints=this._getMediaConstraints(),r.forEach(function(s){s.isLocalParticipant?o._localParticipant=new c(o._ctx,s,o._localStream):o._remoteParticipants.push(new m(o._ctx,s,o._localStream))})}},{key:"updateInfo",value:function(r){N.debug("updateInfo()",r),this._stampLocalParticipant(r);var o=r.filter(function(l){return l.isLocalParticipant})[0],s=r.filter(function(l){return!l.isLocalParticipant});o&&this._upsertLocalParticipantInfo(o),this._updateRemoteParticipantsInfo(s)}},{key:"exit",value:function(){N.debug("exit()"),this._localParticipant.exit(),delete this._localParticipant}},{key:"onEvent",value:function(r){switch(r.type){case re.PARTICIPANT_ENTERED:this._onEntered(r.payload.participant);break;case re.PARTICIPANT_CONNECTED:this._onConnected(r.payload.participant);break;case re.PARTICIPANT_EXITED:this._onExited(r.payload.participant);break;case re.PARTICIPANT_DISCONNECTED:this._onDisconnected(r.payload.participant,r.payload.reason);break;case re.PARTICIPANT_AUDIO_STATUS_CHANGED:this._onAudioSettingsChanged(r.payload.participant);break;case re.PARTICIPANT_VIDEO_STATUS_CHANGED:this._onVideoSettingsChanged(r.payload.participant)}}},{key:"_upsertLocalParticipantInfo",value:function(r){N.debug("_upsertLocalParticipantInfo()"),this._localParticipant?this._localParticipant.updateInfo(r):this._localParticipant=new c(this._ctx,r,this._localStream)}},{key:"_updateRemoteParticipantsInfo",value:function(r){var o=this;N.debug("_updateRemoteParticipantsInfo()"),r.forEach(function(s){return o._upsertParticipantInfo(s)}),this._remoteParticipants.filter(function(s){return!r.some(function(l){return l.participantId===s.id})}).forEach(function(s){o._deleteParticipantInfo(s)})}},{key:"_upsertParticipantInfo",value:function(r){N.debug("_upsertParticipantInfo()");var o=this._updateParticipantInfo(r);return o||this._insertParticipantInfo(r)}},{key:"_insertParticipantInfo",value:function(r){N.debug("_insertParticipantInfo()");var o=new m(this._ctx,r,this._localStream);return this._dispatchEventIfOnCall("entered",o),o.state==="connected"&&this._dispatchEventIfOnCall("connected",o),this._remoteParticipants.push(o),o}},{key:"_updateParticipantInfo",value:function(r){N.debug("_updateParticipantInfo()");var o=this.findRemoteById(r.participantId);if(!o)return!1;var s,l=mt(o.updateInfo(r).entries());try{for(l.s();!(s=l.n()).done;){var f=Xn(s.value,2),h=f[0],_=f[1];switch(h){case"isAudioEnabled":this._dispatchEventIfOnCall("audioSettingsChanged",o);break;case"isVideoEnabled":this._dispatchEventIfOnCall("videoSettingsChanged",o);break;case"state":_==="connected"&&this._dispatchEventIfOnCall("connected",o);break;default:N.debug(`_updateParticipantInfo() => Ignore diff
key : `,h,`
value : `,_)}}}catch(k){l.e(k)}finally{l.f()}return o}},{key:"_deleteParticipantInfo",value:function(r){N.debug("_deleteParticipantInfo()");var o=this.findRemoteById(r.participantId);if(o){var s=this._remoteParticipants.indexOf(o);this._remoteParticipants.splice(s,1),this._dispatchEventIfOnCall("exited",o)}}},{key:"_stampLocalParticipant",value:function(r){var o=this;this._localParticipant&&(r.find(function(s){return s.participantId===o._localParticipant.participantId}).isLocalParticipant=!0)}},{key:"_onEntered",value:function(r){N.debug("_onEntered()"),this._upsertParticipantInfo(r)}},{key:"_onConnected",value:function(r){N.debug("_onConnected()"),this._upsertParticipantInfo(r)}},{key:"_onExited",value:function(r){N.debug("_onExited()"),this._deleteParticipantInfo(r)}},{key:"_onDisconnected",value:function(r,o){N.debug("_onDisconnected()"),this._localParticipant.participantId===r.participantId?this._dispatchEvent("selfDisconnected",o):this._deleteParticipantInfo(r)}},{key:"_onAudioSettingsChanged",value:function(r){N.debug("_onAudioSettingsChanged()"),this._upsertParticipantInfo(r)}},{key:"_onVideoSettingsChanged",value:function(r){N.debug("_onVideoSettingsChanged()"),this._upsertParticipantInfo(r)}},{key:"_dispatchEventIfOnCall",value:function(r){if(this._isOnCall){for(var o=arguments.length,s=new Array(o>1?o-1:0),l=1;l<o;l++)s[l-1]=arguments[l];this._dispatchEvent.apply(this,[r].concat(s))}}},{key:"participants",get:function(){var r=Nr(this._remoteParticipants);return this._localParticipant&&r.unshift(this._localParticipant),r}},{key:"localParticipant",get:function(){return this._localParticipant}},{key:"remoteParticipants",get:function(){return this._remoteParticipants}},{key:"connectedRemoteParticipants",get:function(){return this._remoteParticipants.filter(function(r){return r.state===i.CONNECTED})}},{key:"localStream",get:function(){return this._localStream}},{key:"_isOnCall",get:function(){return this._ctx.room.isOnCall}}]),t}(pn),te=function(){function e(o){var s=o.sender,l=o.room,f=o.inviter,h=o.invitee;b(this,e),this._sender=s,this.room=l,this.inviter=f,this.invitee=h}var n,t,r;return x(e,[{key:"accept",value:(r=Ie(regeneratorRuntime.mark(function o(){var s;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=Nt.createAcceptInvitation(this.room.roomId,this.inviter.userId),l.abrupt("return",this._sender.send(s));case 2:case"end":return l.stop()}},o,this)})),function(){return r.apply(this,arguments)})},{key:"decline",value:(t=Ie(regeneratorRuntime.mark(function o(){var s;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=Nt.createDeclineInvitation(this.room.roomId,this.inviter.userId),l.abrupt("return",this._sender.send(s));case 2:case"end":return l.stop()}},o,this)})),function(){return t.apply(this,arguments)})},{key:"cancel",value:(n=Ie(regeneratorRuntime.mark(function o(){var s;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=Nt.createCancelInvitation(this.room.roomId,this.invitee.userId),l.abrupt("return",this._sender.send(s));case 2:case"end":return l.stop()}},o,this)})),function(){return n.apply(this,arguments)})}]),e}();(function(e){e.SMALL_ROOM_FOR_AUDIO_ONLY="small_room_for_audio_only",e.LARGE_ROOM_FOR_AUDIO_ONLY="large_room_for_audio_only",e.SMALL_ROOM_FOR_VIDEO="small_room_for_video",e.LARGE_ROOM_FOR_VIDEO="large_room_for_video"})(g||(g={}));var Ce,Oe=function(e){F(l,e);var n,t,r,o,s=U(l);function l(f,h){var _;return b(this,l),Z(ee(_=s.call(this)),"_enterLock",new Jc),Z(ee(_),"_customItemsUpdatedAt",0),_._ctx=Ct(Ct({},f),{},{room:ee(_),roomId:h.roomId,roomType:h.roomType,customItems:h.customItems}),_.initialize(h),_._registerCollectionEventListeners(),_}return x(l,[{key:"_send",value:function(f){return this._ctx.sender.send(f)}},{key:"initialize",value:function(f){var h=f.participants,_=Cc(f,["participants"]);Object.assign(this,_),this._participantCollection?this._participantCollection.initialize(h):this._participantCollection=new le(this._ctx,f.participants)}},{key:"updateInfo",value:function(f){var h=f.participants,_=Cc(f,["participants"]);return Object.assign(this,_),this._participantCollection.updateInfo(h),this}},{key:"onEvent",value:function(f){var h=this;this._enterLock.acquire().then(function(){h._processEvent(f),h._enterLock.release()})}},{key:"fetchCustomItems",value:function(){var f=this,h=Nt.createFetchCustomItems(this.roomId);return this._send(h).then(function(_){var k=_.payload;return f._setCustomItems(k.customItems,k.affectedAt),k}).catch(function(_){throw N.error("failed to update customItems"),_})}},{key:"updateCustomItems",value:function(f){var h=this,_=Xn(Fr(f),2)[1];if(_)return _;var k=Nt.createUpdateCustomItems(this.roomId,f,"upsert");return this._send(k).then(function(E){var y=E.payload;return h._setCustomItems(y.customItems,y.affectedAt),y}).catch(function(E){throw N.error("failed to update customItems"),E})}},{key:"deleteCustomItems",value:function(f){var h=this,_=Xn(ko(f),2)[1];if(_)return _;var k=Nt.createDeleteCustomItems(this.roomId,f);return this._send(k).then(function(E){var y=E.payload;return h._setCustomItems(y.customItems,y.affectedAt),y}).catch(function(E){throw N.error("failed to delete customItems"),E})}},{key:"_setCustomItems",value:function(f,h){return h>this._customItemsUpdatedAt&&(this._customItemsUpdatedAt=h,this.customItems=f||{},!0)}},{key:"_processEvent",value:function(f){switch(f.type){case re.CUSTOM_ITEMS_UPDATE:this._updateCustomItems(f);break;case re.CUSTOM_ITEMS_DELETE:this._deleteCustomItems(f);break;case re.ROOM_DELETED:this._dispatchEvent("deleted"),this._teardown();break;case re.INVITATION_DECLINED:this._dispatchEvent("invitationDeclined",new te({sender:this._ctx.sender,room:this,inviter:f.payload.inviter,invitee:f.payload.invitee}));break;case re.INVITATION_ACCEPTED:this._dispatchEvent("invitationAccepted",new te({sender:this._ctx.sender,room:this,inviter:f.payload.inviter,invitee:f.payload.invitee}));break;case re.INVITATION_CANCELED:this._dispatchEvent("invitationCanceled",new te({sender:this._ctx.sender,room:this,inviter:f.payload.inviter,invitee:f.payload.invitee}));break;case re.PARTICIPANT_ENTERED:case re.PARTICIPANT_CONNECTED:case re.PARTICIPANT_EXITED:case re.PARTICIPANT_DISCONNECTED:case re.PARTICIPANT_AUDIO_STATUS_CHANGED:case re.PARTICIPANT_VIDEO_STATUS_CHANGED:this._passToCollection(f)}}},{key:"enter",value:(o=Ie(regeneratorRuntime.mark(function f(h){var _,k;return regeneratorRuntime.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(N.info("enter()"),!this._session){E.next=5;break}throw _=new ze(Y.ERR_CLIENT_ALREADY_ENTERED),N.debug(_),_;case 5:return E.next=7,this._enterLock.acquire();case 7:return E.prev=7,E.next=10,this._sendEnter(h);case 10:k=E.sent,E.next=18;break;case 13:throw E.prev=13,E.t0=E.catch(7),this._enterLock.release(),N.error(E.t0),E.t0;case 18:this.updateInfo(k.payload.room),this._session=new P(this._ctx,this._participantCollection),this._registerSessionEventListeners(),this._session.onEntered(),this._enterLock.release();case 23:case"end":return E.stop()}},f,this,[[7,13]])})),function(f){return o.apply(this,arguments)})},{key:"exit",value:function(){N.info("exit()"),this._validateEntered();var f=this.localParticipant.id;this._teardown(),this._sendExit(f).catch(function(h){N.error("_sendExit() failed : ",h)})}},{key:"setAudioForLargeRoom",value:(r=Ie(regeneratorRuntime.mark(function f(h){return regeneratorRuntime.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return N.info("setAudioForLargeRoom()"),this._validateEntered(),_.abrupt("return",this._session.setAudioForLargeRoom(h));case 3:case"end":return _.stop()}},f,this)})),function(f){return r.apply(this,arguments)})},{key:"sendInvitation",value:(t=Ie(regeneratorRuntime.mark(function f(h){var _,k;return regeneratorRuntime.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return _=Nt.createSendInvitation(this.roomId,h),E.next=3,this._ctx.sender.send(_);case 3:return k=E.sent,E.abrupt("return",new te({sender:this._ctx.sender,room:this,inviter:k.payload.inviter,invitee:k.payload.invitee}));case 5:case"end":return E.stop()}},f,this)})),function(f){return t.apply(this,arguments)})},{key:"delete",value:(n=Ie(regeneratorRuntime.mark(function f(){var h;return regeneratorRuntime.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,this._sendDelete(this.roomId);case 2:h=_.sent,this.updateInfo(h.payload.room),this._dispatchEvent("deleted");case 5:case"end":return _.stop()}},f,this)})),function(){return n.apply(this,arguments)})},{key:"_validateEntered",value:function(){if(!this._session){var f=new ze(Y.ERR_PARTICIPANT_NOT_IN_ROOM);throw N.debug(f),f}}},{key:"_registerSessionEventListeners",value:function(){var f=this;this._session.on("remoteParticipantStream",function(h){f._dispatchEvent("remoteParticipantStreamStarted",h)}),this._session.on("localParticipantConnected",function(h,_){_&&f._dispatchEvent("localParticipantReconnected",h)}),this._session.on("localParticipantDisconnected",function(h){f._dispatchEvent("localParticipantDisconnected",h)}),this._session.on("aliveFailed",function(){f._dispatchEvent("error",new ze(Y.ERR_LOCAL_PARTICIPANT_LOST_CONNECTION)),f._teardown()}),this._session.on("deleted",function(){f._dispatchEvent("deleted"),f._teardown()})}},{key:"_registerCollectionEventListeners",value:function(){var f=this;this._participantCollection.on("entered",function(h){f._dispatchEvent("remoteParticipantEntered",h)}),this._participantCollection.on("connected",function(h){f._dispatchEvent("remoteParticipantConnected",h)}),this._participantCollection.on("exited",function(h){f._dispatchEvent("remoteParticipantExited",h)}),this._participantCollection.on("audioSettingsChanged",function(h){f._dispatchEvent("remoteAudioSettingsChanged",h)}),this._participantCollection.on("videoSettingsChanged",function(h){f._dispatchEvent("remoteVideoSettingsChanged",h)}),this._participantCollection.on("selfDisconnected",function(h){f._teardown(),h==="sibling_kicked"?f._dispatchEvent("error",new ze(Y.ERR_LOCAL_PARTICIPANT_KICKED_OUT)):f._dispatchEvent("error",new ze(Y.ERR_LOCAL_PARTICIPANT_LOST_CONNECTION))})}},{key:"_updateCustomItems",value:function(f){var h=f.payload,_=h.customItems,k=h.updated,E=h.affectedAt;this._setCustomItems(_,E)&&this._dispatchEvent("customItemsUpdated",_,k)}},{key:"_deleteCustomItems",value:function(f){var h=f.payload,_=h.customItems,k=h.deleted,E=h.affectedAt;this._setCustomItems(_,E)&&this._dispatchEvent("customItemsDeleted",_,k)}},{key:"_passToCollection",value:function(f){this._participantCollection.onEvent(f)}},{key:"_sendEnter",value:function(f){var h=Nt.createEnter(this._ctx.roomId,f);return this._ctx.sender.send(h)}},{key:"_sendExit",value:function(f){var h=Nt.createExit(this._ctx.roomId,f);return this._ctx.sender.send(h)}},{key:"_sendDelete",value:function(f){var h=Nt.createDeleteRoom(f);return this._ctx.sender.send(h)}},{key:"_teardown",value:function(){this._session.removeAllEventListeners(),this._session.exit(),this._participantCollection.exit(),delete this._session}},{key:"participants",get:function(){return this._participantCollection.participants}},{key:"localParticipant",get:function(){return this._participantCollection.localParticipant}},{key:"remoteParticipants",get:function(){return this._participantCollection.remoteParticipants}},{key:"isOnCall",get:function(){return!!this._session}}]),l}(pn);(function(e){e.OPEN="open",e.DELETED="deleted"})(Ce||(Ce={}));var Ee,qt=function(){function e(n){b(this,e),this._ctx=n}return x(e,[{key:"createRoom",value:function(n){return new Oe(this._ctx,n)}}]),e}(),W=function(){function e(o){b(this,e),this._ctx=o,this._factory=new qt(o),this._rooms=new Map,this._sendbirdCallListeners=new Map}var n,t,r;return x(e,[{key:"_hasRoom",value:function(o){return this._rooms.has(o)}},{key:"onEvent",value:function(o){switch(o.type){case re.INVITATION_SENT:this._onInvitation(o);break;case re.CUSTOM_ITEMS_UPDATE:case re.CUSTOM_ITEMS_DELETE:case re.ROOM_DELETED:case re.PARTICIPANT_CONNECTED:case re.PARTICIPANT_ENTERED:case re.PARTICIPANT_EXITED:case re.PARTICIPANT_DISCONNECTED:case re.PARTICIPANT_AUDIO_STATUS_CHANGED:case re.PARTICIPANT_VIDEO_STATUS_CHANGED:case re.INVITATION_CANCELED:case re.INVITATION_ACCEPTED:case re.INVITATION_DECLINED:this._passToRoom(o);break;default:N.error(new Error("unhandled room event ".concat(o.type)))}}},{key:"addListener",value:function(o,s){this._sendbirdCallListeners.set(o,s)}},{key:"removeListener",value:function(o){this._sendbirdCallListeners.delete(o)}},{key:"removeAllListeners",value:function(){this._sendbirdCallListeners.clear()}},{key:"_onInvitation",value:function(o){var s;this._sendInvitationReceiveCommand(o),(s=this._rooms.get(o.payload.room.roomId))||(s=this._factory.createRoom(o.payload.room),this._rooms.set(s.roomId,s));var l,f=new te({sender:this._ctx.sender,room:s,inviter:o.payload.inviter,invitee:o.payload.invitee}),h=mt(this._sendbirdCallListeners.values());try{for(h.s();!(l=h.n()).done;){var _,k=l.value;(_=k.onInvitationReceived)===null||_===void 0||_.call(k,f)}}catch(E){h.e(E)}finally{h.f()}}},{key:"_sendInvitationReceiveCommand",value:function(o){var s=Nt.createInvitationReceive(o.payload.room.roomId,o.payload.inviter.userId,o.payload.shortLivedToken);return this._ctx.sender.send(s).catch(function(){})}},{key:"_passToRoom",value:function(o){this._hasRoom(o.getRoomId())?this._rooms.get(o.getRoomId()).onEvent(o):N.debug("received command ".concat(o.type," for non-existing room ").concat(o.getRoomId()))}},{key:"createRoom",value:(r=Ie(regeneratorRuntime.mark(function o(s){var l,f;return regeneratorRuntime.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,this._sendCreate(s);case 2:return l=h.sent,f=this._factory.createRoom(l.payload.room),this._rooms.set(f.roomId,f),h.abrupt("return",f);case 6:case"end":return h.stop()}},o,this)})),function(o){return r.apply(this,arguments)})},{key:"deserializeRoom",value:(t=Ie(regeneratorRuntime.mark(function o(s){var l,f,h;return regeneratorRuntime.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(l=s.roomId,!(f=this._rooms.get(l))){_.next=5;break}return f.updateInfo(s),_.abrupt("return",f);case 5:return h=this._factory.createRoom(s),this._rooms.set(h.roomId,h),_.abrupt("return",h);case 8:case"end":return _.stop()}},o,this)})),function(o){return t.apply(this,arguments)})},{key:"getCachedRoomById",value:function(o){return this._rooms.get(o)}},{key:"fetchRoomById",value:(n=Ie(regeneratorRuntime.mark(function o(s){var l,f,h;return regeneratorRuntime.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,this._sendGetRoom(s);case 2:if(l=_.sent,!(f=this._rooms.get(s))){_.next=7;break}return f.updateInfo(l.payload.room),_.abrupt("return",f);case 7:return h=this._factory.createRoom(l.payload.room),this._rooms.set(h.roomId,h),_.abrupt("return",h);case 10:case"end":return _.stop()}},o,this)})),function(o){return n.apply(this,arguments)})},{key:"_sendCreate",value:function(o){var s=Nt.createCreate(o);return this._ctx.sender.send(s)}},{key:"_sendGetRoom",value:function(o){var s=Nt.createGet(o);return this._ctx.sender.send(s)}},{key:"clear",value:function(){var o,s=mt(this._rooms.values());try{for(s.s();!(o=s.n()).done;){var l=o.value;l.isOnCall&&l.exit()}}catch(f){s.e(f)}finally{s.f()}this._rooms.clear()}}]),e}();(function(e){e.DIALING="DIALING",e.RINGING="RINGING",e.RECONNECTING="RECONNECTING",e.RECONNECTED="RECONNECTED"})(Ee||(Ee={}));var V,G,he,be=function(){function e(){b(this,e),this.audioElms=new Map}var n,t;return x(e,[{key:"loadSound",value:(t=Ie(regeneratorRuntime.mark(function r(o,s){var l;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(typeof s=="string"&&s){f.next=2;break}return f.abrupt("return",!1);case 2:return(l=this._createAudio(o)).src=s,l.volume=0,f.prev=5,f.next=8,l.play();case 8:l.pause(),l.currentTime=0,l.volume=1,this.audioElms.set(o,l),f.next=18;break;case 14:return f.prev=14,f.t0=f.catch(5),N.error(f.t0),f.abrupt("return",!1);case 18:return f.abrupt("return",!0);case 19:case"end":return f.stop()}},r,this,[[5,14]])})),function(r,o){return t.apply(this,arguments)})},{key:"unloadSound",value:function(r){return!!this.audioElms.get(r)&&this.audioElms.delete(r)}},{key:"playSound",value:(n=Ie(regeneratorRuntime.mark(function r(o){var s;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(s=this.audioElms.get(o)){l.next=3;break}return l.abrupt("return",!1);case 3:return l.prev=3,s.currentTime=0,l.next=7,s.play();case 7:l.next=13;break;case 9:return l.prev=9,l.t0=l.catch(3),N.error(l.t0),l.abrupt("return",!1);case 13:return l.abrupt("return",!0);case 14:case"end":return l.stop()}},r,this,[[3,9]])})),function(r){return n.apply(this,arguments)})},{key:"stopSound",value:function(r){var o=this.audioElms.get(r);return!!o&&o.pause()}},{key:"stopAllSound",value:function(){var r,o=mt(this.audioElms.values());try{for(o.s();!(r=o.n()).done;)r.value.pause()}catch(s){o.e(s)}finally{o.f()}}},{key:"isPlaying",value:function(r){var o=this.audioElms.get(r);return o&&!o.paused}},{key:"_isLoop",value:function(r){return r===Ee.DIALING||r===Ee.RINGING}},{key:"_createAudio",value:function(r){var o=new Audio;return o.autoplay=!1,o.muted=!1,o.loop=this._isLoop(r),o}}]),e}();function xe(e){return function(n){var t=n.descriptor.value;return n.descriptor.value=function(){if(xe.checkIE())throw new Error(e??"Method ".concat(n.key," is not supported in Internet Explorer"));for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return t.call.apply(t,[this].concat(o))},n}}(function(e){e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.NONE="NONE"})(V||(V={})),function(e){e.RECORDING="recording",e.NONE="none"}(G||(G={})),function(e){e.APNS="apns_voip",e.FCM="fcm_voip"}(he||(he={})),xe.checkIE=function(){return!!window&&(window.navigator.userAgent.indexOf("MSIE ")>0||!!navigator.userAgent.match(/Trident.*rv:11\./))},xe.messages={CALL_IS_NOT_SUPPORTED:"Call is not supported in Internet Explorer"};var ke,Fe,rn,Ze,Hr="1.10.20",Xh=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return t}(nr),Do=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.call(this)}return x(t,[{key:"getApiOption",value:function(){return{auth:this.getAuth(),path:this.getPath(),method:this.getMethod(),body:this.getData(),headers:this.getHeaders()}}},{key:"getAuth",value:function(){return!0}},{key:"getHeaders",value:function(){return{}}}]),t}(ir),ck=function(e){F(t,e);var n=U(t);function t(r){var o;return b(this,t),(o=n.call(this)).statsLog=r,o}return x(t,[{key:"getData",value:function(){return{log_group:"sdk_webrtc_statistics_v1.1",log_data:this.statsLog}}},{key:"getPath",value:function(){return"/v1/sdk/logs"}},{key:"getMethod",value:function(){return"POST"}}]),t}(Do),dk=function(e){F(t,e);var n=U(t);function t(r,o){var s;return b(this,t),(s=n.call(this)).version=1,s.isOverflowLogs=o,s.logs=r,s}return x(t,[{key:"getData",value:function(){return{version:this.version,is_overflow_logs:this.isOverflowLogs,logs:this.getLogsData()}}},{key:"getPath",value:function(){return"/v1/sdk/debug_logs"}},{key:"getMethod",value:function(){return"POST"}},{key:"getLogsData",value:function(){return this.logs.map(function(r){return{log_dt:r.logDt,log_level:r.logLevel,log_message:r.logMessage}})}}]),t}(Do),fk=function(e){F(t,e);var n=U(t);function t(r,o,s){var l;return b(this,t),(l=n.call(this)).appId=r,l.userId=o,l.accessToken=s,l}return x(t,[{key:"getAuth",value:function(){return!1}},{key:"getData",value:function(){return{app_id:this.appId,user_id:this.userId,access_token:this.accessToken}}},{key:"getPath",value:function(){return"/v1/users/".concat(encodeURIComponent(this.userId),"/login")}},{key:"getMethod",value:function(){return"POST"}}]),t}(Do),hk=function(e){F(t,e);var n=U(t);function t(r,o,s){var l;return b(this,t),(l=n.call(this)).userId=r,l.params=o,l.next=s,l}return x(t,[{key:"getData",value:function(){}},{key:"getPath",value:function(){return"/v1/users/".concat(encodeURIComponent(this.userId),"/calls?").concat(this._createQuery())}},{key:"getMethod",value:function(){return"GET"}},{key:"_createQuery",value:function(){var r;return ad.createQuery({role:this.params.myRole,limit:this._applyLimitConstraints((r=this.params)===null||r===void 0?void 0:r.limit),start_ts:this.params.startedAt,end_ts:this.params.endedAt,end_result:this.params.endResults,next:this.next})}},{key:"_applyLimitConstraints",value:function(r){return r!=null?Math.min(Math.max(r,10),100):void 0}}]),t}(Do),pk=function(e){F(t,e);var n=U(t);function t(r,o,s){var l;return b(this,t),(l=n.call(this)).userId=r,l.pushToken=o,l.tokenType=s,l}return x(t,[{key:"getAuth",value:function(){return!0}},{key:"getData",value:function(){return{token:this.pushToken,is_unique:!0}}},{key:"getPath",value:function(){return"/v1/users/".concat(encodeURIComponent(this.userId),"/push/").concat(this.tokenType)}},{key:"getMethod",value:function(){return"POST"}}]),t}(Do),_k=function(e){F(t,e);var n=U(t);function t(r,o,s){var l;return b(this,t),(l=n.call(this)).userId=r,l.pushToken=o,l.tokenType=s,l}return x(t,[{key:"getAuth",value:function(){return!0}},{key:"getData",value:function(){return{}}},{key:"getPath",value:function(){return"/v1/users/".concat(encodeURIComponent(this.userId),"/push/").concat(this.tokenType,"/").concat(this.pushToken)}},{key:"getMethod",value:function(){return"DELETE"}}]),t}(Do),mk=function(e){F(t,e);var n=U(t);function t(r,o){var s;return b(this,t),(s=n.call(this)).userId=r,s.tokenType=o,s}return x(t,[{key:"getAuth",value:function(){return!0}},{key:"getData",value:function(){return{}}},{key:"getPath",value:function(){return"/v1/users/".concat(encodeURIComponent(this.userId),"/push/").concat(this.tokenType)}},{key:"getMethod",value:function(){return"DELETE"}}]),t}(Do),Sd=function(e){F(t,e);var n=U(t);function t(r){var o;return b(this,t),(o=n.call(this)).callId=r,o}return x(t,[{key:"getPath",value:function(){return"/v1/direct_calls".concat(this.getSubPath())}}]),t}(Do);(function(e){e.CALL="CALL",e.SGNL="SGNL",e.COMM="COMM",e.UTIL="UTIL"})(ke||(ke={})),function(e){e[e.WS=0]="WS",e[e.API=1]="API",e[e.BOTH=2]="BOTH"}(Fe||(Fe={})),function(e){e.API="api",e.CMD_RETRIEVING="cmd_retrieving",e.WEBHOOK="webhook",e.WS="ws",e.PUSH="push"}(rn||(rn={})),function(e){e.REMOTE_PUSH="remote_push",e.VOIP_PUSH="voip_push",e.WEBHOOK="webhook",e.WS="ws"}(Ze||(Ze={}));var J,vn=function(e){F(t,e);var n=U(t);function t(){var r;return b(this,t),(r=n.call(this)).version=1,r.requestId=Bs(),r}return x(t,[{key:"getApiOption",value:function(){return{auth:!0,path:"/v1/action/direct_call",method:"POST",headers:this.getHeaders(),body:{version:this.version,request_id:this.requestId,cmd:this.getCMD(),type:this.getType(),payload:this.getData()}}}},{key:"serialize",value:function(){return JSON.stringify({version:this.version,request_id:this.requestId,cmd:this.getCMD(),type:this.getType(),payload:this.getData()})}},{key:"requireResponse",value:function(){return!1}},{key:"getHeaders",value:function(){return{}}},{key:"sendStrategy",get:function(){return Fe.WS}}]),t}(ir),av=function(e){F(t,e);var n=U(t);function t(r){var o;return b(this,t),(o=n.call(this)).cmd=r.cmd,o.type=r.type,o.payload=r.payload||{},o}return t}(ir),ov=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return x(t,[{key:"getCallId",value:function(){return this.payload.callId}}]),t}(av),Ln=function(e){F(t,e);var n=U(t);function t(r){var o;return b(this,t),(o=n.call(this)).version=r.version,o.messageId=r.message_id,o.cmd=r.cmd,o.type=r.type,o.deliveryInfo=r.delivery_info,o.sequenceNumber=r.sequence_number,o.payload=o.parseData(r.payload),o}return x(t,[{key:"getCallId",value:function(){return this.payload.callId}},{key:"isSequential",value:function(){return typeof this.sequenceNumber=="number"}}]),t}(ir),bl=function(e){F(t,e);var n=U(t);function t(r){var o;return b(this,t),(o=n.call(this)).version=r.version,o.requestId=r.request_id,o.cmd=r.cmd,o.type=r.type,o.deliveryInfo=r.delivery_info,o.sequenceNumber=r.sequence_number,o.payload=o.parseData(r.payload),o}return x(t,[{key:"getCallId",value:function(){return this.payload.callId}},{key:"isSequential",value:function(){return typeof this.sequenceNumber=="number"}}]),t}(ir),sv=function(e){F(t,e);var n=U(t);function t(r){var o;return b(this,t),(o=n.call(this)).version=r.version,o.messageId=r.message_id,o.cmd=r.cmd,o.type=r.type,o.deliveryInfo=r.delivery_info,o.sequenceNumber=r.sequence_number,o.payload=o.parseData(r.payload),o}return x(t,[{key:"isSequential",value:function(){return typeof this.sequenceNumber=="number"}}]),t}(ir),uv=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return x(t,[{key:"getCallId",value:function(){return this.payload.callId}}]),t}(sv),vk=function(e){F(t,e);var n=U(t);function t(r){var o;return b(this,t),(o=n.call(this,null)).callIds=r,o}return x(t,[{key:"requireResponse",value:function(){return!0}},{key:"getData",value:function(){}},{key:"getSubPath",value:function(){var r=this.callIds.join(",");return"/missed_signal?call_ids=".concat(encodeURIComponent(r))}},{key:"getMethod",value:function(){return"GET"}}]),t}(Sd),gk=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return x(t,[{key:"getData",value:function(){return{}}},{key:"getSubPath",value:function(){return"/".concat(this.callId,"/custom_items")}},{key:"getMethod",value:function(){return"DELETE"}}]),t}(Sd),yk=function(e){F(t,e);var n=U(t);function t(r,o){var s;return b(this,t),(s=n.call(this,r)).keys=o,s}return x(t,[{key:"getData",value:function(){return{keys:this.keys}}},{key:"getSubPath",value:function(){return"/".concat(this.callId,"/custom_items")}},{key:"getMethod",value:function(){return"DELETE"}}]),t}(Sd),Ek=function(e){F(t,e);var n=U(t);function t(r,o){var s;return b(this,t),(s=n.call(this,r)).customItems=o,s}return x(t,[{key:"getData",value:function(){return{custom_items:this.customItems,mode:"upsert"}}},{key:"getSubPath",value:function(){return"/".concat(this.callId,"/custom_items")}},{key:"getMethod",value:function(){return"PUT"}}]),t}(Sd),kk=function(e){F(t,e);var n=U(t);function t(r,o,s){var l;return b(this,t),(l=n.call(this,r)).userRole=o,l.data=s,l}return x(t,[{key:"getData",value:function(){return{version:1,user_role:this.userRole,summary_data:this.data}}},{key:"getSubPath",value:function(){return"/".concat(this.callId,"/summary")}},{key:"getMethod",value:function(){return"POST"}}]),t}(Sd);(function(e){e.DIAL="dial",e.DIAL_ACK="dial_ack",e.DIAL_RCV="dial_rcv",e.CANCEL="cancel",e.ACCEPT="accept",e.ACCEPT_ACK="accept_ack",e.OTHER_DEVICE_ACCEPTED="other_device_accepted",e.DECLINE="decline",e.DECLINE_ACK="decline_ack",e.OFFER="offer",e.ANSWER="answer",e.CANDIDATE="candidate",e.REMOVE_CANDIDATES="remove_candidates",e.AUDIO="audio",e.VIDEO="video",e.HOLD="hold",e.HOLD_ACK="hold_ack",e.CUSTOM_ITEMS_UPDATE="custom_items_update",e.CUSTOM_ITEMS_DELETE="custom_items_delete",e.RECORDING="recording",e.END="end",e.TIME_OUT="timeout",e.CONNECTION_LOST="connection_lost",e.UNKNOWN_END="unknown_end",e.ALIVE="alive",e.NO_ANSWER="no_answer",e.CANCEL_ACK="cancel_ack",e.END_ACK="end_ack",e.TIMEOUT_ACK="timeout_ack",e.NO_ANSWER_ACK="no_answer_ack",e.CONNECTION_LOST_ACK="connection_lost_ack",e.UNKNOWN_END_ACK="unknown_end_ack",e.ALIVE_ACK="alive_ack",e.CONNECTED="connected",e.SNAPSHOT="snapshot",e.TURN_CHANGED="turn_changed"})(J||(J={}));var wk=function(e){F(t,e);var n=U(t);function t(r){var o;return b(this,t),Z(ee(o=n.call(this,{type:J.DECLINE_ACK,cmd:ke.SGNL,payload:r})),"type",J.DECLINE_ACK),o}return t}(ov),Ck=function(e){F(t,e);var n=U(t);function t(r){var o;return b(this,t),Z(ee(o=n.call(this,{type:J.SNAPSHOT,cmd:ke.SGNL,payload:r})),"type",J.SNAPSHOT),o}return t}(ov),Rk=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"type",J.ACCEPT),r}return x(t,[{key:"parseData",value:function(r){return{callId:r.call_id,turnCredential:{username:r.turn_credential.username,password:r.turn_credential.password,turnUrls:r.turn_credential.turn_urls,transportPolicy:r.turn_credential.transport_policy},constraints:{audio:r.audio,video:r.video},capabilities:r.capabilities||[]}}}]),t}(Ln),lv=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"type",J.OTHER_DEVICE_ACCEPTED),r}return x(t,[{key:"parseData",value:function(r){return{callId:r.call_id}}}]),t}(Ln),Ve=C(function(e,n){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function r(l,f){return Object.prototype.hasOwnProperty.call(l,f)}n.assign=function(l){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var h=f.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(var _ in h)r(h,_)&&(l[_]=h[_])}}return l},n.shrinkBuf=function(l,f){return l.length===f?l:l.subarray?l.subarray(0,f):(l.length=f,l)};var o={arraySet:function(l,f,h,_,k){if(f.subarray&&l.subarray)l.set(f.subarray(h,h+_),k);else for(var E=0;E<_;E++)l[k+E]=f[h+E]},flattenChunks:function(l){var f,h,_,k,E,y;for(_=0,f=0,h=l.length;f<h;f++)_+=l[f].length;for(y=new Uint8Array(_),k=0,f=0,h=l.length;f<h;f++)E=l[f],y.set(E,k),k+=E.length;return y}},s={arraySet:function(l,f,h,_,k){for(var E=0;E<_;E++)l[k+E]=f[h+E]},flattenChunks:function(l){return[].concat.apply([],l)}};n.setTyped=function(l){l?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,o)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,s))},n.setTyped(t)}),Ik=(Ve.assign,Ve.shrinkBuf,Ve.setTyped,Ve.Buf8,Ve.Buf16,Ve.Buf32,4),cv=0,dv=1,Sk=2;function Dl(e){for(var n=e.length;--n>=0;)e[n]=0}var Tk=0,fv=1,Ak=2,E_=29,Td=256,Ad=Td+1+E_,Nl=30,k_=19,hv=2*Ad+1,tu=15,w_=16,Ok=7,C_=256,pv=16,_v=17,mv=18,R_=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Zh=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],bk=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],vv=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Ta=new Array(2*(Ad+2));Dl(Ta);var Od=new Array(2*Nl);Dl(Od);var bd=new Array(512);Dl(bd);var Dd=new Array(256);Dl(Dd);var I_=new Array(E_);Dl(I_);var gv,yv,Ev,Jh=new Array(Nl);function S_(e,n,t,r,o){this.static_tree=e,this.extra_bits=n,this.extra_base=t,this.elems=r,this.max_length=o,this.has_stree=e&&e.length}function T_(e,n){this.dyn_tree=e,this.max_code=0,this.stat_desc=n}function kv(e){return e<256?bd[e]:bd[256+(e>>>7)]}function Nd(e,n){e.pending_buf[e.pending++]=255&n,e.pending_buf[e.pending++]=n>>>8&255}function lr(e,n,t){e.bi_valid>w_-t?(e.bi_buf|=n<<e.bi_valid&65535,Nd(e,e.bi_buf),e.bi_buf=n>>w_-e.bi_valid,e.bi_valid+=t-w_):(e.bi_buf|=n<<e.bi_valid&65535,e.bi_valid+=t)}function Bi(e,n,t){lr(e,t[2*n],t[2*n+1])}function wv(e,n){var t=0;do t|=1&e,e>>>=1,t<<=1;while(--n>0);return t>>>1}function Cv(e,n,t){var r,o,s=new Array(tu+1),l=0;for(r=1;r<=tu;r++)s[r]=l=l+t[r-1]<<1;for(o=0;o<=n;o++){var f=e[2*o+1];f!==0&&(e[2*o]=wv(s[f]++,f))}}function Rv(e){var n;for(n=0;n<Ad;n++)e.dyn_ltree[2*n]=0;for(n=0;n<Nl;n++)e.dyn_dtree[2*n]=0;for(n=0;n<k_;n++)e.bl_tree[2*n]=0;e.dyn_ltree[2*C_]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function Iv(e){e.bi_valid>8?Nd(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function Sv(e,n,t,r){var o=2*n,s=2*t;return e[o]<e[s]||e[o]===e[s]&&r[n]<=r[t]}function A_(e,n,t){for(var r=e.heap[t],o=t<<1;o<=e.heap_len&&(o<e.heap_len&&Sv(n,e.heap[o+1],e.heap[o],e.depth)&&o++,!Sv(n,r,e.heap[o],e.depth));)e.heap[t]=e.heap[o],t=o,o<<=1;e.heap[t]=r}function Tv(e,n,t){var r,o,s,l,f=0;if(e.last_lit!==0)do r=e.pending_buf[e.d_buf+2*f]<<8|e.pending_buf[e.d_buf+2*f+1],o=e.pending_buf[e.l_buf+f],f++,r===0?Bi(e,o,n):(Bi(e,(s=Dd[o])+Td+1,n),(l=R_[s])!==0&&lr(e,o-=I_[s],l),Bi(e,s=kv(--r),t),(l=Zh[s])!==0&&lr(e,r-=Jh[s],l));while(f<e.last_lit);Bi(e,C_,n)}function O_(e,n){var t,r,o,s=n.dyn_tree,l=n.stat_desc.static_tree,f=n.stat_desc.has_stree,h=n.stat_desc.elems,_=-1;for(e.heap_len=0,e.heap_max=hv,t=0;t<h;t++)s[2*t]!==0?(e.heap[++e.heap_len]=_=t,e.depth[t]=0):s[2*t+1]=0;for(;e.heap_len<2;)s[2*(o=e.heap[++e.heap_len]=_<2?++_:0)]=1,e.depth[o]=0,e.opt_len--,f&&(e.static_len-=l[2*o+1]);for(n.max_code=_,t=e.heap_len>>1;t>=1;t--)A_(e,s,t);o=h;do t=e.heap[1],e.heap[1]=e.heap[e.heap_len--],A_(e,s,1),r=e.heap[1],e.heap[--e.heap_max]=t,e.heap[--e.heap_max]=r,s[2*o]=s[2*t]+s[2*r],e.depth[o]=(e.depth[t]>=e.depth[r]?e.depth[t]:e.depth[r])+1,s[2*t+1]=s[2*r+1]=o,e.heap[1]=o++,A_(e,s,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(k,E){var y,w,T,A,H,j,$=E.dyn_tree,se=E.max_code,fe=E.stat_desc.static_tree,ge=E.stat_desc.has_stree,De=E.stat_desc.extra_bits,Ne=E.stat_desc.extra_base,Be=E.stat_desc.max_length,He=0;for(A=0;A<=tu;A++)k.bl_count[A]=0;for($[2*k.heap[k.heap_max]+1]=0,y=k.heap_max+1;y<hv;y++)(A=$[2*$[2*(w=k.heap[y])+1]+1]+1)>Be&&(A=Be,He++),$[2*w+1]=A,w>se||(k.bl_count[A]++,H=0,w>=Ne&&(H=De[w-Ne]),j=$[2*w],k.opt_len+=j*(A+H),ge&&(k.static_len+=j*(fe[2*w+1]+H)));if(He!==0){do{for(A=Be-1;k.bl_count[A]===0;)A--;k.bl_count[A]--,k.bl_count[A+1]+=2,k.bl_count[Be]--,He-=2}while(He>0);for(A=Be;A!==0;A--)for(w=k.bl_count[A];w!==0;)(T=k.heap[--y])>se||($[2*T+1]!==A&&(k.opt_len+=(A-$[2*T+1])*$[2*T],$[2*T+1]=A),w--)}}(e,n),Cv(s,_,e.bl_count)}function Av(e,n,t){var r,o,s=-1,l=n[1],f=0,h=7,_=4;for(l===0&&(h=138,_=3),n[2*(t+1)+1]=65535,r=0;r<=t;r++)o=l,l=n[2*(r+1)+1],++f<h&&o===l||(f<_?e.bl_tree[2*o]+=f:o!==0?(o!==s&&e.bl_tree[2*o]++,e.bl_tree[2*pv]++):f<=10?e.bl_tree[2*_v]++:e.bl_tree[2*mv]++,f=0,s=o,l===0?(h=138,_=3):o===l?(h=6,_=3):(h=7,_=4))}function Ov(e,n,t){var r,o,s=-1,l=n[1],f=0,h=7,_=4;for(l===0&&(h=138,_=3),r=0;r<=t;r++)if(o=l,l=n[2*(r+1)+1],!(++f<h&&o===l)){if(f<_)do Bi(e,o,e.bl_tree);while(--f!=0);else o!==0?(o!==s&&(Bi(e,o,e.bl_tree),f--),Bi(e,pv,e.bl_tree),lr(e,f-3,2)):f<=10?(Bi(e,_v,e.bl_tree),lr(e,f-3,3)):(Bi(e,mv,e.bl_tree),lr(e,f-11,7));f=0,s=o,l===0?(h=138,_=3):o===l?(h=6,_=3):(h=7,_=4)}}Dl(Jh);var bv=!1;function Dv(e,n,t,r){lr(e,(Tk<<1)+(r?1:0),3),function(o,s,l,f){Iv(o),Nd(o,l),Nd(o,~l),Ve.arraySet(o.pending_buf,o.window,s,l,o.pending),o.pending+=l}(e,n,t)}var Dk=function(e,n,t,r){var o,s,l=0;e.level>0?(e.strm.data_type===Sk&&(e.strm.data_type=function(f){var h,_=4093624447;for(h=0;h<=31;h++,_>>>=1)if(1&_&&f.dyn_ltree[2*h]!==0)return cv;if(f.dyn_ltree[18]!==0||f.dyn_ltree[20]!==0||f.dyn_ltree[26]!==0)return dv;for(h=32;h<Td;h++)if(f.dyn_ltree[2*h]!==0)return dv;return cv}(e)),O_(e,e.l_desc),O_(e,e.d_desc),l=function(f){var h;for(Av(f,f.dyn_ltree,f.l_desc.max_code),Av(f,f.dyn_dtree,f.d_desc.max_code),O_(f,f.bl_desc),h=k_-1;h>=3&&f.bl_tree[2*vv[h]+1]===0;h--);return f.opt_len+=3*(h+1)+5+5+4,h}(e),o=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=o&&(o=s)):o=s=t+5,t+4<=o&&n!==-1?Dv(e,n,t,r):e.strategy===Ik||s===o?(lr(e,(fv<<1)+(r?1:0),3),Tv(e,Ta,Od)):(lr(e,(Ak<<1)+(r?1:0),3),function(f,h,_,k){var E;for(lr(f,h-257,5),lr(f,_-1,5),lr(f,k-4,4),E=0;E<k;E++)lr(f,f.bl_tree[2*vv[E]+1],3);Ov(f,f.dyn_ltree,h-1),Ov(f,f.dyn_dtree,_-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,l+1),Tv(e,e.dyn_ltree,e.dyn_dtree)),Rv(e),r&&Iv(e)},Wr={_tr_init:function(e){bv||(function(){var n,t,r,o,s,l=new Array(tu+1);for(r=0,o=0;o<E_-1;o++)for(I_[o]=r,n=0;n<1<<R_[o];n++)Dd[r++]=o;for(Dd[r-1]=o,s=0,o=0;o<16;o++)for(Jh[o]=s,n=0;n<1<<Zh[o];n++)bd[s++]=o;for(s>>=7;o<Nl;o++)for(Jh[o]=s<<7,n=0;n<1<<Zh[o]-7;n++)bd[256+s++]=o;for(t=0;t<=tu;t++)l[t]=0;for(n=0;n<=143;)Ta[2*n+1]=8,n++,l[8]++;for(;n<=255;)Ta[2*n+1]=9,n++,l[9]++;for(;n<=279;)Ta[2*n+1]=7,n++,l[7]++;for(;n<=287;)Ta[2*n+1]=8,n++,l[8]++;for(Cv(Ta,Ad+1,l),n=0;n<Nl;n++)Od[2*n+1]=5,Od[2*n]=wv(n,5);gv=new S_(Ta,R_,Td+1,Ad,tu),yv=new S_(Od,Zh,0,Nl,tu),Ev=new S_(new Array(0),bk,0,k_,Ok)}(),bv=!0),e.l_desc=new T_(e.dyn_ltree,gv),e.d_desc=new T_(e.dyn_dtree,yv),e.bl_desc=new T_(e.bl_tree,Ev),e.bi_buf=0,e.bi_valid=0,Rv(e)},_tr_stored_block:Dv,_tr_flush_block:Dk,_tr_tally:function(e,n,t){return e.pending_buf[e.d_buf+2*e.last_lit]=n>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&n,e.pending_buf[e.l_buf+e.last_lit]=255&t,e.last_lit++,n===0?e.dyn_ltree[2*t]++:(e.matches++,n--,e.dyn_ltree[2*(Dd[t]+Td+1)]++,e.dyn_dtree[2*kv(n)]++),e.last_lit===e.lit_bufsize-1},_tr_align:function(e){lr(e,fv<<1,3),Bi(e,C_,Ta),function(n){n.bi_valid===16?(Nd(n,n.bi_buf),n.bi_buf=0,n.bi_valid=0):n.bi_valid>=8&&(n.pending_buf[n.pending++]=255&n.bi_buf,n.bi_buf>>=8,n.bi_valid-=8)}(e)}},xd=function(e,n,t,r){for(var o=65535&e|0,s=e>>>16&65535|0,l=0;t!==0;){t-=l=t>2e3?2e3:t;do s=s+(o=o+n[r++]|0)|0;while(--l);o%=65521,s%=65521}return o|s<<16|0},Nk=function(){for(var e,n=[],t=0;t<256;t++){e=t;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;n[t]=e}return n}(),xl,Sn=function(e,n,t,r){var o=Nk,s=r+t;e^=-1;for(var l=r;l<s;l++)e=e>>>8^o[255&(e^n[l])];return-1^e},nu={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ru=0,xk=1,Lk=3,No=4,Nv=5,zi=0,xv=1,Gr=-2,Pk=-3,b_=-5,Mk=-1,Fk=1,ep=2,Uk=3,Vk=4,jk=0,Bk=2,tp=8,zk=9,Hk=15,Wk=8,D_=286,Gk=30,$k=19,qk=2*D_+1,Kk=15,ot=3,xo=258,vi=xo+ot+1,Qk=32,np=42,N_=69,rp=73,ip=91,ap=103,iu=113,Ld=666,Tn=1,Pd=2,au=3,Ll=4,Yk=3;function Lo(e,n){return e.msg=nu[n],n}function Lv(e){return(e<<1)-(e>4?9:0)}function Po(e){for(var n=e.length;--n>=0;)e[n]=0}function Mo(e){var n=e.state,t=n.pending;t>e.avail_out&&(t=e.avail_out),t!==0&&(Ve.arraySet(e.output,n.pending_buf,n.pending_out,t,e.next_out),e.next_out+=t,n.pending_out+=t,e.total_out+=t,e.avail_out-=t,n.pending-=t,n.pending===0&&(n.pending_out=0))}function Pn(e,n){Wr._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,n),e.block_start=e.strstart,Mo(e.strm)}function dt(e,n){e.pending_buf[e.pending++]=n}function Md(e,n){e.pending_buf[e.pending++]=n>>>8&255,e.pending_buf[e.pending++]=255&n}function Pv(e,n){var t,r,o=e.max_chain_length,s=e.strstart,l=e.prev_length,f=e.nice_match,h=e.strstart>e.w_size-vi?e.strstart-(e.w_size-vi):0,_=e.window,k=e.w_mask,E=e.prev,y=e.strstart+xo,w=_[s+l-1],T=_[s+l];e.prev_length>=e.good_match&&(o>>=2),f>e.lookahead&&(f=e.lookahead);do if(_[(t=n)+l]===T&&_[t+l-1]===w&&_[t]===_[s]&&_[++t]===_[s+1]){s+=2,t++;do;while(_[++s]===_[++t]&&_[++s]===_[++t]&&_[++s]===_[++t]&&_[++s]===_[++t]&&_[++s]===_[++t]&&_[++s]===_[++t]&&_[++s]===_[++t]&&_[++s]===_[++t]&&s<y);if(r=xo-(y-s),s=y-xo,r>l){if(e.match_start=n,l=r,r>=f)break;w=_[s+l-1],T=_[s+l]}}while((n=E[n&k])>h&&--o!=0);return l<=e.lookahead?l:e.lookahead}function ou(e){var n,t,r,o,s,l,f,h,_,k,E=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=E+(E-vi)){Ve.arraySet(e.window,e.window,E,E,0),e.match_start-=E,e.strstart-=E,e.block_start-=E,n=t=e.hash_size;do r=e.head[--n],e.head[n]=r>=E?r-E:0;while(--t);n=t=E;do r=e.prev[--n],e.prev[n]=r>=E?r-E:0;while(--t);o+=E}if(e.strm.avail_in===0)break;if(l=e.strm,f=e.window,h=e.strstart+e.lookahead,_=o,k=void 0,(k=l.avail_in)>_&&(k=_),t=k===0?0:(l.avail_in-=k,Ve.arraySet(f,l.input,l.next_in,k,h),l.state.wrap===1?l.adler=xd(l.adler,f,k,h):l.state.wrap===2&&(l.adler=Sn(l.adler,f,k,h)),l.next_in+=k,l.total_in+=k,k),e.lookahead+=t,e.lookahead+e.insert>=ot)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+ot-1])&e.hash_mask,e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<ot)););}while(e.lookahead<vi&&e.strm.avail_in!==0)}function x_(e,n){for(var t,r;;){if(e.lookahead<vi){if(ou(e),e.lookahead<vi&&n===ru)return Tn;if(e.lookahead===0)break}if(t=0,e.lookahead>=ot&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ot-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),t!==0&&e.strstart-t<=e.w_size-vi&&(e.match_length=Pv(e,t)),e.match_length>=ot)if(r=Wr._tr_tally(e,e.strstart-e.match_start,e.match_length-ot),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=ot){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ot-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!=0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=Wr._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(Pn(e,!1),e.strm.avail_out===0))return Tn}return e.insert=e.strstart<ot-1?e.strstart:ot-1,n===No?(Pn(e,!0),e.strm.avail_out===0?au:Ll):e.last_lit&&(Pn(e,!1),e.strm.avail_out===0)?Tn:Pd}function Pl(e,n){for(var t,r,o;;){if(e.lookahead<vi){if(ou(e),e.lookahead<vi&&n===ru)return Tn;if(e.lookahead===0)break}if(t=0,e.lookahead>=ot&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ot-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=ot-1,t!==0&&e.prev_length<e.max_lazy_match&&e.strstart-t<=e.w_size-vi&&(e.match_length=Pv(e,t),e.match_length<=5&&(e.strategy===Fk||e.match_length===ot&&e.strstart-e.match_start>4096)&&(e.match_length=ot-1)),e.prev_length>=ot&&e.match_length<=e.prev_length){o=e.strstart+e.lookahead-ot,r=Wr._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-ot),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=o&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ot-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!=0);if(e.match_available=0,e.match_length=ot-1,e.strstart++,r&&(Pn(e,!1),e.strm.avail_out===0))return Tn}else if(e.match_available){if((r=Wr._tr_tally(e,0,e.window[e.strstart-1]))&&Pn(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Tn}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=Wr._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<ot-1?e.strstart:ot-1,n===No?(Pn(e,!0),e.strm.avail_out===0?au:Ll):e.last_lit&&(Pn(e,!1),e.strm.avail_out===0)?Tn:Pd}function Hi(e,n,t,r,o){this.good_length=e,this.max_lazy=n,this.nice_length=t,this.max_chain=r,this.func=o}function Xk(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=tp,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Ve.Buf16(2*qk),this.dyn_dtree=new Ve.Buf16(2*(2*Gk+1)),this.bl_tree=new Ve.Buf16(2*(2*$k+1)),Po(this.dyn_ltree),Po(this.dyn_dtree),Po(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Ve.Buf16(Kk+1),this.heap=new Ve.Buf16(2*D_+1),Po(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Ve.Buf16(2*D_+1),Po(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Mv(e){var n;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=Bk,(n=e.state).pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap?np:iu,e.adler=n.wrap===2?0:1,n.last_flush=ru,Wr._tr_init(n),zi):Lo(e,Gr)}function Fv(e){var n,t=Mv(e);return t===zi&&((n=e.state).window_size=2*n.w_size,Po(n.head),n.max_lazy_match=xl[n.level].max_lazy,n.good_match=xl[n.level].good_length,n.nice_match=xl[n.level].nice_length,n.max_chain_length=xl[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=ot-1,n.match_available=0,n.ins_h=0),t}function Uv(e,n,t,r,o,s){if(!e)return Gr;var l=1;if(n===Mk&&(n=6),r<0?(l=0,r=-r):r>15&&(l=2,r-=16),o<1||o>zk||t!==tp||r<8||r>15||n<0||n>9||s<0||s>Vk)return Lo(e,Gr);r===8&&(r=9);var f=new Xk;return e.state=f,f.strm=e,f.wrap=l,f.gzhead=null,f.w_bits=r,f.w_size=1<<f.w_bits,f.w_mask=f.w_size-1,f.hash_bits=o+7,f.hash_size=1<<f.hash_bits,f.hash_mask=f.hash_size-1,f.hash_shift=~~((f.hash_bits+ot-1)/ot),f.window=new Ve.Buf8(2*f.w_size),f.head=new Ve.Buf16(f.hash_size),f.prev=new Ve.Buf16(f.w_size),f.lit_bufsize=1<<o+6,f.pending_buf_size=4*f.lit_bufsize,f.pending_buf=new Ve.Buf8(f.pending_buf_size),f.d_buf=1*f.lit_bufsize,f.l_buf=3*f.lit_bufsize,f.level=n,f.strategy=s,f.method=t,Fv(e)}xl=[new Hi(0,0,0,0,function(e,n){var t=65535;for(t>e.pending_buf_size-5&&(t=e.pending_buf_size-5);;){if(e.lookahead<=1){if(ou(e),e.lookahead===0&&n===ru)return Tn;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+t;if((e.strstart===0||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,Pn(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-vi&&(Pn(e,!1),e.strm.avail_out===0))return Tn}return e.insert=0,n===No?(Pn(e,!0),e.strm.avail_out===0?au:Ll):(e.strstart>e.block_start&&(Pn(e,!1),e.strm.avail_out),Tn)}),new Hi(4,4,8,4,x_),new Hi(4,5,16,8,x_),new Hi(4,6,32,32,x_),new Hi(4,4,16,16,Pl),new Hi(8,16,32,32,Pl),new Hi(8,16,128,128,Pl),new Hi(8,32,128,256,Pl),new Hi(32,128,258,1024,Pl),new Hi(32,258,258,4096,Pl)];var Zk=function(e,n){return e&&e.state?e.state.wrap!==2?Gr:(e.state.gzhead=n,zi):Gr},Jk=function(e,n){var t,r,o,s;if(!e||!e.state||n>Nv||n<0)return e?Lo(e,Gr):Gr;if(r=e.state,!e.output||!e.input&&e.avail_in!==0||r.status===Ld&&n!==No)return Lo(e,e.avail_out===0?b_:Gr);if(r.strm=e,t=r.last_flush,r.last_flush=n,r.status===np)if(r.wrap===2)e.adler=0,dt(r,31),dt(r,139),dt(r,8),r.gzhead?(dt(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),dt(r,255&r.gzhead.time),dt(r,r.gzhead.time>>8&255),dt(r,r.gzhead.time>>16&255),dt(r,r.gzhead.time>>24&255),dt(r,r.level===9?2:r.strategy>=ep||r.level<2?4:0),dt(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(dt(r,255&r.gzhead.extra.length),dt(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=Sn(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=N_):(dt(r,0),dt(r,0),dt(r,0),dt(r,0),dt(r,0),dt(r,r.level===9?2:r.strategy>=ep||r.level<2?4:0),dt(r,Yk),r.status=iu);else{var l=tp+(r.w_bits-8<<4)<<8;l|=(r.strategy>=ep||r.level<2?0:r.level<6?1:r.level===6?2:3)<<6,r.strstart!==0&&(l|=Qk),l+=31-l%31,r.status=iu,Md(r,l),r.strstart!==0&&(Md(r,e.adler>>>16),Md(r,65535&e.adler)),e.adler=1}if(r.status===N_)if(r.gzhead.extra){for(o=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>o&&(e.adler=Sn(e.adler,r.pending_buf,r.pending-o,o)),Mo(e),o=r.pending,r.pending!==r.pending_buf_size));)dt(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>o&&(e.adler=Sn(e.adler,r.pending_buf,r.pending-o,o)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=rp)}else r.status=rp;if(r.status===rp)if(r.gzhead.name){o=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>o&&(e.adler=Sn(e.adler,r.pending_buf,r.pending-o,o)),Mo(e),o=r.pending,r.pending===r.pending_buf_size)){s=1;break}s=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,dt(r,s)}while(s!==0);r.gzhead.hcrc&&r.pending>o&&(e.adler=Sn(e.adler,r.pending_buf,r.pending-o,o)),s===0&&(r.gzindex=0,r.status=ip)}else r.status=ip;if(r.status===ip)if(r.gzhead.comment){o=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>o&&(e.adler=Sn(e.adler,r.pending_buf,r.pending-o,o)),Mo(e),o=r.pending,r.pending===r.pending_buf_size)){s=1;break}s=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,dt(r,s)}while(s!==0);r.gzhead.hcrc&&r.pending>o&&(e.adler=Sn(e.adler,r.pending_buf,r.pending-o,o)),s===0&&(r.status=ap)}else r.status=ap;if(r.status===ap&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&Mo(e),r.pending+2<=r.pending_buf_size&&(dt(r,255&e.adler),dt(r,e.adler>>8&255),e.adler=0,r.status=iu)):r.status=iu),r.pending!==0){if(Mo(e),e.avail_out===0)return r.last_flush=-1,zi}else if(e.avail_in===0&&Lv(n)<=Lv(t)&&n!==No)return Lo(e,b_);if(r.status===Ld&&e.avail_in!==0)return Lo(e,b_);if(e.avail_in!==0||r.lookahead!==0||n!==ru&&r.status!==Ld){var f=r.strategy===ep?function(h,_){for(var k;;){if(h.lookahead===0&&(ou(h),h.lookahead===0)){if(_===ru)return Tn;break}if(h.match_length=0,k=Wr._tr_tally(h,0,h.window[h.strstart]),h.lookahead--,h.strstart++,k&&(Pn(h,!1),h.strm.avail_out===0))return Tn}return h.insert=0,_===No?(Pn(h,!0),h.strm.avail_out===0?au:Ll):h.last_lit&&(Pn(h,!1),h.strm.avail_out===0)?Tn:Pd}(r,n):r.strategy===Uk?function(h,_){for(var k,E,y,w,T=h.window;;){if(h.lookahead<=xo){if(ou(h),h.lookahead<=xo&&_===ru)return Tn;if(h.lookahead===0)break}if(h.match_length=0,h.lookahead>=ot&&h.strstart>0&&(E=T[y=h.strstart-1])===T[++y]&&E===T[++y]&&E===T[++y]){w=h.strstart+xo;do;while(E===T[++y]&&E===T[++y]&&E===T[++y]&&E===T[++y]&&E===T[++y]&&E===T[++y]&&E===T[++y]&&E===T[++y]&&y<w);h.match_length=xo-(w-y),h.match_length>h.lookahead&&(h.match_length=h.lookahead)}if(h.match_length>=ot?(k=Wr._tr_tally(h,1,h.match_length-ot),h.lookahead-=h.match_length,h.strstart+=h.match_length,h.match_length=0):(k=Wr._tr_tally(h,0,h.window[h.strstart]),h.lookahead--,h.strstart++),k&&(Pn(h,!1),h.strm.avail_out===0))return Tn}return h.insert=0,_===No?(Pn(h,!0),h.strm.avail_out===0?au:Ll):h.last_lit&&(Pn(h,!1),h.strm.avail_out===0)?Tn:Pd}(r,n):xl[r.level].func(r,n);if(f!==au&&f!==Ll||(r.status=Ld),f===Tn||f===au)return e.avail_out===0&&(r.last_flush=-1),zi;if(f===Pd&&(n===xk?Wr._tr_align(r):n!==Nv&&(Wr._tr_stored_block(r,0,0,!1),n===Lk&&(Po(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),Mo(e),e.avail_out===0))return r.last_flush=-1,zi}return n!==No?zi:r.wrap<=0?xv:(r.wrap===2?(dt(r,255&e.adler),dt(r,e.adler>>8&255),dt(r,e.adler>>16&255),dt(r,e.adler>>24&255),dt(r,255&e.total_in),dt(r,e.total_in>>8&255),dt(r,e.total_in>>16&255),dt(r,e.total_in>>24&255)):(Md(r,e.adler>>>16),Md(r,65535&e.adler)),Mo(e),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?zi:xv)},Fd={deflateInit:function(e,n){return Uv(e,n,tp,Hk,Wk,jk)},deflateInit2:Uv,deflateReset:Fv,deflateResetKeep:Mv,deflateSetHeader:Zk,deflate:Jk,deflateEnd:function(e){var n;return e&&e.state?(n=e.state.status)!==np&&n!==N_&&n!==rp&&n!==ip&&n!==ap&&n!==iu&&n!==Ld?Lo(e,Gr):(e.state=null,n===iu?Lo(e,Pk):zi):Gr},deflateSetDictionary:function(e,n){var t,r,o,s,l,f,h,_,k=n.length;if(!e||!e.state||(s=(t=e.state).wrap)===2||s===1&&t.status!==np||t.lookahead)return Gr;for(s===1&&(e.adler=xd(e.adler,n,k,0)),t.wrap=0,k>=t.w_size&&(s===0&&(Po(t.head),t.strstart=0,t.block_start=0,t.insert=0),_=new Ve.Buf8(t.w_size),Ve.arraySet(_,n,k-t.w_size,t.w_size,0),n=_,k=t.w_size),l=e.avail_in,f=e.next_in,h=e.input,e.avail_in=k,e.next_in=0,e.input=n,ou(t);t.lookahead>=ot;){r=t.strstart,o=t.lookahead-(ot-1);do t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+ot-1])&t.hash_mask,t.prev[r&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=r,r++;while(--o);t.strstart=r,t.lookahead=ot-1,ou(t)}return t.strstart+=t.lookahead,t.block_start=t.strstart,t.insert=t.lookahead,t.lookahead=0,t.match_length=t.prev_length=ot-1,t.match_available=0,e.next_in=f,e.input=h,e.avail_in=l,t.wrap=s,zi},deflateInfo:"pako deflate (from Nodeca project)"},Vv=!0,jv=!0;try{String.fromCharCode.apply(null,[0])}catch{Vv=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{jv=!1}for(var Ud=new Ve.Buf8(256),Fo=0;Fo<256;Fo++)Ud[Fo]=Fo>=252?6:Fo>=248?5:Fo>=240?4:Fo>=224?3:Fo>=192?2:1;Ud[254]=Ud[254]=1;function Bv(e,n){if(n<65534&&(e.subarray&&jv||!e.subarray&&Vv))return String.fromCharCode.apply(null,Ve.shrinkBuf(e,n));for(var t="",r=0;r<n;r++)t+=String.fromCharCode(e[r]);return t}var su={string2buf:function(e){var n,t,r,o,s,l=e.length,f=0;for(o=0;o<l;o++)(64512&(t=e.charCodeAt(o)))==55296&&o+1<l&&(64512&(r=e.charCodeAt(o+1)))==56320&&(t=65536+(t-55296<<10)+(r-56320),o++),f+=t<128?1:t<2048?2:t<65536?3:4;for(n=new Ve.Buf8(f),s=0,o=0;s<f;o++)(64512&(t=e.charCodeAt(o)))==55296&&o+1<l&&(64512&(r=e.charCodeAt(o+1)))==56320&&(t=65536+(t-55296<<10)+(r-56320),o++),t<128?n[s++]=t:t<2048?(n[s++]=192|t>>>6,n[s++]=128|63&t):t<65536?(n[s++]=224|t>>>12,n[s++]=128|t>>>6&63,n[s++]=128|63&t):(n[s++]=240|t>>>18,n[s++]=128|t>>>12&63,n[s++]=128|t>>>6&63,n[s++]=128|63&t);return n},buf2binstring:function(e){return Bv(e,e.length)},binstring2buf:function(e){for(var n=new Ve.Buf8(e.length),t=0,r=n.length;t<r;t++)n[t]=e.charCodeAt(t);return n},buf2string:function(e,n){var t,r,o,s,l=n||e.length,f=new Array(2*l);for(r=0,t=0;t<l;)if((o=e[t++])<128)f[r++]=o;else if((s=Ud[o])>4)f[r++]=65533,t+=s-1;else{for(o&=s===2?31:s===3?15:7;s>1&&t<l;)o=o<<6|63&e[t++],s--;s>1?f[r++]=65533:o<65536?f[r++]=o:(o-=65536,f[r++]=55296|o>>10&1023,f[r++]=56320|1023&o)}return Bv(f,r)},utf8border:function(e,n){var t;for((n=n||e.length)>e.length&&(n=e.length),t=n-1;t>=0&&(192&e[t])==128;)t--;return t<0||t===0?n:t+Ud[e[t]]>n?t:n}},zv=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Hv=Object.prototype.toString,Ml=0,ew=-1,tw=0,nw=8;function uu(e){if(!(this instanceof uu))return new uu(e);this.options=Ve.assign({level:ew,method:nw,chunkSize:16384,windowBits:15,memLevel:8,strategy:tw,to:""},e||{});var n=this.options;n.raw&&n.windowBits>0?n.windowBits=-n.windowBits:n.gzip&&n.windowBits>0&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zv,this.strm.avail_out=0;var t=Fd.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(t!==Ml)throw new Error(nu[t]);if(n.header&&Fd.deflateSetHeader(this.strm,n.header),n.dictionary){var r;if(r=typeof n.dictionary=="string"?su.string2buf(n.dictionary):Hv.call(n.dictionary)==="[object ArrayBuffer]"?new Uint8Array(n.dictionary):n.dictionary,(t=Fd.deflateSetDictionary(this.strm,r))!==Ml)throw new Error(nu[t]);this._dict_set=!0}}function L_(e,n){var t=new uu(n);if(t.push(e,!0),t.err)throw t.msg||nu[t.err];return t.result}uu.prototype.push=function(e,n){var t,r,o=this.strm,s=this.options.chunkSize;if(this.ended)return!1;r=n===~~n?n:n===!0?4:0,typeof e=="string"?o.input=su.string2buf(e):Hv.call(e)==="[object ArrayBuffer]"?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;do{if(o.avail_out===0&&(o.output=new Ve.Buf8(s),o.next_out=0,o.avail_out=s),(t=Fd.deflate(o,r))!==1&&t!==Ml)return this.onEnd(t),this.ended=!0,!1;o.avail_out!==0&&(o.avail_in!==0||r!==4&&r!==2)||(this.options.to==="string"?this.onData(su.buf2binstring(Ve.shrinkBuf(o.output,o.next_out))):this.onData(Ve.shrinkBuf(o.output,o.next_out)))}while((o.avail_in>0||o.avail_out===0)&&t!==1);return r===4?(t=Fd.deflateEnd(this.strm),this.onEnd(t),this.ended=!0,t===Ml):r!==2||(this.onEnd(Ml),o.avail_out=0,!0)},uu.prototype.onData=function(e){this.chunks.push(e)},uu.prototype.onEnd=function(e){e===Ml&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Ve.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var rw={Deflate:uu,deflate:L_,deflateRaw:function(e,n){return(n=n||{}).raw=!0,L_(e,n)},gzip:function(e,n){return(n=n||{}).gzip=!0,L_(e,n)}},iw=function(e,n){var t,r,o,s,l,f,h,_,k,E,y,w,T,A,H,j,$,se,fe,ge,De,Ne,Be,He,Le;t=e.state,r=e.next_in,He=e.input,o=r+(e.avail_in-5),s=e.next_out,Le=e.output,l=s-(n-e.avail_out),f=s+(e.avail_out-257),h=t.dmax,_=t.wsize,k=t.whave,E=t.wnext,y=t.window,w=t.hold,T=t.bits,A=t.lencode,H=t.distcode,j=(1<<t.lenbits)-1,$=(1<<t.distbits)-1;e:do{T<15&&(w+=He[r++]<<T,T+=8,w+=He[r++]<<T,T+=8),se=A[w&j];t:for(;;){if(w>>>=fe=se>>>24,T-=fe,(fe=se>>>16&255)===0)Le[s++]=65535&se;else{if(!(16&fe)){if(!(64&fe)){se=A[(65535&se)+(w&(1<<fe)-1)];continue t}if(32&fe){t.mode=12;break e}e.msg="invalid literal/length code",t.mode=30;break e}ge=65535&se,(fe&=15)&&(T<fe&&(w+=He[r++]<<T,T+=8),ge+=w&(1<<fe)-1,w>>>=fe,T-=fe),T<15&&(w+=He[r++]<<T,T+=8,w+=He[r++]<<T,T+=8),se=H[w&$];n:for(;;){if(w>>>=fe=se>>>24,T-=fe,!(16&(fe=se>>>16&255))){if(!(64&fe)){se=H[(65535&se)+(w&(1<<fe)-1)];continue n}e.msg="invalid distance code",t.mode=30;break e}if(De=65535&se,T<(fe&=15)&&(w+=He[r++]<<T,(T+=8)<fe&&(w+=He[r++]<<T,T+=8)),(De+=w&(1<<fe)-1)>h){e.msg="invalid distance too far back",t.mode=30;break e}if(w>>>=fe,T-=fe,De>(fe=s-l)){if((fe=De-fe)>k&&t.sane){e.msg="invalid distance too far back",t.mode=30;break e}if(Ne=0,Be=y,E===0){if(Ne+=_-fe,fe<ge){ge-=fe;do Le[s++]=y[Ne++];while(--fe);Ne=s-De,Be=Le}}else if(E<fe){if(Ne+=_+E-fe,(fe-=E)<ge){ge-=fe;do Le[s++]=y[Ne++];while(--fe);if(Ne=0,E<ge){ge-=fe=E;do Le[s++]=y[Ne++];while(--fe);Ne=s-De,Be=Le}}}else if(Ne+=E-fe,fe<ge){ge-=fe;do Le[s++]=y[Ne++];while(--fe);Ne=s-De,Be=Le}for(;ge>2;)Le[s++]=Be[Ne++],Le[s++]=Be[Ne++],Le[s++]=Be[Ne++],ge-=3;ge&&(Le[s++]=Be[Ne++],ge>1&&(Le[s++]=Be[Ne++]))}else{Ne=s-De;do Le[s++]=Le[Ne++],Le[s++]=Le[Ne++],Le[s++]=Le[Ne++],ge-=3;while(ge>2);ge&&(Le[s++]=Le[Ne++],ge>1&&(Le[s++]=Le[Ne++]))}break}}break}}while(r<o&&s<f);r-=ge=T>>3,w&=(1<<(T-=ge<<3))-1,e.next_in=r,e.next_out=s,e.avail_in=r<o?o-r+5:5-(r-o),e.avail_out=s<f?f-s+257:257-(s-f),t.hold=w,t.bits=T},op=15,aw=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],ow=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],sw=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],uw=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],Vd=function(e,n,t,r,o,s,l,f){var h,_,k,E,y,w,T,A,H,j=f.bits,$=0,se=0,fe=0,ge=0,De=0,Ne=0,Be=0,He=0,Le=0,rt=0,Yr=null,Kd=0,qi=new Ve.Buf16(16),Vo=new Ve.Buf16(16),jo=null,ql=0;for($=0;$<=op;$++)qi[$]=0;for(se=0;se<r;se++)qi[n[t+se]]++;for(De=j,ge=op;ge>=1&&qi[ge]===0;ge--);if(De>ge&&(De=ge),ge===0)return o[s++]=20971520,o[s++]=20971520,f.bits=1,0;for(fe=1;fe<ge&&qi[fe]===0;fe++);for(De<fe&&(De=fe),He=1,$=1;$<=op;$++)if(He<<=1,(He-=qi[$])<0)return-1;if(He>0&&(e===0||ge!==1))return-1;for(Vo[1]=0,$=1;$<op;$++)Vo[$+1]=Vo[$]+qi[$];for(se=0;se<r;se++)n[t+se]!==0&&(l[Vo[n[t+se]]++]=se);if(e===0?(Yr=jo=l,w=19):e===1?(Yr=aw,Kd-=257,jo=ow,ql-=257,w=256):(Yr=sw,jo=uw,w=-1),rt=0,se=0,$=fe,y=s,Ne=De,Be=0,k=-1,E=(Le=1<<De)-1,e===1&&Le>852||e===2&&Le>592)return 1;for(;;){T=$-Be,l[se]<w?(A=0,H=l[se]):l[se]>w?(A=jo[ql+l[se]],H=Yr[Kd+l[se]]):(A=96,H=0),h=1<<$-Be,fe=_=1<<Ne;do o[y+(rt>>Be)+(_-=h)]=T<<24|A<<16|H|0;while(_!==0);for(h=1<<$-1;rt&h;)h>>=1;if(h!==0?(rt&=h-1,rt+=h):rt=0,se++,--qi[$]==0){if($===ge)break;$=n[t+l[se]]}if($>De&&(rt&E)!==k){for(Be===0&&(Be=De),y+=fe,He=1<<(Ne=$-Be);Ne+Be<ge&&!((He-=qi[Ne+Be])<=0);)Ne++,He<<=1;if(Le+=1<<Ne,e===1&&Le>852||e===2&&Le>592)return 1;o[k=rt&E]=De<<24|Ne<<16|y-s|0}}return rt!==0&&(o[y+rt]=$-Be<<24|64<<16|0),f.bits=De,0},lw=0,Wv=1,Gv=2,$v=4,cw=5,sp=6,lu=0,dw=1,fw=2,$r=-2,qv=-3,Kv=-4,hw=-5,Qv=8,Yv=1,Xv=2,Zv=3,Jv=4,eg=5,tg=6,ng=7,rg=8,ig=9,ag=10,up=11,Aa=12,P_=13,og=14,M_=15,sg=16,ug=17,lg=18,cg=19,lp=20,cp=21,dg=22,fg=23,hg=24,pg=25,_g=26,F_=27,mg=28,vg=29,Ht=30,gg=31,pw=852,_w=592,mw=15;function yg(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function vw(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Ve.Buf16(320),this.work=new Ve.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Eg(e){var n;return e&&e.state?(n=e.state,e.total_in=e.total_out=n.total=0,e.msg="",n.wrap&&(e.adler=1&n.wrap),n.mode=Yv,n.last=0,n.havedict=0,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new Ve.Buf32(pw),n.distcode=n.distdyn=new Ve.Buf32(_w),n.sane=1,n.back=-1,lu):$r}function kg(e){var n;return e&&e.state?((n=e.state).wsize=0,n.whave=0,n.wnext=0,Eg(e)):$r}function wg(e,n){var t,r;return e&&e.state?(r=e.state,n<0?(t=0,n=-n):(t=1+(n>>4),n<48&&(n&=15)),n&&(n<8||n>15)?$r:(r.window!==null&&r.wbits!==n&&(r.window=null),r.wrap=t,r.wbits=n,kg(e))):$r}function Cg(e,n){var t,r;return e?(r=new vw,e.state=r,r.window=null,(t=wg(e,n))!==lu&&(e.state=null),t):$r}var U_,V_,Rg=!0;function gw(e){if(Rg){var n;for(U_=new Ve.Buf32(512),V_=new Ve.Buf32(32),n=0;n<144;)e.lens[n++]=8;for(;n<256;)e.lens[n++]=9;for(;n<280;)e.lens[n++]=7;for(;n<288;)e.lens[n++]=8;for(Vd(Wv,e.lens,0,288,U_,0,e.work,{bits:9}),n=0;n<32;)e.lens[n++]=5;Vd(Gv,e.lens,0,32,V_,0,e.work,{bits:5}),Rg=!1}e.lencode=U_,e.lenbits=9,e.distcode=V_,e.distbits=5}function Ig(e,n,t,r){var o,s=e.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Ve.Buf8(s.wsize)),r>=s.wsize?(Ve.arraySet(s.window,n,t-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):((o=s.wsize-s.wnext)>r&&(o=r),Ve.arraySet(s.window,n,t-r,o,s.wnext),(r-=o)?(Ve.arraySet(s.window,n,t-r,r,0),s.wnext=r,s.whave=s.wsize):(s.wnext+=o,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=o))),0}var yw=function(e,n){var t,r,o,s,l,f,h,_,k,E,y,w,T,A,H,j,$,se,fe,ge,De,Ne,Be,He,Le=0,rt=new Ve.Buf8(4),Yr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return $r;(t=e.state).mode===Aa&&(t.mode=P_),l=e.next_out,o=e.output,h=e.avail_out,s=e.next_in,r=e.input,f=e.avail_in,_=t.hold,k=t.bits,E=f,y=h,Ne=lu;e:for(;;)switch(t.mode){case Yv:if(t.wrap===0){t.mode=P_;break}for(;k<16;){if(f===0)break e;f--,_+=r[s++]<<k,k+=8}if(2&t.wrap&&_===35615){t.check=0,rt[0]=255&_,rt[1]=_>>>8&255,t.check=Sn(t.check,rt,2,0),_=0,k=0,t.mode=Xv;break}if(t.flags=0,t.head&&(t.head.done=!1),!(1&t.wrap)||(((255&_)<<8)+(_>>8))%31){e.msg="incorrect header check",t.mode=Ht;break}if((15&_)!==Qv){e.msg="unknown compression method",t.mode=Ht;break}if(k-=4,De=8+(15&(_>>>=4)),t.wbits===0)t.wbits=De;else if(De>t.wbits){e.msg="invalid window size",t.mode=Ht;break}t.dmax=1<<De,e.adler=t.check=1,t.mode=512&_?ag:Aa,_=0,k=0;break;case Xv:for(;k<16;){if(f===0)break e;f--,_+=r[s++]<<k,k+=8}if(t.flags=_,(255&t.flags)!==Qv){e.msg="unknown compression method",t.mode=Ht;break}if(57344&t.flags){e.msg="unknown header flags set",t.mode=Ht;break}t.head&&(t.head.text=_>>8&1),512&t.flags&&(rt[0]=255&_,rt[1]=_>>>8&255,t.check=Sn(t.check,rt,2,0)),_=0,k=0,t.mode=Zv;case Zv:for(;k<32;){if(f===0)break e;f--,_+=r[s++]<<k,k+=8}t.head&&(t.head.time=_),512&t.flags&&(rt[0]=255&_,rt[1]=_>>>8&255,rt[2]=_>>>16&255,rt[3]=_>>>24&255,t.check=Sn(t.check,rt,4,0)),_=0,k=0,t.mode=Jv;case Jv:for(;k<16;){if(f===0)break e;f--,_+=r[s++]<<k,k+=8}t.head&&(t.head.xflags=255&_,t.head.os=_>>8),512&t.flags&&(rt[0]=255&_,rt[1]=_>>>8&255,t.check=Sn(t.check,rt,2,0)),_=0,k=0,t.mode=eg;case eg:if(1024&t.flags){for(;k<16;){if(f===0)break e;f--,_+=r[s++]<<k,k+=8}t.length=_,t.head&&(t.head.extra_len=_),512&t.flags&&(rt[0]=255&_,rt[1]=_>>>8&255,t.check=Sn(t.check,rt,2,0)),_=0,k=0}else t.head&&(t.head.extra=null);t.mode=tg;case tg:if(1024&t.flags&&((w=t.length)>f&&(w=f),w&&(t.head&&(De=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Array(t.head.extra_len)),Ve.arraySet(t.head.extra,r,s,w,De)),512&t.flags&&(t.check=Sn(t.check,r,w,s)),f-=w,s+=w,t.length-=w),t.length))break e;t.length=0,t.mode=ng;case ng:if(2048&t.flags){if(f===0)break e;w=0;do De=r[s+w++],t.head&&De&&t.length<65536&&(t.head.name+=String.fromCharCode(De));while(De&&w<f);if(512&t.flags&&(t.check=Sn(t.check,r,w,s)),f-=w,s+=w,De)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=rg;case rg:if(4096&t.flags){if(f===0)break e;w=0;do De=r[s+w++],t.head&&De&&t.length<65536&&(t.head.comment+=String.fromCharCode(De));while(De&&w<f);if(512&t.flags&&(t.check=Sn(t.check,r,w,s)),f-=w,s+=w,De)break e}else t.head&&(t.head.comment=null);t.mode=ig;case ig:if(512&t.flags){for(;k<16;){if(f===0)break e;f--,_+=r[s++]<<k,k+=8}if(_!==(65535&t.check)){e.msg="header crc mismatch",t.mode=Ht;break}_=0,k=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),e.adler=t.check=0,t.mode=Aa;break;case ag:for(;k<32;){if(f===0)break e;f--,_+=r[s++]<<k,k+=8}e.adler=t.check=yg(_),_=0,k=0,t.mode=up;case up:if(t.havedict===0)return e.next_out=l,e.avail_out=h,e.next_in=s,e.avail_in=f,t.hold=_,t.bits=k,fw;e.adler=t.check=1,t.mode=Aa;case Aa:if(n===cw||n===sp)break e;case P_:if(t.last){_>>>=7&k,k-=7&k,t.mode=F_;break}for(;k<3;){if(f===0)break e;f--,_+=r[s++]<<k,k+=8}switch(t.last=1&_,k-=1,3&(_>>>=1)){case 0:t.mode=og;break;case 1:if(gw(t),t.mode=lp,n===sp){_>>>=2,k-=2;break e}break;case 2:t.mode=ug;break;case 3:e.msg="invalid block type",t.mode=Ht}_>>>=2,k-=2;break;case og:for(_>>>=7&k,k-=7&k;k<32;){if(f===0)break e;f--,_+=r[s++]<<k,k+=8}if((65535&_)!=(_>>>16^65535)){e.msg="invalid stored block lengths",t.mode=Ht;break}if(t.length=65535&_,_=0,k=0,t.mode=M_,n===sp)break e;case M_:t.mode=sg;case sg:if(w=t.length){if(w>f&&(w=f),w>h&&(w=h),w===0)break e;Ve.arraySet(o,r,s,w,l),f-=w,s+=w,h-=w,l+=w,t.length-=w;break}t.mode=Aa;break;case ug:for(;k<14;){if(f===0)break e;f--,_+=r[s++]<<k,k+=8}if(t.nlen=257+(31&_),_>>>=5,k-=5,t.ndist=1+(31&_),_>>>=5,k-=5,t.ncode=4+(15&_),_>>>=4,k-=4,t.nlen>286||t.ndist>30){e.msg="too many length or distance symbols",t.mode=Ht;break}t.have=0,t.mode=lg;case lg:for(;t.have<t.ncode;){for(;k<3;){if(f===0)break e;f--,_+=r[s++]<<k,k+=8}t.lens[Yr[t.have++]]=7&_,_>>>=3,k-=3}for(;t.have<19;)t.lens[Yr[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,Be={bits:t.lenbits},Ne=Vd(lw,t.lens,0,19,t.lencode,0,t.work,Be),t.lenbits=Be.bits,Ne){e.msg="invalid code lengths set",t.mode=Ht;break}t.have=0,t.mode=cg;case cg:for(;t.have<t.nlen+t.ndist;){for(;j=(Le=t.lencode[_&(1<<t.lenbits)-1])>>>16&255,$=65535&Le,!((H=Le>>>24)<=k);){if(f===0)break e;f--,_+=r[s++]<<k,k+=8}if($<16)_>>>=H,k-=H,t.lens[t.have++]=$;else{if($===16){for(He=H+2;k<He;){if(f===0)break e;f--,_+=r[s++]<<k,k+=8}if(_>>>=H,k-=H,t.have===0){e.msg="invalid bit length repeat",t.mode=Ht;break}De=t.lens[t.have-1],w=3+(3&_),_>>>=2,k-=2}else if($===17){for(He=H+3;k<He;){if(f===0)break e;f--,_+=r[s++]<<k,k+=8}k-=H,De=0,w=3+(7&(_>>>=H)),_>>>=3,k-=3}else{for(He=H+7;k<He;){if(f===0)break e;f--,_+=r[s++]<<k,k+=8}k-=H,De=0,w=11+(127&(_>>>=H)),_>>>=7,k-=7}if(t.have+w>t.nlen+t.ndist){e.msg="invalid bit length repeat",t.mode=Ht;break}for(;w--;)t.lens[t.have++]=De}}if(t.mode===Ht)break;if(t.lens[256]===0){e.msg="invalid code -- missing end-of-block",t.mode=Ht;break}if(t.lenbits=9,Be={bits:t.lenbits},Ne=Vd(Wv,t.lens,0,t.nlen,t.lencode,0,t.work,Be),t.lenbits=Be.bits,Ne){e.msg="invalid literal/lengths set",t.mode=Ht;break}if(t.distbits=6,t.distcode=t.distdyn,Be={bits:t.distbits},Ne=Vd(Gv,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,Be),t.distbits=Be.bits,Ne){e.msg="invalid distances set",t.mode=Ht;break}if(t.mode=lp,n===sp)break e;case lp:t.mode=cp;case cp:if(f>=6&&h>=258){e.next_out=l,e.avail_out=h,e.next_in=s,e.avail_in=f,t.hold=_,t.bits=k,iw(e,y),l=e.next_out,o=e.output,h=e.avail_out,s=e.next_in,r=e.input,f=e.avail_in,_=t.hold,k=t.bits,t.mode===Aa&&(t.back=-1);break}for(t.back=0;j=(Le=t.lencode[_&(1<<t.lenbits)-1])>>>16&255,$=65535&Le,!((H=Le>>>24)<=k);){if(f===0)break e;f--,_+=r[s++]<<k,k+=8}if(j&&!(240&j)){for(se=H,fe=j,ge=$;j=(Le=t.lencode[ge+((_&(1<<se+fe)-1)>>se)])>>>16&255,$=65535&Le,!(se+(H=Le>>>24)<=k);){if(f===0)break e;f--,_+=r[s++]<<k,k+=8}_>>>=se,k-=se,t.back+=se}if(_>>>=H,k-=H,t.back+=H,t.length=$,j===0){t.mode=_g;break}if(32&j){t.back=-1,t.mode=Aa;break}if(64&j){e.msg="invalid literal/length code",t.mode=Ht;break}t.extra=15&j,t.mode=dg;case dg:if(t.extra){for(He=t.extra;k<He;){if(f===0)break e;f--,_+=r[s++]<<k,k+=8}t.length+=_&(1<<t.extra)-1,_>>>=t.extra,k-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=fg;case fg:for(;j=(Le=t.distcode[_&(1<<t.distbits)-1])>>>16&255,$=65535&Le,!((H=Le>>>24)<=k);){if(f===0)break e;f--,_+=r[s++]<<k,k+=8}if(!(240&j)){for(se=H,fe=j,ge=$;j=(Le=t.distcode[ge+((_&(1<<se+fe)-1)>>se)])>>>16&255,$=65535&Le,!(se+(H=Le>>>24)<=k);){if(f===0)break e;f--,_+=r[s++]<<k,k+=8}_>>>=se,k-=se,t.back+=se}if(_>>>=H,k-=H,t.back+=H,64&j){e.msg="invalid distance code",t.mode=Ht;break}t.offset=$,t.extra=15&j,t.mode=hg;case hg:if(t.extra){for(He=t.extra;k<He;){if(f===0)break e;f--,_+=r[s++]<<k,k+=8}t.offset+=_&(1<<t.extra)-1,_>>>=t.extra,k-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back",t.mode=Ht;break}t.mode=pg;case pg:if(h===0)break e;if(w=y-h,t.offset>w){if((w=t.offset-w)>t.whave&&t.sane){e.msg="invalid distance too far back",t.mode=Ht;break}w>t.wnext?(w-=t.wnext,T=t.wsize-w):T=t.wnext-w,w>t.length&&(w=t.length),A=t.window}else A=o,T=l-t.offset,w=t.length;w>h&&(w=h),h-=w,t.length-=w;do o[l++]=A[T++];while(--w);t.length===0&&(t.mode=cp);break;case _g:if(h===0)break e;o[l++]=t.length,h--,t.mode=cp;break;case F_:if(t.wrap){for(;k<32;){if(f===0)break e;f--,_|=r[s++]<<k,k+=8}if(y-=h,e.total_out+=y,t.total+=y,y&&(e.adler=t.check=t.flags?Sn(t.check,o,y,l-y):xd(t.check,o,y,l-y)),y=h,(t.flags?_:yg(_))!==t.check){e.msg="incorrect data check",t.mode=Ht;break}_=0,k=0}t.mode=mg;case mg:if(t.wrap&&t.flags){for(;k<32;){if(f===0)break e;f--,_+=r[s++]<<k,k+=8}if(_!==(4294967295&t.total)){e.msg="incorrect length check",t.mode=Ht;break}_=0,k=0}t.mode=vg;case vg:Ne=dw;break e;case Ht:Ne=qv;break e;case gg:return Kv;default:return $r}return e.next_out=l,e.avail_out=h,e.next_in=s,e.avail_in=f,t.hold=_,t.bits=k,(t.wsize||y!==e.avail_out&&t.mode<Ht&&(t.mode<F_||n!==$v))&&Ig(e,e.output,e.next_out,y-e.avail_out),E-=e.avail_in,y-=e.avail_out,e.total_in+=E,e.total_out+=y,t.total+=y,t.wrap&&y&&(e.adler=t.check=t.flags?Sn(t.check,o,y,e.next_out-y):xd(t.check,o,y,e.next_out-y)),e.data_type=t.bits+(t.last?64:0)+(t.mode===Aa?128:0)+(t.mode===lp||t.mode===M_?256:0),(E===0&&y===0||n===$v)&&Ne===lu&&(Ne=hw),Ne},Ew=function(e,n){var t;return e&&e.state&&2&(t=e.state).wrap?(t.head=n,n.done=!1,lu):$r},Fl={inflateReset:kg,inflateReset2:wg,inflateResetKeep:Eg,inflateInit:function(e){return Cg(e,mw)},inflateInit2:Cg,inflate:yw,inflateEnd:function(e){if(!e||!e.state)return $r;var n=e.state;return n.window&&(n.window=null),e.state=null,lu},inflateGetHeader:Ew,inflateSetDictionary:function(e,n){var t,r=n.length;return e&&e.state?(t=e.state).wrap!==0&&t.mode!==up?$r:t.mode===up&&xd(1,n,r,0)!==t.check?qv:Ig(e,n,r,r)?(t.mode=gg,Kv):(t.havedict=1,lu):$r},inflateInfo:"pako inflate (from Nodeca project)"},en={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},kw=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},Sg=Object.prototype.toString;function cu(e){if(!(this instanceof cu))return new cu(e);this.options=Ve.assign({chunkSize:16384,windowBits:0,to:""},e||{});var n=this.options;n.raw&&n.windowBits>=0&&n.windowBits<16&&(n.windowBits=-n.windowBits,n.windowBits===0&&(n.windowBits=-15)),!(n.windowBits>=0&&n.windowBits<16)||e&&e.windowBits||(n.windowBits+=32),n.windowBits>15&&n.windowBits<48&&!(15&n.windowBits)&&(n.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zv,this.strm.avail_out=0;var t=Fl.inflateInit2(this.strm,n.windowBits);if(t!==en.Z_OK)throw new Error(nu[t]);if(this.header=new kw,Fl.inflateGetHeader(this.strm,this.header),n.dictionary&&(typeof n.dictionary=="string"?n.dictionary=su.string2buf(n.dictionary):Sg.call(n.dictionary)==="[object ArrayBuffer]"&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw&&(t=Fl.inflateSetDictionary(this.strm,n.dictionary))!==en.Z_OK))throw new Error(nu[t])}function j_(e,n){var t=new cu(n);if(t.push(e,!0),t.err)throw t.msg||nu[t.err];return t.result}cu.prototype.push=function(e,n){var t,r,o,s,l,f=this.strm,h=this.options.chunkSize,_=this.options.dictionary,k=!1;if(this.ended)return!1;r=n===~~n?n:n===!0?en.Z_FINISH:en.Z_NO_FLUSH,typeof e=="string"?f.input=su.binstring2buf(e):Sg.call(e)==="[object ArrayBuffer]"?f.input=new Uint8Array(e):f.input=e,f.next_in=0,f.avail_in=f.input.length;do{if(f.avail_out===0&&(f.output=new Ve.Buf8(h),f.next_out=0,f.avail_out=h),(t=Fl.inflate(f,en.Z_NO_FLUSH))===en.Z_NEED_DICT&&_&&(t=Fl.inflateSetDictionary(this.strm,_)),t===en.Z_BUF_ERROR&&k===!0&&(t=en.Z_OK,k=!1),t!==en.Z_STREAM_END&&t!==en.Z_OK)return this.onEnd(t),this.ended=!0,!1;f.next_out&&(f.avail_out!==0&&t!==en.Z_STREAM_END&&(f.avail_in!==0||r!==en.Z_FINISH&&r!==en.Z_SYNC_FLUSH)||(this.options.to==="string"?(o=su.utf8border(f.output,f.next_out),s=f.next_out-o,l=su.buf2string(f.output,o),f.next_out=s,f.avail_out=h-s,s&&Ve.arraySet(f.output,f.output,o,s,0),this.onData(l)):this.onData(Ve.shrinkBuf(f.output,f.next_out)))),f.avail_in===0&&f.avail_out===0&&(k=!0)}while((f.avail_in>0||f.avail_out===0)&&t!==en.Z_STREAM_END);return t===en.Z_STREAM_END&&(r=en.Z_FINISH),r===en.Z_FINISH?(t=Fl.inflateEnd(this.strm),this.onEnd(t),this.ended=!0,t===en.Z_OK):r!==en.Z_SYNC_FLUSH||(this.onEnd(en.Z_OK),f.avail_out=0,!0)},cu.prototype.onData=function(e){this.chunks.push(e)},cu.prototype.onEnd=function(e){e===en.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Ve.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var ww={Inflate:cu,inflate:j_,inflateRaw:function(e,n){return(n=n||{}).raw=!0,j_(e,n)},ungzip:j_},B_={};(0,Ve.assign)(B_,rw,ww,en);var jd,Cw=B_.gzip,Rw=B_.ungzip,Tg=function(){function e(){b(this,e)}return x(e,null,[{key:"encode",value:function(n){return btoa(n)}},{key:"decode",value:function(n){return atob(n)}}]),e}(),dp=function(){function e(){b(this,e)}return x(e,null,[{key:"compress",value:function(n){var t=Cw(n,{to:"string"});return Tg.encode(t)}},{key:"decompress",value:function(n){var t=Tg.decode(n);return Rw(t,{to:"string"})}}]),e}(),Iw=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"type",J.ANSWER),r}return x(t,[{key:"parseData",value:function(r){return{callId:r.call_id,peerConnectionId:r.peer_connection_id,sdp:dp.decompress(r.sdp)}}}]),t}(Ln),Sw=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"type",J.AUDIO),r}return x(t,[{key:"parseData",value:function(r){return{callId:r.call_id,isEnabled:r.is_enabled}}}]),t}(Ln),Tw=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"type",J.CANDIDATE),r}return x(t,[{key:"parseData",value:function(r){return{callId:r.call_id,peerConnectionId:r.peer_connection_id,candidate:{sdpMLineIndex:r.candidate.sdp_mline_index,sdpMid:r.candidate.sdp_mid,sdp:r.candidate.sdp}}}}]),t}(Ln),Aw=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"type",J.CUSTOM_ITEMS_DELETE),r}return x(t,[{key:"parseData",value:function(r){return{callId:r.call_id,deleted:r.deleted,customItems:r.custom_items}}}]),t}(Ln),Bd=function e(n){b(this,e),this.userId=n.user_id,this.nickname=n.nickname,this.profileUrl=n.profile_url,this.metaData=n.meta_data,this.isActive=n.is_active,this.role=n.role},Ow=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"type",J.DIAL),r}return x(t,[{key:"parseData",value:function(r){return{isVideoCall:r.is_video_call,callId:r.call_id,caller:new Bd(r.caller),callee:new Bd(r.callee),turnCredential:{username:r.turn_credential.username,password:r.turn_credential.password,turnUrls:r.turn_credential.turn_urls,transportPolicy:r.turn_credential.transport_policy},constraints:{audio:r.constraints.audio,video:r.constraints.video},customItems:r.custom_items,shortLivedToken:r.sbcall_short_lived_token,capabilities:r.capabilities||[]}}}]),t}(Ln),bw=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"type",J.DIAL_RCV),r}return x(t,[{key:"parseData",value:function(r){return{callId:r.call_id,calleeDeliveryInfo:r.callee_delivery_info,receivedType:r.received_type}}}]),t}(Ln),fp=function(){function e(n){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];b(this,e),this.callId=n.call_id,this.isVideoCall=n.is_video_call,this._customItems=n.custom_items,this.userRole=n.user_role,this.startedAt=n.started_at,this.endedAt=n.ended_at,this._participants=n.participants.map(function(r){return new Bd(r)}),this.endedBy=this._participants.find(function(r){return r.userId===n.ended_by}),this.duration=n.duration,this.endResult=n.end_result_ex,this.callType=n.call_type,this._isFromServer=t}return x(e,[{key:"caller",get:function(){return this._participants.find(function(n){return n.role===yr.CALLER})}},{key:"callee",get:function(){return this._participants.find(function(n){return n.role===yr.CALLEE})}},{key:"customItems",get:function(){return Ct({},this._customItems)}},{key:"isFromServer",get:function(){return this._isFromServer}}]),e}(),du=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return x(t,[{key:"parseData",value:function(r){return{callId:r.call_id,endedCall:new fp(r.ended_call)}}}]),t}(Ln),Dw=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"type",J.HOLD),r}return x(t,[{key:"parseData",value:function(r){return{callId:r.call_id,holdedBy:r.holded_by,isPeerOnHold:r.is_peer_on_hold,isRelayed:r.is_relayed}}}]),t}(Ln),Nw=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"type",J.OFFER),r}return x(t,[{key:"parseData",value:function(r){return{callId:r.call_id,peerConnectionId:r.peer_connection_id,sdp:dp.decompress(r.sdp)}}}]),t}(Ln),xw=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"type",J.RECORDING),r}return x(t,[{key:"parseData",value:function(r){return{callId:r.call_id,recordingId:r.recording_id,recordingType:r.recording_type,recordingStatus:r.recording_status}}}]),t}(Ln),Lw=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"type",J.REMOVE_CANDIDATES),r}return x(t,[{key:"parseData",value:function(r){return{callId:r.call_id,candidates:r.candidates.map(function(o){return{sdpMLineIndex:o.sdp_mline_index,sdpMid:o.sdp_mid,candidate:o.sdp}})}}}]),t}(Ln),Pw=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"type",J.CUSTOM_ITEMS_UPDATE),r}return x(t,[{key:"parseData",value:function(r){return{callId:r.call_id,updated:r.updated,customItems:r.custom_items}}}]),t}(Ln),Mw=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"type",J.VIDEO),r}return x(t,[{key:"parseData",value:function(r){return{callId:r.call_id,isEnabled:r.is_enabled}}}]),t}(Ln),z_=["turn_changed"],Fw=function(e){F(t,e);var n=U(t);function t(r,o){var s;return b(this,t),(s=n.call(this)).callId=r,s.constraints=o,s.capabilities=z_,s}return x(t,[{key:"requireResponse",value:function(){return!0}},{key:"getCMD",value:function(){return ke.CALL}},{key:"getType",value:function(){return J.ACCEPT}},{key:"getData",value:function(){return{call_id:this.callId,constraints:{audio:this.constraints.audio,video:this.constraints.video},capabilities:this.capabilities}}}]),t}(vn),Uw=function(e){F(t,e);var n=U(t);function t(r){var o;return b(this,t),(o=n.call(this)).callId=r,o}return x(t,[{key:"getCMD",value:function(){return ke.SGNL}},{key:"getType",value:function(){return J.ALIVE}},{key:"getData",value:function(){return{call_id:this.callId}}}]),t}(vn),Vw=function(e){F(t,e);var n=U(t);function t(r,o,s){var l;return b(this,t),(l=n.call(this)).callId=r,l.peerConnectionId=o,l.sdp=s,l}return x(t,[{key:"getCMD",value:function(){return ke.SGNL}},{key:"getType",value:function(){return J.ANSWER}},{key:"getData",value:function(){var r={call_id:this.callId,sdp:dp.compress(this.sdp)};return this.peerConnectionId?Ct(Ct({},r),{},{peer_connection_id:this.peerConnectionId}):r}}]),t}(vn),jw=function(e){F(t,e);var n=U(t);function t(r,o){var s;return b(this,t),(s=n.call(this)).callId=r,s.isEnabled=o,s}return x(t,[{key:"getCMD",value:function(){return ke.COMM}},{key:"getType",value:function(){return J.AUDIO}},{key:"getData",value:function(){return{call_id:this.callId,is_enabled:this.isEnabled}}}]),t}(vn),Bw=function(e){F(t,e);var n=U(t);function t(r){var o;return b(this,t),(o=n.call(this)).callId=r,o}return x(t,[{key:"requireResponse",value:function(){return!0}},{key:"getCMD",value:function(){return ke.CALL}},{key:"getType",value:function(){return J.CANCEL}},{key:"getData",value:function(){return{call_id:this.callId}}}]),t}(vn),zw=function(e){F(t,e);var n=U(t);function t(r,o,s,l,f){var h;return b(this,t),Z(ee(h=n.call(this)),"type",J.CANDIDATE),h.callId=r,h.peerConnectionId=o,h.sdp=s,h.sdpMLineIndex=l,h.sdpMid=f,h}return x(t,[{key:"getCMD",value:function(){return ke.SGNL}},{key:"getType",value:function(){return J.CANDIDATE}},{key:"getData",value:function(){var r={call_id:this.callId,candidate:{sdp:this.sdp,sdp_mline_index:this.sdpMLineIndex,sdp_mid:this.sdpMid}};return this.peerConnectionId?Ct(Ct({},r),{},{peer_connection_id:this.peerConnectionId}):r}}]),t}(vn),Hw=function(e){F(t,e);var n=U(t);function t(r,o,s){var l;return b(this,t),(l=n.call(this)).callId=r,l.reconnect=s,l.connectionType=o.connectionType,l.relayProtocol=o.relayProtocol,l.protocol=o.protocol,l}return x(t,[{key:"getCMD",value:function(){return ke.SGNL}},{key:"getType",value:function(){return J.CONNECTED}},{key:"getData",value:function(){return{call_id:this.callId,connection:{connection_type:this.connectionType,relay_protocol:this.relayProtocol,protocol:this.protocol},reconnect:this.reconnect}}}]),t}(vn),Ww=function(e){F(t,e);var n=U(t);function t(r){var o;return b(this,t),(o=n.call(this)).callId=r,o}return x(t,[{key:"requireResponse",value:function(){return!0}},{key:"getCMD",value:function(){return ke.CALL}},{key:"getType",value:function(){return J.CONNECTION_LOST}},{key:"getData",value:function(){return{call_id:this.callId}}}]),t}(vn),Gw=function(e){F(t,e);var n=U(t);function t(r){var o;return b(this,t),(o=n.call(this)).callId=r,o}return x(t,[{key:"requireResponse",value:function(){return!0}},{key:"getCMD",value:function(){return ke.CALL}},{key:"getType",value:function(){return J.DECLINE}},{key:"getData",value:function(){return{call_id:this.callId}}}]),t}(vn),$w=function(e){F(t,e);var n=U(t);function t(r,o,s,l,f,h){var _;return b(this,t),(_=n.call(this)).calleeId=r,_.isVideoCall=o,_.customItems=s,_.sendBirdChatOptions=l,_.constraints=f,_.webhook=h,_.capabilities=z_,_}return x(t,[{key:"requireResponse",value:function(){return!0}},{key:"getCMD",value:function(){return ke.CALL}},{key:"getType",value:function(){return J.DIAL}},{key:"getData",value:function(){var r,o=this.webhook?{url:this.webhook.url,enabled_events:this.webhook.enabledEvents,headers:this.webhook.headers}:void 0;return{callee_id:this.calleeId,is_video_call:this.isVideoCall,custom_items:this.customItems,sb_chat:{channel_url:(r=this.sendBirdChatOptions)===null||r===void 0?void 0:r.channelUrl},constraints:{audio:this.constraints.audio,video:this.constraints.video},capabilities:this.capabilities,webhook:o}}}]),t}(vn),qw=function(e){F(t,e);var n=U(t);function t(r,o,s,l){var f;return b(this,t),(f=n.call(this)).callId=r,f.calleeDeliveryInfo=o,f.receivedType=s,f.shortLivedToken=l,f}return x(t,[{key:"getHeaders",value:function(){return{"SBCall-Short-Lived-Token":this.shortLivedToken}}},{key:"getData",value:function(){return{call_id:this.callId,callee_delivery_info:this.calleeDeliveryInfo,received_type:this.receivedType}}},{key:"getCMD",value:function(){return ke.CALL}},{key:"getType",value:function(){return J.DIAL_RCV}},{key:"sendStrategy",get:function(){return Fe.API}}]),t}(vn),Kw=function(e){F(t,e);var n=U(t);function t(r){var o;return b(this,t),(o=n.call(this)).callId=r,o}return x(t,[{key:"requireResponse",value:function(){return!0}},{key:"getCMD",value:function(){return ke.CALL}},{key:"getType",value:function(){return J.END}},{key:"getData",value:function(){return{call_id:this.callId}}}]),t}(vn),Qw=function(e){F(t,e);var n=U(t);function t(r,o,s){var l;return b(this,t),(l=n.call(this)).callId=r,l.isOnHold=o,l.wasRelayed=s,l}return x(t,[{key:"requireResponse",value:function(){return!0}},{key:"getCMD",value:function(){return ke.CALL}},{key:"getType",value:function(){return J.HOLD}},{key:"getData",value:function(){return{call_id:this.callId,is_on_hold:this.isOnHold,was_relayed:this.wasRelayed}}}]),t}(vn),Yw=function(e){F(t,e);var n=U(t);function t(r){var o;return b(this,t),(o=n.call(this)).callId=r,o}return x(t,[{key:"requireResponse",value:function(){return!0}},{key:"getCMD",value:function(){return ke.CALL}},{key:"getType",value:function(){return J.NO_ANSWER}},{key:"getData",value:function(){return{call_id:this.callId}}}]),t}(vn),Xw=function(e){F(t,e);var n=U(t);function t(r,o,s){var l;return b(this,t),(l=n.call(this)).callId=r,l.peerConnectionId=o,l.sdp=s,l}return x(t,[{key:"getCMD",value:function(){return ke.SGNL}},{key:"getType",value:function(){return J.OFFER}},{key:"getData",value:function(){var r={call_id:this.callId,sdp:dp.compress(this.sdp)};return this.peerConnectionId?Ct(Ct({},r),{},{peer_connection_id:this.peerConnectionId}):r}}]),t}(vn),Zw=function(e){F(t,e);var n=U(t);function t(r,o,s,l){var f;return b(this,t),(f=n.call(this)).callId=r,f.recordingId=o,f.recordingType=s,f.recordingStatus=l,f}return x(t,[{key:"getCMD",value:function(){return ke.COMM}},{key:"getType",value:function(){return J.RECORDING}},{key:"getData",value:function(){return{call_id:this.callId,recording_id:this.recordingId,recording_type:this.recordingType,recording_status:this.recordingStatus}}}]),t}(vn),Jw=function(e){F(t,e);var n=U(t);function t(r,o){var s;return b(this,t),(s=n.call(this)).callId=r,s.reason=o,s}return x(t,[{key:"requireResponse",value:function(){return!0}},{key:"getCMD",value:function(){return ke.CALL}},{key:"getType",value:function(){return J.TIME_OUT}},{key:"getData",value:function(){return{call_id:this.callId,reason:this.reason}}}]),t}(vn),eC=function(e){F(t,e);var n=U(t);function t(r,o){var s;return b(this,t),(s=n.call(this)).callId=r,s.isEnabled=o,s}return x(t,[{key:"getCMD",value:function(){return ke.COMM}},{key:"getType",value:function(){return J.VIDEO}},{key:"getData",value:function(){return{call_id:this.callId,is_enabled:this.isEnabled}}}]),t}(vn),tC=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"type",J.ACCEPT_ACK),r}return x(t,[{key:"parseData",value:function(r){return{callId:r.call_id}}}]),t}(bl),nC=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"type",J.ALIVE_ACK),r}return x(t,[{key:"parseData",value:function(r){return{callId:r.call_id,alive_at:r.alive_at}}}]),t}(bl),rC=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"type",J.DIAL_ACK),r}return x(t,[{key:"parseData",value:function(r){return{isVideoCall:r.is_video_call,callId:r.call_id,caller:new Bd(r.caller),callee:new Bd(r.callee)}}}]),t}(bl),fu=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return x(t,[{key:"parseData",value:function(r){return{callId:r.call_id,endedCall:new fp(r.ended_call)}}}]),t}(bl),iC=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"type",J.HOLD_ACK),r}return x(t,[{key:"parseData",value:function(r){return{callId:r.call_id,holdedBy:r.holded_by,isRelayed:r.is_relayed}}}]),t}(bl),aC=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"type",J.TURN_CHANGED),r}return x(t,[{key:"parseData",value:function(r){return{callId:r.call_id,turnCredential:{username:r.turn_credential.username,password:r.turn_credential.password,turnUrls:r.turn_credential.turn_urls,transportPolicy:r.turn_credential.transport_policy},eventId:r.event_id}}}]),t}(uv),Ag=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return t}(sv);(function(e){e.LOG="log"})(jd||(jd={}));var hp,oC=function(e){F(t,e);var n=U(t);function t(){var r;b(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(ee(r=n.call.apply(n,[this].concat(s))),"type",jd.LOG),r}return x(t,[{key:"parseData",value:function(r){return{logLevel:r.log_level.toUpperCase()}}}]),t}(Ag),sC=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return t}(av);(function(e){e.CONNECTED="websocket_connected"})(hp||(hp={}));var uC=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.call(this,{type:hp.CONNECTED})}return t}(sC),Qe=function(){function e(){b(this,e)}return x(e,null,[{key:"createAuthRequest",value:function(n,t,r){return new fk(n,t,r)}},{key:"createDial",value:function(n,t,r,o,s,l){return new $w(n,t,r,o,s,l)}},{key:"createDialReceive",value:function(n,t,r,o){return new qw(n,t,r,o)}},{key:"createAccept",value:function(n,t){return new Fw(n,t)}},{key:"createDecline",value:function(n){return new Gw(n)}},{key:"createCancel",value:function(n){return new Bw(n)}},{key:"createEnd",value:function(n){return new Kw(n)}},{key:"createTimeout",value:function(n,t){return new Jw(n,t)}},{key:"createConnectionLost",value:function(n){return new Ww(n)}},{key:"createNoAnswer",value:function(n){return new Yw(n)}},{key:"createOffer",value:function(n,t,r){return new Xw(n,t,r)}},{key:"createAnswer",value:function(n,t,r){return new Vw(n,t,r)}},{key:"createCandidate",value:function(n,t,r,o,s){return new zw(n,t,r,o,s)}},{key:"createAudio",value:function(n,t){return new jw(n,t)}},{key:"createVideo",value:function(n,t){return new eC(n,t)}},{key:"createAlive",value:function(n){return new Uw(n)}},{key:"createConnected",value:function(n,t,r){return new Hw(n,t,r)}},{key:"createStatsLogCommand",value:function(n){return new ck(n)}},{key:"createCallSummaryCommand",value:function(n,t,r){return new kk(n,t,r)}},{key:"createUpdateCustomItems",value:function(n,t){return new Ek(n,t)}},{key:"createDeleteCustomItems",value:function(n,t){return new yk(n,t)}},{key:"createDeleteAllCustomItems",value:function(n){return new gk(n)}},{key:"createRecording",value:function(n,t,r,o){return new Zw(n,t,r,o)}},{key:"createHoldCommand",value:function(n,t,r){return new Qw(n,t,r)}},{key:"createCommandList",value:function(n){return new vk(n)}},{key:"createUploadLogsCommand",value:function(n,t){return new dk(n,t)}},{key:"createRegisterPushToken",value:function(n,t,r){return new pk(n,t,r)}},{key:"createUnregisterPushToken",value:function(n,t,r){return new _k(n,t,r)}},{key:"createUnregisterAllPushTokens",value:function(n,t){return new mk(n,t)}},{key:"createAccepted",value:function(n){return new lv({type:"other_device_accepted",payload:{call_id:n}})}},{key:"createDeclined",value:function(n,t){return new wk({callId:n,endedCall:t})}},{key:"createWebSocketConnectedCommand",value:function(){return new uC}},{key:"createSnapshot",value:function(n,t){return new Ck(Ct({callId:n},t))}},{key:"parse",value:function(n){try{switch(n.type){case J.DIAL_ACK:return new rC(n);case J.DIAL:return new Ow(n);case J.DIAL_RCV:return new bw(n);case J.NO_ANSWER_ACK:return new fu(n);case J.NO_ANSWER:return new du(n);case J.CANCEL_ACK:return new fu(n);case J.CANCEL:return new du(n);case J.ACCEPT_ACK:return new tC(n);case J.ACCEPT:return new Rk(n);case J.OTHER_DEVICE_ACCEPTED:return new lv(n);case J.DECLINE_ACK:return new fu(n);case J.DECLINE:return new du(n);case J.OFFER:return new Nw(n);case J.ANSWER:return new Iw(n);case J.CANDIDATE:return new Tw(n);case J.REMOVE_CANDIDATES:return new Lw(n);case J.AUDIO:return new Sw(n);case J.VIDEO:return new Mw(n);case J.HOLD:return new Dw(n);case J.HOLD_ACK:return new iC(n);case J.END_ACK:return new fu(n);case J.END:return new du(n);case J.TIMEOUT_ACK:return new fu(n);case J.TIME_OUT:return new du(n);case J.CONNECTION_LOST_ACK:return new fu(n);case J.CONNECTION_LOST:return new du(n);case J.UNKNOWN_END_ACK:return new fu(n);case J.UNKNOWN_END:return new du(n);case J.CUSTOM_ITEMS_UPDATE:return new Pw(n);case J.CUSTOM_ITEMS_DELETE:return new Aw(n);case J.ALIVE_ACK:return new nC(n);case J.RECORDING:return new xw(n);case J.TURN_CHANGED:return new aC(n);case jd.LOG:return new oC(n);default:throw new Error("unhandled command data. ".concat(JSON.stringify(n)))}}catch(t){return void N.error(new ze(Y.ERR_WRONG_RESPONSE,{error:t}))}}}]),e}(),lC=function(){function e(n){b(this,e),Z(this,"_isOverflowLogs",!1),Z(this,"_logs",[]),this._ctx=n}return x(e,[{key:"addLog",value:function(n){this._logs.length>=500&&(this._isOverflowLogs=!0,this._logs.shift()),this._logs.push(n)}},{key:"_flush",value:function(n){var t=this._logs.filter(function(o){return oo[o.logLevel].level>=oo[n].level}),r=Qe.createUploadLogsCommand(t,this._isOverflowLogs);this._isOverflowLogs=!1,this._logs=[],this._ctx.sender.send(r)}},{key:"onEvent",value:function(n){n.type===jd.LOG?this._flush(n.payload.logLevel):console.error("Cannot reach here")}}]),e}(),cC=Q.f,Og=function(e){return function(n){for(var t,r=_e(n),o=ea(r),s=o.length,l=0,f=[];s>l;)t=o[l++],L&&!cC.call(r,t)||f.push(e?[t,r[t]]:r[t]);return f}},bg={entries:Og(!0),values:Og(!1)},dC=bg.values;Ye({target:"Object",stat:!0},{values:function(e){return dC(e)}});var fC=bg.entries;function Dg(e,n){var t=0,r=null;if(typeof e=="number")throw new Error("'obj' parameter is required");if(!e||n)throw new Error("'obj' parameter is required");return r=e,function(o){var s=o.descriptor.value;return o.descriptor.value=function(){for(var l=arguments.length,f=new Array(l),h=0;h<l;h++)f[h]=arguments[h];var _=f[t];if(Wu(_)!=="object")throw new Error("'object' is expected");return Object.entries(r).forEach(function(k){var E=Xn(k,2),y=E[0],w=E[1];!_[y]||_[y]instanceof w||(_[y]=new w(_[y]))}),s.call.apply(s,[this].concat(f))},o}}Ye({target:"Object",stat:!0},{entries:function(e){return fC(e)}});var hC=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.call(this)}return t}(pn),Ng=1 .toFixed,xg=Math.floor,Ul=function(e,n,t){return n===0?t:n%2==1?Ul(e,n-1,t*e):Ul(e*e,n/2,t)},pC=Ng&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||0xde0b6b3a7640080.toFixed(0)!=="1000000000000000128")||!O(function(){Ng.call({})});Ye({target:"Number",proto:!0,forced:pC},{toFixed:function(e){var n,t,r,o,s=function(w){if(typeof w!="number"&&ue(w)!="Number")throw TypeError("Incorrect invocation");return+w}(this),l=Jr(e),f=[0,0,0,0,0,0],h="",_="0",k=function(w,T){for(var A=-1,H=T;++A<6;)H+=w*f[A],f[A]=H%1e7,H=xg(H/1e7)},E=function(w){for(var T=6,A=0;--T>=0;)A+=f[T],f[T]=xg(A/w),A=A%w*1e7},y=function(){for(var w=6,T="";--w>=0;)if(T!==""||w===0||f[w]!==0){var A=String(f[w]);T=T===""?A:T+ao.call("0",7-A.length)+A}return T};if(l<0||l>20)throw RangeError("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return String(s);if(s<0&&(h="-",s=-s),s>1e-21)if(t=(n=function(w){for(var T=0,A=w;A>=4096;)T+=12,A/=4096;for(;A>=2;)T+=1,A/=2;return T}(s*Ul(2,69,1))-69)<0?s*Ul(2,-n,1):s/Ul(2,n,1),t*=4503599627370496,(n=52-n)>0){for(k(0,t),r=l;r>=7;)k(1e7,0),r-=7;for(k(Ul(10,r,1),0),r=n-1;r>=23;)E(1<<23),r-=23;E(1<<r),k(1,1),E(2),_=y()}else k(0,t),k(1<<-n,0),_=y()+ao.call("0",l);return _=l>0?h+((o=_.length)<=l?"0."+ao.call("0",l-o)+_:_.slice(0,o-l)+"."+_.slice(o-l)):h+_}});var _C=function(){function e(n,t){b(this,e),Z(this,"_count",0),this._call=n,this._statsInterval=t,this._init(),this._audioMosList=[]}return x(e,[{key:"_init",value:function(){this._reconnectionCount=0}},{key:"insertStatsLog",value:function(n){var t,r=this._accumulatedStatsLog;this._count+=1;var o=Hs(n,r);this._audioMosList.push((t=o.audio.mos)!==null&&t!==void 0?t:0),this._accumulatedStatsLog=Gs(o,this._accumulatedStatsLog,this._count)}},{key:"onDial",value:function(){this._dialSentAt=Date.now()}},{key:"onDialAck",value:function(){this._pdd=Date.now()-this._dialSentAt}},{key:"onAccept",value:function(){this._callSetupStartedAt=Date.now()}},{key:"onAcceptAck",value:function(){this._callSetupStartedAt=Date.now()}},{key:"onConnected",value:function(){this._setupTime=Date.now()-this._callSetupStartedAt}},{key:"increaseReconnectedCount",value:function(){this._reconnectionCount+=1}},{key:"getSummary",value:function(){var n={};if(n.pdd=this._pdd,n.setup_time=this._setupTime,n.reconnection_count=this._reconnectionCount,!this._accumulatedStatsLog)return n;var t=this._accumulatedStatsLog,r=t.transport_info,o=t.audio,s=t.video;return n.network_type=r.network_type,n.transport_info_candidate_type=r.candidate_type,n.audio_mos_list=this._audioMosList.map(function(l){return parseFloat(l.toFixed(1))}),n.stats_interval=this._statsInterval/1e3,n.audio_codec=o.codec,n.audio_mos=o.mos,n.audio_packets_lost_rate=o.packets_lost_rate,n.audio_rtt=o.remote_rtt,n.video_codec=s.codec,n.video_freeze_count=s.freeze_count,n.video_jitter_buffer_delay=s.jitter_buffer_delay,n.video_jitter_buffer_emitted_count=s.jitter_buffer_emitted_count,n.video_packets_lost_rate=s.packets_lost_rate,n.video_received_frame_height=s.received_frame_height,n.video_received_frame_width=s.received_frame_width,n.video_rtt=s.remote_rtt,n.video_sent_frame_height=s.sent_frame_height,n.video_sent_frame_width=s.sent_frame_width,n.video_total_decode_time=s.total_decode_time,n.video_total_freezes_duration=s.total_freezes_duration,n.video_total_inter_frame_delay=s.total_inter_frame_delay,n.video_source_frames_per_second=s.video_source_frames_per_second,n.video_source_height=s.video_source_height,n.video_source_width=s.video_source_width,n}}]),e}(),mC=function(){function e(n,t){b(this,e),this._ctx=n,this._call=t,this._statsList=[],this._summary=new _C(t,this._interval)}return x(e,[{key:"_insertInfo",value:function(){var n=this._call;Object.assign(this._accumulated,{app_id:this._ctx.appId,browser_type:wo(),call_id:n.callId,device_timestamp:new Date().getTime(),role:n.myRole,caller_id:n.caller.userId,callee_id:n.callee.userId,is_video_call:n.isVideoCall,metadata:{measure_count:n.options.statsIntervalValue/1e3,measure_interval:n.options.statsIntervalValue/1e3}})}},{key:"insertStatsLog",value:function(n){var t=this,r=Hs(n,this._prev);if(this._statsList.push(r),this._prev=r,this._statsList.length&&this._statsList.length%(this._interval/1e3)==0){var o,s=0;this._accumulated=this._statsList.reduce(function(l,f){return s+=1,Gs(t._statsList[s-1],f,s)},{}),this._statsList.length=0,(o=this._sendStatsLogCommand)===null||o===void 0||o.call(this,this._accumulated),this._summary.insertStatsLog(this._accumulated)}}},{key:"_sendStatsLogCommand",value:function(n){this._insertInfo();var t=Qe.createStatsLogCommand(n);this._ctx.sender.send(t).catch(function(r){return N.warning("failed to send stats to server",r)})}},{key:"summary",get:function(){return this._summary}},{key:"_interval",get:function(){return this._call.options.statsIntervalValue}}]),e}(),vC=function(e){F(t,e);var n=U(t);function t(){var r;return b(this,t),(r=n.call(this))._haveRetrievedValidStat=!1,r._updateCount=0,r._prevStats=null,r._prevMetrics=null,r}return x(t,[{key:"setMode",value:function(r){switch(this._stopDispatchInterval(),r){case qn.FREQUENCY:this._startDispatchInterval();break;case qn.CONNECTION_QUALITY_CHANGE:break;default:throw new hn(Y.INVALID_PARAMETER_VALUE,{invalidParameter:"ConnectionQualityMonitoringMode"})}}},{key:"insertStatsLog",value:function(r){var o=this._prevStats,s=this._prevMetrics;if(this._updateCount+=1,!this._haveRetrievedValidStat&&r!=null&&r.audio.mos&&(this._haveRetrievedValidStat=!0),this._haveRetrievedValidStat||!(this._updateCount<=15)){var l,f;r?(l=Hs(r,o),f=new xs({mos:l.audio.mos,packetsLostRate:l.audio.packets_lost_rate,rtt:l.audio.remote_rtt,jitter:l.audio.remote_jitter})):f=new xs({mos:void 0,packetsLostRate:void 0,rtt:void 0,jitter:void 0});var h=s==null?void 0:s.connectionQuality;this._prevStats=l,this._prevMetrics=f,f.connectionQuality!==h&&this._dispatchIfExist()}}},{key:"onReconnecting",value:function(){this.insertStatsLog(void 0)}},{key:"onEnded",value:function(){this._stopDispatchInterval()}},{key:"_startDispatchInterval",value:function(){var r=this;this._dispatchIntervalId=setInterval(function(){r._dispatchIfExist()},3e3)}},{key:"_stopDispatchInterval",value:function(){this._dispatchIntervalId&&(clearInterval(this._dispatchIntervalId),delete this._dispatchIntervalId)}},{key:"_dispatchIfExist",value:function(){var r=this._prevMetrics;r&&this._dispatchEvent("updated",r)}}]),t}(pn),gC=function(){function e(n,t){b(this,e),this._ctx=n,this._call=t,this._collector=new mC(n,t),this._connectionQuality=new vC}return x(e,[{key:"startGetWebRtcStats",value:function(n){var t=this;this._statsIntervalId||(this._statsIntervalId=setInterval(function(){n.getStatsLog().then(function(r){t._collector.insertStatsLog(r),t._connectionQuality.insertStatsLog(r)})},1e3))}},{key:"stopGetWebRtcStats",value:function(){this._statsIntervalId&&(clearInterval(this._statsIntervalId),delete this._statsIntervalId)}},{key:"getCallSummary",value:function(){return this.summary.getSummary()}},{key:"setConnectionQualityListener",value:function(n,t){this.removeConnectionQualityListener(),this._connectionQuality.on("updated",function(r){t(r)}),this._connectionQuality.setMode(n)}},{key:"removeConnectionQualityListener",value:function(){this._connectionQuality.removeAllEventListeners()}},{key:"onReconnecting",value:function(){this._connectionQuality.onReconnecting()}},{key:"onEnded",value:function(){this._connectionQuality.onEnded()}},{key:"summary",get:function(){return this._collector.summary}}]),e}(),yC=Ot("iterator"),H_=!O(function(){var e=new URL("b?a=1&b=2&c=3","http://a"),n=e.searchParams,t="";return e.pathname="c%20d",n.forEach(function(r,o){n.delete("b"),t+=o+r}),!n.sort||e.href!=="http://a/c%20d?a=1&c=3"||n.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!n[yC]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://тест").host!=="xn--e1aybc"||new URL("http://a#б").hash!=="#%D0%B1"||t!=="a1c3"||new URL("http://x",void 0).host!=="x"}),W_=2147483647,EC=/[^\0-\u007E]/,kC=/[.\u3002\uFF0E\uFF61]/g,Lg="Overflow: input needs wider integers to process",Vl=Math.floor,G_=String.fromCharCode,Pg=function(e){return e+22+75*(e<26)},wC=function(e,n,t){var r=0;for(e=t?Vl(e/700):e>>1,e+=Vl(e/n);e>455;r+=36)e=Vl(e/35);return Vl(r+36*e/(e+38))},CC=function(e){var n=[];e=function(j){for(var $=[],se=0,fe=j.length;se<fe;){var ge=j.charCodeAt(se++);if(ge>=55296&&ge<=56319&&se<fe){var De=j.charCodeAt(se++);(64512&De)==56320?$.push(((1023&ge)<<10)+(1023&De)+65536):($.push(ge),se--)}else $.push(ge)}return $}(e);var t,r,o=e.length,s=128,l=0,f=72;for(t=0;t<e.length;t++)(r=e[t])<128&&n.push(G_(r));var h=n.length,_=h;for(h&&n.push("-");_<o;){var k=W_;for(t=0;t<e.length;t++)(r=e[t])>=s&&r<k&&(k=r);var E=_+1;if(k-s>Vl((W_-l)/E))throw RangeError(Lg);for(l+=(k-s)*E,s=k,t=0;t<e.length;t++){if((r=e[t])<s&&++l>W_)throw RangeError(Lg);if(r==s){for(var y=l,w=36;;w+=36){var T=w<=f?1:w>=f+26?26:w-f;if(y<T)break;var A=y-T,H=36-T;n.push(G_(Pg(T+A%H))),y=Vl(A/H)}n.push(G_(Pg(y))),f=wC(l,E,_==h),l=0,++_}}++l,++s}return n.join("")},Mg=function(e){var n=mr(e);if(typeof n!="function")throw TypeError(String(e)+" is not iterable");return lt(n.call(e))},Fg=Zr("fetch"),$_=Zr("Headers"),RC=Ot("iterator"),jl="URLSearchParams",Ug=jl+"Iterator",Vg=an.set,gi=an.getterFor(jl),IC=an.getterFor(Ug),SC=/\+/g,jg=Array(4),TC=function(e){return jg[e-1]||(jg[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},AC=function(e){try{return decodeURIComponent(e)}catch{return e}},Bg=function(e){var n=e.replace(SC," "),t=4;try{return decodeURIComponent(n)}catch{for(;t;)n=n.replace(TC(t--),AC);return n}},OC=/[!'()~]|%20/g,bC={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},DC=function(e){return bC[e]},zg=function(e){return encodeURIComponent(e).replace(OC,DC)},Hg=function(e,n){if(n)for(var t,r,o=n.split("&"),s=0;s<o.length;)(t=o[s++]).length&&(r=t.split("="),e.push({key:Bg(r.shift()),value:Bg(r.join("="))}))},NC=function(e){this.entries.length=0,Hg(this.entries,e)},Bl=function(e,n){if(e<n)throw TypeError("Not enough arguments")},q_=Yo(function(e,n){Vg(this,{type:Ug,iterator:Mg(gi(e).entries),kind:n})},"Iterator",function(){var e=IC(this),n=e.kind,t=e.iterator.next(),r=t.value;return t.done||(t.value=n==="keys"?r.key:n==="values"?r.value:[r.key,r.value]),t}),zd=function(){Ii(this,zd,jl);var e,n,t,r,o,s,l,f,h,_=arguments.length>0?arguments[0]:void 0,k=[];if(Vg(this,{type:jl,entries:k,updateURL:function(){},updateSearchParams:NC}),_!==void 0)if(we(_))if(typeof(e=mr(_))=="function")for(t=(n=e.call(_)).next;!(r=t.call(n)).done;){if((l=(s=(o=Mg(lt(r.value))).next).call(o)).done||(f=s.call(o)).done||!s.call(o).done)throw TypeError("Expected sequence with length 2");k.push({key:l.value+"",value:f.value+""})}else for(h in _)Me(_,h)&&k.push({key:h,value:_[h]+""});else Hg(k,typeof _=="string"?_.charAt(0)==="?"?_.slice(1):_:_+"")},pp=zd.prototype;Uu(pp,{append:function(e,n){Bl(arguments.length,2);var t=gi(this);t.entries.push({key:e+"",value:n+""}),t.updateURL()},delete:function(e){Bl(arguments.length,1);for(var n=gi(this),t=n.entries,r=e+"",o=0;o<t.length;)t[o].key===r?t.splice(o,1):o++;n.updateURL()},get:function(e){Bl(arguments.length,1);for(var n=gi(this).entries,t=e+"",r=0;r<n.length;r++)if(n[r].key===t)return n[r].value;return null},getAll:function(e){Bl(arguments.length,1);for(var n=gi(this).entries,t=e+"",r=[],o=0;o<n.length;o++)n[o].key===t&&r.push(n[o].value);return r},has:function(e){Bl(arguments.length,1);for(var n=gi(this).entries,t=e+"",r=0;r<n.length;)if(n[r++].key===t)return!0;return!1},set:function(e,n){Bl(arguments.length,1);for(var t,r=gi(this),o=r.entries,s=!1,l=e+"",f=n+"",h=0;h<o.length;h++)(t=o[h]).key===l&&(s?o.splice(h--,1):(s=!0,t.value=f));s||o.push({key:l,value:f}),r.updateURL()},sort:function(){var e,n,t,r=gi(this),o=r.entries,s=o.slice();for(o.length=0,t=0;t<s.length;t++){for(e=s[t],n=0;n<t;n++)if(o[n].key>e.key){o.splice(n,0,e);break}n===t&&o.push(e)}r.updateURL()},forEach:function(e){for(var n,t=gi(this).entries,r=Or(e,arguments.length>1?arguments[1]:void 0,3),o=0;o<t.length;)r((n=t[o++]).value,n.key,this)},keys:function(){return new q_(this,"keys")},values:function(){return new q_(this,"values")},entries:function(){return new q_(this,"entries")}},{enumerable:!0}),Xt(pp,RC,pp.entries),Xt(pp,"toString",function(){for(var e,n=gi(this).entries,t=[],r=0;r<n.length;)e=n[r++],t.push(zg(e.key)+"="+zg(e.value));return t.join("&")},{enumerable:!0}),ia(zd,jl),Ye({global:!0,forced:!H_},{URLSearchParams:zd}),H_||typeof Fg!="function"||typeof $_!="function"||Ye({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var n,t,r,o=[e];return arguments.length>1&&(we(n=arguments[1])&&(t=n.body,Jo(t)===jl&&((r=n.headers?new $_(n.headers):new $_).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),n=Ci(n,{body:X(0,String(t)),headers:X(0,r)}))),o.push(n)),Fg.apply(this,o)}});var qr,Wg={URLSearchParams:zd,getState:gi},xC=vc.codeAt,Hd=S.URL,LC=Wg.URLSearchParams,K_=Wg.getState,PC=an.set,Kt=an.getterFor("URL"),MC=Math.floor,Gg=Math.pow,Q_="Invalid scheme",hu="Invalid host",$g="Invalid port",qg=/[A-Za-z]/,FC=/[\d+-.A-Za-z]/,Y_=/\d/,UC=/^(0x|0X)/,VC=/^[0-7]+$/,jC=/^\d+$/,Kg=/^[\dA-Fa-f]+$/,BC=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,zC=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,HC=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,WC=/[\u0009\u000A\u000D]/g,X_=function(e,n){var t,r,o;if(n.charAt(0)=="["){if(n.charAt(n.length-1)!="]"||!(t=$C(n.slice(1,-1))))return hu;e.host=t}else if(An(e)){if(n=function(s){var l,f,h=[],_=s.toLowerCase().replace(kC,".").split(".");for(l=0;l<_.length;l++)f=_[l],h.push(EC.test(f)?"xn--"+CC(f):f);return h.join(".")}(n),BC.test(n)||(t=GC(n))===null)return hu;e.host=t}else{if(zC.test(n))return hu;for(t="",r=hi(n),o=0;o<r.length;o++)t+=Uo(r[o],_p);e.host=t}},GC=function(e){var n,t,r,o,s,l,f,h=e.split(".");if(h.length&&h[h.length-1]==""&&h.pop(),(n=h.length)>4)return e;for(t=[],r=0;r<n;r++){if((o=h[r])=="")return e;if(s=10,o.length>1&&o.charAt(0)=="0"&&(s=UC.test(o)?16:8,o=o.slice(s==8?1:2)),o==="")l=0;else{if(!(s==10?jC:s==8?VC:Kg).test(o))return e;l=parseInt(o,s)}t.push(l)}for(r=0;r<n;r++)if(l=t[r],r==n-1){if(l>=Gg(256,5-n))return null}else if(l>255)return null;for(f=t.pop(),r=0;r<t.length;r++)f+=t[r]*Gg(256,3-r);return f},$C=function(e){var n,t,r,o,s,l,f,h=[0,0,0,0,0,0,0,0],_=0,k=null,E=0,y=function(){return e.charAt(E)};if(y()==":"){if(e.charAt(1)!=":")return;E+=2,k=++_}for(;y();){if(_==8)return;if(y()!=":"){for(n=t=0;t<4&&Kg.test(y());)n=16*n+parseInt(y(),16),E++,t++;if(y()=="."){if(t==0||(E-=t,_>6))return;for(r=0;y();){if(o=null,r>0){if(!(y()=="."&&r<4))return;E++}if(!Y_.test(y()))return;for(;Y_.test(y());){if(s=parseInt(y(),10),o===null)o=s;else{if(o==0)return;o=10*o+s}if(o>255)return;E++}h[_]=256*h[_]+o,++r!=2&&r!=4||_++}if(r!=4)return;break}if(y()==":"){if(E++,!y())return}else if(y())return;h[_++]=n}else{if(k!==null)return;E++,k=++_}}if(k!==null)for(l=_-k,_=7;_!=0&&l>0;)f=h[_],h[_--]=h[k+l-1],h[k+--l]=f;else if(_!=8)return;return h},Wd=function(e){var n,t,r,o;if(typeof e=="number"){for(n=[],t=0;t<4;t++)n.unshift(e%256),e=MC(e/256);return n.join(".")}if(typeof e=="object"){for(n="",r=function(s){for(var l=null,f=1,h=null,_=0,k=0;k<8;k++)s[k]!==0?(_>f&&(l=h,f=_),h=null,_=0):(h===null&&(h=k),++_);return _>f&&(l=h,f=_),l}(e),t=0;t<8;t++)o&&e[t]===0||(o&&(o=!1),r===t?(n+=t?":":"::",o=!0):(n+=e[t].toString(16),t<7&&(n+=":")));return"["+n+"]"}return e},_p={},Qg=Li({},_p,{" ":1,'"':1,"<":1,">":1,"`":1}),Yg=Li({},Qg,{"#":1,"?":1,"{":1,"}":1}),Z_=Li({},Yg,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Uo=function(e,n){var t=xC(e,0);return t>32&&t<127&&!Me(n,e)?e:encodeURIComponent(e)},mp={ftp:21,file:null,http:80,https:443,ws:80,wss:443},An=function(e){return Me(mp,e.scheme)},J_=function(e){return e.username!=""||e.password!=""},em=function(e){return!e.host||e.cannotBeABaseURL||e.scheme=="file"},Gd=function(e,n){var t;return e.length==2&&qg.test(e.charAt(0))&&((t=e.charAt(1))==":"||!n&&t=="|")},Xg=function(e){var n;return e.length>1&&Gd(e.slice(0,2))&&(e.length==2||(n=e.charAt(2))==="/"||n==="\\"||n==="?"||n==="#")},Zg=function(e){var n=e.path,t=n.length;!t||e.scheme=="file"&&t==1&&Gd(n[0],!0)||n.pop()},qC=function(e){return e==="."||e.toLowerCase()==="%2e"},tm={},Jg={},nm={},ey={},ty={},rm={},ny={},ry={},vp={},gp={},im={},am={},om={},sm={},iy={},um={},zl={},Wi={},ay={},pu={},Oa={},Gi=function(e,n,t,r){var o,s,l,f,h,_=t||tm,k=0,E="",y=!1,w=!1,T=!1;for(t||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,n=n.replace(HC,"")),n=n.replace(WC,""),o=hi(n);k<=o.length;){switch(s=o[k],_){case tm:if(!s||!qg.test(s)){if(t)return Q_;_=nm;continue}E+=s.toLowerCase(),_=Jg;break;case Jg:if(s&&(FC.test(s)||s=="+"||s=="-"||s=="."))E+=s.toLowerCase();else{if(s!=":"){if(t)return Q_;E="",_=nm,k=0;continue}if(t&&(An(e)!=Me(mp,E)||E=="file"&&(J_(e)||e.port!==null)||e.scheme=="file"&&!e.host))return;if(e.scheme=E,t)return void(An(e)&&mp[e.scheme]==e.port&&(e.port=null));E="",e.scheme=="file"?_=sm:An(e)&&r&&r.scheme==e.scheme?_=ey:An(e)?_=ry:o[k+1]=="/"?(_=ty,k++):(e.cannotBeABaseURL=!0,e.path.push(""),_=ay)}break;case nm:if(!r||r.cannotBeABaseURL&&s!="#")return Q_;if(r.cannotBeABaseURL&&s=="#"){e.scheme=r.scheme,e.path=r.path.slice(),e.query=r.query,e.fragment="",e.cannotBeABaseURL=!0,_=Oa;break}_=r.scheme=="file"?sm:rm;continue;case ey:if(s!="/"||o[k+1]!="/"){_=rm;continue}_=vp,k++;break;case ty:if(s=="/"){_=gp;break}_=Wi;continue;case rm:if(e.scheme=r.scheme,s==qr)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query;else if(s=="/"||s=="\\"&&An(e))_=ny;else if(s=="?")e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query="",_=pu;else{if(s!="#"){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.path.pop(),_=Wi;continue}e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query,e.fragment="",_=Oa}break;case ny:if(!An(e)||s!="/"&&s!="\\"){if(s!="/"){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,_=Wi;continue}_=gp}else _=vp;break;case ry:if(_=vp,s!="/"||E.charAt(k+1)!="/")continue;k++;break;case vp:if(s!="/"&&s!="\\"){_=gp;continue}break;case gp:if(s=="@"){y&&(E="%40"+E),y=!0,l=hi(E);for(var A=0;A<l.length;A++){var H=l[A];if(H!=":"||T){var j=Uo(H,Z_);T?e.password+=j:e.username+=j}else T=!0}E=""}else if(s==qr||s=="/"||s=="?"||s=="#"||s=="\\"&&An(e)){if(y&&E=="")return"Invalid authority";k-=hi(E).length+1,E="",_=im}else E+=s;break;case im:case am:if(t&&e.scheme=="file"){_=um;continue}if(s!=":"||w){if(s==qr||s=="/"||s=="?"||s=="#"||s=="\\"&&An(e)){if(An(e)&&E=="")return hu;if(t&&E==""&&(J_(e)||e.port!==null))return;if(f=X_(e,E))return f;if(E="",_=zl,t)return;continue}s=="["?w=!0:s=="]"&&(w=!1),E+=s}else{if(E=="")return hu;if(f=X_(e,E))return f;if(E="",_=om,t==am)return}break;case om:if(!Y_.test(s)){if(s==qr||s=="/"||s=="?"||s=="#"||s=="\\"&&An(e)||t){if(E!=""){var $=parseInt(E,10);if($>65535)return $g;e.port=An(e)&&$===mp[e.scheme]?null:$,E=""}if(t)return;_=zl;continue}return $g}E+=s;break;case sm:if(e.scheme="file",s=="/"||s=="\\")_=iy;else{if(!r||r.scheme!="file"){_=Wi;continue}if(s==qr)e.host=r.host,e.path=r.path.slice(),e.query=r.query;else if(s=="?")e.host=r.host,e.path=r.path.slice(),e.query="",_=pu;else{if(s!="#"){Xg(o.slice(k).join(""))||(e.host=r.host,e.path=r.path.slice(),Zg(e)),_=Wi;continue}e.host=r.host,e.path=r.path.slice(),e.query=r.query,e.fragment="",_=Oa}}break;case iy:if(s=="/"||s=="\\"){_=um;break}r&&r.scheme=="file"&&!Xg(o.slice(k).join(""))&&(Gd(r.path[0],!0)?e.path.push(r.path[0]):e.host=r.host),_=Wi;continue;case um:if(s==qr||s=="/"||s=="\\"||s=="?"||s=="#"){if(!t&&Gd(E))_=Wi;else if(E==""){if(e.host="",t)return;_=zl}else{if(f=X_(e,E))return f;if(e.host=="localhost"&&(e.host=""),t)return;E="",_=zl}continue}E+=s;break;case zl:if(An(e)){if(_=Wi,s!="/"&&s!="\\")continue}else if(t||s!="?")if(t||s!="#"){if(s!=qr&&(_=Wi,s!="/"))continue}else e.fragment="",_=Oa;else e.query="",_=pu;break;case Wi:if(s==qr||s=="/"||s=="\\"&&An(e)||!t&&(s=="?"||s=="#")){if((h=(h=E).toLowerCase())===".."||h==="%2e."||h===".%2e"||h==="%2e%2e"?(Zg(e),s=="/"||s=="\\"&&An(e)||e.path.push("")):qC(E)?s=="/"||s=="\\"&&An(e)||e.path.push(""):(e.scheme=="file"&&!e.path.length&&Gd(E)&&(e.host&&(e.host=""),E=E.charAt(0)+":"),e.path.push(E)),E="",e.scheme=="file"&&(s==qr||s=="?"||s=="#"))for(;e.path.length>1&&e.path[0]==="";)e.path.shift();s=="?"?(e.query="",_=pu):s=="#"&&(e.fragment="",_=Oa)}else E+=Uo(s,Yg);break;case ay:s=="?"?(e.query="",_=pu):s=="#"?(e.fragment="",_=Oa):s!=qr&&(e.path[0]+=Uo(s,_p));break;case pu:t||s!="#"?s!=qr&&(s=="'"&&An(e)?e.query+="%27":e.query+=s=="#"?"%23":Uo(s,_p)):(e.fragment="",_=Oa);break;case Oa:s!=qr&&(e.fragment+=Uo(s,Qg))}k++}},_u=function(e){var n,t,r=Ii(this,_u,"URL"),o=arguments.length>1?arguments[1]:void 0,s=String(e),l=PC(r,{type:"URL"});if(o!==void 0){if(o instanceof _u)n=Kt(o);else if(t=Gi(n={},String(o)))throw TypeError(t)}if(t=Gi(l,s,null,n))throw TypeError(t);var f=l.searchParams=new LC,h=K_(f);h.updateSearchParams(l.query),h.updateURL=function(){l.query=String(f)||null},L||(r.href=yp.call(r),r.origin=oy.call(r),r.protocol=sy.call(r),r.username=uy.call(r),r.password=ly.call(r),r.host=cy.call(r),r.hostname=dy.call(r),r.port=fy.call(r),r.pathname=hy.call(r),r.search=py.call(r),r.searchParams=_y.call(r),r.hash=my.call(r))},lm=_u.prototype,yp=function(){var e=Kt(this),n=e.scheme,t=e.username,r=e.password,o=e.host,s=e.port,l=e.path,f=e.query,h=e.fragment,_=n+":";return o!==null?(_+="//",J_(e)&&(_+=t+(r?":"+r:"")+"@"),_+=Wd(o),s!==null&&(_+=":"+s)):n=="file"&&(_+="//"),_+=e.cannotBeABaseURL?l[0]:l.length?"/"+l.join("/"):"",f!==null&&(_+="?"+f),h!==null&&(_+="#"+h),_},oy=function(){var e=Kt(this),n=e.scheme,t=e.port;if(n=="blob")try{return new URL(n.path[0]).origin}catch{return"null"}return n!="file"&&An(e)?n+"://"+Wd(e.host)+(t!==null?":"+t:""):"null"},sy=function(){return Kt(this).scheme+":"},uy=function(){return Kt(this).username},ly=function(){return Kt(this).password},cy=function(){var e=Kt(this),n=e.host,t=e.port;return n===null?"":t===null?Wd(n):Wd(n)+":"+t},dy=function(){var e=Kt(this).host;return e===null?"":Wd(e)},fy=function(){var e=Kt(this).port;return e===null?"":String(e)},hy=function(){var e=Kt(this),n=e.path;return e.cannotBeABaseURL?n[0]:n.length?"/"+n.join("/"):""},py=function(){var e=Kt(this).query;return e?"?"+e:""},_y=function(){return Kt(this).searchParams},my=function(){var e=Kt(this).fragment;return e?"#"+e:""},Kr=function(e,n){return{get:e,set:n,configurable:!0,enumerable:!0}};if(L&&ic(lm,{href:Kr(yp,function(e){var n=Kt(this),t=String(e),r=Gi(n,t);if(r)throw TypeError(r);K_(n.searchParams).updateSearchParams(n.query)}),origin:Kr(oy),protocol:Kr(sy,function(e){var n=Kt(this);Gi(n,String(e)+":",tm)}),username:Kr(uy,function(e){var n=Kt(this),t=hi(String(e));if(!em(n)){n.username="";for(var r=0;r<t.length;r++)n.username+=Uo(t[r],Z_)}}),password:Kr(ly,function(e){var n=Kt(this),t=hi(String(e));if(!em(n)){n.password="";for(var r=0;r<t.length;r++)n.password+=Uo(t[r],Z_)}}),host:Kr(cy,function(e){var n=Kt(this);n.cannotBeABaseURL||Gi(n,String(e),im)}),hostname:Kr(dy,function(e){var n=Kt(this);n.cannotBeABaseURL||Gi(n,String(e),am)}),port:Kr(fy,function(e){var n=Kt(this);em(n)||((e=String(e))==""?n.port=null:Gi(n,e,om))}),pathname:Kr(hy,function(e){var n=Kt(this);n.cannotBeABaseURL||(n.path=[],Gi(n,e+"",zl))}),search:Kr(py,function(e){var n=Kt(this);(e=String(e))==""?n.query=null:(e.charAt(0)=="?"&&(e=e.slice(1)),n.query="",Gi(n,e,pu)),K_(n.searchParams).updateSearchParams(n.query)}),searchParams:Kr(_y),hash:Kr(my,function(e){var n=Kt(this);(e=String(e))!=""?(e.charAt(0)=="#"&&(e=e.slice(1)),n.fragment="",Gi(n,e,Oa)):n.fragment=null})}),Xt(lm,"toJSON",function(){return yp.call(this)},{enumerable:!0}),Xt(lm,"toString",function(){return yp.call(this)},{enumerable:!0}),Hd){var vy=Hd.createObjectURL,gy=Hd.revokeObjectURL;vy&&Xt(_u,"createObjectURL",function(e){return vy.apply(Hd,arguments)}),gy&&Xt(_u,"revokeObjectURL",function(e){return gy.apply(Hd,arguments)})}ia(_u,"URL"),Ye({global:!0,forced:!H_,sham:!L},{URL:_u});var ln,Hl=null,Wl=function(){function e(){b(this,e)}return x(e,null,[{key:"downloadRecordedFile",value:function(n,t){var r=window.URL.createObjectURL(n),o=document.createElement("a");o.style.display="none",o.href=r,o.download=t,document.body.appendChild(o),o.click(),setTimeout(function(){document.body.removeChild(o),window.URL.revokeObjectURL(r)},100)}},{key:"getMergedAudioStream",value:function(n,t){var r=[];Hl||(Hl=new(window.AudioContext||window.webkitAudioContext));var o=Hl.createGain();o.gain.value=1;var s=new MediaStream;s.addTrack(n),r.push(Hl.createMediaStreamSource(s).connect(o));var l=new MediaStream;l.addTrack(t),r.push(Hl.createMediaStreamSource(l).connect(o));for(var f=Hl.createMediaStreamDestination(),h=0,_=r;h<_.length;h++)_[h].connect(f);return f.stream.getAudioTracks()[0]}},{key:"getVideoStream",value:function(n){var t=document.createElement("canvas"),r=Ys.value,o=r.width,s=r.height;t.width=o,t.height=s;var l=n.videoWidth,f=n.videoHeight,h=t.getContext("2d"),_=setInterval(function(){var k=n.videoWidth,E=n.videoHeight;if(k!==0&&E!==0){if((f>E||l>k)&&h.fillRect(0,0,o,s),l=k,f=E,E>t.height){var y=n.videoWidth/n.videoHeight;k=(E=t.height)*y}h.drawImage(n,t.width/2-k/2,t.height/2-E/2,k,E)}},10);return{stream:t.captureStream(),cleanup:function(){return clearInterval(_)}}}}]),e}(),KC=function(){function e(){b(this,e)}return x(e,null,[{key:"getRecorderMimeType",value:function(n){switch(n){case Gt.REMOTE_AUDIO_AND_VIDEO:case Gt.LOCAL_AUDIO_REMOTE_AUDIO_AND_VIDEO:case Gt.LOCAL_AUDIO_AND_VIDEO_REMOTE_AUDIO:return this.getVideoRecordFileMimeType();case Gt.REMOTE_AUDIO_ONLY:case Gt.LOCAL_REMOTE_AUDIOS:return this.getAudioRecordFileMimeType();default:return this.getVideoRecordFileMimeType()}}},{key:"getVideoRecordFileMimeType",value:function(){var n="video/mp4";return MediaRecorder.isTypeSupported(n)||(n="video/webm"),n}},{key:"getAudioRecordFileMimeType",value:function(){var n="audio/mp4";return MediaRecorder.isTypeSupported(n)||(n="audio/webm"),n}},{key:"createStream",value:function(n,t){var r={mimeType:this.getRecorderMimeType(t)},o=n.localMediaView.srcObject,s=n.remoteMediaView.srcObject;switch(t){case Gt.REMOTE_AUDIO_AND_VIDEO:return{stream:s,options:r};case Gt.REMOTE_AUDIO_ONLY:var l=new MediaStream;return l.addTrack(s.getAudioTracks()[0]),{stream:l,options:r};case Gt.LOCAL_REMOTE_AUDIOS:var f=new MediaStream,h=Wl.getMergedAudioStream(o.getAudioTracks()[0],s.getAudioTracks()[0]);return f.addTrack(h),{stream:f,options:r};case Gt.LOCAL_AUDIO_REMOTE_AUDIO_AND_VIDEO:var _=Wl.getVideoStream(n.remoteMediaView),k=_.stream,E=_.cleanup,y=Wl.getMergedAudioStream(o.getAudioTracks()[0],s.getAudioTracks()[0]);return k.addTrack(y),{stream:k,options:r,cleanup:E};case Gt.LOCAL_AUDIO_AND_VIDEO_REMOTE_AUDIO:var w=Wl.getVideoStream(n.localMediaView),T=w.stream,A=w.cleanup,H=Wl.getMergedAudioStream(o.getAudioTracks()[0],s.getAudioTracks()[0]);return T.addTrack(H),{stream:T,options:r,cleanup:A};default:return N.error("Cannot reach here!"),{options:r}}}}]),e}(),Qr=function(){function e(n,t){b(this,e),this.call=n,this.stateManager=t,this.timer=null}return x(e,[{key:"dialSent",value:function(){N.verbose("[".concat(this.type,"] dialSent"))}},{key:"dialFailed",value:function(){N.verbose("[".concat(this.type,"] dialFailed"))}},{key:"accept",value:function(n){N.verbose("[".concat(this.type,"] accept"))}},{key:"acceptSent",value:function(n){N.verbose("[".concat(this.type,"] acceptSent"))}},{key:"acceptFailed",value:function(){N.verbose("[".concat(this.type,"] acceptFailed"))}},{key:"receiveAccept",value:function(){N.verbose("[".concat(this.type,"] receiveAccept"))}},{key:"receiveAccepted",value:function(){N.verbose("[".concat(this.type,"] receiveAccepted"))}},{key:"end",value:function(){N.verbose("[".concat(this.type,"] end"))}},{key:"endSent",value:function(n){N.verbose("[".concat(this.type,"] endSent"))}},{key:"receiveOffer",value:function(){N.verbose("[".concat(this.type,"] receiveOffer"))}},{key:"receiveEnd",value:function(n){N.verbose("[".concat(this.type,"] receiveEnd"))}},{key:"timeout",value:function(){N.verbose("[".concat(this.type,"] timeout"))}},{key:"pcConnected",value:function(){N.verbose("[".concat(this.type,"] pc connected"))}},{key:"pcReconnecting",value:function(){N.verbose("[".concat(this.type,"] pc reconnecting"))}},{key:"closed",value:function(){N.verbose("[".concat(this.type,"] closed"))}},{key:"onStart",value:function(){}},{key:"onDestroy",value:function(){}},{key:"fireTimeout",value:function(){}},{key:"toggleVideo",value:function(n){N.verbose("[".concat(this.type,"] toggleVideo ").concat(n))}},{key:"toggleMicrophone",value:function(n){N.verbose("[".concat(this.type,"] toggleMicrophone ").concat(n))}},{key:"_createTimer",value:function(n,t){var r=this;this.timer?N.error("Only one timer allowed"):this.timer=setTimeout(function(){r._removeTimer(),n()},t)}},{key:"_removeTimer",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)}}]),e}();(function(e){e.IDLE="idle",e.DIALING="dialing",e.RINGING="ringing",e.ACCEPTING="accepting",e.ESTABLISHED="established",e.CONNECTED="connected",e.RECONNECTING="reconnecting",e.ICERESTART="icerestart",e.ENDED="ended",e.ABORTED="aborted",e.CLOSING="closing",e.ENDING="ending",e.CANCELED="canceled"})(ln||(ln={}));var $d,QC=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return x(t,[{key:"onStart",value:function(){this.call.stopToSendAlive(),this.call.fireOnEnded()}},{key:"dialSent",value:function(){this.call.sendCancelCommand().catch(function(r){return N.debug(r)})}},{key:"dialFailed",value:function(){this.stateManager.toEnded()}},{key:"endSent",value:function(r){this.call.setEndInfo(r.payload.endedCall),this.stateManager.toEnded()}},{key:"receiveEnd",value:function(r){this.call.setEndInfo(r.payload.endedCall),this.stateManager.toEnded()}},{key:"type",get:function(){return ln.ABORTED}}]),t}(Qr);(function(e){e.ACCEPTING="accepting_timeout",e.ANSWERING="answering_timeout",e.OFFERING="offering_timeout"})($d||($d={}));var YC=function(e){F(r,e);var n,t=U(r);function r(){return b(this,r),t.apply(this,arguments)}return x(r,[{key:"onStart",value:function(){this.call.sendAcceptCommand().catch(function(o){return N.debug(o)}),this.call.startCallConnectionTimer()}},{key:"acceptSent",value:function(){this.stateManager.toEstablished()}},{key:"receiveOffer",value:(n=Ie(regeneratorRuntime.mark(function o(){return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:this.stateManager.toEstablished();case 1:case"end":return s.stop()}},o,this)})),function(){return n.apply(this,arguments)})},{key:"acceptFailed",value:function(){this.call.setEndResult(nt.ACCEPT_FAILED),this.stateManager.toClosing()}},{key:"end",value:function(){this.call.sendEndCommand().catch(function(o){return N.debug(o)}),this.call.setEndResult(nt.COMPLETED),this.stateManager.toClosing()}},{key:"fireTimeout",value:function(){this.call.sendTimeoutCommand($d.ACCEPTING).catch(function(o){return N.debug(o)}),this.call.setEndResult(nt.TIMED_OUT),this.stateManager.toClosing()}},{key:"receiveEnd",value:function(o){this.call.setEndResult(o.payload.endedCall.endResult),this.call.setEndInfo(o.payload.endedCall),this.stateManager.toClosing()}},{key:"toggleMicrophone",value:function(o){this.call.toggleMicrophone(o),this.call.sendAudioCommand().catch(function(s){return N.debug(s)})}},{key:"toggleVideo",value:function(o){this.call.toggleVideo(o),this.call.sendVideoCommand().catch(function(s){return N.debug(s)})}},{key:"type",get:function(){return ln.ACCEPTING}}]),r}(Qr),XC=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return x(t,[{key:"onStart",value:function(){this.call.stopCallConnectionTimer(),this.call.fireOnRinging(),this.stateManager.toClosing()}},{key:"type",get:function(){return ln.CANCELED}}]),t}(Qr),ZC=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return x(t,[{key:"onStart",value:function(){this.call.stopGetWebRtcStats(),this.call.stopCallConnectionTimer(),this.call.stopToSendAlive(),this.call.stopCurrentRecording(),this.call.stopScreenShare(),this.call.closeRTCConnection(),this.closed()}},{key:"endSent",value:function(r){this.call.setEndInfo(r.payload.endedCall)}},{key:"closed",value:function(){this.stateManager.toEnding()}},{key:"type",get:function(){return ln.CLOSING}}]),t}(Qr),JC=function(e){F(t,e);var n=U(t);function t(r,o,s){var l;return b(this,t),(l=n.call(this,r,o)).isReconnected=s,l}return x(t,[{key:"onStart",value:function(){this.call.stopCallConnectionTimer(),this.call.startGetWebRtcStats(),this.call.sendConnectedInfo(),this.isReconnected?(this.call.setIsReconnected(!0),this.call.fireOnReconnected(),this.call.playSound(Ee.RECONNECTED)):(this.call.calcCallSetupTime(),this.call.fireOnConnected())}},{key:"onDestroy",value:function(){this.isReconnected&&this.call.stopSound(Ee.RECONNECTED)}},{key:"pcReconnecting",value:function(){this.stateManager.toReconnecting()}},{key:"end",value:function(){this.call.sendEndCommand().catch(function(r){return N.debug(r)}),this.call.setEndResult(nt.COMPLETED),this.stateManager.toClosing()}},{key:"receiveEnd",value:function(r){this.call.setEndResult(r.payload.endedCall.endResult),this.call.setEndInfo(r.payload.endedCall),this.stateManager.toClosing()}},{key:"toggleMicrophone",value:function(r){this.call.toggleMicrophone(r),this.call.sendAudioCommand().catch(function(o){return N.debug(o)})}},{key:"toggleVideo",value:function(r){this.call.toggleVideo(r),this.call.sendVideoCommand().catch(function(o){return N.debug(o)})}},{key:"type",get:function(){return ln.CONNECTED}}]),t}(Qr),e0=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return x(t,[{key:"onStart",value:function(){var r=this;this._createTimer(function(){r._noAnswer()},this._getTimeoutTime()),this.call.startToSendAlive(),this.call.playSound(Ee.DIALING)}},{key:"onDestroy",value:function(){this._removeTimer(),this.call.stopSound(Ee.DIALING)}},{key:"receiveAccept",value:function(){this.stateManager.toEstablished()}},{key:"end",value:function(){this.call.sendCancelCommand().catch(function(r){return N.debug(r)}),this.call.setEndResult(nt.CANCELED),this.stateManager.toClosing()}},{key:"receiveEnd",value:function(r){this.call.setEndResult(r.payload.endedCall.endResult),this.call.setEndInfo(r.payload.endedCall),this.stateManager.toClosing()}},{key:"_noAnswer",value:function(){this.call.sendNoAnswerCommand().catch(function(r){return N.debug(r)}),this.call.setEndResult(nt.NO_ANSWER),this.stateManager.toClosing()}},{key:"_getTimeoutTime",value:function(){return this.call.options.ringingTimeoutValue}},{key:"toggleMicrophone",value:function(r){this.call.toggleMicrophone(r),this.call.sendAudioCommand().catch(function(o){return N.debug(o)})}},{key:"toggleVideo",value:function(r){this.call.toggleVideo(r),this.call.sendVideoCommand().catch(function(o){return N.debug(o)})}},{key:"type",get:function(){return ln.DIALING}}]),t}(Qr),t0=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return x(t,[{key:"onStart",value:function(){this.call.stopAllSound()}},{key:"endSent",value:function(r){this.call.setEndInfo(r.payload.endedCall)}},{key:"type",get:function(){return ln.ENDED}}]),t}(Qr),n0=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return x(t,[{key:"onStart",value:function(){this.call.sendCallSummary(),this.call.fireOnEnded(),this.stateManager.toEnded()}},{key:"type",get:function(){return ln.ENDING}}]),t}(Qr),r0=function(e){F(t,e);var n=U(t);function t(r,o){var s;return b(this,t),(s=n.call(this,r,o)).isInitiator=r.isCaller,s}return x(t,[{key:"onStart",value:function(){this.call.fireOnEstablished(),this.call.sendAudioCommand(),this.call.sendVideoCommand(),this.call.createPeerConnection(),this.isInitiator&&this.call.startCallConnectionTimer()}},{key:"onDestroy",value:function(){}},{key:"pcConnected",value:function(){this.stateManager.toConnected(!1)}},{key:"end",value:function(){this.call.sendEndCommand().catch(function(r){return N.debug(r)}),this.call.setEndResult(nt.COMPLETED),this.stateManager.toClosing()}},{key:"fireTimeout",value:function(){this.call.sendTimeoutCommand(this.isInitiator?$d.OFFERING:$d.ANSWERING).catch(function(r){return N.debug(r)}),this.call.setEndResult(nt.TIMED_OUT),this.stateManager.toClosing()}},{key:"receiveEnd",value:function(r){this.call.setEndResult(r.payload.endedCall.endResult),this.call.setEndInfo(r.payload.endedCall),this.stateManager.toClosing()}},{key:"toggleMicrophone",value:function(r){this.call.toggleMicrophone(r),this.call.sendAudioCommand().catch(function(o){return N.debug(o)})}},{key:"toggleVideo",value:function(r){this.call.toggleVideo(r),this.call.sendVideoCommand().catch(function(o){return N.debug(o)})}},{key:"type",get:function(){return ln.ESTABLISHED}}]),t}(Qr),i0=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return x(t,[{key:"dialSent",value:function(){this.stateManager.toDialing()}},{key:"dialFailed",value:function(){this.call.setEndResult(nt.DIAL_FAILED),this.stateManager.toClosing()}},{key:"end",value:function(){this.call.setEndResult(nt.CANCELED),this.stateManager.toAborted()}},{key:"toggleMicrophone",value:function(r){this.call.toggleMicrophone(r)}},{key:"toggleVideo",value:function(r){this.call.toggleVideo(r)}},{key:"type",get:function(){return ln.IDLE}}]),t}(Qr),a0=function(e){F(t,e);var n=U(t);function t(r,o){return b(this,t),n.call(this,r,o)}return x(t,[{key:"onStart",value:function(){var r=this;this._createTimer(function(){r.call.sendConnectionLostCommand().catch(function(o){return N.debug(o)})},this._getTimeoutTime()),this.call.fireOnReconnecting(),this.call.playSound(Ee.RECONNECTING)}},{key:"onDestroy",value:function(){this._removeTimer(),this.call.stopSound(Ee.RECONNECTING)}},{key:"pcConnected",value:function(){this.stateManager.toConnected(!0)}},{key:"end",value:function(){this.call.sendEndCommand().catch(function(r){return N.debug(r)}),this.call.setEndResult(nt.COMPLETED),this.stateManager.toClosing()}},{key:"endSent",value:function(r){this.call.setEndResult(nt.CONNECTION_LOST),this.call.setEndInfo(r.payload.endedCall),this.stateManager.toClosing()}},{key:"receiveEnd",value:function(r){this.call.setEndResult(r.payload.endedCall.endResult),this.call.setEndInfo(r.payload.endedCall),this.stateManager.toClosing()}},{key:"_getTimeoutTime",value:function(){return 3e4}},{key:"toggleMicrophone",value:function(r){this.call.toggleMicrophone(r),this.call.sendAudioCommand().catch(function(o){return N.debug(o)})}},{key:"toggleVideo",value:function(r){this.call.toggleVideo(r),this.call.sendVideoCommand().catch(function(o){return N.debug(o)})}},{key:"type",get:function(){return ln.RECONNECTING}}]),t}(Qr),o0=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return x(t,[{key:"onStart",value:function(){var r=this;this._createTimer(function(){r._noAnswer()},this._getTimeoutTime()),this.call.startToSendAlive(),this.call.playSound(Ee.RINGING),this.call.fireOnRinging()}},{key:"onDestroy",value:function(){this._removeTimer(),this.call.stopSound(Ee.RINGING)}},{key:"accept",value:function(r){this.stateManager.toAccepting()}},{key:"receiveAccepted",value:function(){this.call.setEndResult(nt.OTHER_DEVICE_ACCEPTED),this.stateManager.toClosing()}},{key:"end",value:function(){this.call.sendDeclineCommand().catch(function(r){return N.debug(r)}),this.call.setEndResult(nt.DECLINED),this.stateManager.toClosing()}},{key:"endSent",value:function(r){this.call.setEndResult(nt.DECLINED),this.call.setEndInfo(r.payload.endedCall),this.stateManager.toClosing()}},{key:"receiveEnd",value:function(r){this.call.setEndResult(r.payload.endedCall.endResult),this.call.setEndInfo(r.payload.endedCall),this.stateManager.toClosing()}},{key:"toggleMicrophone",value:function(r){this.call.toggleMicrophone(r)}},{key:"toggleVideo",value:function(r){this.call.toggleVideo(r)}},{key:"_noAnswer",value:function(){this.call.sendNoAnswerCommand().catch(function(r){return N.debug(r)}),this.call.setEndResult(nt.NO_ANSWER),this.stateManager.toClosing()}},{key:"_getTimeoutTime",value:function(){return this.call.options.ringingTimeoutValue}},{key:"type",get:function(){return ln.RINGING}}]),t}(Qr),s0=function(){function e(n){b(this,e),this.call=n,this._state=null}return x(e,[{key:"toAborted",value:function(){this._changeState(new QC(this.call,this))}},{key:"toAccepting",value:function(){this._changeState(new YC(this.call,this))}},{key:"toCanceled",value:function(){this._changeState(new XC(this.call,this))}},{key:"toClosing",value:function(){this._changeState(new ZC(this.call,this))}},{key:"toConnected",value:function(n){this._changeState(new JC(this.call,this,n))}},{key:"toDialing",value:function(){this._changeState(new e0(this.call,this))}},{key:"toEnded",value:function(){this._changeState(new t0(this.call,this))}},{key:"toEnding",value:function(){this._changeState(new n0(this.call,this))}},{key:"toEstablished",value:function(){this._changeState(new r0(this.call,this))}},{key:"toIdle",value:function(){this._changeState(new i0(this.call,this))}},{key:"toReconnecting",value:function(){this._changeState(new a0(this.call,this))}},{key:"toRinging",value:function(){this._changeState(new o0(this.call,this))}},{key:"_changeState",value:function(n){this._state&&this._state.type===n.type?N.error(new Error("self-transition is not allowed")):(N.debug("state: ".concat(this._state?this._state.type:"null"," -> ").concat(n.type)),this._state&&this._state.onDestroy(),this._state=n,this._state.onStart())}},{key:"state",get:function(){return this._state}}]),e}(),u0=function(){function e(n,t,r){b(this,e),this._ctx=n,this.peerConnectionId=t,this.callId=r}return x(e,[{key:"sendOfferSdp",value:function(n){var t=Qe.createOffer(this.callId,this.peerConnectionId,n.sdp);return this._ctx.sender.send(t)}},{key:"sendAnswerSdp",value:function(n){var t=Qe.createAnswer(this.callId,this.peerConnectionId,n.sdp);return this._ctx.sender.send(t)}},{key:"sendCandidate",value:function(n){var t=Qe.createCandidate(this.callId,this.peerConnectionId,n.candidate,n.sdpMLineIndex,n.sdpMid);return this._ctx.sender.send(t)}}]),e}(),l0=Ic(null,function(e,n){var t,r,o,s,l,f,h,_,k,E;return{F:function(y){F(T,y);var w=U(T);function T(A,H){var j;return b(this,T),j=w.call(this),e(ee(j)),j._ctx=A,j._options=H,j._localMediaView=null,j._remoteMediaView=null,j._caller=null,j._callee=null,j._localConstraints={audio:!0,video:!0},j._remoteConstraints={audio:void 0,video:void 0},j._endResult=null,j._endInfo=null,j._customItems=null,j._webhook=null,j._remoteRecordingStatus=G.NONE,j._sendBirdChatOptions=null,j._holdedBy=[],j._wasRelayed=!1,j._logManager=new gC(A,ee(j)),j._stateManager=new s0(ee(j)),j._isReconnected=!1,j._rotatablePeerConnection=new bo(A,{audio:"sendrecv",video:"sendrecv"}),j._rotatablePeerConnection.once("initialized",function(){j._onPeerConnectionInitialized()}),j._rotatablePeerConnection.on("replaced",function(){j._onPeerConnectionReplaced()}),j._localStream=new ae(A.deviceManager),j._localStream.on("streamChanged",function(){j._onLocalStream()}),j._localStream.on("audioOutputChanged",function(){j._onAudioOutputChanged()}),j._localStream.on("screenShareStreamStopped",function(){j.onScreenShareStopped&&j.onScreenShareStopped(),j._dispatchEvent("onScreenShareStopped")}),j}return T}(n),d:[{kind:"field",key:"_wasCalleeDialReceivedProcessed",value:function(){return!1}},{kind:"field",key:"_remoteCapabilities",value:function(){return[]}},{kind:"get",key:"_pc",value:function(){return this._rotatablePeerConnection.activePeerConnection}},{kind:"get",key:"callId",value:function(){return this._callId}},{kind:"get",key:"isVideoCall",value:function(){return this._isVideoCall}},{kind:"get",key:"isCaller",value:function(){return this._isCaller}},{kind:"get",key:"caller",value:function(){return this._caller}},{kind:"get",key:"callee",value:function(){return this._callee}},{kind:"get",key:"localUser",value:function(){return this._isCaller?this.caller:this.callee}},{kind:"get",key:"remoteUser",value:function(){return this._isCaller?this.callee:this.caller}},{kind:"get",key:"isLocalAudioEnabled",value:function(){return this._localConstraints.audio}},{kind:"get",key:"isRemoteAudioEnabled",value:function(){return this._remoteConstraints.audio}},{kind:"get",key:"isLocalVideoEnabled",value:function(){return this._localConstraints.video}},{kind:"get",key:"isRemoteVideoEnabled",value:function(){return this._remoteConstraints.video}},{kind:"get",key:"localRecordingStatus",value:function(){var y,w;return(y=(w=this._record)===null||w===void 0?void 0:w.recordingStatus)!==null&&y!==void 0?y:G.NONE}},{kind:"get",key:"remoteRecordingStatus",value:function(){return this._remoteRecordingStatus}},{kind:"get",key:"localMediaView",value:function(){return this._localMediaView}},{kind:"get",key:"remoteMediaView",value:function(){return this._remoteMediaView}},{kind:"get",key:"myRole",value:function(){return this._isCaller?yr.CALLER:yr.CALLEE}},{kind:"get",key:"endedBy",value:function(){return this._endInfo?this._endInfo.endedBy:void 0}},{kind:"get",key:"options",value:function(){return this._options}},{kind:"get",key:"isOngoing",value:function(){return!this.isEnded}},{kind:"get",key:"isOnHold",value:function(){return this._holdedBy.length>0}},{kind:"get",key:"_isLocalOnHold",value:function(){return this._holdedBy.indexOf(this.localUser.userId)>-1}},{kind:"get",key:"isEnded",value:function(){return!!this._endResult}},{kind:"get",key:"endResult",value:function(){return this._endResult}},{kind:"get",key:"_state",value:function(){return this._stateManager.state}},{kind:"get",key:"customItems",value:function(){return Ct({},this._customItems)}},{kind:"get",key:"rtcConnection",value:function(){var y;return(y=this._pc)===null||y===void 0?void 0:y.rtcConnection}},{kind:"get",key:"callLog",value:function(){var y=this._state.type;if(y!==ln.ENDING&&y!==ln.ENDED)return null;var w=this._endInfo;return new fp({call_id:w?w.callId:this.callId,is_video_call:w?w.isVideoCall:this.isVideoCall,custom_items:w?w.customItems:this._customItems,user_role:w?w.userRole:this.myRole,started_at:w?w.startedAt:this._startedAt||Date.now(),ended_at:w?w.endedAt:Date.now(),participants:w?w._participants:[this.caller,this.callee],ended_by:this.endedBy,duration:w?w.duration:this.getDuration(),end_result:w?w.endResult:this.endResult,call_type:w?w.callType:"direct"},!1)}},{kind:"get",key:"_record",value:function(){return this._ctx.recordingManager.getRecord(this._recordId)}},{kind:"get",key:"_isTurnChangedSupported",value:function(){return z_.includes("turn_changed")&&this._remoteCapabilities.includes("turn_changed")}},{kind:"method",key:"setLocalMediaView",value:(E=Ie(regeneratorRuntime.mark(function y(w){return regeneratorRuntime.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,this._updateLocalMediaView(w);case 2:case"end":return T.stop()}},y,this)})),function(y){return E.apply(this,arguments)})},{kind:"method",key:"setRemoteMediaView",value:(k=Ie(regeneratorRuntime.mark(function y(w){return regeneratorRuntime.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,this._updateRemoteMediaView(w);case 2:case"end":return T.stop()}},y,this)})),function(y){return k.apply(this,arguments)})},{kind:"method",key:"startDuration",value:function(){this._startedAt===void 0&&(this._startedAt=Date.now())}},{kind:"method",key:"getDuration",value:function(){return this._endInfo?this._endInfo.duration:this._startedAt===void 0?0:Date.now()-this._startedAt}},{kind:"method",key:"_send",value:function(y){return this._ctx.sender.send(y)}},{kind:"method",decorators:[Dg({callOption:cl})],key:"dial",value:function(y){var w=this,T=y.userId,A=y.isVideoCall,H=y.callOption,j=y.customItems,$=y.sendBirdChatOptions,se=y.webhook;this._isCaller=!0,this._stateManager.toIdle();var fe=new Il;return this._dialDeferred=fe,this._isVideoCall=A,this._localStream.mediaConstraints={audio:!0,video:A},this._sendBirdChatOptions=$,this._webhook=se,this._setLocalOption(H),this._getLocalStream(),this._setCustomItems(j),this._logManager.summary.onDial(),this.sendDialCommand(T).then(function(){var ge;(ge=w._dialDeferred)===null||ge===void 0||ge.resolve(),delete w._dialDeferred}).catch(function(ge){var De;(De=w._dialDeferred)===null||De===void 0||De.reject(ge),delete w._dialDeferred}),fe.promise}},{kind:"method",key:"_dialed",value:function(y){this._isCaller=!1;var w=y.payload;this._isVideoCall=w.isVideoCall,this._localStream.mediaConstraints={audio:!0,video:w.isVideoCall},this._remoteCapabilities=w.capabilities,this._initTurnCredential=w.turnCredential,this._isTurnChangedSupported&&(this._initTurnCredential.turnUrls=[this._initTurnCredential.turnUrls[0]]),this._setCallInfo(w.callId,w.caller,w.callee),this._setCustomItems(w.customItems),this._setRemoteOption(w.constraints),this._stateManager.toRinging()}},{kind:"method",key:"_dialSent",value:function(y){var w=y.payload;this._setCallInfo(w.callId,w.caller,w.callee),this._logManager.summary.onDialAck(),this._state.dialSent()}},{kind:"method",key:"_calleeDialReceived",value:function(y){var w;this._wasCalleeDialReceivedProcessed||(this._wasCalleeDialReceivedProcessed=!0,this._dispatchEvent("onCalleeDialReceived",this),(w=this.onCalleeDialReceived)===null||w===void 0||w.call(this,this))}},{kind:"method",decorators:[xe(xe.messages.CALL_IS_NOT_SUPPORTED),Dg({callOption:cl})],key:"accept",value:function(y){var w=y.callOption,T=y.holdActiveCall;N.info("accept()"),T?this._ctx.callManager.holdExcept(this):this._ctx.callManager.endExcept(this),this._setLocalOption(w),this._getLocalStream(),this._logManager.summary.onAccept(),this._state.accept(w)}},{kind:"method",key:"_receiveAccept",value:function(y){var w=y.payload;this._remoteCapabilities=w.capabilities,this._initTurnCredential=w.turnCredential,this._isTurnChangedSupported&&(this._initTurnCredential.turnUrls=[this._initTurnCredential.turnUrls[0]]),this._setRemoteOption(w.constraints),this._logManager.summary.onAcceptAck(),this._state.receiveAccept()}},{kind:"method",key:"_canceled",value:function(y){var w=y.payload.endedCall;this._setCallInfo(w.callId,w.caller,w.callee),this._setCustomItems(w.customItems),this.setEndResult(w.endResult),this.setEndInfo(w),this._stateManager.toCanceled()}},{kind:"method",key:"end",value:function(){N.info("end()"),this._dialDeferred&&(this._dialDeferred.reject(new Xh(Y.DIAL_CANCELED)),delete this._dialDeferred),this._state.end()}},{kind:"method",key:"_setLocalOption",value:function(y){this._updateLocalMediaView(y.localMediaView),this._updateRemoteMediaView(y.remoteMediaView),this._localConstraints.audio=y.audioEnabled,this._localConstraints.video=y.videoEnabled}},{kind:"method",key:"_setRemoteOption",value:function(y){this._remoteConstraints=y}},{kind:"method",key:"_setCallInfo",value:function(y,w,T){this._callId=y,this._caller=w,this._callee=T}},{kind:"method",key:"setEndResult",value:function(y){y&&(Object.values(nt).includes(y)?this._endResult=y:this._endResult=nt.UNKNOWN)}},{kind:"method",key:"setEndInfo",value:function(y){this._endInfo=y}},{kind:"method",key:"_setRemoteAudioEnabled",value:function(y){var w,T=this._remoteConstraints.audio;this._remoteConstraints.audio=y,T!==y&&(this._dispatchEvent("onRemoteAudioSettingsChanged",this),(w=this.onRemoteAudioSettingsChanged)===null||w===void 0||w.call(this,this))}},{kind:"method",key:"_setRemoteVideoEnabled",value:function(y){var w,T=this._remoteConstraints.video;this._remoteConstraints.video=y,T!==y&&(this._dispatchEvent("onRemoteVideoSettingsChanged",this),(w=this.onRemoteVideoSettingsChanged)===null||w===void 0||w.call(this,this))}},{kind:"method",key:"_setHoldInfo",value:function(y,w,T){var A,H=w?this.localUser:this.remoteUser;if(this._wasRelayed)if(T)this._holdedBy.indexOf(H.userId)<0&&this._holdedBy.push(H.userId);else{var j=this._holdedBy.indexOf(H.userId);j>-1&&this._holdedBy.splice(j,1)}else this._holdedBy=y;this._updateStreamByHoldStream(),this._dispatchEvent("onUserHoldStatusChanged",this,w,T),(A=this.onUserHoldStatusChanged)===null||A===void 0||A.call(this,this,w,T)}},{kind:"method",key:"_setCustomItems",value:function(y){this._customItems=y||{}}},{kind:"method",key:"_setRemoteRecordingStatus",value:function(y){var w,T=this._remoteRecordingStatus;this._remoteRecordingStatus=y,y!==T&&(this._dispatchEvent("onRemoteRecordingStatusChanged",this),(w=this.onRemoteRecordingStatusChanged)===null||w===void 0||w.call(this,this))}},{kind:"method",key:"closeRTCConnection",value:function(){this._releaseLocalStream(),this._rotatablePeerConnection.removeAllEventListeners(),this._rotatablePeerConnection.close()}},{kind:"method",key:"startVideo",value:function(){N.info("startVideo()"),this._state.toggleVideo(!0)}},{kind:"method",key:"stopVideo",value:function(){N.info("stopVideo()"),this._state.toggleVideo(!1)}},{kind:"method",key:"hold",value:(_=Ie(regeneratorRuntime.mark(function y(){return regeneratorRuntime.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(N.info("hold()"),!this._isLocalOnHold){w.next=3;break}throw new ze(Y.ERR_CALL_ALREADY_ON_HOLD);case 3:return w.next=5,this.sendHoldCommand(!0,this._wasRelayed);case 5:case"end":return w.stop()}},y,this)})),function(){return _.apply(this,arguments)})},{kind:"method",key:"unhold",value:(h=Ie(regeneratorRuntime.mark(function y(w){return regeneratorRuntime.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(N.info("unhold()"),this._isLocalOnHold){T.next=3;break}throw new ze(Y.ERR_ACTIVE_CALL_IN_PROGRESS);case 3:if(w&&this._ctx.callManager.endExcept(this),!(this._ctx.callManager.getActiveCallCount()>0)){T.next=6;break}throw new ze(Y.ERR_ANOTHER_CALL_IN_PROGRESS);case 6:return T.next=8,this.sendHoldCommand(!1,this._wasRelayed);case 8:case"end":return T.stop()}},y,this)})),function(y){return h.apply(this,arguments)})},{kind:"method",key:"_holdSent",value:function(y,w){var T=y.payload;T.isRelayed&&(this._wasRelayed=!0),this._setHoldInfo(T.holdedBy,!0,w)}},{kind:"method",key:"_updateStreamByHoldStream",value:function(){var y,w=this;this.stopScreenShare(),this._getLocalStream(),(y=this._pc)!==null&&y!==void 0&&y.remoteStream&&(this._pc.remoteStream.getAudioTracks().forEach(function(T){T.enabled=!w.isOnHold}),this._pc.remoteStream.getVideoTracks().forEach(function(T){T.enabled=!w.isOnHold}))}},{kind:"method",key:"_checkRecordingCondition",value:function(y){return this._state.type!==ln.CONNECTED?(N.error(oi.getErrorMessage(Y.ERR_CALL_NOT_CONNECTED_YET)),!1):!(!this.isVideoCall&&y.isVideo)||(N.error(oi.getErrorMessage(Y.ERR_WRONG_RECORDING_TYPE_FOR_AUDIO_CALL)),!1)}},{kind:"method",key:"startRecording",value:function(y){var w=this,T=new Er(y);if(!Object.values(Gt).includes(T.recordingType))return N.error(oi.getErrorMessage(Y.ERR_INVALID_RECORDING_TYPE)),!1;try{(function(){if(!window.MediaRecorder){var ge=oi.getErrorMessage(Y.ERR_NOT_SUPPORTED_BROWSER_FOR_RECORDING);throw N.error(ge),ge}})()}catch{return}if(this._checkRecordingCondition(T))if(this._recordId)N.error(oi.getErrorMessage(Y.ERR_RECORDING_ALREADY_IN_PROGRESS));else{var A=KC.createStream(this,T.recordingType),H=A.stream,j=A.options,$=A.cleanup,se=this._ctx.recordingManager.startRecording(H,j,Ct(Ct({},T),{},{callId:this.callId}));if(se){var fe=function(){w.sendRecordingCommand(se.recordId,y.recordingType,se.recordingStatus)};return se.on("start",function(){return fe()}),se.on("stop",function(){$&&$(),fe()}),se.on("pause",function(){return fe()}),se.on("resume",function(){return fe()}),se.on("error",function(){return fe()}),this._recordId=se.recordId,se.recordId}}}},{kind:"method",key:"stopRecording",value:function(y){return y&&this._recordId===y?(this._ctx.recordingManager.stopRecording(y),delete this._recordId,!0):(N.error(oi.getErrorMessage(Y.ERR_FAILED_TO_STOP_RECORDING)),!1)}},{kind:"method",key:"stopCurrentRecording",value:function(){return!!this._recordId&&this.stopRecording(this._recordId)}},{kind:"method",key:"toggleVideo",value:function(y){var w=this;if(this._localConstraints.video!==y){this._localConstraints.video=y;var T=this._getLocalStream();T&&T.getVideoTracks().forEach(function(A){A.enabled=w._isMediaEnabled("video")})}}},{kind:"method",key:"muteMicrophone",value:function(){N.info("muteMicrophone()"),this._state.toggleMicrophone(!1)}},{kind:"method",key:"unmuteMicrophone",value:function(){N.info("unmuteMicrophone()"),this._state.toggleMicrophone(!0)}},{kind:"method",key:"toggleMicrophone",value:function(y){var w=this;if(this._localConstraints.audio!==y){this._localConstraints.audio=y;var T=this._getLocalStream();T&&T.getAudioTracks().forEach(function(A){A.enabled=w._isMediaEnabled("audio")})}}},{kind:"method",key:"_validateScreenShareAvailability",value:function(){if(this._state.type!==ln.CONNECTED&&this._state.type!==ln.RECONNECTING)throw new ze(Y.ERR_SCREEN_SHARE_REQUEST_BEFORE_CALL_IS_CONNECTED);if(!this.isVideoCall)throw new ze(Y.ERR_SCREEN_SHARE_RESTRICTED_FROM_AUDIO_CALL);if(this.isLocalScreenShareEnabled)throw new ze(Y.ERR_SCREEN_SHARE_ALREADY_IN_PROGRESS);if(this.isOnHold)throw new ze(Y.ERR_MEDIA_STREAM_NOT_ALLOWED_ON_HOLD)}},{kind:"get",key:"isLocalScreenShareEnabled",value:function(){return this._localStream.isScreenSharing}},{kind:"method",key:"startScreenShare",value:(f=Ie(regeneratorRuntime.mark(function y(){return regeneratorRuntime.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return this._validateScreenShareAvailability(),w.next=3,this._localStream.useScreenStream();case 3:case"end":return w.stop()}},y,this)})),function(){return f.apply(this,arguments)})},{kind:"method",key:"stopScreenShare",value:function(){this.isLocalScreenShareEnabled&&this._localStream.stopScreenShare()}},{kind:"method",key:"_validateCaptureAvailability",value:function(y){if(this._state.type!==ln.CONNECTED)throw new ze(Y.ERR_VIDEO_CALL_NOT_CONNECTED_YET);if(!this.isVideoCall)throw new ze(Y.ERR_CAPTURE_NOT_ALLOWED_ON_AUDIO_CALL);if(y instanceof HTMLAudioElement)throw new ze(Y.ERR_VIDEO_VIEW_NOT_READY);if(y==null||!y.srcObject)throw new ze(Y.ERR_VIDEO_VIEW_NOT_READY);if(this.isOnHold)throw new ze(Y.ERR_MEDIA_STREAM_NOT_ALLOWED_ON_HOLD)}},{kind:"method",key:"captureLocalVideoView",value:function(y){var w=this,T=new Promise(function(A,H){w._validateCaptureAvailability(w._localMediaView),A(w._captureVideoView(w._localMediaView))});return y&&bn(T)(y),T}},{kind:"method",key:"captureRemoteVideoView",value:function(y){var w=this,T=new Promise(function(A,H){w._validateCaptureAvailability(w.remoteMediaView),A(w._captureVideoView(w._remoteMediaView))});return y&&bn(T)(y),T}},{kind:"method",key:"_captureVideoView",value:function(y){try{var w,T,A=document.createElement("canvas"),H=A.getContext("2d"),j=y;A.width=(w=j.videoWidth)!==null&&w!==void 0?w:640,A.height=(T=j.videoHeight)!==null&&T!==void 0?T:360,H.drawImage(j,0,0);var $={width:A.width,height:A.height,data:A.toDataURL("image/jpeg",1)};return A.remove(),$}catch(se){throw N.error(se),new ze(Y.ERR_FAILED_TO_GET_IMAGE_FROM_VIDEO_STREAM)}}},{kind:"method",key:"updateCustomItems",value:function(y,w){var T=this,A=Xn(Fr(y,w),2)[1];if(A)return A;var H=Qe.createUpdateCustomItems(this.callId,y),j=this._send(H).then(function($){return T._setCustomItems($.custom_items),{customItems:$.custom_items,affectedKeys:$.updated}}).catch(function($){throw N.error("failed to update customItems"),$});return w&&bn(j)(w),j}},{kind:"method",key:"deleteCustomItems",value:function(y,w){var T=this,A=Xn(ko(y,w),2)[1];if(A)return A;var H=Qe.createDeleteCustomItems(this.callId,y),j=this._send(H).then(function($){return T._setCustomItems($.custom_items),{customItems:$.custom_items,affectedKeys:$.deleted}}).catch(function($){throw N.error("failed to delete customItems"),$});return w&&bn(j)(w),j}},{kind:"method",key:"deleteAllCustomItems",value:function(y){var w=this,T=Qe.createDeleteAllCustomItems(this.callId),A=this._send(T).then(function(H){return w._setCustomItems(H.custom_items),{customItems:H.custom_items,affectedKeys:H.deleted}}).catch(function(H){throw N.error("failed to delete all customItems"),H});return y&&bn(A)(y),A}},{kind:"method",key:"setConnectionQualityListener",value:function(y,w){this._logManager.setConnectionQualityListener(y,w)}},{kind:"method",key:"removeConnectionQualityListener",value:function(){this._logManager.removeConnectionQualityListener()}},{kind:"method",key:"fireOnRinging",value:function(){N.info("onRinging"),this.onRinging&&this.onRinging()}},{kind:"method",key:"fireOnEstablished",value:function(){var y;N.info("onEstablished"),this._dispatchEvent("onEstablished",this),(y=this.onEstablished)===null||y===void 0||y.call(this,this)}},{kind:"method",key:"fireOnEnded",value:function(){var y;switch(this.endResult){case nt.NO_ANSWER:case nt.CANCELED:case nt.DECLINED:case nt.OTHER_DEVICE_ACCEPTED:case nt.COMPLETED:N.info("onEnded");break;case nt.TIMED_OUT:N.warning("onEnded");break;case nt.CONNECTION_LOST:case nt.DIAL_FAILED:case nt.ACCEPT_FAILED:case nt.UNKNOWN:N.error("onEnded");break;default:N.info("onEnded")}this._logManager.onEnded(),this._dispatchEvent("onEnded",this),(y=this.onEnded)===null||y===void 0||y.call(this,this)}},{kind:"method",key:"fireOnConnected",value:function(){var y;N.info("onConnected"),this._dispatchEvent("onConnected",this),(y=this.onConnected)===null||y===void 0||y.call(this,this)}},{kind:"method",key:"fireOnReconnecting",value:function(){var y;N.info("onReconnecting"),this._logManager.onReconnecting(),this._dispatchEvent("onReconnecting",this),(y=this.onReconnecting)===null||y===void 0||y.call(this,this)}},{kind:"method",key:"fireOnReconnected",value:function(){var y;N.info("onReconnected"),this._dispatchEvent("onReconnected",this),(y=this.onReconnected)===null||y===void 0||y.call(this,this)}},{kind:"method",key:"sendDialCommand",value:function(y){var w=this,T=Qe.createDial(y,this._isVideoCall,this._customItems,this._sendBirdChatOptions,this._localConstraints,this._webhook);return this._send(T).then(function(A){w.onEvent(A)}).catch(function(A){throw w._state.dialFailed(),A})}},{kind:"method",key:"sendAcceptCommand",value:function(){var y=this,w=Qe.createAccept(this.callId,this._localConstraints);return this._send(w).then(function(T){y.onEvent(T)}).catch(function(T){throw y._state.acceptFailed(),T})}},{kind:"method",key:"sendCancelCommand",value:function(){var y=this,w=Qe.createCancel(this.callId);return this._send(w).then(function(T){y.onEvent(T)})}},{kind:"method",key:"sendDeclineCommand",value:function(){var y=this,w=Qe.createDecline(this.callId);return this._send(w).then(function(T){y.onEvent(T)})}},{kind:"method",key:"sendEndCommand",value:function(){var y=this,w=Qe.createEnd(this.callId);return this._send(w).then(function(T){y.onEvent(T)})}},{kind:"method",key:"sendTimeoutCommand",value:function(y){var w=this,T=Qe.createTimeout(this.callId,y);return this._send(T).then(function(A){w.onEvent(A)})}},{kind:"method",key:"sendConnectionLostCommand",value:function(){var y=this,w=Qe.createConnectionLost(this.callId);return this._send(w).then(function(T){y.onEvent(T)})}},{kind:"method",key:"sendNoAnswerCommand",value:function(){var y=this,w=Qe.createNoAnswer(this.callId);return this._send(w).then(function(T){y.onEvent(T)})}},{kind:"method",key:"sendAliveCommand",value:function(){var y=Qe.createAlive(this.callId);return this._send(y)}},{kind:"method",key:"sendAudioCommand",value:function(){var y=Qe.createAudio(this.callId,this._localConstraints.audio);return this._send(y)}},{kind:"method",key:"sendVideoCommand",value:function(){var y=Qe.createVideo(this.callId,this._localConstraints.video);return this._send(y)}},{kind:"method",key:"sendCallSummaryCommand",value:function(y){var w=Qe.createCallSummaryCommand(this._callId,this.myRole,y);return this._send(w)}},{kind:"method",key:"sendConnectedCommand",value:function(y,w,T){var A=Qe.createConnected(y,w,T);return this._send(A)}},{kind:"method",key:"sendRecordingCommand",value:function(y,w,T){var A=Qe.createRecording(this.callId,y,w,T);return this._send(A)}},{kind:"method",key:"sendHoldCommand",value:function(y,w){var T=this,A=Qe.createHoldCommand(this.callId,y,w);return this._send(A).then(function(H){T._holdSent(H,y)})}},{kind:"method",key:"startToSendAlive",value:function(){var y=this;this._aliveIntervalId=setInterval(function(){y.sendAliveCommand().catch(function(w){return N.debug(w)})},3e4)}},{kind:"method",key:"stopToSendAlive",value:function(){this._aliveIntervalId&&(clearInterval(this._aliveIntervalId),delete this._aliveIntervalId)}},{kind:"method",key:"startGetWebRtcStats",value:function(){this._logManager.startGetWebRtcStats(this._rotatablePeerConnection)}},{kind:"method",key:"stopGetWebRtcStats",value:function(){this._logManager.stopGetWebRtcStats()}},{kind:"method",key:"sendConnectedInfo",value:function(){var y=this;this._pc.getCandidateInfo().then(function(w){w&&y.sendConnectedCommand(y.callId,w,y._isReconnected)})}},{kind:"method",key:"sendCallSummary",value:function(){if(this.callId&&this.endResult!==nt.OTHER_DEVICE_ACCEPTED){var y=this._logManager.getCallSummary();this.sendCallSummaryCommand(y).catch(function(w){return N.error("failed to send call summary to server",w)})}}},{kind:"method",key:"startCallConnectionTimer",value:function(){var y=this;this._callConnectionTimer=setTimeout(function(){y._state.fireTimeout()},this._options.callConnectionTimeoutValue)}},{kind:"method",key:"stopCallConnectionTimer",value:function(){this._callConnectionTimer&&(clearTimeout(this._callConnectionTimer),delete this._callConnectionTimer)}},{kind:"method",key:"playSound",value:(l=Ie(regeneratorRuntime.mark(function y(w){return regeneratorRuntime.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.abrupt("return",this._ctx.soundManager.playSound(w));case 1:case"end":return T.stop()}},y,this)})),function(y){return l.apply(this,arguments)})},{kind:"method",key:"stopSound",value:function(y){return this._ctx.soundManager.stopSound(y)}},{kind:"method",key:"stopAllSound",value:function(){return this._ctx.soundManager.stopAllSound()}},{kind:"method",key:"_receiveAudio",value:function(y){this._setRemoteAudioEnabled(y.payload.isEnabled)}},{kind:"method",key:"_receiveVideo",value:function(y){this._setRemoteVideoEnabled(y.payload.isEnabled)}},{kind:"method",key:"_receiveHold",value:function(y){y.payload.isRelayed&&(this._wasRelayed=!0),this._setHoldInfo(y.payload.holdedBy,!1,y.payload.isPeerOnHold)}},{kind:"method",key:"_receiveCustomItemsUpdate",value:function(y){var w;this._setCustomItems(y.payload.customItems),this._dispatchEvent("onCustomItemsUpdated",this,y.payload.updated),(w=this.onCustomItemsUpdated)===null||w===void 0||w.call(this,this,y.payload.updated)}},{kind:"method",key:"_receiveCustomItemsDelete",value:function(y){var w;this._setCustomItems(y.payload.customItems),this._dispatchEvent("onCustomItemsDeleted",this,y.payload.deleted),(w=this.onCustomItemsDeleted)===null||w===void 0||w.call(this,this,y.payload.deleted)}},{kind:"method",key:"_receiveRecording",value:function(y){this._setRemoteRecordingStatus(y.payload.recordingStatus)}},{kind:"method",key:"_receiveTurnChanged",value:function(y){if(this._isTurnChangedSupported){var w=y.payload,T=w.turnCredential,A=w.eventId;this.createPeerConnection(A,T)}}},{kind:"method",key:"_registerPCListeners",value:function(){var y=this,w=this._pc;w.on("connected",function(){y._onPeerConnectionConnected()}),w.on("reconnecting",function(){y._onPeerConnectionReconnecting()}),w.on("remoteStream",function(){y._onRemoteStream()})}},{kind:"method",key:"createPeerConnection",value:function(y,w){var T=new u0(this._ctx,y,this.callId),A=this._rotatablePeerConnection.createPeerConnection(y,T,this._localStream,this._isCaller,y?w:this._initTurnCredential);return this.isCaller&&A.createOffer(),A}},{kind:"method",key:"_onPeerConnectionConnected",value:function(){this._state.pcConnected()}},{kind:"method",key:"_onPeerConnectionReconnecting",value:function(){this._state.pcReconnecting()}},{kind:"method",key:"_onPeerConnectionInitialized",value:function(){this._registerPCListeners(),this._onRemoteStream()}},{kind:"method",key:"_onPeerConnectionReplaced",value:function(){this._onPeerConnectionInitialized(),this._onPeerConnectionConnected()}},{kind:"method",key:"_receiveSnapshot",value:function(y){N.verbose("snapshot is received");var w=y.payload,T=w.audioEnabled,A=w.videoEnabled,H=w.customItems,j=w.recording;if(typeof T=="boolean"&&this._setRemoteAudioEnabled(T),typeof A=="boolean"&&this._setRemoteVideoEnabled(A),j?this._setRemoteRecordingStatus(G.RECORDING):this._setRemoteRecordingStatus(G.NONE),H){var $,se,fe=H,ge=Object.keys(fe),De=this._customItems,Ne=Object.keys(De),Be=ge.filter(function(Le){return!Ne.includes(Le)||fe[Le]!==De[Le]}),He=Ne.filter(function(Le){return!ge.includes(Le)});this._setCustomItems(H),Be.length>0&&(this._dispatchEvent("onCustomItemsUpdated",this,Be),($=this.onCustomItemsUpdated)===null||$===void 0||$.call(this,this,Be)),He.length>0&&(this._dispatchEvent("onCustomItemsDeleted",this,He),(se=this.onCustomItemsDeleted)===null||se===void 0||se.call(this,this,He))}}},{kind:"method",key:"_passToPeerConnection",value:function(y){switch(y.type){case J.CANDIDATE:var w=Ir.createCandidate(y.payload.peerConnectionId,y.payload.candidate);this._rotatablePeerConnection.onEvent(w);break;case J.OFFER:var T=Ir.createOffer(y.payload.peerConnectionId,y.payload.sdp);this._rotatablePeerConnection.onEvent(T);break;case J.ANSWER:var A=Ir.createAnswer(y.payload.peerConnectionId,y.payload.sdp);this._rotatablePeerConnection.onEvent(A)}}},{kind:"method",key:"onEvent",value:function(y){switch(N.verbose("'onEvent' on ".concat(y.constructor.name)),y.type){case J.DIAL:this._dialed(y);break;case J.DIAL_ACK:this._dialSent(y);break;case J.DIAL_RCV:this._calleeDialReceived(y);break;case J.ACCEPT:this._receiveAccept(y);break;case J.ACCEPT_ACK:this._state.acceptSent(y);break;case J.OTHER_DEVICE_ACCEPTED:this._state.receiveAccepted();break;case J.CANCEL:this._canceled(y);break;case J.DECLINE:case J.END:case J.TIME_OUT:case J.NO_ANSWER:case J.CONNECTION_LOST:case J.UNKNOWN_END:this._state.receiveEnd(y);break;case J.CANCEL_ACK:case J.DECLINE_ACK:case J.END_ACK:case J.TIMEOUT_ACK:case J.NO_ANSWER_ACK:case J.CONNECTION_LOST_ACK:case J.UNKNOWN_END_ACK:this._state.endSent(y);break;case J.REMOVE_CANDIDATES:break;case J.AUDIO:this._receiveAudio(y);break;case J.VIDEO:this._receiveVideo(y);break;case J.HOLD:this._receiveHold(y);break;case J.CUSTOM_ITEMS_UPDATE:this._receiveCustomItemsUpdate(y);break;case J.CUSTOM_ITEMS_DELETE:this._receiveCustomItemsDelete(y);break;case J.RECORDING:this._receiveRecording(y);break;case J.TURN_CHANGED:this._receiveTurnChanged(y);break;case J.SNAPSHOT:this._receiveSnapshot(y);break;case J.CANDIDATE:this._passToPeerConnection(y);break;case J.OFFER:this._passToPeerConnection(y),this._state.type==="accepting"&&this._state.receiveOffer(),this._startedAt||this.startDuration();break;case J.ANSWER:this._passToPeerConnection(y),this._startedAt||this.startDuration();break;default:N.error(new Error("unhandled call event ".concat(y.type)))}}},{kind:"method",key:"_onAudioOutputChanged",value:(s=Ie(regeneratorRuntime.mark(function y(){var w,T,A,H,j;return regeneratorRuntime.wrap(function($){for(;;)switch($.prev=$.next){case 0:return j=this._ctx.deviceManager.getCurrentAudioOutputDevice(),$.next=3,(w=this._localMediaView)===null||w===void 0||(T=w.setSinkId)===null||T===void 0?void 0:T.call(w,j.deviceId);case 3:return $.next=5,(A=this._remoteMediaView)===null||A===void 0||(H=A.setSinkId)===null||H===void 0?void 0:H.call(A,j.deviceId);case 5:case"end":return $.stop()}},y,this)})),function(){return s.apply(this,arguments)})},{kind:"method",key:"_onLocalStream",value:function(){var y=this._getLocalStream();this._localMediaView&&(this._localMediaView.srcObject=y);var w,T=mt(y.getTracks());try{for(T.s();!(w=T.n()).done;){var A,H=w.value;H.enabled=(A=this._isMediaEnabled)===null||A===void 0?void 0:A.call(this,H.kind)}}catch(j){T.e(j)}finally{T.f()}}},{kind:"method",key:"_onRemoteStream",value:function(){this._remoteMediaView&&(this._remoteMediaView.srcObject=this._pc.remoteStream)}},{kind:"method",key:"calcCallSetupTime",value:function(){this._logManager.summary.onConnected()}},{kind:"method",key:"setIsReconnected",value:function(y){this._isReconnected=y,this._logManager.summary.increaseReconnectedCount()}},{kind:"method",key:"_isMediaEnabled",value:function(y){switch(y){case"audio":return this._localConstraints.audio&&!this.isOnHold;case"video":return this._localConstraints.video&&!this.isOnHold;default:return N.error(new Error("unrecognized media type ".concat(y))),!1}}},{kind:"method",key:"_updateLocalMediaView",value:(o=Ie(regeneratorRuntime.mark(function y(w){return regeneratorRuntime.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(this._localMediaView!==w){T.next=2;break}return T.abrupt("return");case 2:if(this._localMediaView&&(this._localMediaView.srcObject=null),w){T.next=6;break}return this._localMediaView=null,T.abrupt("return");case 6:return T.next=8,this._updateMediaView(w,this._getLocalStream());case 8:this._localMediaView=T.sent;case 9:case"end":return T.stop()}},y,this)})),function(y){return o.apply(this,arguments)})},{kind:"method",key:"_updateRemoteMediaView",value:(r=Ie(regeneratorRuntime.mark(function y(w){var T;return regeneratorRuntime.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(this._remoteMediaView!==w){A.next=2;break}return A.abrupt("return");case 2:if(this._remoteMediaView&&(this._remoteMediaView.srcObject=null),w){A.next=6;break}return this._remoteMediaView=null,A.abrupt("return");case 6:return A.next=8,this._updateMediaView(w,(T=this._pc)===null||T===void 0?void 0:T.remoteStream);case 8:this._remoteMediaView=A.sent;case 9:case"end":return A.stop()}},y,this)})),function(y){return r.apply(this,arguments)})},{kind:"method",key:"_updateMediaView",value:(t=Ie(regeneratorRuntime.mark(function y(w,T){var A,H;return regeneratorRuntime.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(!(A=this._ctx.deviceManager.getCurrentAudioOutputDevice())){j.next=4;break}return j.next=4,(H=w.setSinkId)===null||H===void 0?void 0:H.call(w,A.deviceId);case 4:return T&&(w.srcObject=T),j.abrupt("return",w);case 6:case"end":return j.stop()}},y,this)})),function(y,w){return t.apply(this,arguments)})},{kind:"method",key:"_getLocalStream",value:function(){return this._localStream.localStream}},{kind:"method",key:"_releaseLocalStream",value:function(){this._localStream&&(this._localStream.removeAllEventListeners(),this._localStream.release())}}]}},hC),c0=function(){function e(n){var t=n.ringingTimeout,r=n.callConnectionTimeout,o=n.statsInterval;b(this,e),this._ringingTimeout=t,this._callConnectionTimeout=r,this._statsInterval=o}return x(e,[{key:"ringingTimeoutValue",get:function(){return this._ringingTimeout}},{key:"callConnectionTimeoutValue",get:function(){return this._callConnectionTimeout}},{key:"statsIntervalValue",get:function(){return this._statsInterval}}]),e}(),d0=function(){function e(n){b(this,e),this._ctx=n,this.options={ringingTimeout:6e4,callConnectionTimeout:6e4,statsInterval:3e3}}return x(e,[{key:"createDirectCall",value:function(){return new l0(this._ctx,new c0(this.options))}},{key:"setRingingTimeout",value:function(n){typeof n=="number"&&n>0&&(this.options.ringingTimeout=1e3*n)}},{key:"setStatsInterval",value:function(n){if(typeof n=="number"){var t=n;t<1&&(t=1),t>60&&(t=60),this.options.statsInterval=1e3*t}}},{key:"setCallConnectionTimeout",value:function(n){typeof n=="number"&&n>0&&(this.options.callConnectionTimeout=1e3*n)}}]),e}(),f0=function e(n){var t;b(this,e),this.audioEnabled=n.is_audio_enabled,this.videoEnabled=n.is_video_enabled,this.customItems=(t=n.custom_items)===null||t===void 0?void 0:t.custom_items},h0=function(){function e(n){b(this,e),this.callId=n.call_id,this.callType=n.call_type,this.userRole=n.user_role,this.callerClientId=n.caller_client_id,this.calleeClientId=n.callee_client_id,this.signalSeq=n.signal_seq.map(Qe.parse).filter(function(t){return!!t}),this.signalSnapshot=new f0(n.signal_snapshot)}return x(e,[{key:"getAcceptResponse",value:function(){return this.signalSeq.find(function(n){return n.type===J.ACCEPT_ACK})}},{key:"getDeclineResponse",value:function(){return this.signalSeq.find(function(n){return n.type===J.DECLINE_ACK})}},{key:"commands",get:function(){return this.signalSeq}},{key:"snapshot",get:function(){return this.signalSnapshot}}]),e}(),p0=function(){function e(n){b(this,e),this._ctx=n,this._callFactory=new d0(n),this._calls=new Map,this.dialListeners=new Map}return x(e,[{key:"setRingingTimeout",value:function(n){this._callFactory.setRingingTimeout(n)}},{key:"setStatsInterval",value:function(n){this._callFactory.setStatsInterval(n)}},{key:"setCallConnectionTimeout",value:function(n){this._callFactory.setCallConnectionTimeout(n)}},{key:"getCall",value:function(n){return this._calls.get(n)}},{key:"_hasCall",value:function(n){return this._calls.has(n)}},{key:"getOngoingCalls",value:function(){return Nr(this._calls.values())}},{key:"getOngoingCallCount",value:function(){return Nr(this._calls.values()).reduce(function(n,t){return t.isOngoing?n+1:n},0)}},{key:"getActiveCallCount",value:function(){return Nr(this._calls.values()).reduce(function(n,t){return t.isOngoing&&!t.isOnHold?n+1:n},0)}},{key:"dial",value:function(n,t){var r=this,o=this._callFactory.createDirectCall();n.holdActiveCall?this.holdExcept(o):this.endExcept(o);var s=o.dial(n).then(function(){return r._register(o.callId,o),o}).catch(function(l){throw N.error(l),l});return t&&bn(s)(t),o}},{key:"holdExcept",value:function(n){var t,r=mt(this._calls.values());try{for(r.s();!(t=r.n()).done;){var o=t.value;o.callId===n.callId||o.isOnHold||o.hold()}}catch(s){r.e(s)}finally{r.f()}}},{key:"endExcept",value:function(n){var t,r=mt(this._calls.values());try{for(r.s();!(t=r.n()).done;){var o=t.value;o.callId!==n.callId&&o.end()}}catch(s){r.e(s)}finally{r.f()}}},{key:"onEvent",value:function(n){switch(n.type){case J.DIAL:this._onCallDialed(n);break;case J.CANCEL:this._hasCall(n.getCallId())?this._passToCall(n):this._onCallCanceled(n);break;case hp.CONNECTED:this._requestCommandLists();break;default:this._passToCall(n)}}},{key:"addListener",value:function(n,t){this.dialListeners.set(n,t)}},{key:"removeListener",value:function(n){this.dialListeners.delete(n)}},{key:"removeAllListeners",value:function(){this.dialListeners.clear()}},{key:"clear",value:function(){var n,t=mt(this._calls.values());try{for(t.s();!(n=t.n()).done;){var r=n.value;try{r.end()}catch{N.error("failed to clear call.")}}}catch(o){t.e(o)}finally{t.f()}this._calls.clear()}},{key:"_register",value:function(n,t){if(!n)throw new Error("call id is not set in call");if(!t)throw new Error("call is null");this._calls.set(n,t)}},{key:"_sendDialReceiveCommand",value:function(n){var t=Qe.createDialReceive(n.getCallId(),n.deliveryInfo,n.receivedType,n.payload.shortLivedToken);return this._ctx.sender.send(t).catch(function(){})}},{key:"_onCallDialed",value:function(n){var t=this,r=this._callFactory.createDirectCall();this._sendDialReceiveCommand(n),this._register(n.getCallId(),r),r.onRinging=function(){return t._onCallRinging(r)},this._passToCall(n)}},{key:"_onCallCanceled",value:function(n){var t=this,r=this._callFactory.createDirectCall();this._register(n.getCallId(),r),r.onRinging=function(){return t._onCallRinging(r)},this._passToCall(n)}},{key:"_onCallRinging",value:function(n){var t,r=mt(this.dialListeners.values());try{for(r.s();!(t=r.n()).done;){var o=t.value;o.onRinging&&o.onRinging(n)}}catch(s){r.e(s)}finally{r.f()}}},{key:"_requestCommandLists",value:function(){var n=this;N.verbose("request command list");var t=Array.from(this._calls.keys()).filter(function(o){return!n._calls.get(o).isEnded}),r=Qe.createCommandList(t);this._retrieveCommands(r)}},{key:"_retrieveCommands",value:function(n){var t=this;return this._ctx.sender.send(n).then(function(r){N.verbose("commandLists is received.");var o=r.call_signal.map(function(s){return new h0(s)});t._ctx.sender.processCommandLists(o)}).catch(function(r){N.debug("failed to get commandLists",r)})}},{key:"_passToCall",value:function(n){this._hasCall(n.getCallId())?this._calls.get(n.getCallId()).onEvent(n):N.debug("received command ".concat(n.type," for non-existing call ").concat(n.getCallId()))}}]),e}(),Bn=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||Bn!==void 0&&Bn,cr={searchParams:"URLSearchParams"in Bn,iterable:"Symbol"in Bn&&"iterator"in Symbol,blob:"FileReader"in Bn&&"Blob"in Bn&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in Bn,arrayBuffer:"ArrayBuffer"in Bn};if(cr.arrayBuffer)var _0=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m0=ArrayBuffer.isView||function(e){return e&&_0.indexOf(Object.prototype.toString.call(e))>-1};function qd(e){if(typeof e!="string"&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||e==="")throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function cm(e){return typeof e!="string"&&(e=String(e)),e}function dm(e){var n={next:function(){var t=e.shift();return{done:t===void 0,value:t}}};return cr.iterable&&(n[Symbol.iterator]=function(){return n}),n}function gn(e){this.map={},e instanceof gn?e.forEach(function(n,t){this.append(t,n)},this):Array.isArray(e)?e.forEach(function(n){this.append(n[0],n[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(n){this.append(n,e[n])},this)}function fm(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function yy(e){return new Promise(function(n,t){e.onload=function(){n(e.result)},e.onerror=function(){t(e.error)}})}function v0(e){var n=new FileReader,t=yy(n);return n.readAsArrayBuffer(e),t}function Ey(e){if(e.slice)return e.slice(0);var n=new Uint8Array(e.byteLength);return n.set(new Uint8Array(e)),n.buffer}function ky(){return this.bodyUsed=!1,this._initBody=function(e){var n;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?typeof e=="string"?this._bodyText=e:cr.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:cr.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:cr.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():cr.arrayBuffer&&cr.blob&&(n=e)&&DataView.prototype.isPrototypeOf(n)?(this._bodyArrayBuffer=Ey(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):cr.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||m0(e))?this._bodyArrayBuffer=Ey(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||(typeof e=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):cr.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},cr.blob&&(this.blob=function(){var e=fm(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=fm(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(v0)}),this.text=function(){var e=fm(this);if(e)return e;if(this._bodyBlob)return function(n){var t=new FileReader,r=yy(t);return t.readAsText(n),r}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(n){for(var t=new Uint8Array(n),r=new Array(t.length),o=0;o<t.length;o++)r[o]=String.fromCharCode(t[o]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},cr.formData&&(this.formData=function(){return this.text().then(y0)}),this.json=function(){return this.text().then(JSON.parse)},this}gn.prototype.append=function(e,n){e=qd(e),n=cm(n);var t=this.map[e];this.map[e]=t?t+", "+n:n},gn.prototype.delete=function(e){delete this.map[qd(e)]},gn.prototype.get=function(e){return e=qd(e),this.has(e)?this.map[e]:null},gn.prototype.has=function(e){return this.map.hasOwnProperty(qd(e))},gn.prototype.set=function(e,n){this.map[qd(e)]=cm(n)},gn.prototype.forEach=function(e,n){for(var t in this.map)this.map.hasOwnProperty(t)&&e.call(n,this.map[t],t,this)},gn.prototype.keys=function(){var e=[];return this.forEach(function(n,t){e.push(t)}),dm(e)},gn.prototype.values=function(){var e=[];return this.forEach(function(n){e.push(n)}),dm(e)},gn.prototype.entries=function(){var e=[];return this.forEach(function(n,t){e.push([t,n])}),dm(e)},cr.iterable&&(gn.prototype[Symbol.iterator]=gn.prototype.entries);var g0=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function mu(e,n){if(!(this instanceof mu))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var t,r,o=(n=n||{}).body;if(e instanceof mu){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,n.headers||(this.headers=new gn(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,o||e._bodyInit==null||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=n.credentials||this.credentials||"same-origin",!n.headers&&this.headers||(this.headers=new gn(n.headers)),this.method=(t=n.method||this.method||"GET",r=t.toUpperCase(),g0.indexOf(r)>-1?r:t),this.mode=n.mode||this.mode||null,this.signal=n.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&o)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(o),!(this.method!=="GET"&&this.method!=="HEAD"||n.cache!=="no-store"&&n.cache!=="no-cache")){var s=/([?&])_=[^&]*/;s.test(this.url)?this.url=this.url.replace(s,"$1_="+new Date().getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}function y0(e){var n=new FormData;return e.trim().split("&").forEach(function(t){if(t){var r=t.split("="),o=r.shift().replace(/\+/g," "),s=r.join("=").replace(/\+/g," ");n.append(decodeURIComponent(o),decodeURIComponent(s))}}),n}function $i(e,n){if(!(this instanceof $i))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');n||(n={}),this.type="default",this.status=n.status===void 0?200:n.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in n?n.statusText:"",this.headers=new gn(n.headers),this.url=n.url||"",this._initBody(e)}mu.prototype.clone=function(){return new mu(this,{body:this._bodyInit})},ky.call(mu.prototype),ky.call($i.prototype),$i.prototype.clone=function(){return new $i(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new gn(this.headers),url:this.url})},$i.error=function(){var e=new $i(null,{status:0,statusText:""});return e.type="error",e};var E0=[301,302,303,307,308];$i.redirect=function(e,n){if(E0.indexOf(n)===-1)throw new RangeError("Invalid status code");return new $i(null,{status:n,headers:{location:e}})};var Gl=Bn.DOMException;try{new Gl}catch{(Gl=function(n,t){this.message=n,this.name=t;var r=Error(n);this.stack=r.stack}).prototype=Object.create(Error.prototype),Gl.prototype.constructor=Gl}function hm(e,n){return new Promise(function(t,r){var o=new mu(e,n);if(o.signal&&o.signal.aborted)return r(new Gl("Aborted","AbortError"));var s=new XMLHttpRequest;function l(){s.abort()}s.onload=function(){var f,h,_={status:s.status,statusText:s.statusText,headers:(f=s.getAllResponseHeaders()||"",h=new gn,f.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(E){return E.indexOf(`
`)===0?E.substr(1,E.length):E}).forEach(function(E){var y=E.split(":"),w=y.shift().trim();if(w){var T=y.join(":").trim();h.append(w,T)}}),h)};_.url="responseURL"in s?s.responseURL:_.headers.get("X-Request-URL");var k="response"in s?s.response:s.responseText;setTimeout(function(){t(new $i(k,_))},0)},s.onerror=function(){setTimeout(function(){r(new TypeError("Network request failed"))},0)},s.ontimeout=function(){setTimeout(function(){r(new TypeError("Network request failed"))},0)},s.onabort=function(){setTimeout(function(){r(new Gl("Aborted","AbortError"))},0)},s.open(o.method,function(f){try{return f===""&&Bn.location.href?Bn.location.href:f}catch{return f}}(o.url),!0),o.credentials==="include"?s.withCredentials=!0:o.credentials==="omit"&&(s.withCredentials=!1),"responseType"in s&&(cr.blob?s.responseType="blob":cr.arrayBuffer&&o.headers.get("Content-Type")&&o.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(s.responseType="arraybuffer")),!n||typeof n.headers!="object"||n.headers instanceof gn?o.headers.forEach(function(f,h){s.setRequestHeader(h,f)}):Object.getOwnPropertyNames(n.headers).forEach(function(f){s.setRequestHeader(f,cm(n.headers[f]))}),o.signal&&(o.signal.addEventListener("abort",l),s.onreadystatechange=function(){s.readyState===4&&o.signal.removeEventListener("abort",l)}),s.send(o._bodyInit===void 0?null:o._bodyInit)})}hm.polyfill=!0,Bn.fetch||(Bn.fetch=hm,Bn.Headers=gn,Bn.Request=mu,Bn.Response=$i);var k0=function(){var e,n;return(e=window)!==null&&e!==void 0&&e.fetch?(n=window).fetch.apply(n,arguments):hm.apply(void 0,arguments)},wy=function(){function e(){b(this,e)}return x(e,null,[{key:"getOsVersion",value:function(){return typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.replace(/,/g,"."):"undefined"}}]),e}(),Cy=function(e){F(t,e);var n=U(t);function t(){return b(this,t),n.apply(this,arguments)}return t}(nr),w0=function(){function e(t){var r;b(this,e),this._ctx=t,this._fetch=k0,this._sessionKey=null,this._hostUrl=(r=this._ctx.apiHost)!==null&&r!==void 0?r:"https://api-IDENTIFIER.calls.sendbird.com".replace("IDENTIFIER",this._ctx.appId)}var n;return x(e,[{key:"setSessionKey",value:function(t){this._sessionKey=t}},{key:"clearSessionKey",value:function(){this._sessionKey=null}},{key:"send",value:(n=Ie(regeneratorRuntime.mark(function t(r){var o,s,l,f,h,_,k;return regeneratorRuntime.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(r.getApiOption){E.next=2;break}throw new Error("invalid api request ".concat(JSON.stringify(r)));case 2:if(!(o=r.getApiOption()).auth||this._sessionKey){E.next=5;break}throw new Error("tried to call private api without auth");case 5:return(s=Ct({"Content-Type":"application/json"},o.headers)).SendBird="JS,".concat(wy.getOsVersion(),",").concat(Hr),s["SBCall-Client-Id"]=this._ctx.clientId,this._sessionKey&&(s["SBCall-Session-Token"]=this._sessionKey),E.next=11,this._fetch("".concat(this._getHost()).concat(o.path),{method:o.method,body:JSON.stringify(o.body),headers:s});case 11:return l=E.sent,E.next=14,l.text();case 14:f=E.sent,h=null,E.prev=16,h=JSON.parse(f),E.next=23;break;case 20:throw E.prev=20,E.t0=E.catch(16),new ze(Y.ERR_MALFORMED_DATA);case 23:if(l.ok){E.next=33;break}if(!h.error){E.next=28;break}throw new Cy(h.code,{message:h.message});case 28:if(l.status!==500){E.next=30;break}throw new ze(Y.INTERNAL_SERVER_ERROR);case 30:if(!(l.status>=300&&l.status<400)){E.next=32;break}throw new ze(Y.ERR_MALFORMED_DATA);case 32:throw new ze(Y.ERR_REQUEST_FAILED);case 33:if(!(r instanceof Dt)){E.next=36;break}return _=Nt.parseResponse(r.type,h),E.abrupt("return",_);case 36:if(!h.cmd){E.next=39;break}return k=Qe.parse(h),E.abrupt("return",k);case 39:return E.abrupt("return",h);case 40:case"end":return E.stop()}},t,this,[[16,20]])})),function(t){return n.apply(this,arguments)})},{key:"_getHost",value:function(){return this._hostUrl}}]),e}(),C0=function(){function e(){b(this,e)}return x(e,[{key:"parseToJson",value:function(n){try{return JSON.parse(n)}catch(t){return N.error("failed to parse JSON message",t),{}}}},{key:"validate",value:function(n){var t=n.cmd,r=n.request_id,o=n.call_type;return!!(r||t||o)}},{key:"parseCommand",value:function(n){return n.error?{isValid:!0,error:{requestId:n.request_id,message:n.message,code:n.code}}:n.call_type==="room"?{isValid:!0,command:Nt.parse(n)}:{isValid:!0,command:Qe.parse(n)}}},{key:"parse",value:function(n){var t=this.parseToJson(n);return this.validate(t)?this.parseCommand(t):{isValid:!1}}}]),e}(),R0=function(){function e(n){var t;b(this,e),this._ctx=n,this._ws=null,this._retryTimer=null,this._closed=!0,this._sessionKey=null,this._requestMap=new Cd(this._getTimeoutTime()),this._messageParser=new C0,this._hostUrl=(t=this._ctx.websocketHost)!==null&&t!==void 0?t:"wss://ws-IDENTIFIER.calls.sendbird.com".replace("IDENTIFIER",this._ctx.appId)}return x(e,[{key:"connect",value:function(){var n=this;return new Promise(function(t,r){var o;n._sessionKey||r(new Error("tried to connect to websocket server without auth")),((o=n._ws)===null||o===void 0?void 0:o.readyState)===0&&r(new Error("websocket is reconnecting already")),n._disconnect(),n._ws=n._createWebSocket(),n._closed=!1,n._ws.onopen=function(){n._onOpen(),t(null)},n._ws.onmessage=function(s){var l=n._messageParser.parse(s.data),f=l.isValid,h=l.error,_=l.command;f&&(h?n._processError(h):n.processCommand(_))},n._ws.onerror=function(s){return n._onError(s)},n._ws.onclose=function(){n._onClose(),r(new ze(Y.ERR_WEBSOCKET_CONNECTION_FAILED))}})}},{key:"_processError",value:function(n){var t=n.requestId,r=n.code,o=n.message,s=this._requestMap.unregister(t);s&&(N.debug(t,n.message),s.reject(new Cy(r,{message:o})))}},{key:"processCommand",value:function(n){var t=this._ctx.router;if(n instanceof Ln)t.routeDirectCallPeerCommand(n,Ze.WS);else if(n instanceof bl){var r=this._requestMap.unregister(n.requestId);if(!r)return;t.routeDirectCallResponseCommand(n,r)}else n instanceof uv?t.routeDirectCallServerCommand(n,Ze.WS):n instanceof Ag?t.routeLogServerCommand(n):n instanceof ed?t.routeServerCommand(n):n instanceof pl&&t.routePeerCommand(n)}},{key:"setSessionKey",value:function(n){this._sessionKey=n}},{key:"clearSessionKey",value:function(){this._disconnect(),this._sessionKey=null}},{key:"_disconnect",value:function(){this._ws&&(this._closed=!0,this._removeRetryTimer(),this._ws.onopen=null,this._ws.onmessage=null,this._ws.onerror=null,this._ws.onclose=null,this._ws.close(),this._requestMap.rejectAll(new ze(Y.ERR_REQUEST_FAILED_DUE_TO_WEBSOCKET_CONNECTION_LOST)),this._ws=null)}},{key:"send",value:function(n){var t=n.requireResponse()?this._requestMap.register(n.requestId).promise:Promise.resolve(),r=n.serialize();return this._ws.send("".concat(r,`
`)),t}},{key:"_onOpen",value:function(){this._ctx.router.routeWebSocketInternalCommand(Qe.createWebSocketConnectedCommand())}},{key:"_onError",value:function(n){N.error(n)}},{key:"_onClose",value:function(){this.startToReconnect()}},{key:"_createWebSocket",value:function(){var n="/?sbcall_session_token=".concat(encodeURIComponent(this._sessionKey),"&sbcall_client_id=").concat(encodeURIComponent(this._ctx.clientId),"&sendbird=").concat(encodeURIComponent(this._getVersion()));return new WebSocket(this._getHost()+n)}},{key:"_getVersion",value:function(){return"JS,".concat(wy.getOsVersion(),",").concat(Hr)}},{key:"_getHost",value:function(){return this._hostUrl}},{key:"startToReconnect",value:function(){this._closed||this._retryTimer||(this._retryTimer=setTimeout(this._reconnect.bind(this),this._getRetryTime()))}},{key:"_reconnect",value:function(){var n=this;this._removeRetryTimer(),qs(new Ks(5e3,1e3,void 0),function(){return n.connect()},{onError:function(t){N.error("Fail reconnect WebSocket ErrorCode = ".concat(t.code))}})}},{key:"_removeRetryTimer",value:function(){this._retryTimer&&(clearTimeout(this._retryTimer),this._retryTimer=null)}},{key:"_getTimeoutTime",value:function(){return 6e4}},{key:"_getRetryTime",value:function(){return 2e3}},{key:"isConnected",get:function(){return!!this._ws&&this._ws.readyState===1}}]),e}(),I0=function(){function e(r){b(this,e),this._ctx=r,this.wsClient=new R0(r),this.apiClient=new w0(r)}var n,t;return x(e,[{key:"connectWs",value:function(){return this.wsClient.connect()}},{key:"reconnectWs",value:function(){return this.wsClient.startToReconnect()}},{key:"sendAPI",value:function(r){return this.apiClient.send(r)}},{key:"sendWs",value:function(r){return this.wsClient.send(r)}},{key:"send",value:(t=Ie(regeneratorRuntime.mark(function r(o){return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!(o instanceof vn)){s.next=11;break}if(o.sendStrategy!==Fe.API){s.next=3;break}return s.abrupt("return",this.sendAPI(o));case 3:if(o.sendStrategy!==Fe.WS){s.next=7;break}if(!this.wsClient.isConnected){s.next=6;break}return s.abrupt("return",this.sendWs(o));case 6:throw new ze(Y.ERR_WEBSOCKET_CONNECTION_NOT_OPENED);case 7:if(o.sendStrategy!==Fe.BOTH){s.next=11;break}if(!this.wsClient.isConnected){s.next=10;break}return s.abrupt("return",this.sendWs(o));case 10:case 11:return s.abrupt("return",this.sendAPI(o));case 12:case"end":return s.stop()}},r,this)})),function(r){return t.apply(this,arguments)})},{key:"sendWithRetry",value:(n=Ie(regeneratorRuntime.mark(function r(o){var s,l,f,h,_,k,E=this,y=arguments;return regeneratorRuntime.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return s=y.length>1&&y[1]!==void 0?y[1]:new wd,l=y.length>2&&y[2]!==void 0?y[2]:{count:0,deferred:new Il},f=l.deferred,h=l.count,w.prev=3,w.next=6,this.send(o);case 6:_=w.sent,f.resolve(_),w.next=14;break;case 10:w.prev=10,w.t0=w.catch(3),(k=s.calcTimeout(h))>0?setTimeout(function(){E.sendWithRetry(o,s,{count:h+1,deferred:f})},k):f.reject(w.t0);case 14:return w.abrupt("return",f.promise);case 15:case"end":return w.stop()}},r,this,[[3,10]])})),function(r){return n.apply(this,arguments)})},{key:"_setSessionKey",value:function(r){this.apiClient.setSessionKey(r),this.wsClient.setSessionKey(r)}},{key:"authenticate",value:function(r){var o=this,s=r.userId,l=r.accessToken,f=Qe.createAuthRequest(this._ctx.appId,s,l);return this.send(f).then(function(h){o._setSessionKey(h.sbcall_session_token);var _=sn(h.user);return{user:new gt(_),statsInterval:h.stats_interval}}).catch(function(h){throw N.error("failed to authenticate user ".concat(s)),h})}},{key:"deauthenticate",value:function(){this.apiClient.clearSessionKey(),this.wsClient.clearSessionKey()}},{key:"processCommandLists",value:function(r){var o,s=mt(r);try{for(s.s();!(o=s.n()).done;){var l=o.value;if(l.userRole!==yr.CALLER||this._ctx.clientId===l.callerClientId){if(l.userRole===yr.CALLEE&&this._ctx.clientId!==l.calleeClientId){var f=l.getAcceptResponse();if(f){var h=f.payload.callId,_=Qe.createAccepted(h);this._ctx.router.routeDirectCallPeerCommand(_,Ze.WS);continue}var k=l.getDeclineResponse();if(k){var E=k.payload,y=E.callId,w=E.endedCall,T=Qe.createDeclined(y,w);this._ctx.router.routeDirectCallInternalCommand(T)}}var A=l.commands,H=l.snapshot;N.verbose("process commandList. length: ".concat(A.length));var j,$=mt(A);try{for($.s();!(j=$.n()).done;){var se=j.value;this.wsClient.processCommand(se)}}catch(ge){$.e(ge)}finally{$.f()}var fe=Qe.createSnapshot(l.callId,H);this._ctx.router.routeDirectCallInternalCommand(fe)}}}catch(ge){s.e(ge)}finally{s.f()}}}]),e}(),S0=function(e){F(t,e);var n=U(t);function t(r,o){var s;return b(this,t),(s=n.call(this))._recordId=Bs(),s._blobs=[],s._mediaRecorder=new MediaRecorder(r,o),s._mediaRecorder.ondataavailable=function(l){l.data&&l.data.size>0&&s._blobs.push(l.data)},s._mediaRecorder.onstart=function(){return s._onStart()},s._mediaRecorder.onstop=function(){return s._onStop()},s._mediaRecorder.onpause=function(){return s._onPause()},s._mediaRecorder.onresume=function(){return s._onResume()},s._mediaRecorder.onerror=function(){return s._onError()},s}return x(t,[{key:"startRecording",value:function(){try{this._mediaRecorder.start()}catch(r){return N.error("start recording failed with error : ",r),!1}return!0}},{key:"stopRecording",value:function(){try{this._mediaRecorder.stop()}catch(r){return N.error("stop recording failed with error : ",r),!1}return!0}},{key:"_onStart",value:function(){this._dispatchEvent("start")}},{key:"_onStop",value:function(){this._dispatchEvent("stop"),this._onRecordingSucceeded(new Blob(this._blobs))}},{key:"_onPause",value:function(){this._dispatchEvent("pause")}},{key:"_onResume",value:function(){this._dispatchEvent("resume")}},{key:"_onError",value:function(){this._dispatchEvent("error"),this._onRecordingFailed(new ze(Y.ERR_FAILED_TO_STOP_RECORDING))}},{key:"_onRecordingSucceeded",value:function(r){this._dispatchEvent("succeeded",r)}},{key:"_onRecordingFailed",value:function(r){this._dispatchEvent("failed",r)}},{key:"recordId",get:function(){return this._recordId}},{key:"recordingStatus",get:function(){return this._mediaRecorder.state==="recording"?G.RECORDING:G.NONE}}]),t}(pn),T0=function(){function e(){b(this,e),this._listeners=new Map,this._recorders=new Map}return x(e,[{key:"getRecord",value:function(n){return this._recorders.get(n)}},{key:"addListener",value:function(n,t){this._listeners.set(n,t)}},{key:"removeListener",value:function(n){this._listeners.delete(n)}},{key:"removeAllListeners",value:function(){this._listeners.clear()}},{key:"_fireOnSucceeded",value:function(n,t){this._listeners.forEach(function(r){r.onRecordingSucceeded&&r.onRecordingSucceeded(t.callId,n,t.recordingOptions,t.fileName)})}},{key:"_fireOnFailed",value:function(n,t,r){this._listeners.forEach(function(o){o.onRecordingFailed&&o.onRecordingFailed(t.callId,n,r)})}},{key:"startRecording",value:function(n,t,r){var o=this,s=new S0(n,t);if(s.startRecording())return this._recorders.set(s.recordId,s),s.on("succeeded",function(l){Wl.downloadRecordedFile(l,r.fileName),o._fireOnSucceeded(s.recordId,r)}),s.on("failed",function(l){o._fireOnFailed(s.recordId,r,l)}),s}},{key:"stopRecording",value:function(n){if(this._recorders.size>0){var t=this._recorders.get(n);return!!t&&t.stopRecording()}return!1}},{key:"listeners",get:function(){return this._listeners}}]),e}(),A0=function(){function e(){b(this,e),this.processed=new Map}return x(e,[{key:"process",value:function(n){return!n.messageId||(this._isProcessed(n)?(this.processed.delete(n.messageId),!1):(this._setProcessed(n),!0))}},{key:"_isProcessed",value:function(n){return this.processed.has(n.messageId)}},{key:"_setProcessed",value:function(n){this.processed.set(n.messageId,!0)}}]),e}(),O0=function(){function e(){b(this,e),this.lastSeqNumber=-1,this.queue=new Map}var n,t;return x(e,[{key:"insert",value:(t=Ie(regeneratorRuntime.mark(function r(o,s){return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(this.lastSeqNumber>=o.sequenceNumber)){l.next=2;break}return l.abrupt("return");case 2:return this.queue.set(o.sequenceNumber,{command:o,handler:s}),N.verbose("".concat(o.constructor.name," is inserted")),l.next=6,this.flush();case 6:case"end":return l.stop()}},r,this)})),function(r,o){return t.apply(this,arguments)})},{key:"flush",value:(n=Ie(regeneratorRuntime.mark(function r(){var o,s,l,f;return regeneratorRuntime.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:N.verbose("try flushing sequence queue"),o=this.next();case 2:if(!o){h.next=10;break}return l=(s=o).command,f=s.handler,N.verbose("flush ".concat(l.constructor.name)),h.next=7,f(l);case 7:o=this.next(),h.next=2;break;case 10:case"end":return h.stop()}},r,this)})),function(){return n.apply(this,arguments)})},{key:"next",value:function(){var r=this.lastSeqNumber+1;if(this.queue.has(r)){var o=this.queue.get(r),s=o.command,l=o.handler;return this.queue.delete(r),this.lastSeqNumber=r,{command:s,handler:l}}return null}}]),e}(),b0=function(){function e(){b(this,e),this.sequences=new Map,this.lock=new Jc}var n;return x(e,[{key:"insert",value:(n=Ie(regeneratorRuntime.mark(function t(r,o){var s,l,f;return regeneratorRuntime.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,this.lock.acquire();case 2:if(h.prev=2,N.verbose("try to insert in SequenceManager with ".concat(r.constructor.name)),s=r.getCallId(),r.isSequential()&&s){h.next=10;break}return N.verbose("not sequential; immediately flush ".concat(r.constructor.name)),this.lock.release(),o(r),h.abrupt("return");case 10:if(!this.sequences.has(s)){h.next=16;break}return l=this.sequences.get(s),h.next=14,l.insert(r,o);case 14:h.next=20;break;case 16:return f=new O0,this.sequences.set(s,f),h.next=20,f.insert(r,o);case 20:h.next=25;break;case 22:h.prev=22,h.t0=h.catch(2),N.warning("failed to SequenceManager.insert()",h.t0);case 25:return h.prev=25,this.lock.release(),h.finish(25);case 28:case"end":return h.stop()}},t,this,[[2,22,25,28]])})),function(t,r){return n.apply(this,arguments)})}]),e}(),D0=function(e){F(t,e);var n=U(t);function t(){var r;return b(this,t),(r=n.call(this))._sequenceManager=new b0,r._eventDeduplicator=new A0,r}return x(t,[{key:"routeWebSocketInternalCommand",value:function(r){this._dispatchEvent("webSocketInternal",r)}},{key:"routeLogServerCommand",value:function(r){this._dispatchEvent("logServer",r)}},{key:"routeDirectCallInternalCommand",value:function(r){this._dispatchEvent("directCallInternal",r)}},{key:"routeDirectCallPeerCommand",value:function(r,o){var s=this;this._eventDeduplicator.process(r)&&(r.receivedType=o,this._sequenceManager.insert(r,function(l){s._dispatchEvent("directCallPeer",l)}))}},{key:"routeDirectCallResponseCommand",value:function(r,o){this._sequenceManager.insert(r,function(){var s=Ie(regeneratorRuntime.mark(function l(f){return regeneratorRuntime.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return o.resolve(f),h.abrupt("return",o.promise);case 2:case"end":return h.stop()}},l)}));return function(l){return s.apply(this,arguments)}}())}},{key:"routeDirectCallServerCommand",value:function(r,o){var s=this;this._eventDeduplicator.process(r)&&(r.receivedType=o,this._sequenceManager.insert(r,function(l){s._dispatchEvent("directCallServer",l)}))}},{key:"routeServerCommand",value:function(r){r instanceof Yp&&this._dispatchEvent("roomServer",r)}},{key:"routePeerCommand",value:function(r){r instanceof Dn&&this._dispatchEvent("roomPeer",r)}}]),t}(pn),N0=function(){function e(t,r,o){b(this,e),this.isLoading=!1,this.hasNext=!0,this.userId=t,this.params=r,this.sender=o,this.nextToken=null}var n;return x(e,[{key:"next",value:(n=Ie(regeneratorRuntime.mark(function t(r){var o,s=this;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!this.isLoading){l.next=2;break}throw new ze(Y.ERR_QUERY_IN_PROGRESS);case 2:if(this.hasNext){l.next=4;break}return l.abrupt("return",[]);case 4:return this.isLoading=!0,o=this.sender.send(this._createCommand()).then(function(f){return s.nextToken=f.next,s.hasNext=f.has_next,s.isLoading=!1,f.calls.map(function(h){return new fp(h,!0)})}),r&&bn(o)(r),l.abrupt("return",o);case 8:case"end":return l.stop()}},t,this)})),function(t){return n.apply(this,arguments)})},{key:"_createCommand",value:function(){return new hk(this.userId,this.params,this.nextToken)}}]),e}(),x0=function(){function e(o,s,l){b(this,e),this.isLoading=!1,this.params=o,this.sender=s,this.roomManager=l,this.prevToken=null,this.nextToken=null}var n,t,r;return x(e,[{key:"next",value:(r=Ie(regeneratorRuntime.mark(function o(){return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!this.isLoading){s.next=2;break}throw new ze(Y.ERR_QUERY_IN_PROGRESS);case 2:if(this.hasNext){s.next=4;break}return s.abrupt("return",[]);case 4:return s.abrupt("return",this._sendQueryCommand(null,this.nextToken));case 5:case"end":return s.stop()}},o,this)})),function(){return r.apply(this,arguments)})},{key:"prev",value:(t=Ie(regeneratorRuntime.mark(function o(){return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!this.isLoading){s.next=2;break}throw new ze(Y.ERR_QUERY_IN_PROGRESS);case 2:if(this.hasPrev){s.next=4;break}return s.abrupt("return",[]);case 4:return s.abrupt("return",this._sendQueryCommand(this.prevToken,null));case 5:case"end":return s.stop()}},o,this)})),function(){return t.apply(this,arguments)})},{key:"_sendQueryCommand",value:(n=Ie(regeneratorRuntime.mark(function o(s,l){var f,h,_,k=this;return regeneratorRuntime.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(!s||!l){E.next=2;break}throw new Error("internal error while creating RoomListQueryCommand");case 2:return f=Nt.createRoomListQuery(this.params,s,l),E.next=5,this.sender.send(f);case 5:return h=E.sent,_=h.payload,this.isLoading=!0,this.prevToken=_.prev,this.nextToken=_.next,this.isLoading=!1,E.prev=11,E.abrupt("return",Promise.all(_.rooms.map(function(y){return k.roomManager.deserializeRoom(y)})));case 15:return E.prev=15,E.t0=E.catch(11),E.abrupt("return",_.rooms);case 18:case"end":return E.stop()}},o,this,[[11,15]])})),function(o,s){return n.apply(this,arguments)})},{key:"hasPrev",get:function(){return!!this.prevToken}},{key:"hasNext",get:function(){return!this.prevToken&&!this.nextToken||!!this.nextToken}}]),e}(),vu="active",$l="passive",gu="hidden",yu="frozen",pm="terminated",Ry=function(){return typeof window<"u"&&Wu(window.safari)==="object"&&window.safari.pushNotification},L0=function(){return["focus","blur","visibilitychange","freeze","resume","pageshow","onpageshow"in window?"pagehide":"unload"]},P0=[[vu,$l,gu,pm],[vu,$l,gu,yu],[gu,$l,vu],[yu,gu],[yu,vu],[yu,$l]].map(function(e){return e.reduce(function(n,t,r){return n[t]=r,n},{})}),Ep=function(){return typeof document>"u"?$l:document.visibilityState===gu?gu:document.hasFocus()?vu:$l},M0=function(e){F(t,e);var n=U(t);function t(){var r;return b(this,t),(r=n.call(this))._state=Ep(),r._handleEvents=r._handleEvents.bind(ee(r)),L0().forEach(function(o){return addEventListener(o,r._handleEvents,!0)}),Ry()&&addEventListener("beforeunload",function(o){r._safariBeforeUnloadTimeout=setTimeout(function(){o.defaultPrevented||o.returnValue.length>0||r._dispatchChangesIfNeeded(o,gu)},0)}),r}return x(t,[{key:"_dispatchChangesIfNeeded",value:function(r,o){if(o!==this._state)for(var s=function(_,k){for(var E,y=0;E=P0[y];++y){var w=E[_],T=E[k];if(w>=0&&T>=0&&T>w)return Object.keys(E).slice(w,T+1)}return[]}(this._state,o),l=0;l<s.length-1;++l){var f=s[l],h=s[l+1];this._state=h,this._dispatchEvent("statechange",{oldState:f,newState:h,originalEvent:r})}}},{key:"_handleEvents",value:function(r){switch(Ry()&&clearTimeout(this._safariBeforeUnloadTimeout),r.type){case"pageshow":case"resume":this._dispatchChangesIfNeeded(r,Ep());break;case"focus":this._dispatchChangesIfNeeded(r,vu);break;case"blur":this._state===vu&&this._dispatchChangesIfNeeded(r,Ep());break;case"pagehide":case"unload":this._dispatchChangesIfNeeded(r,r.persisted?yu:pm);break;case"visibilitychange":this._state!==yu&&this._state!==pm&&this._dispatchChangesIfNeeded(r,Ep());break;case"freeze":this._dispatchChangesIfNeeded(r,yu)}}},{key:"state",get:function(){return this._state}},{key:"pageWasDiscarded",get:function(){return typeof document<"u"&&(document.wasDiscarded||!1)}}]),t}(pn),F0=function(e){F(t,e);var n=U(t);function t(){var r;return b(this,t),(r=n.call(this))._currentState="active",r._lifecycle=new M0,r}return x(t,[{key:"_onStateChanged",value:function(r){r.newState!=="hidden"?this._currentState==="hidden"&&this._dispatchEvent("resume"):this._currentState!=="hidden"&&this._dispatchEvent("pause"),this._currentState=r.newState}},{key:"start",value:function(){var r=this;this._lifecycle.addEventListener("statechange",function(o){return r._onStateChanged(o)})}},{key:"stop",value:function(){var r=this;this._lifecycle.removeEventListener("statechange",function(o){return r._onStateChanged(o)})}}]),t}(pn),U0=function(){function e(n,t,r){if(b(this,e),Z(this,"_ctx",{}),this._appId=n,this._apiHost=t,this._websocketHost=r,!n)throw new hn(Y.INVALID_PARAMETER_VALUE,{invalidParameter:"appId"});this._ctx.appId=n,this._ctx.apiHost=t,this._ctx.websocketHost=r,this._user=null,this._visibilityDetector=new F0,this.init()}return x(e,[{key:"init",value:function(){this._ctx.clientId=Bs();var n=new D0;this._ctx.router=n,this._ctx.sender=new I0(this._ctx),this._ctx.deviceManager=new a,this._ctx.recordingManager=new T0,this._ctx.soundManager=new be;var t=new p0(this._ctx);this._ctx.callManager=t,this._callManager=t;var r=new W(this._ctx);this._roomManager=r,n.on("directCallInternal",function(s){return t.onEvent(s)}),n.on("directCallPeer",function(s){return t.onEvent(s)}),n.on("directCallServer",function(s){return t.onEvent(s)}),n.on("webSocketInternal",function(s){return t.onEvent(s)}),n.on("roomServer",function(s){return r.onEvent(s)}),n.on("roomPeer",function(s){return r.onEvent(s)});var o=new lC(this._ctx);N.logCollector=o,n.on("logServer",function(s){return o.onEvent(s)})}},{key:"_checkAuthed",value:function(){if(!this.currentUser)throw new hn(Y.USER_NOT_AUTHENTICATED)}},{key:"authenticate",value:function(n,t){var r=this,o=n.userId,s=n.accessToken;if(N.info("authenticate()"),!o)throw new hn(Y.INVALID_PARAMETER_VALUE,{invalidParameter:"userId"});var l=this._ctx.sender.authenticate({userId:o,accessToken:s}).then(function(f){return r._user=f.user,r._callManager.setStatsInterval(f.statsInterval),r._user});return t&&bn(l)(t),l}},{key:"deauthenticate",value:function(){N.info("deauthenticate()"),this._callManager&&this._callManager.clear(),this._roomManager&&this._roomManager.clear(),this._visibilityDetector.stop(),this._visibilityDetector.removeAllEventListeners(),this._ctx.sender.deauthenticate(),this._user=null}},{key:"connectWebSocket",value:function(){var n=this;return this._visibilityDetector.start(),this._visibilityDetector.on("resume",function(){n._ctx.sender.reconnectWs(),n._ctx.deviceManager.updateStream()}),this._ctx.sender.connectWs()}},{key:"handleWebhookData",value:function(n){var t=n.sendbird_call;if(!t)throw new ze(Y.ERR_MALFORMED_DATA);if(!t.cmd)throw new ze(Y.ERR_MALFORMED_DATA);var r=Qe.parse(t);r instanceof Ln&&this._ctx.router.routeDirectCallPeerCommand(r,Ze.WEBHOOK)}},{key:"addListener",value:function(n,t){if(!t)throw new hn(Y.INVALID_PARAMETER_VALUE,{invalidParameter:"listener"});this._callManager.addListener(n,t),this._roomManager.addListener(n,t),this._ctx.deviceManager.addSendBirdCallListener(n,t)}},{key:"removeListener",value:function(n){this._callManager.removeListener(n),this._roomManager.removeListener(n),this._ctx.deviceManager.removeSendBirdCallListener(n)}},{key:"removeAllListeners",value:function(){this._callManager.removeAllListeners(),this._ctx.deviceManager.removeAllSendBirdCallListener()}},{key:"addRecordingListener",value:function(n,t){this._ctx.recordingManager.addListener(n,t)}},{key:"removeRecordingListener",value:function(n){this._ctx.recordingManager.removeListener(n)}},{key:"removeAllRecordingListeners",value:function(){this._ctx.recordingManager.removeAllListeners()}},{key:"useMedia",value:function(n){return this._ctx.deviceManager.useMedia(n)}},{key:"updateMediaDevices",value:function(n){return this._ctx.deviceManager.refreshMediaDevices(n)}},{key:"getCurrentAudioInputDevice",value:function(){return this._ctx.deviceManager.getCurrentAudioInputDevice()}},{key:"getAvailableAudioInputDevices",value:function(){return this._ctx.deviceManager.getAvailableAudioInputDevices()}},{key:"selectAudioInputDevice",value:function(n){return this._ctx.deviceManager.selectDevice("audioinput",n)}},{key:"getCurrentAudioOutputDevice",value:function(){return this._ctx.deviceManager.getCurrentAudioOutputDevice()}},{key:"getAvailableAudioOutputDevices",value:function(){return this._ctx.deviceManager.getAvailableAudioOutputDevices()}},{key:"selectAudioOutputDevice",value:function(n){return this._ctx.deviceManager.selectDevice("audiooutput",n)}},{key:"getCurrentVideoInputDevice",value:function(){return this._ctx.deviceManager.getCurrentVideoInputDevice()}},{key:"getAvailableVideoInputDevices",value:function(){return this._ctx.deviceManager.getAvailableVideoInputDevices()}},{key:"selectVideoInputDevice",value:function(n){return this._ctx.deviceManager.selectDevice("videoinput",n)}},{key:"getCall",value:function(n){return this._callManager.getCall(n)}},{key:"getOngoingCalls",value:function(){return this._callManager.getOngoingCalls()}},{key:"getOngoingCallCount",value:function(){return this._callManager.getOngoingCallCount()}},{key:"setRingingTimeout",value:function(n){this._callManager.setRingingTimeout(n)}},{key:"setCallConnectionTimeout",value:function(n){this._callManager.setCallConnectionTimeout(n)}},{key:"isPlaying",value:function(n){return this._ctx.soundManager.isPlaying(n)}},{key:"addDirectCallSound",value:function(n,t){return this._ctx.soundManager.loadSound(n,t)}},{key:"removeDirectCallSound",value:function(n){return this._ctx.soundManager.unloadSound(n)}},{key:"dial",value:function(n,t){N.info("dial()"),this._checkAuthed();var r=n.userId;if(this._user.userId===r)throw new Xh(Y.MY_USER_ID_NOT_ALLOWED);return this._callManager.dial(n,t)}},{key:"updateCustomItems",value:function(n,t,r){var o=Xn(Fr(t,r),2)[1];if(o)return o;var s=this._callManager.getCall(n);if(!s){var l=Qe.createUpdateCustomItems(n,t),f=this._ctx.sender.send(l).then(function(h){return{customItems:h.custom_items,affectedKeys:h.updated}}).catch(function(h){throw N.error("failed to update customItems"),h});return r&&bn(f)(r),f}return s.updateCustomItems(t,r)}},{key:"deleteCustomItems",value:function(n,t,r){var o=Xn(ko(t,r),2)[1];if(o)return o;var s=this._callManager.getCall(n);if(!s){var l=Qe.createDeleteCustomItems(n,t),f=this._ctx.sender.send(l).then(function(h){return{customItems:h.custom_items,affectedKeys:h.deleted}}).catch(function(h){throw N.error("failed to delete customItems"),h});return r&&bn(f)(r),f}return s.deleteCustomItems(t,r)}},{key:"deleteAllCustomItems",value:function(n,t){var r=this._callManager.getCall(n);if(!r){var o=Qe.createDeleteAllCustomItems(n),s=this._ctx.sender.send(o).then(function(l){return{customItems:l.custom_items,affectedKeys:l.deleted}}).catch(function(l){throw N.error("failed to delete all customItems"),l});return t&&bn(s)(t),s}return r.deleteAllCustomItems(t)}},{key:"createDirectCallLogListQuery",value:function(n){return new N0(this._user.userId,n,this._ctx.sender)}},{key:"createRoom",value:function(n){return this._roomManager.createRoom(n)}},{key:"getCachedRoomById",value:function(n){return this._roomManager.getCachedRoomById(n)}},{key:"fetchRoomById",value:function(n){return this._roomManager.fetchRoomById(n)}},{key:"createRoomListQuery",value:function(n){return new x0(n,this._ctx.sender,this._roomManager)}},{key:"registerPushToken",value:function(n,t){if(!n)throw new hn(Y.INVALID_PARAMETER_VALUE,{invalidParameter:"pushToken"});if(!t)throw new hn(Y.INVALID_PARAMETER_VALUE,{invalidParameter:"tokenType"});var r=Qe.createRegisterPushToken(this._user.userId,n,t);return this._ctx.sender.send(r).then(function(){}).catch(function(o){throw N.error("failed to register the user's push token"),o})}},{key:"unregisterPushToken",value:function(n,t){if(!n)throw new hn(Y.INVALID_PARAMETER_VALUE,{invalidParameter:"pushToken"});if(!t)throw new hn(Y.INVALID_PARAMETER_VALUE,{invalidParameter:"tokenType"});var r=Qe.createUnregisterPushToken(this._user.userId,n,t);return this._ctx.sender.send(r).then(function(){}).catch(function(o){throw N.error("failed to unregister the user's push token"),o})}},{key:"unregisterAllPushTokens",value:function(n){if(!n)throw new hn(Y.INVALID_PARAMETER_VALUE,{invalidParameter:"tokenType"});var t=Qe.createUnregisterAllPushTokens(this._user.userId,n);return this._ctx.sender.send(t).then(function(){}).catch(function(r){throw N.error("failed to unregister the user's all push token"),r})}},{key:"appId",get:function(){return this._appId}},{key:"currentUser",get:function(){return this._user}},{key:"dialListeners",get:function(){return this._callManager.dialListeners}},{key:"recordingListeners",get:function(){return this._ctx.recordingManager.listeners}}]),e}(),Pe=null;function Ge(){if(!Pe)throw new hn(Y.INSTANCE_NOT_INITIALIZED)}var V0=Ic(null,function(e){var n=function t(){b(this,t),e(this)};return{F:n,d:[{kind:"get",static:!0,key:"sdkVersion",value:function(){return Hr}},{kind:"get",static:!0,key:"LoggerLevel",value:function(){return V}},{kind:"method",static:!0,key:"setLoggerLevel",value:function(t){return N.setLoggerLevel(tn[t])}},{kind:"get",static:!0,key:"SoundType",value:function(){return Ee}},{kind:"get",static:!0,key:"RoomType",value:function(){return g}},{kind:"get",static:!0,key:"RoomState",value:function(){return Ce}},{kind:"get",static:!0,key:"DirectCallUserRole",value:function(){return yr}},{kind:"get",static:!0,key:"DirectCallEndResult",value:function(){return nt}},{kind:"get",static:!0,key:"DirectCallOption",value:function(){return cl}},{kind:"get",static:!0,key:"DirectCallRecordOption",value:function(){return Er}},{kind:"get",static:!0,key:"RecordingType",value:function(){return Gt}},{kind:"get",static:!0,key:"ErrorCode",value:function(){return Y}},{kind:"get",static:!0,key:"TokenType",value:function(){return he}},{kind:"get",static:!0,key:"ConnectionQualityMonitoringMode",value:function(){return qn}},{kind:"get",static:!0,key:"ConnectionQualityState",value:function(){return gr}},{kind:"method",static:!0,key:"init",value:function(t,r,o){if(!t)throw new hn(Y.INVALID_PARAMETER_VALUE,{invalidParameter:"appId"});if(function(){if(typeof window>"u"){var h="SendBirdCall needs 'window' in global";throw N.error(h),h}if(window.RTCPeerConnection===void 0){var _="SendBirdCall needs 'RTCPeerConnection' in global";throw N.error(_),_}var k=window.location,E=k.protocol,y=k.hostname;if(E!=="file:"&&E!=="https:"&&y!=="127.0.0.1"&&y!=="localhost"){var w="SendBirdCall needs https connection, except for 'localhost' or '127.0.0.1'";throw N.error(w),w}if(window.RTCPeerConnection.prototype.addTrack===void 0||window.RTCPeerConnection.prototype.getSenders===void 0){var T="SendBirdCall can't support the browser using legacy WebRTC module";throw N.error(T),T}}(),Pe&&Pe.appId===t)return!1;var s=null,l=null,f=null;return Pe&&(Pe.deauthenticate(),l=new Map(Pe.dialListeners),f=new Map(Pe.recordingListeners),Pe.removeAllListeners(),Pe.removeAllRecordingListeners(),s=Pe),Pe=new U0(t,r,o),s&&(l.forEach(function(h,_){Pe.addListener(_,h)}),f.forEach(function(h,_){Pe.addRecordingListener(_,h)})),!0}},{kind:"get",static:!0,key:"appId",value:function(){var t;return(t=Pe)===null||t===void 0?void 0:t.appId}},{kind:"get",static:!0,key:"currentUser",value:function(){var t;return(t=Pe)===null||t===void 0?void 0:t.currentUser}},{kind:"method",static:!0,key:"authenticate",value:function(t,r){Ge();var o=t.userId,s=t.accessToken;return Pe&&Pe.currentUser&&Pe.currentUser.userId!==o&&n.deauthenticate(),Pe.authenticate({userId:o,accessToken:s},r)}},{kind:"method",static:!0,key:"deauthenticate",value:function(){Ge(),Pe.deauthenticate()}},{kind:"method",static:!0,key:"connectWebSocket",value:function(){return Ge(),Pe.connectWebSocket()}},{kind:"method",static:!0,key:"handleWebhookData",value:function(t){Ge(),Pe.handleWebhookData(t)}},{kind:"method",static:!0,key:"addListener",value:function(t,r){Ge(),Pe.addListener(t,r)}},{kind:"method",static:!0,key:"removeListener",value:function(t){Ge(),Pe.removeListener(t)}},{kind:"method",static:!0,key:"removeAllListeners",value:function(){Ge(),Pe.removeAllListeners()}},{kind:"method",static:!0,key:"addRecordingListener",value:function(t,r){Ge(),Pe.addRecordingListener(t,r)}},{kind:"method",static:!0,key:"removeRecordingListener",value:function(t){Ge(),Pe.removeRecordingListener(t)}},{kind:"method",static:!0,key:"removeAllRecordingListeners",value:function(){Ge(),Pe.removeAllRecordingListeners()}},{kind:"method",static:!0,key:"useMedia",value:function(t){return Ge(),Pe.useMedia(t)}},{kind:"method",static:!0,key:"updateMediaDevices",value:function(t){return Ge(),Pe.updateMediaDevices(t)}},{kind:"method",static:!0,key:"getCurrentAudioInputDevice",value:function(){return Ge(),Pe.getCurrentAudioInputDevice()}},{kind:"method",static:!0,key:"getAvailableAudioInputDevices",value:function(){return Ge(),Pe.getAvailableAudioInputDevices()}},{kind:"method",static:!0,key:"selectAudioInputDevice",value:function(t){return Ge(),Pe.selectAudioInputDevice(t)}},{kind:"method",static:!0,key:"getCurrentAudioOutputDevice",value:function(){return Ge(),Pe.getCurrentAudioOutputDevice()}},{kind:"method",static:!0,key:"getAvailableAudioOutputDevices",value:function(){return Ge(),Pe.getAvailableAudioOutputDevices()}},{kind:"method",static:!0,key:"selectAudioOutputDevice",value:function(t){return Ge(),Pe.selectAudioOutputDevice(t)}},{kind:"method",static:!0,key:"getCurrentVideoInputDevice",value:function(){return Ge(),Pe.getCurrentVideoInputDevice()}},{kind:"method",static:!0,key:"getAvailableVideoInputDevices",value:function(){return Ge(),Pe.getAvailableVideoInputDevices()}},{kind:"method",static:!0,key:"selectVideoInputDevice",value:function(t){return Ge(),Pe.selectVideoInputDevice(t)}},{kind:"method",static:!0,key:"getCall",value:function(t){return Ge(),Pe.getCall(t)}},{kind:"method",static:!0,key:"getOngoingCalls",value:function(){return Ge(),Pe.getOngoingCalls()}},{kind:"method",static:!0,key:"getOngoingCallCount",value:function(){return Ge(),Pe.getOngoingCallCount()}},{kind:"method",static:!0,key:"setRingingTimeout",value:function(t){Ge(),Pe.setRingingTimeout(t)}},{kind:"method",static:!0,key:"setCallConnectionTimeout",value:function(t){Ge(),Pe.setCallConnectionTimeout(t)}},{kind:"method",static:!0,key:"isPlaying",value:function(t){return Ge(),Pe.isPlaying(t)}},{kind:"method",static:!0,key:"addDirectCallSound",value:function(t,r){return Ge(),Pe.addDirectCallSound(t,r)}},{kind:"method",static:!0,key:"removeDirectCallSound",value:function(t){return Ge(),Pe.removeDirectCallSound(t)}},{kind:"method",decorators:[xe(xe.messages.CALL_IS_NOT_SUPPORTED)],static:!0,key:"dial",value:function(t,r){return Ge(),Pe.dial(t,r)}},{kind:"method",static:!0,key:"updateCustomItems",value:function(t,r,o){return Ge(),Pe.updateCustomItems(t,r,o)}},{kind:"method",static:!0,key:"deleteCustomItems",value:function(t,r,o){return Ge(),Pe.deleteCustomItems(t,r,o)}},{kind:"method",static:!0,key:"deleteAllCustomItems",value:function(t,r){return Ge(),Pe.deleteAllCustomItems(t,r)}},{kind:"method",static:!0,key:"createDirectCallLogListQuery",value:function(t){return Ge(),Pe.createDirectCallLogListQuery(t)}},{kind:"method",static:!0,key:"createRoom",value:function(t){return Ge(),Pe.createRoom(t)}},{kind:"method",static:!0,key:"getCachedRoomById",value:function(t){return Ge(),Pe.getCachedRoomById(t)}},{kind:"method",static:!0,key:"fetchRoomById",value:function(t){return Ge(),Pe.fetchRoomById(t)}},{kind:"method",static:!0,key:"createRoomListQuery",value:function(t){return Ge(),Pe.createRoomListQuery(t)}},{kind:"method",static:!0,key:"registerPushToken",value:function(t,r){return Ge(),Pe.registerPushToken(t,r)}},{kind:"method",static:!0,key:"unregisterPushToken",value:function(t,r){return Ge(),Pe.unregisterPushToken(t,r)}},{kind:"method",static:!0,key:"unregisterAllPushTokens",value:function(t){return Ge(),Pe.unregisterAllPushTokens(t)}}]}});return V0})}(Sp)),Sp.exports}var CI=wI();const Cp=dE(CI);function RI(){const d=Wm(),[p,v]=q.useState(null),[C,R]=q.useState(null);q.useEffect(()=>{typeof window<"u"&&(v(window.sessionStorage.getItem("u_id")||null),R(window.sessionStorage.getItem("gender_type")||null))},[]);const S=()=>{d(C==="MALE"?"/man-chat-list":"/chat-list")},O=()=>{d(C==="MALE"?"/man-info":"/woman-setting")},L=()=>{d("/home")};return ce.jsx("footer",{style:{height:"60px",backgroundColor:"#fff",borderTop:"1px solid #ddd",display:"flex",alignItems:"center",position:"fixed",bottom:"0px",width:"100%"},children:ce.jsx("div",{style:{width:"100%"},children:ce.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[C!=="FEMALE"&&ce.jsxs("div",{style:{flex:"0 0 33.33%",textAlign:"center",cursor:"pointer"},onClick:L,children:[ce.jsx("div",{children:ce.jsx("i",{className:"mdi mdi-home-variant",style:{color:"#dd8ea4",fontSize:"28px"}})}),ce.jsx("div",{children:ce.jsx("span",{style:{color:"#dd8ea4",fontSize:"12px"},children:"探索"})})]}),ce.jsxs("div",{style:{flex:"0 0 33.33%",textAlign:"center",cursor:"pointer"},onClick:S,children:[ce.jsx("div",{children:ce.jsx("i",{className:"mdi mdi-chat-processing-outline",style:{color:"#dd8ea4",fontSize:"28px"}})}),ce.jsx("div",{children:ce.jsx("span",{style:{color:"#dd8ea4",fontSize:"12px"},children:"聊天"})})]}),ce.jsxs("div",{style:{flex:"0 0 33.33%",textAlign:"center",cursor:"pointer"},onClick:O,children:[ce.jsx("div",{children:ce.jsx("i",{className:"mdi mdi-account",style:{color:"#dd8ea4",fontSize:"28px"}})}),ce.jsx("div",{children:ce.jsx("span",{style:{color:"#dd8ea4",fontSize:"12px"},children:"個人"})})]})]})})})}var Wy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE=function(d){const p=[];let v=0;for(let C=0;C<d.length;C++){let R=d.charCodeAt(C);R<128?p[v++]=R:R<2048?(p[v++]=R>>6|192,p[v++]=R&63|128):(R&64512)===55296&&C+1<d.length&&(d.charCodeAt(C+1)&64512)===56320?(R=65536+((R&1023)<<10)+(d.charCodeAt(++C)&1023),p[v++]=R>>18|240,p[v++]=R>>12&63|128,p[v++]=R>>6&63|128,p[v++]=R&63|128):(p[v++]=R>>12|224,p[v++]=R>>6&63|128,p[v++]=R&63|128)}return p},II=function(d){const p=[];let v=0,C=0;for(;v<d.length;){const R=d[v++];if(R<128)p[C++]=String.fromCharCode(R);else if(R>191&&R<224){const S=d[v++];p[C++]=String.fromCharCode((R&31)<<6|S&63)}else if(R>239&&R<365){const S=d[v++],O=d[v++],L=d[v++],M=((R&7)<<18|(S&63)<<12|(O&63)<<6|L&63)-65536;p[C++]=String.fromCharCode(55296+(M>>10)),p[C++]=String.fromCharCode(56320+(M&1023))}else{const S=d[v++],O=d[v++];p[C++]=String.fromCharCode((R&15)<<12|(S&63)<<6|O&63)}}return p.join("")},OE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(d,p){if(!Array.isArray(d))throw Error("encodeByteArray takes an array as a parameter");this.init_();const v=p?this.byteToCharMapWebSafe_:this.byteToCharMap_,C=[];for(let R=0;R<d.length;R+=3){const S=d[R],O=R+1<d.length,L=O?d[R+1]:0,M=R+2<d.length,z=M?d[R+2]:0,Q=S>>2,X=(S&3)<<4|L>>4;let ne=(L&15)<<2|z>>6,ue=z&63;M||(ue=64,O||(ne=64)),C.push(v[Q],v[X],v[ne],v[ue])}return C.join("")},encodeString(d,p){return this.HAS_NATIVE_SUPPORT&&!p?btoa(d):this.encodeByteArray(AE(d),p)},decodeString(d,p){return this.HAS_NATIVE_SUPPORT&&!p?atob(d):II(this.decodeStringToByteArray(d,p))},decodeStringToByteArray(d,p){this.init_();const v=p?this.charToByteMapWebSafe_:this.charToByteMap_,C=[];for(let R=0;R<d.length;){const S=v[d.charAt(R++)],L=R<d.length?v[d.charAt(R)]:0;++R;const z=R<d.length?v[d.charAt(R)]:64;++R;const X=R<d.length?v[d.charAt(R)]:64;if(++R,S==null||L==null||z==null||X==null)throw new SI;const ne=S<<2|L>>4;if(C.push(ne),z!==64){const ue=L<<4&240|z>>2;if(C.push(ue),X!==64){const de=z<<6&192|X;C.push(de)}}}return C},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let d=0;d<this.ENCODED_VALS.length;d++)this.byteToCharMap_[d]=this.ENCODED_VALS.charAt(d),this.charToByteMap_[this.byteToCharMap_[d]]=d,this.byteToCharMapWebSafe_[d]=this.ENCODED_VALS_WEBSAFE.charAt(d),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[d]]=d,d>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(d)]=d,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(d)]=d)}}};class SI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const TI=function(d){const p=AE(d);return OE.encodeByteArray(p,!0)},bE=function(d){return TI(d).replace(/\./g,"")},AI=function(d){try{return OE.decodeString(d,!0)}catch(p){console.error("base64Decode failed: ",p)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI=()=>OI().__FIREBASE_DEFAULTS__,DI=()=>{if(typeof process>"u"||typeof Wy>"u")return;const d=Wy.__FIREBASE_DEFAULTS__;if(d)return JSON.parse(d)},NI=()=>{if(typeof document>"u")return;let d;try{d=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const p=d&&AI(d[1]);return p&&JSON.parse(p)},xI=()=>{try{return bI()||DI()||NI()}catch(d){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${d}`);return}},DE=()=>{var d;return(d=xI())===null||d===void 0?void 0:d.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((p,v)=>{this.resolve=p,this.reject=v})}wrapCallback(p){return(v,C)=>{v?this.reject(v):this.resolve(C),typeof p=="function"&&(this.promise.catch(()=>{}),p.length===1?p(v):p(v,C))}}}function NE(){try{return typeof indexedDB=="object"}catch{return!1}}function xE(){return new Promise((d,p)=>{try{let v=!0;const C="validate-browser-context-for-indexeddb-analytics-module",R=self.indexedDB.open(C);R.onsuccess=()=>{R.result.close(),v||self.indexedDB.deleteDatabase(C),d(!0)},R.onupgradeneeded=()=>{v=!1},R.onerror=()=>{var S;p(((S=R.error)===null||S===void 0?void 0:S.message)||"")}}catch(v){p(v)}})}function PI(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI="FirebaseError";class Xl extends Error{constructor(p,v,C){super(v),this.code=p,this.customData=C,this.name=MI,Object.setPrototypeOf(this,Xl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Np.prototype.create)}}class Np{constructor(p,v,C){this.service=p,this.serviceName=v,this.errors=C}create(p,...v){const C=v[0]||{},R=`${this.service}/${p}`,S=this.errors[p],O=S?FI(S,C):"Error",L=`${this.serviceName}: ${O} (${R}).`;return new Xl(R,L,C)}}function FI(d,p){return d.replace(UI,(v,C)=>{const R=p[C];return R!=null?String(R):`<${C}?>`})}const UI=/\{\$([^}]+)}/g;function Pm(d,p){if(d===p)return!0;const v=Object.keys(d),C=Object.keys(p);for(const R of v){if(!C.includes(R))return!1;const S=d[R],O=p[R];if(Gy(S)&&Gy(O)){if(!Pm(S,O))return!1}else if(S!==O)return!1}for(const R of C)if(!v.includes(R))return!1;return!0}function Gy(d){return d!==null&&typeof d=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(d){return d&&d._delegate?d._delegate:d}class Wo{constructor(p,v,C){this.name=p,this.instanceFactory=v,this.type=C,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(p){return this.instantiationMode=p,this}setMultipleInstances(p){return this.multipleInstances=p,this}setServiceProps(p){return this.serviceProps=p,this}setInstanceCreatedCallback(p){return this.onInstanceCreated=p,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ku="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(p,v){this.name=p,this.container=v,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(p){const v=this.normalizeInstanceIdentifier(p);if(!this.instancesDeferred.has(v)){const C=new LI;if(this.instancesDeferred.set(v,C),this.isInitialized(v)||this.shouldAutoInitialize())try{const R=this.getOrInitializeService({instanceIdentifier:v});R&&C.resolve(R)}catch{}}return this.instancesDeferred.get(v).promise}getImmediate(p){var v;const C=this.normalizeInstanceIdentifier(p==null?void 0:p.identifier),R=(v=p==null?void 0:p.optional)!==null&&v!==void 0?v:!1;if(this.isInitialized(C)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:C})}catch(S){if(R)return null;throw S}else{if(R)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(p){if(p.name!==this.name)throw Error(`Mismatching Component ${p.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=p,!!this.shouldAutoInitialize()){if(BI(p))try{this.getOrInitializeService({instanceIdentifier:ku})}catch{}for(const[v,C]of this.instancesDeferred.entries()){const R=this.normalizeInstanceIdentifier(v);try{const S=this.getOrInitializeService({instanceIdentifier:R});C.resolve(S)}catch{}}}}clearInstance(p=ku){this.instancesDeferred.delete(p),this.instancesOptions.delete(p),this.instances.delete(p)}async delete(){const p=Array.from(this.instances.values());await Promise.all([...p.filter(v=>"INTERNAL"in v).map(v=>v.INTERNAL.delete()),...p.filter(v=>"_delete"in v).map(v=>v._delete())])}isComponentSet(){return this.component!=null}isInitialized(p=ku){return this.instances.has(p)}getOptions(p=ku){return this.instancesOptions.get(p)||{}}initialize(p={}){const{options:v={}}=p,C=this.normalizeInstanceIdentifier(p.instanceIdentifier);if(this.isInitialized(C))throw Error(`${this.name}(${C}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const R=this.getOrInitializeService({instanceIdentifier:C,options:v});for(const[S,O]of this.instancesDeferred.entries()){const L=this.normalizeInstanceIdentifier(S);C===L&&O.resolve(R)}return R}onInit(p,v){var C;const R=this.normalizeInstanceIdentifier(v),S=(C=this.onInitCallbacks.get(R))!==null&&C!==void 0?C:new Set;S.add(p),this.onInitCallbacks.set(R,S);const O=this.instances.get(R);return O&&p(O,R),()=>{S.delete(p)}}invokeOnInitCallbacks(p,v){const C=this.onInitCallbacks.get(v);if(C)for(const R of C)try{R(p,v)}catch{}}getOrInitializeService({instanceIdentifier:p,options:v={}}){let C=this.instances.get(p);if(!C&&this.component&&(C=this.component.instanceFactory(this.container,{instanceIdentifier:jI(p),options:v}),this.instances.set(p,C),this.instancesOptions.set(p,v),this.invokeOnInitCallbacks(C,p),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,p,C)}catch{}return C||null}normalizeInstanceIdentifier(p=ku){return this.component?this.component.multipleInstances?p:ku:p}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jI(d){return d===ku?void 0:d}function BI(d){return d.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(p){this.name=p,this.providers=new Map}addComponent(p){const v=this.getProvider(p.name);if(v.isComponentSet())throw new Error(`Component ${p.name} has already been registered with ${this.name}`);v.setComponent(p)}addOrOverwriteComponent(p){this.getProvider(p.name).isComponentSet()&&this.providers.delete(p.name),this.addComponent(p)}getProvider(p){if(this.providers.has(p))return this.providers.get(p);const v=new VI(p,this);return this.providers.set(p,v),v}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt;(function(d){d[d.DEBUG=0]="DEBUG",d[d.VERBOSE=1]="VERBOSE",d[d.INFO=2]="INFO",d[d.WARN=3]="WARN",d[d.ERROR=4]="ERROR",d[d.SILENT=5]="SILENT"})(Vt||(Vt={}));const HI={debug:Vt.DEBUG,verbose:Vt.VERBOSE,info:Vt.INFO,warn:Vt.WARN,error:Vt.ERROR,silent:Vt.SILENT},WI=Vt.INFO,GI={[Vt.DEBUG]:"log",[Vt.VERBOSE]:"log",[Vt.INFO]:"info",[Vt.WARN]:"warn",[Vt.ERROR]:"error"},$I=(d,p,...v)=>{if(p<d.logLevel)return;const C=new Date().toISOString(),R=GI[p];if(R)console[R](`[${C}]  ${d.name}:`,...v);else throw new Error(`Attempted to log a message with an invalid logType (value: ${p})`)};class qI{constructor(p){this.name=p,this._logLevel=WI,this._logHandler=$I,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(p){if(!(p in Vt))throw new TypeError(`Invalid value "${p}" assigned to \`logLevel\``);this._logLevel=p}setLogLevel(p){this._logLevel=typeof p=="string"?HI[p]:p}get logHandler(){return this._logHandler}set logHandler(p){if(typeof p!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=p}get userLogHandler(){return this._userLogHandler}set userLogHandler(p){this._userLogHandler=p}debug(...p){this._userLogHandler&&this._userLogHandler(this,Vt.DEBUG,...p),this._logHandler(this,Vt.DEBUG,...p)}log(...p){this._userLogHandler&&this._userLogHandler(this,Vt.VERBOSE,...p),this._logHandler(this,Vt.VERBOSE,...p)}info(...p){this._userLogHandler&&this._userLogHandler(this,Vt.INFO,...p),this._logHandler(this,Vt.INFO,...p)}warn(...p){this._userLogHandler&&this._userLogHandler(this,Vt.WARN,...p),this._logHandler(this,Vt.WARN,...p)}error(...p){this._userLogHandler&&this._userLogHandler(this,Vt.ERROR,...p),this._logHandler(this,Vt.ERROR,...p)}}const KI=(d,p)=>p.some(v=>d instanceof v);let $y,qy;function QI(){return $y||($y=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function YI(){return qy||(qy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const LE=new WeakMap,Mm=new WeakMap,PE=new WeakMap,wm=new WeakMap,Ym=new WeakMap;function XI(d){const p=new Promise((v,C)=>{const R=()=>{d.removeEventListener("success",S),d.removeEventListener("error",O)},S=()=>{v(Na(d.result)),R()},O=()=>{C(d.error),R()};d.addEventListener("success",S),d.addEventListener("error",O)});return p.then(v=>{v instanceof IDBCursor&&LE.set(v,d)}).catch(()=>{}),Ym.set(p,d),p}function ZI(d){if(Mm.has(d))return;const p=new Promise((v,C)=>{const R=()=>{d.removeEventListener("complete",S),d.removeEventListener("error",O),d.removeEventListener("abort",O)},S=()=>{v(),R()},O=()=>{C(d.error||new DOMException("AbortError","AbortError")),R()};d.addEventListener("complete",S),d.addEventListener("error",O),d.addEventListener("abort",O)});Mm.set(d,p)}let Fm={get(d,p,v){if(d instanceof IDBTransaction){if(p==="done")return Mm.get(d);if(p==="objectStoreNames")return d.objectStoreNames||PE.get(d);if(p==="store")return v.objectStoreNames[1]?void 0:v.objectStore(v.objectStoreNames[0])}return Na(d[p])},set(d,p,v){return d[p]=v,!0},has(d,p){return d instanceof IDBTransaction&&(p==="done"||p==="store")?!0:p in d}};function JI(d){Fm=d(Fm)}function eS(d){return d===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(p,...v){const C=d.call(Cm(this),p,...v);return PE.set(C,p.sort?p.sort():[p]),Na(C)}:YI().includes(d)?function(...p){return d.apply(Cm(this),p),Na(LE.get(this))}:function(...p){return Na(d.apply(Cm(this),p))}}function tS(d){return typeof d=="function"?eS(d):(d instanceof IDBTransaction&&ZI(d),KI(d,QI())?new Proxy(d,Fm):d)}function Na(d){if(d instanceof IDBRequest)return XI(d);if(wm.has(d))return wm.get(d);const p=tS(d);return p!==d&&(wm.set(d,p),Ym.set(p,d)),p}const Cm=d=>Ym.get(d);function xp(d,p,{blocked:v,upgrade:C,blocking:R,terminated:S}={}){const O=indexedDB.open(d,p),L=Na(O);return C&&O.addEventListener("upgradeneeded",M=>{C(Na(O.result),M.oldVersion,M.newVersion,Na(O.transaction),M)}),v&&O.addEventListener("blocked",M=>v(M.oldVersion,M.newVersion,M)),L.then(M=>{S&&M.addEventListener("close",()=>S()),R&&M.addEventListener("versionchange",z=>R(z.oldVersion,z.newVersion,z))}).catch(()=>{}),L}function Rm(d,{blocked:p}={}){const v=indexedDB.deleteDatabase(d);return p&&v.addEventListener("blocked",C=>p(C.oldVersion,C)),Na(v).then(()=>{})}const nS=["get","getKey","getAll","getAllKeys","count"],rS=["put","add","delete","clear"],Im=new Map;function Ky(d,p){if(!(d instanceof IDBDatabase&&!(p in d)&&typeof p=="string"))return;if(Im.get(p))return Im.get(p);const v=p.replace(/FromIndex$/,""),C=p!==v,R=rS.includes(v);if(!(v in(C?IDBIndex:IDBObjectStore).prototype)||!(R||nS.includes(v)))return;const S=async function(O,...L){const M=this.transaction(O,R?"readwrite":"readonly");let z=M.store;return C&&(z=z.index(L.shift())),(await Promise.all([z[v](...L),R&&M.done]))[0]};return Im.set(p,S),S}JI(d=>({...d,get:(p,v,C)=>Ky(p,v)||d.get(p,v,C),has:(p,v)=>!!Ky(p,v)||d.has(p,v)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(p){this.container=p}getPlatformInfoString(){return this.container.getProviders().map(v=>{if(aS(v)){const C=v.getImmediate();return`${C.library}/${C.version}`}else return null}).filter(v=>v).join(" ")}}function aS(d){const p=d.getComponent();return(p==null?void 0:p.type)==="VERSION"}const Um="@firebase/app",Qy="0.11.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa=new qI("@firebase/app"),oS="@firebase/app-compat",sS="@firebase/analytics-compat",uS="@firebase/analytics",lS="@firebase/app-check-compat",cS="@firebase/app-check",dS="@firebase/auth",fS="@firebase/auth-compat",hS="@firebase/database",pS="@firebase/data-connect",_S="@firebase/database-compat",mS="@firebase/functions",vS="@firebase/functions-compat",gS="@firebase/installations",yS="@firebase/installations-compat",ES="@firebase/messaging",kS="@firebase/messaging-compat",wS="@firebase/performance",CS="@firebase/performance-compat",RS="@firebase/remote-config",IS="@firebase/remote-config-compat",SS="@firebase/storage",TS="@firebase/storage-compat",AS="@firebase/firestore",OS="@firebase/vertexai",bS="@firebase/firestore-compat",DS="firebase";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm="[DEFAULT]",NS={[Um]:"fire-core",[oS]:"fire-core-compat",[uS]:"fire-analytics",[sS]:"fire-analytics-compat",[cS]:"fire-app-check",[lS]:"fire-app-check-compat",[dS]:"fire-auth",[fS]:"fire-auth-compat",[hS]:"fire-rtdb",[pS]:"fire-data-connect",[_S]:"fire-rtdb-compat",[mS]:"fire-fn",[vS]:"fire-fn-compat",[gS]:"fire-iid",[yS]:"fire-iid-compat",[ES]:"fire-fcm",[kS]:"fire-fcm-compat",[wS]:"fire-perf",[CS]:"fire-perf-compat",[RS]:"fire-rc",[IS]:"fire-rc-compat",[SS]:"fire-gcs",[TS]:"fire-gcs-compat",[AS]:"fire-fst",[bS]:"fire-fst-compat",[OS]:"fire-vertex","fire-js":"fire-js",[DS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap=new Map,xS=new Map,jm=new Map;function Yy(d,p){try{d.container.addComponent(p)}catch(v){xa.debug(`Component ${p.name} failed to register with FirebaseApp ${d.name}`,v)}}function Cu(d){const p=d.name;if(jm.has(p))return xa.debug(`There were multiple attempts to register component ${p}.`),!1;jm.set(p,d);for(const v of Ap.values())Yy(v,d);for(const v of xS.values())Yy(v,d);return!0}function Xm(d,p){const v=d.container.getProvider("heartbeat").getImmediate({optional:!0});return v&&v.triggerHeartbeat(),d.container.getProvider(p)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Bo=new Np("app","Firebase",LS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(p,v,C){this._isDeleted=!1,this._options=Object.assign({},p),this._config=Object.assign({},v),this._name=v.name,this._automaticDataCollectionEnabled=v.automaticDataCollectionEnabled,this._container=C,this.container.addComponent(new Wo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(p){this.checkDestroyed(),this._automaticDataCollectionEnabled=p}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(p){this._isDeleted=p}checkDestroyed(){if(this.isDeleted)throw Bo.create("app-deleted",{appName:this._name})}}function ME(d,p={}){let v=d;typeof p!="object"&&(p={name:p});const C=Object.assign({name:Vm,automaticDataCollectionEnabled:!1},p),R=C.name;if(typeof R!="string"||!R)throw Bo.create("bad-app-name",{appName:String(R)});if(v||(v=DE()),!v)throw Bo.create("no-options");const S=Ap.get(R);if(S){if(Pm(v,S.options)&&Pm(C,S.config))return S;throw Bo.create("duplicate-app",{appName:R})}const O=new zI(R);for(const M of jm.values())O.addComponent(M);const L=new PS(v,C,O);return Ap.set(R,L),L}function MS(d=Vm){const p=Ap.get(d);if(!p&&d===Vm&&DE())return ME();if(!p)throw Bo.create("no-app",{appName:d});return p}function zo(d,p,v){var C;let R=(C=NS[d])!==null&&C!==void 0?C:d;v&&(R+=`-${v}`);const S=R.match(/\s|\//),O=p.match(/\s|\//);if(S||O){const L=[`Unable to register library "${R}" with version "${p}":`];S&&L.push(`library name "${R}" contains illegal characters (whitespace or "/")`),S&&O&&L.push("and"),O&&L.push(`version name "${p}" contains illegal characters (whitespace or "/")`),xa.warn(L.join(" "));return}Cu(new Wo(`${R}-version`,()=>({library:R,version:p}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS="firebase-heartbeat-database",US=1,ef="firebase-heartbeat-store";let Sm=null;function FE(){return Sm||(Sm=xp(FS,US,{upgrade:(d,p)=>{switch(p){case 0:try{d.createObjectStore(ef)}catch(v){console.warn(v)}}}}).catch(d=>{throw Bo.create("idb-open",{originalErrorMessage:d.message})})),Sm}async function VS(d){try{const v=(await FE()).transaction(ef),C=await v.objectStore(ef).get(UE(d));return await v.done,C}catch(p){if(p instanceof Xl)xa.warn(p.message);else{const v=Bo.create("idb-get",{originalErrorMessage:p==null?void 0:p.message});xa.warn(v.message)}}}async function Xy(d,p){try{const C=(await FE()).transaction(ef,"readwrite");await C.objectStore(ef).put(p,UE(d)),await C.done}catch(v){if(v instanceof Xl)xa.warn(v.message);else{const C=Bo.create("idb-set",{originalErrorMessage:v==null?void 0:v.message});xa.warn(C.message)}}}function UE(d){return`${d.name}!${d.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS=1024,BS=30;class zS{constructor(p){this.container=p,this._heartbeatsCache=null;const v=this.container.getProvider("app").getImmediate();this._storage=new WS(v),this._heartbeatsCachePromise=this._storage.read().then(C=>(this._heartbeatsCache=C,C))}async triggerHeartbeat(){var p,v;try{const R=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),S=Zy();if(((p=this._heartbeatsCache)===null||p===void 0?void 0:p.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((v=this._heartbeatsCache)===null||v===void 0?void 0:v.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===S||this._heartbeatsCache.heartbeats.some(O=>O.date===S))return;if(this._heartbeatsCache.heartbeats.push({date:S,agent:R}),this._heartbeatsCache.heartbeats.length>BS){const O=GS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(O,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(C){xa.warn(C)}}async getHeartbeatsHeader(){var p;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((p=this._heartbeatsCache)===null||p===void 0?void 0:p.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const v=Zy(),{heartbeatsToSend:C,unsentEntries:R}=HS(this._heartbeatsCache.heartbeats),S=bE(JSON.stringify({version:2,heartbeats:C}));return this._heartbeatsCache.lastSentHeartbeatDate=v,R.length>0?(this._heartbeatsCache.heartbeats=R,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),S}catch(v){return xa.warn(v),""}}}function Zy(){return new Date().toISOString().substring(0,10)}function HS(d,p=jS){const v=[];let C=d.slice();for(const R of d){const S=v.find(O=>O.agent===R.agent);if(S){if(S.dates.push(R.date),Jy(v)>p){S.dates.pop();break}}else if(v.push({agent:R.agent,dates:[R.date]}),Jy(v)>p){v.pop();break}C=C.slice(1)}return{heartbeatsToSend:v,unsentEntries:C}}class WS{constructor(p){this.app=p,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return NE()?xE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const v=await VS(this.app);return v!=null&&v.heartbeats?v:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(p){var v;if(await this._canUseIndexedDBPromise){const R=await this.read();return Xy(this.app,{lastSentHeartbeatDate:(v=p.lastSentHeartbeatDate)!==null&&v!==void 0?v:R.lastSentHeartbeatDate,heartbeats:p.heartbeats})}else return}async add(p){var v;if(await this._canUseIndexedDBPromise){const R=await this.read();return Xy(this.app,{lastSentHeartbeatDate:(v=p.lastSentHeartbeatDate)!==null&&v!==void 0?v:R.lastSentHeartbeatDate,heartbeats:[...R.heartbeats,...p.heartbeats]})}else return}}function Jy(d){return bE(JSON.stringify({version:2,heartbeats:d})).length}function GS(d){if(d.length===0)return-1;let p=0,v=d[0].date;for(let C=1;C<d.length;C++)d[C].date<v&&(v=d[C].date,p=C);return p}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(d){Cu(new Wo("platform-logger",p=>new iS(p),"PRIVATE")),Cu(new Wo("heartbeat",p=>new zS(p),"PRIVATE")),zo(Um,Qy,d),zo(Um,Qy,"esm2017"),zo("fire-js","")}$S("");var qS="firebase",KS="11.3.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zo(qS,KS,"app");const VE="@firebase/installations",Zm="0.6.12";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE=1e4,BE=`w:${Zm}`,zE="FIS_v2",QS="https://firebaseinstallations.googleapis.com/v1",YS=60*60*1e3,XS="installations",ZS="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ru=new Np(XS,ZS,JS);function HE(d){return d instanceof Xl&&d.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE({projectId:d}){return`${QS}/projects/${d}/installations`}function GE(d){return{token:d.token,requestStatus:2,expiresIn:tT(d.expiresIn),creationTime:Date.now()}}async function $E(d,p){const C=(await p.json()).error;return Ru.create("request-failed",{requestName:d,serverCode:C.code,serverMessage:C.message,serverStatus:C.status})}function qE({apiKey:d}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":d})}function eT(d,{refreshToken:p}){const v=qE(d);return v.append("Authorization",nT(p)),v}async function KE(d){const p=await d();return p.status>=500&&p.status<600?d():p}function tT(d){return Number(d.replace("s","000"))}function nT(d){return`${zE} ${d}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rT({appConfig:d,heartbeatServiceProvider:p},{fid:v}){const C=WE(d),R=qE(d),S=p.getImmediate({optional:!0});if(S){const z=await S.getHeartbeatsHeader();z&&R.append("x-firebase-client",z)}const O={fid:v,authVersion:zE,appId:d.appId,sdkVersion:BE},L={method:"POST",headers:R,body:JSON.stringify(O)},M=await KE(()=>fetch(C,L));if(M.ok){const z=await M.json();return{fid:z.fid||v,registrationStatus:2,refreshToken:z.refreshToken,authToken:GE(z.authToken)}}else throw await $E("Create Installation",M)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(d){return new Promise(p=>{setTimeout(p,d)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(d){return btoa(String.fromCharCode(...d)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT=/^[cdef][\w-]{21}$/,Bm="";function oT(){try{const d=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(d),d[0]=112+d[0]%16;const v=sT(d);return aT.test(v)?v:Bm}catch{return Bm}}function sT(d){return iT(d).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(d){return`${d.appName}!${d.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE=new Map;function XE(d,p){const v=Lp(d);ZE(v,p),uT(v,p)}function ZE(d,p){const v=YE.get(d);if(v)for(const C of v)C(p)}function uT(d,p){const v=lT();v&&v.postMessage({key:d,fid:p}),cT()}let wu=null;function lT(){return!wu&&"BroadcastChannel"in self&&(wu=new BroadcastChannel("[Firebase] FID Change"),wu.onmessage=d=>{ZE(d.data.key,d.data.fid)}),wu}function cT(){YE.size===0&&wu&&(wu.close(),wu=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT="firebase-installations-database",fT=1,Iu="firebase-installations-store";let Tm=null;function Jm(){return Tm||(Tm=xp(dT,fT,{upgrade:(d,p)=>{switch(p){case 0:d.createObjectStore(Iu)}}})),Tm}async function Op(d,p){const v=Lp(d),R=(await Jm()).transaction(Iu,"readwrite"),S=R.objectStore(Iu),O=await S.get(v);return await S.put(p,v),await R.done,(!O||O.fid!==p.fid)&&XE(d,p.fid),p}async function JE(d){const p=Lp(d),C=(await Jm()).transaction(Iu,"readwrite");await C.objectStore(Iu).delete(p),await C.done}async function Pp(d,p){const v=Lp(d),R=(await Jm()).transaction(Iu,"readwrite"),S=R.objectStore(Iu),O=await S.get(v),L=p(O);return L===void 0?await S.delete(v):await S.put(L,v),await R.done,L&&(!O||O.fid!==L.fid)&&XE(d,L.fid),L}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ev(d){let p;const v=await Pp(d.appConfig,C=>{const R=hT(C),S=pT(d,R);return p=S.registrationPromise,S.installationEntry});return v.fid===Bm?{installationEntry:await p}:{installationEntry:v,registrationPromise:p}}function hT(d){const p=d||{fid:oT(),registrationStatus:0};return ek(p)}function pT(d,p){if(p.registrationStatus===0){if(!navigator.onLine){const R=Promise.reject(Ru.create("app-offline"));return{installationEntry:p,registrationPromise:R}}const v={fid:p.fid,registrationStatus:1,registrationTime:Date.now()},C=_T(d,v);return{installationEntry:v,registrationPromise:C}}else return p.registrationStatus===1?{installationEntry:p,registrationPromise:mT(d)}:{installationEntry:p}}async function _T(d,p){try{const v=await rT(d,p);return Op(d.appConfig,v)}catch(v){throw HE(v)&&v.customData.serverCode===409?await JE(d.appConfig):await Op(d.appConfig,{fid:p.fid,registrationStatus:0}),v}}async function mT(d){let p=await eE(d.appConfig);for(;p.registrationStatus===1;)await QE(100),p=await eE(d.appConfig);if(p.registrationStatus===0){const{installationEntry:v,registrationPromise:C}=await ev(d);return C||v}return p}function eE(d){return Pp(d,p=>{if(!p)throw Ru.create("installation-not-found");return ek(p)})}function ek(d){return vT(d)?{fid:d.fid,registrationStatus:0}:d}function vT(d){return d.registrationStatus===1&&d.registrationTime+jE<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gT({appConfig:d,heartbeatServiceProvider:p},v){const C=yT(d,v),R=eT(d,v),S=p.getImmediate({optional:!0});if(S){const z=await S.getHeartbeatsHeader();z&&R.append("x-firebase-client",z)}const O={installation:{sdkVersion:BE,appId:d.appId}},L={method:"POST",headers:R,body:JSON.stringify(O)},M=await KE(()=>fetch(C,L));if(M.ok){const z=await M.json();return GE(z)}else throw await $E("Generate Auth Token",M)}function yT(d,{fid:p}){return`${WE(d)}/${p}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tv(d,p=!1){let v;const C=await Pp(d.appConfig,S=>{if(!tk(S))throw Ru.create("not-registered");const O=S.authToken;if(!p&&wT(O))return S;if(O.requestStatus===1)return v=ET(d,p),S;{if(!navigator.onLine)throw Ru.create("app-offline");const L=RT(S);return v=kT(d,L),L}});return v?await v:C.authToken}async function ET(d,p){let v=await tE(d.appConfig);for(;v.authToken.requestStatus===1;)await QE(100),v=await tE(d.appConfig);const C=v.authToken;return C.requestStatus===0?tv(d,p):C}function tE(d){return Pp(d,p=>{if(!tk(p))throw Ru.create("not-registered");const v=p.authToken;return IT(v)?Object.assign(Object.assign({},p),{authToken:{requestStatus:0}}):p})}async function kT(d,p){try{const v=await gT(d,p),C=Object.assign(Object.assign({},p),{authToken:v});return await Op(d.appConfig,C),v}catch(v){if(HE(v)&&(v.customData.serverCode===401||v.customData.serverCode===404))await JE(d.appConfig);else{const C=Object.assign(Object.assign({},p),{authToken:{requestStatus:0}});await Op(d.appConfig,C)}throw v}}function tk(d){return d!==void 0&&d.registrationStatus===2}function wT(d){return d.requestStatus===2&&!CT(d)}function CT(d){const p=Date.now();return p<d.creationTime||d.creationTime+d.expiresIn<p+YS}function RT(d){const p={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},d),{authToken:p})}function IT(d){return d.requestStatus===1&&d.requestTime+jE<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ST(d){const p=d,{installationEntry:v,registrationPromise:C}=await ev(p);return C?C.catch(console.error):tv(p).catch(console.error),v.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TT(d,p=!1){const v=d;return await AT(v),(await tv(v,p)).token}async function AT(d){const{registrationPromise:p}=await ev(d);p&&await p}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(d){if(!d||!d.options)throw Am("App Configuration");if(!d.name)throw Am("App Name");const p=["projectId","apiKey","appId"];for(const v of p)if(!d.options[v])throw Am(v);return{appName:d.name,projectId:d.options.projectId,apiKey:d.options.apiKey,appId:d.options.appId}}function Am(d){return Ru.create("missing-app-config-values",{valueName:d})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk="installations",bT="installations-internal",DT=d=>{const p=d.getProvider("app").getImmediate(),v=OT(p),C=Xm(p,"heartbeat");return{app:p,appConfig:v,heartbeatServiceProvider:C,_delete:()=>Promise.resolve()}},NT=d=>{const p=d.getProvider("app").getImmediate(),v=Xm(p,nk).getImmediate();return{getId:()=>ST(v),getToken:R=>TT(v,R)}};function xT(){Cu(new Wo(nk,DT,"PUBLIC")),Cu(new Wo(bT,NT,"PRIVATE"))}xT();zo(VE,Zm);zo(VE,Zm,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT="/firebase-messaging-sw.js",PT="/firebase-cloud-messaging-push-scope",rk="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",MT="https://fcmregistrations.googleapis.com/v1",ik="google.c.a.c_id",FT="google.c.a.c_l",UT="google.c.a.ts",VT="google.c.a.e",nE=1e4;var rE;(function(d){d[d.DATA_MESSAGE=1]="DATA_MESSAGE",d[d.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(rE||(rE={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var tf;(function(d){d.PUSH_RECEIVED="push-received",d.NOTIFICATION_CLICKED="notification-clicked"})(tf||(tf={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ba(d){const p=new Uint8Array(d);return btoa(String.fromCharCode(...p)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function jT(d){const p="=".repeat((4-d.length%4)%4),v=(d+p).replace(/\-/g,"+").replace(/_/g,"/"),C=atob(v),R=new Uint8Array(C.length);for(let S=0;S<C.length;++S)R[S]=C.charCodeAt(S);return R}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="fcm_token_details_db",BT=5,iE="fcm_token_object_Store";async function zT(d){if("databases"in indexedDB&&!(await indexedDB.databases()).map(S=>S.name).includes(Om))return null;let p=null;return(await xp(Om,BT,{upgrade:async(C,R,S,O)=>{var L;if(R<2||!C.objectStoreNames.contains(iE))return;const M=O.objectStore(iE),z=await M.index("fcmSenderId").get(d);if(await M.clear(),!!z){if(R===2){const Q=z;if(!Q.auth||!Q.p256dh||!Q.endpoint)return;p={token:Q.fcmToken,createTime:(L=Q.createTime)!==null&&L!==void 0?L:Date.now(),subscriptionOptions:{auth:Q.auth,p256dh:Q.p256dh,endpoint:Q.endpoint,swScope:Q.swScope,vapidKey:typeof Q.vapidKey=="string"?Q.vapidKey:ba(Q.vapidKey)}}}else if(R===3){const Q=z;p={token:Q.fcmToken,createTime:Q.createTime,subscriptionOptions:{auth:ba(Q.auth),p256dh:ba(Q.p256dh),endpoint:Q.endpoint,swScope:Q.swScope,vapidKey:ba(Q.vapidKey)}}}else if(R===4){const Q=z;p={token:Q.fcmToken,createTime:Q.createTime,subscriptionOptions:{auth:ba(Q.auth),p256dh:ba(Q.p256dh),endpoint:Q.endpoint,swScope:Q.swScope,vapidKey:ba(Q.vapidKey)}}}}}})).close(),await Rm(Om),await Rm("fcm_vapid_details_db"),await Rm("undefined"),HT(p)?p:null}function HT(d){if(!d||!d.subscriptionOptions)return!1;const{subscriptionOptions:p}=d;return typeof d.createTime=="number"&&d.createTime>0&&typeof d.token=="string"&&d.token.length>0&&typeof p.auth=="string"&&p.auth.length>0&&typeof p.p256dh=="string"&&p.p256dh.length>0&&typeof p.endpoint=="string"&&p.endpoint.length>0&&typeof p.swScope=="string"&&p.swScope.length>0&&typeof p.vapidKey=="string"&&p.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT="firebase-messaging-database",GT=1,nf="firebase-messaging-store";let bm=null;function ak(){return bm||(bm=xp(WT,GT,{upgrade:(d,p)=>{switch(p){case 0:d.createObjectStore(nf)}}})),bm}async function $T(d){const p=ok(d),C=await(await ak()).transaction(nf).objectStore(nf).get(p);if(C)return C;{const R=await zT(d.appConfig.senderId);if(R)return await nv(d,R),R}}async function nv(d,p){const v=ok(d),R=(await ak()).transaction(nf,"readwrite");return await R.objectStore(nf).put(p,v),await R.done,p}function ok({appConfig:d}){return d.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},zn=new Np("messaging","Messaging",qT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KT(d,p){const v=await iv(d),C=sk(p),R={method:"POST",headers:v,body:JSON.stringify(C)};let S;try{S=await(await fetch(rv(d.appConfig),R)).json()}catch(O){throw zn.create("token-subscribe-failed",{errorInfo:O==null?void 0:O.toString()})}if(S.error){const O=S.error.message;throw zn.create("token-subscribe-failed",{errorInfo:O})}if(!S.token)throw zn.create("token-subscribe-no-token");return S.token}async function QT(d,p){const v=await iv(d),C=sk(p.subscriptionOptions),R={method:"PATCH",headers:v,body:JSON.stringify(C)};let S;try{S=await(await fetch(`${rv(d.appConfig)}/${p.token}`,R)).json()}catch(O){throw zn.create("token-update-failed",{errorInfo:O==null?void 0:O.toString()})}if(S.error){const O=S.error.message;throw zn.create("token-update-failed",{errorInfo:O})}if(!S.token)throw zn.create("token-update-no-token");return S.token}async function YT(d,p){const C={method:"DELETE",headers:await iv(d)};try{const S=await(await fetch(`${rv(d.appConfig)}/${p}`,C)).json();if(S.error){const O=S.error.message;throw zn.create("token-unsubscribe-failed",{errorInfo:O})}}catch(R){throw zn.create("token-unsubscribe-failed",{errorInfo:R==null?void 0:R.toString()})}}function rv({projectId:d}){return`${MT}/projects/${d}/registrations`}async function iv({appConfig:d,installations:p}){const v=await p.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":d.apiKey,"x-goog-firebase-installations-auth":`FIS ${v}`})}function sk({p256dh:d,auth:p,endpoint:v,vapidKey:C}){const R={web:{endpoint:v,auth:p,p256dh:d}};return C!==rk&&(R.web.applicationPubKey=C),R}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT=7*24*60*60*1e3;async function ZT(d){const p=await e1(d.swRegistration,d.vapidKey),v={vapidKey:d.vapidKey,swScope:d.swRegistration.scope,endpoint:p.endpoint,auth:ba(p.getKey("auth")),p256dh:ba(p.getKey("p256dh"))},C=await $T(d.firebaseDependencies);if(C){if(t1(C.subscriptionOptions,v))return Date.now()>=C.createTime+XT?JT(d,{token:C.token,createTime:Date.now(),subscriptionOptions:v}):C.token;try{await YT(d.firebaseDependencies,C.token)}catch(R){console.warn(R)}return aE(d.firebaseDependencies,v)}else return aE(d.firebaseDependencies,v)}async function JT(d,p){try{const v=await QT(d.firebaseDependencies,p),C=Object.assign(Object.assign({},p),{token:v,createTime:Date.now()});return await nv(d.firebaseDependencies,C),v}catch(v){throw v}}async function aE(d,p){const C={token:await KT(d,p),createTime:Date.now(),subscriptionOptions:p};return await nv(d,C),C.token}async function e1(d,p){const v=await d.pushManager.getSubscription();return v||d.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:jT(p)})}function t1(d,p){const v=p.vapidKey===d.vapidKey,C=p.endpoint===d.endpoint,R=p.auth===d.auth,S=p.p256dh===d.p256dh;return v&&C&&R&&S}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(d){const p={from:d.from,collapseKey:d.collapse_key,messageId:d.fcmMessageId};return n1(p,d),r1(p,d),i1(p,d),p}function n1(d,p){if(!p.notification)return;d.notification={};const v=p.notification.title;v&&(d.notification.title=v);const C=p.notification.body;C&&(d.notification.body=C);const R=p.notification.image;R&&(d.notification.image=R);const S=p.notification.icon;S&&(d.notification.icon=S)}function r1(d,p){p.data&&(d.data=p.data)}function i1(d,p){var v,C,R,S,O;if(!p.fcmOptions&&!(!((v=p.notification)===null||v===void 0)&&v.click_action))return;d.fcmOptions={};const L=(R=(C=p.fcmOptions)===null||C===void 0?void 0:C.link)!==null&&R!==void 0?R:(S=p.notification)===null||S===void 0?void 0:S.click_action;L&&(d.fcmOptions.link=L);const M=(O=p.fcmOptions)===null||O===void 0?void 0:O.analytics_label;M&&(d.fcmOptions.analyticsLabel=M)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1(d){return typeof d=="object"&&!!d&&ik in d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(d){if(!d||!d.options)throw Dm("App Configuration Object");if(!d.name)throw Dm("App Name");const p=["projectId","apiKey","appId","messagingSenderId"],{options:v}=d;for(const C of p)if(!v[C])throw Dm(C);return{appName:d.name,projectId:v.projectId,apiKey:v.apiKey,appId:v.appId,senderId:v.messagingSenderId}}function Dm(d){return zn.create("missing-app-config-values",{valueName:d})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(p,v,C){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const R=o1(p);this.firebaseDependencies={app:p,appConfig:R,installations:v,analyticsProvider:C}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u1(d){try{d.swRegistration=await navigator.serviceWorker.register(LT,{scope:PT}),d.swRegistration.update().catch(()=>{}),await l1(d.swRegistration)}catch(p){throw zn.create("failed-service-worker-registration",{browserErrorMessage:p==null?void 0:p.message})}}async function l1(d){return new Promise((p,v)=>{const C=setTimeout(()=>v(new Error(`Service worker not registered after ${nE} ms`)),nE),R=d.installing||d.waiting;d.active?(clearTimeout(C),p()):R?R.onstatechange=S=>{var O;((O=S.target)===null||O===void 0?void 0:O.state)==="activated"&&(R.onstatechange=null,clearTimeout(C),p())}:(clearTimeout(C),v(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c1(d,p){if(!p&&!d.swRegistration&&await u1(d),!(!p&&d.swRegistration)){if(!(p instanceof ServiceWorkerRegistration))throw zn.create("invalid-sw-registration");d.swRegistration=p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d1(d,p){p?d.vapidKey=p:d.vapidKey||(d.vapidKey=rk)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uk(d,p){if(!navigator)throw zn.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw zn.create("permission-blocked");return await d1(d,p==null?void 0:p.vapidKey),await c1(d,p==null?void 0:p.serviceWorkerRegistration),ZT(d)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f1(d,p,v){const C=h1(p);(await d.firebaseDependencies.analyticsProvider.get()).logEvent(C,{message_id:v[ik],message_name:v[FT],message_time:v[UT],message_device_time:Math.floor(Date.now()/1e3)})}function h1(d){switch(d){case tf.NOTIFICATION_CLICKED:return"notification_open";case tf.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p1(d,p){const v=p.data;if(!v.isFirebaseMessaging)return;d.onMessageHandler&&v.messageType===tf.PUSH_RECEIVED&&(typeof d.onMessageHandler=="function"?d.onMessageHandler(oE(v)):d.onMessageHandler.next(oE(v)));const C=v.data;a1(C)&&C[VT]==="1"&&await f1(d,v.messageType,C)}const sE="@firebase/messaging",uE="0.12.16";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1=d=>{const p=new s1(d.getProvider("app").getImmediate(),d.getProvider("installations-internal").getImmediate(),d.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",v=>p1(p,v)),p},m1=d=>{const p=d.getProvider("messaging").getImmediate();return{getToken:C=>uk(p,C)}};function v1(){Cu(new Wo("messaging",_1,"PUBLIC")),Cu(new Wo("messaging-internal",m1,"PRIVATE")),zo(sE,uE),zo(sE,uE,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g1(){try{await xE()}catch{return!1}return typeof window<"u"&&NE()&&PI()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(d,p){if(!navigator)throw zn.create("only-available-in-window");return d.onMessageHandler=p,()=>{d.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(d=MS()){return g1().then(p=>{if(!p)throw zn.create("unsupported-browser")},p=>{throw zn.create("indexed-db-unsupported")}),Xm(Qm(d),"messaging").getImmediate()}async function k1(d,p){return d=Qm(d),uk(d,p)}function w1(d,p){return d=Qm(d),y1(d,p)}v1();const C1={apiKey:"AIzaSyCvrgWg2XVVSBl8F7l7t9FycQJkq2jC9rU",authDomain:"come-f28c2.firebaseapp.com",projectId:"come-f28c2",storageBucket:"come-f28c2.appspot.com",messagingSenderId:"13504861373",appId:"1:13504861373:web:eff92168509ed3d38e13d4"},R1=ME(C1),lk=E1(R1),I1="BG_gRby09vE3Ra8iOuwxR3NCHscoM1YWlS02umXeMSZxo1UyxopnVhZlh0slHixC3nrCvDQjXxl52Kl5YwnNAT8",S1=async()=>{try{const d=await k1(lk,{vapidKey:I1});if(d)return console.log("FCM Token:",d),d;console.warn("未獲取到通知 Token")}catch(d){console.error("獲取 Token 失敗",d)}},T1=()=>new Promise(d=>{w1(lk,p=>{console.log("收到前台通知: ",p),d(p)})}),lE=q.lazy(()=>Yt(()=>import("./HomeView-CXK_pqla.js"),__vite__mapDeps([0,1,2,3,4]))),A1=q.lazy(()=>Yt(()=>import("./PrivacyView-BK01Kq9m.js"),__vite__mapDeps([5,2]))),O1=q.lazy(()=>Yt(()=>import("./ServiceView-RZ3JD2DG.js"),__vite__mapDeps([6,2]))),b1=q.lazy(()=>Yt(()=>import("./RegisterManView-DVMXp3XU.js"),__vite__mapDeps([7,1,8,2]))),D1=q.lazy(()=>Yt(()=>import("./RegisterWomanView-CwoqHA4F.js"),__vite__mapDeps([9,1,8,2]))),N1=q.lazy(()=>Yt(()=>import("./LoginView-mppITIXL.js"),__vite__mapDeps([10,1,8,2]))),x1=q.lazy(()=>Yt(()=>import("./HomeManView-KrAiXCvk.js"),__vite__mapDeps([11,1,2,3,4])));q.lazy(()=>Yt(()=>import("./HomeWomanView-DNhZPhM4.js"),__vite__mapDeps([12,1,2,3,4])));const L1=q.lazy(()=>Yt(()=>import("./WomanInfoView-_0khSe_h.js"),__vite__mapDeps([13,1,8,14]))),P1=q.lazy(()=>Yt(()=>import("./ManInfoView-jOhKiMVL.js"),__vite__mapDeps([15,1,8,2]))),M1=q.lazy(()=>Yt(()=>import("./DepositRecordView-BgQ-4HXj.js"),__vite__mapDeps([16,1,8,2]))),F1=q.lazy(()=>Yt(()=>import("./TransactionChatRecordView-DnP0CWKL.js"),__vite__mapDeps([17,1,8,2]))),U1=q.lazy(()=>Yt(()=>import("./TransactionRecordView-CXMsrnlF.js"),__vite__mapDeps([18,1,8,2]))),V1=q.lazy(()=>Yt(()=>import("./ManDepositView-CUMaDMqe.js"),__vite__mapDeps([19,1,8]))),cE=q.lazy(()=>Yt(()=>import("./WomanSettingView-D2D6n2xQ.js"),__vite__mapDeps([20,1,8,2]))),j1=q.lazy(()=>Yt(()=>import("./WomanEditView-BBU5_xA3.js"),__vite__mapDeps([21,1,8,2]))),B1=q.lazy(()=>Yt(()=>import("./CurrentPointsView-CsePdae-.js"),__vite__mapDeps([22,1,8,2]))),z1=q.lazy(()=>Yt(()=>import("./IncomeDetailsView-4rBwl_eI.js"),__vite__mapDeps([23,1]))),H1=q.lazy(()=>Yt(()=>import("./RedemptionRecordsView-DLcZPrgw.js"),__vite__mapDeps([24,1]))),W1=q.lazy(()=>Yt(()=>import("./IdentityVerificationView-DEfTyaU5.js"),__vite__mapDeps([25,1]))),G1=q.lazy(()=>Yt(()=>import("./AccountVerificationView-DIHs_P_M.js"),__vite__mapDeps([26,1]))),Nm=q.lazy(()=>Yt(()=>import("./ChatList-K54z4bp3.js").then(d=>d.C),__vite__mapDeps([27,1,28])));function $1(){const[d,p]=q.useState(null);return q.useEffect(()=>{S1().then(v=>{console.log("FCM Token:",v)}),T1().then(v=>{console.log("前台收到推播:",v),p(v.notification)}).catch(v=>console.log("推播監聽失敗:",v))},[]),ce.jsx(dI,{children:ce.jsx(q1,{})})}function q1(){var dn,xt,At;Wm(),Go();const[d,p]=q.useState(null),[v,C]=q.useState(null),[R,S]=q.useState(!0),[O,L]=q.useState(!0),[M,z]=q.useState(!1),Q=q.useRef(null),X=q.useRef(null),ne="AED40948-FDBF-4552-9062-8B2F35D974A3",ue=sessionStorage.getItem("sendbird_user_id")||"testUser",de=sessionStorage.getItem("sendbird_access_token")||"";q.useEffect(()=>{const ht=document.createElement("link");ht.rel="manifest",ht.href="/manifest.json",document.head.appendChild(ht)},[]),q.useEffect(()=>{Cp.init(ne),Cp.authenticate({userId:ue,accessToken:de}).then(()=>Cp.connectWebSocket()).then(()=>{console.log("SendBird Calls 已初始化並連接 WebSocket"),ye()}).catch(ht=>console.error("SendBird Calls 初始化失敗:",ht))},[ne,ue,de]);const ye=()=>{Cp.addListener("INCOMING_CALL_LISTENER",{onRinging:ht=>{console.log("收到來電:",ht),p(ht)}})},[oe,_e]=q.useState(!1),we=()=>{d&&(d.accept({callOption:{localMediaView:Q.current,remoteMediaView:X.current,audioEnabled:!0,videoEnabled:d.isVideoCall}}),C(d),_e(d),p(null))},Te=()=>{d&&(d.end(),p(null))},$e=()=>{v&&(v.end(),C(null))},Me=()=>{v&&(R?v.muteMicrophone():v.unmuteMicrophone(),S(!R))},Et=()=>{v&&(O?v.stopVideo():v.startVideo(),L(!O))},St=async()=>{const ht=!M;if(z(ht),v)try{const _t=await navigator.mediaDevices.getUserMedia({audio:!0,video:{facingMode:ht?"environment":"user"}});Q.current.srcObject=_t}catch(_t){console.error("切換鏡頭失敗:",_t)}},pt=q.useRef(null),Tt=()=>{pt.current&&(cn?document.exitFullscreen():pt.current.requestFullscreen(),lt(!cn))},Ut=v&&v.isVideoCall;q.useState(null),q.useState(0);const[cn,lt]=q.useState(!1);return ce.jsxs(q.Suspense,{fallback:ce.jsx("div",{children:"Loading..."}),children:[ce.jsxs(BR,{children:[ce.jsx(Ft,{path:"/",element:ce.jsx(lE,{})}),ce.jsx(Ft,{path:"/home",element:ce.jsx(lE,{})}),ce.jsx(Ft,{path:"/privacy",element:ce.jsx(A1,{})}),ce.jsx(Ft,{path:"/service",element:ce.jsx(O1,{})}),ce.jsx(Ft,{path:"/register-man",element:ce.jsx(b1,{})}),ce.jsx(Ft,{path:"/register-woman",element:ce.jsx(D1,{})}),ce.jsx(Ft,{path:"/login",element:ce.jsx(N1,{})}),ce.jsx(Ft,{path:"/home-man",element:ce.jsx(x1,{})}),ce.jsx(Ft,{path:"/home-woman",element:ce.jsx(cE,{})}),ce.jsx(Ft,{path:"/woman-info/:id",element:ce.jsx(L1,{})}),ce.jsx(Ft,{path:"/man-info",element:ce.jsx(P1,{})}),ce.jsx(Ft,{path:"/deposit-record",element:ce.jsx(M1,{})}),ce.jsx(Ft,{path:"/transactions-chat-record",element:ce.jsx(F1,{})}),ce.jsx(Ft,{path:"/transactions-record/:type",element:ce.jsx(U1,{})}),ce.jsx(Ft,{path:"/purchase/deposit",element:ce.jsx(V1,{})}),ce.jsx(Ft,{path:"/woman-setting",element:ce.jsx(cE,{})}),ce.jsx(Ft,{path:"/woman-edit",element:ce.jsx(j1,{})}),ce.jsx(Ft,{path:"/current-points",element:ce.jsx(B1,{})}),ce.jsx(Ft,{path:"/income-details",element:ce.jsx(z1,{})}),ce.jsx(Ft,{path:"/identity-verification",element:ce.jsx(W1,{})}),ce.jsx(Ft,{path:"/redemption-records",element:ce.jsx(H1,{})}),ce.jsx(Ft,{path:"/account-verification",element:ce.jsx(G1,{})}),ce.jsx(Ft,{path:"/chat-list",element:ce.jsx(Nm,{})}),ce.jsx(Ft,{path:"/man-chat-list",element:ce.jsx(Nm,{})}),ce.jsx(Ft,{path:"/man-chat-list/:channelUrl",element:ce.jsx(Nm,{})})]}),ce.jsx(RI,{}),d&&ce.jsxs("div",{style:Xr.incomingCallContainer,children:[ce.jsx("img",{src:((dn=d.caller)==null?void 0:dn.profileUrl)||"https://via.placeholder.com/80",alt:"avatar",style:{borderRadius:"50%",height:"100%"}}),ce.jsxs("h3",{children:["來電來自: ",d.caller.nickname||d.caller.userId]}),ce.jsx("button",{onClick:we,style:Xr.acceptButton,children:"✅ 接聽"}),ce.jsx("button",{onClick:Te,style:Xr.declineButton,children:"❌ 拒絕"})]}),ce.jsxs("div",{ref:pt,style:{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",backgroundColor:"#000",display:v?"block":"none",flexDirection:"column",justifyContent:"center",alignItems:"center",zIndex:1e4},children:[ce.jsxs("div",{style:{display:Ut?"block":"none"},children:[ce.jsx("video",{ref:X,autoPlay:!0,playsInline:!0,style:Xr.remoteVideo}),ce.jsx("video",{ref:Q,autoPlay:!0,muted:!0,playsInline:!0,style:Xr.localVideo})]}),ce.jsx("div",{style:{display:Ut?"none":"flex",width:"100vw",height:"70vh",justifyContent:"center",alignItems:"center"},children:ce.jsxs("div",{children:[ce.jsx("img",{src:((xt=oe.caller)==null?void 0:xt.profileUrl)||"https://via.placeholder.com/150",alt:"avatar",style:Xr.voiceAvatar}),ce.jsx("div",{style:{width:"100%",textAlign:"center"},children:ce.jsx("h2",{style:{color:"#fff",margin:"10px 0 5px"},children:(At=oe.caller)==null?void 0:At.nickname})})]})}),ce.jsxs("div",{style:Xr.bottomControlBar,children:[ce.jsx("button",{onClick:Me,style:Xr.controlIconButton,children:R?"🔇":"🎤"}),Ut&&ce.jsxs(ce.Fragment,{children:[ce.jsx("button",{onClick:Et,style:Xr.controlIconButton,children:O?"📷":"📴"}),ce.jsx("button",{onClick:St,style:Xr.controlIconButton,children:"🔄"}),ce.jsx("button",{onClick:Tt,style:Xr.controlIconButton,children:cn?"↙︎":"⛶"})]}),ce.jsx("button",{onClick:$e,style:Xr.endCallButton,children:"❌"})]})]})]})}const Xr={callButton:{margin:"5px",padding:"10px 20px",backgroundColor:"#dd8ea4",color:"#fff",border:"none",borderRadius:"5px",cursor:"pointer"},modalConfirmButton:{backgroundColor:"#dd8ea4",color:"#fff",padding:"8px 16px",borderRadius:"4px",border:"none",margin:"0.5rem 0",width:"100%",cursor:"pointer"},modalGoChargeButton:{backgroundColor:"#fff",color:"#dd8ea4",padding:"8px 16px",borderRadius:"4px",border:"2px solid #dd8ea4",width:"100%",cursor:"pointer"},callingOverlay:{position:"fixed",zIndex:9999,top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.8)",display:"flex",justifyContent:"center",alignItems:"center"},callingContainer:{display:"flex",flexDirection:"column",alignItems:"center"},declineCallButton:{backgroundColor:"#F44336",color:"#fff",padding:"10px 20px",margin:"5px",border:"none",borderRadius:"5px",cursor:"pointer"},incomingCallContainer:{position:"fixed",zIndex:9999,top:"40%",left:"5vw",right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",justifyContent:"center",alignItems:"center",height:"120px",width:"90vw",color:"#FFF"},incomingInner:{backgroundColor:"#fff",borderRadius:"10px",padding:"20px 30px",textAlign:"center"},acceptButton:{backgroundColor:"#4CAF50",color:"#fff",padding:"10px 20px",margin:"5px",border:"none",borderRadius:"5px",cursor:"pointer"},declineButton:{backgroundColor:"#F44336",color:"#fff",padding:"10px 20px",margin:"5px",border:"none",borderRadius:"5px",cursor:"pointer"},voiceCallOverlay:{position:"fixed",zIndex:1e4,top:0,left:0,right:0,bottom:0,backgroundColor:"#000",display:"flex",justifyContent:"center",alignItems:"center"},voiceCallContainer:{display:"flex",flexDirection:"column",alignItems:"center",position:"relative"},coinInfo:{position:"absolute",top:"30px",right:"30px",color:"#fff",fontSize:"16px"},voiceAvatar:{borderRadius:"50%",width:"150px",height:"150px",objectFit:"cover",marginBottom:"20px"},voiceCallButtons:{display:"flex",marginTop:"20px"},voiceIconBtn:{backgroundColor:"#333",color:"#fff",border:"none",fontSize:"24px",marginRight:"20px",padding:"15px",borderRadius:"50%",cursor:"pointer"},voiceEndCallBtn:{backgroundColor:"#dd4b39",color:"#fff",border:"none",fontSize:"24px",padding:"15px",borderRadius:"50%",cursor:"pointer"},videoContainer:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"#000",flexDirection:"column",justifyContent:"flex-end",alignItems:"center",zIndex:1e4},remoteVideo:{position:"absolute",top:0,height:"100%",objectFit:"cover",backgroundColor:"#000",left:"50%",transform:"translateX(-50%)"},localVideo:{position:"absolute",width:"120px",height:"160px",bottom:"120px",right:"20px",backgroundColor:"#333",borderRadius:"8px",objectFit:"cover",border:"2px solid #fff"},topRightInfo:{position:"absolute",top:"20px",right:"20px",textAlign:"right",color:"#fff"},bottomControlBar:{position:"absolute",bottom:"40px",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},controlIconButton:{backgroundColor:"rgba(0,0,0,0.6)",color:"#fff",border:"none",fontSize:"24px",margin:"0 10px",padding:"10px",borderRadius:"50%",cursor:"pointer",width:"50px",height:"50px"},endCallButton:{backgroundColor:"#dd4b39",color:"#fff",border:"none",fontSize:"18px",cursor:"pointer",borderRadius:"50%",marginLeft:"10px",width:"60px",height:"60px"}};X0({immediate:!0,onNeedRefresh(){console.log("新的 PWA 版本可用")},onOfflineReady(){console.log("PWA 已經可以離線使用")}});K0.createRoot(document.getElementById("root")).render(ce.jsx($1,{}));const X1=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));export{SE as L,Q1 as R,Cp as S,Yt as _,S1 as a,Y1 as b,Sy as c,zm as d,K1 as e,$0 as f,dE as g,X1 as h,ce as j,q as r,Wm as u};
