import{u as m,r,j as e}from"./index-C60VvIli.js";import{a as y}from"./axios-upsvKRUO.js";const R=()=>{const c=m(),[b,l]=r.useState(window.innerWidth),[i,h]=r.useState(""),[p,g]=r.useState([]),[j,x]=r.useState(1);r.useEffect(()=>{const t=sessionStorage.getItem("token")||"";return sessionStorage.getItem("u_id"),h(t),t&&a(t),window.addEventListener("resize",d),()=>{window.removeEventListener("resize",d)}},[]);const d=()=>{l(window.innerWidth)},u=t=>{const o=new Date(t);let s=""+(o.getMonth()+1),n=""+o.getDate();const f=o.getFullYear();return s.length<2&&(s="0"+s),n.length<2&&(n="0"+n),[f,s,n].join("/")},a=async(t=i)=>{try{const o=await y.get("https://api.dageiwo.com/api/user/withdrawal",{headers:{Authorization:`Bearer ${t}`}});if(o.status===200&&o.data.success){console.log(o.data.data),console.log(o.data.data.records);const s=o.data.data.records;s.length>0&&(x(n=>n+1),g(n=>[...n,...s]))}}catch(o){console.error("Failed to fetch records:",o)}},w=()=>{c(-1)};return e.jsxs("div",{style:{maxWidth:"800px",minHeight:"100%",margin:"0 auto",padding:"20px",color:"rgba(0,0,0,0.7)",fontFamily:"Arial, sans-serif"},children:[e.jsxs("header",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"#dd8ea4",padding:"10px 15px",borderRadius:"10px",color:"white"},children:[e.jsx("button",{onClick:w,style:{background:"none",border:"none",fontSize:"16px",color:"white",cursor:"pointer"},children:"←"}),e.jsx("h2",{style:{margin:"0",fontSize:"20px"},children:"兌換紀錄"}),e.jsx("div",{style:{width:"40px"}})]}),e.jsxs("div",{className:"transaction-record",style:{background:"white",borderRadius:"10px",padding:"15px",marginTop:"20px"},children:[p.map(t=>e.jsxs("div",{style:{padding:"10px 0"},children:[e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",fontSize:"16px"},children:[e.jsx("div",{style:{width:"25%",display:"flex",alignItems:"center"},children:u(t.create_time)}),e.jsxs("div",{style:{width:"25%",color:"#dd8ea4",fontWeight:"bold"},children:["+",t.money," 元"]}),e.jsxs("div",{style:{width:"25%",color:"#dd8ea4",fontWeight:"bold",textAlign:"right",paddingRight:"10px"},children:["-",t.point," 點"]}),e.jsx("div",{style:{width:"25%",color:"#dd8ea4",fontWeight:"bold",textAlign:"right"},children:t.status})]}),e.jsx("hr",{style:{border:"none",height:"1px",background:"#ddd",margin:"10px 0"}})]},t.id)),e.jsx("button",{onClick:()=>a(i),style:{display:"block",width:"100%",background:"#dd8ea4",color:"white",border:"none",padding:"10px",fontSize:"16px",borderRadius:"5px",cursor:"pointer",marginTop:"10px"},children:"查看更多"})]})]})};export{R as default};
